/*! For license information please see main.js.LICENSE.txt */
(()=>{var e={73:function(e,t,i){var s;s=function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=20)}([function(e,t){var s={};e.exports=s,function(){s._baseDelta=1e3/60,s._nextId=0,s._seed=0,s._nowStartTime=+new Date,s._warnedOnce={},s._decomp=null,s.extend=function(e,t){var i,n;"boolean"==typeof t?(i=2,n=t):(i=1,n=!0);for(var r=i;r<arguments.length;r++){var a=arguments[r];if(a)for(var o in a)n&&a[o]&&a[o].constructor===Object?e[o]&&e[o].constructor!==Object?e[o]=a[o]:(e[o]=e[o]||{},s.extend(e[o],n,a[o])):e[o]=a[o]}return e},s.clone=function(e,t){return s.extend({},t,e)},s.keys=function(e){if(Object.keys)return Object.keys(e);var t=[];for(var i in e)t.push(i);return t},s.values=function(e){var t=[];if(Object.keys){for(var i=Object.keys(e),s=0;s<i.length;s++)t.push(e[i[s]]);return t}for(var n in e)t.push(e[n]);return t},s.get=function(e,t,i,s){t=t.split(".").slice(i,s);for(var n=0;n<t.length;n+=1)e=e[t[n]];return e},s.set=function(e,t,i,n,r){var a=t.split(".").slice(n,r);return s.get(e,t,0,-1)[a[a.length-1]]=i,i},s.shuffle=function(e){for(var t=e.length-1;t>0;t--){var i=Math.floor(s.random()*(t+1)),n=e[t];e[t]=e[i],e[i]=n}return e},s.choose=function(e){return e[Math.floor(s.random()*e.length)]},s.isElement=function(e){return"undefined"!=typeof HTMLElement?e instanceof HTMLElement:!!(e&&e.nodeType&&e.nodeName)},s.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},s.isFunction=function(e){return"function"==typeof e},s.isPlainObject=function(e){return"object"==typeof e&&e.constructor===Object},s.isString=function(e){return"[object String]"===toString.call(e)},s.clamp=function(e,t,i){return e<t?t:e>i?i:e},s.sign=function(e){return e<0?-1:1},s.now=function(){if("undefined"!=typeof window&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return Date.now?Date.now():new Date-s._nowStartTime},s.random=function(t,i){return i=void 0!==i?i:1,(t=void 0!==t?t:0)+e()*(i-t)};var e=function(){return s._seed=(9301*s._seed+49297)%233280,s._seed/233280};s.colorToNumber=function(e){return 3==(e=e.replace("#","")).length&&(e=e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)),parseInt(e,16)},s.logLevel=1,s.log=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.info=function(){console&&s.logLevel>0&&s.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warn=function(){console&&s.logLevel>0&&s.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},s.warnOnce=function(){var e=Array.prototype.slice.call(arguments).join(" ");s._warnedOnce[e]||(s.warn(e),s._warnedOnce[e]=!0)},s.deprecated=function(e,t,i){e[t]=s.chain(function(){s.warnOnce("ðŸ”… deprecated ðŸ”…",i)},e[t])},s.nextId=function(){return s._nextId++},s.indexOf=function(e,t){if(e.indexOf)return e.indexOf(t);for(var i=0;i<e.length;i++)if(e[i]===t)return i;return-1},s.map=function(e,t){if(e.map)return e.map(t);for(var i=[],s=0;s<e.length;s+=1)i.push(t(e[s]));return i},s.topologicalSort=function(e){var t=[],i=[],n=[];for(var r in e)i[r]||n[r]||s._topologicalSort(r,i,n,e,t);return t},s._topologicalSort=function(e,t,i,n,r){var a=n[e]||[];i[e]=!0;for(var o=0;o<a.length;o+=1){var l=a[o];i[l]||t[l]||s._topologicalSort(l,t,i,n,r)}i[e]=!1,t[e]=!0,r.push(e)},s.chain=function(){for(var e=[],t=0;t<arguments.length;t+=1){var i=arguments[t];i._chained?e.push.apply(e,i._chained):e.push(i)}var s=function(){for(var t,i=new Array(arguments.length),s=0,n=arguments.length;s<n;s++)i[s]=arguments[s];for(s=0;s<e.length;s+=1){var r=e[s].apply(t,i);void 0!==r&&(t=r)}return t};return s._chained=e,s},s.chainPathBefore=function(e,t,i){return s.set(e,t,s.chain(i,s.get(e,t)))},s.chainPathAfter=function(e,t,i){return s.set(e,t,s.chain(s.get(e,t),i))},s.setDecomp=function(e){s._decomp=e},s.getDecomp=function(){var e=s._decomp;try{e||"undefined"==typeof window||(e=window.decomp),e||void 0===i.g||(e=i.g.decomp)}catch(t){e=null}return e}}()},function(e,t){var i={};e.exports=i,i.create=function(e){var t={min:{x:0,y:0},max:{x:0,y:0}};return e&&i.update(t,e),t},i.update=function(e,t,i){e.min.x=1/0,e.max.x=-1/0,e.min.y=1/0,e.max.y=-1/0;for(var s=0;s<t.length;s++){var n=t[s];n.x>e.max.x&&(e.max.x=n.x),n.x<e.min.x&&(e.min.x=n.x),n.y>e.max.y&&(e.max.y=n.y),n.y<e.min.y&&(e.min.y=n.y)}i&&(i.x>0?e.max.x+=i.x:e.min.x+=i.x,i.y>0?e.max.y+=i.y:e.min.y+=i.y)},i.contains=function(e,t){return t.x>=e.min.x&&t.x<=e.max.x&&t.y>=e.min.y&&t.y<=e.max.y},i.overlaps=function(e,t){return e.min.x<=t.max.x&&e.max.x>=t.min.x&&e.max.y>=t.min.y&&e.min.y<=t.max.y},i.translate=function(e,t){e.min.x+=t.x,e.max.x+=t.x,e.min.y+=t.y,e.max.y+=t.y},i.shift=function(e,t){var i=e.max.x-e.min.x,s=e.max.y-e.min.y;e.min.x=t.x,e.max.x=t.x+i,e.min.y=t.y,e.max.y=t.y+s}},function(e,t){var i={};e.exports=i,i.create=function(e,t){return{x:e||0,y:t||0}},i.clone=function(e){return{x:e.x,y:e.y}},i.magnitude=function(e){return Math.sqrt(e.x*e.x+e.y*e.y)},i.magnitudeSquared=function(e){return e.x*e.x+e.y*e.y},i.rotate=function(e,t,i){var s=Math.cos(t),n=Math.sin(t);i||(i={});var r=e.x*s-e.y*n;return i.y=e.x*n+e.y*s,i.x=r,i},i.rotateAbout=function(e,t,i,s){var n=Math.cos(t),r=Math.sin(t);s||(s={});var a=i.x+((e.x-i.x)*n-(e.y-i.y)*r);return s.y=i.y+((e.x-i.x)*r+(e.y-i.y)*n),s.x=a,s},i.normalise=function(e){var t=i.magnitude(e);return 0===t?{x:0,y:0}:{x:e.x/t,y:e.y/t}},i.dot=function(e,t){return e.x*t.x+e.y*t.y},i.cross=function(e,t){return e.x*t.y-e.y*t.x},i.cross3=function(e,t,i){return(t.x-e.x)*(i.y-e.y)-(t.y-e.y)*(i.x-e.x)},i.add=function(e,t,i){return i||(i={}),i.x=e.x+t.x,i.y=e.y+t.y,i},i.sub=function(e,t,i){return i||(i={}),i.x=e.x-t.x,i.y=e.y-t.y,i},i.mult=function(e,t){return{x:e.x*t,y:e.y*t}},i.div=function(e,t){return{x:e.x/t,y:e.y/t}},i.perp=function(e,t){return{x:(t=!0===t?-1:1)*-e.y,y:t*e.x}},i.neg=function(e){return{x:-e.x,y:-e.y}},i.angle=function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},i._temp=[i.create(),i.create(),i.create(),i.create(),i.create(),i.create()]},function(e,t,i){var s={};e.exports=s;var n=i(2),r=i(0);s.create=function(e,t){for(var i=[],s=0;s<e.length;s++){var n=e[s],r={x:n.x,y:n.y,index:s,body:t,isInternal:!1};i.push(r)}return i},s.fromPath=function(e,t){var i=[];return e.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(e,t,s){i.push({x:parseFloat(t),y:parseFloat(s)})}),s.create(i,t)},s.centre=function(e){for(var t,i,r,a=s.area(e,!0),o={x:0,y:0},l=0;l<e.length;l++)r=(l+1)%e.length,t=n.cross(e[l],e[r]),i=n.mult(n.add(e[l],e[r]),t),o=n.add(o,i);return n.div(o,6*a)},s.mean=function(e){for(var t={x:0,y:0},i=0;i<e.length;i++)t.x+=e[i].x,t.y+=e[i].y;return n.div(t,e.length)},s.area=function(e,t){for(var i=0,s=e.length-1,n=0;n<e.length;n++)i+=(e[s].x-e[n].x)*(e[s].y+e[n].y),s=n;return t?i/2:Math.abs(i)/2},s.inertia=function(e,t){for(var i,s,r=0,a=0,o=e,l=0;l<o.length;l++)s=(l+1)%o.length,r+=(i=Math.abs(n.cross(o[s],o[l])))*(n.dot(o[s],o[s])+n.dot(o[s],o[l])+n.dot(o[l],o[l])),a+=i;return t/6*(r/a)},s.translate=function(e,t,i){i=void 0!==i?i:1;var s,n=e.length,r=t.x*i,a=t.y*i;for(s=0;s<n;s++)e[s].x+=r,e[s].y+=a;return e},s.rotate=function(e,t,i){if(0!==t){var s,n,r,a,o=Math.cos(t),l=Math.sin(t),c=i.x,h=i.y,u=e.length;for(a=0;a<u;a++)n=(s=e[a]).x-c,r=s.y-h,s.x=c+(n*o-r*l),s.y=h+(n*l+r*o);return e}},s.contains=function(e,t){for(var i,s=t.x,n=t.y,r=e.length,a=e[r-1],o=0;o<r;o++){if(i=e[o],(s-a.x)*(i.y-a.y)+(n-a.y)*(a.x-i.x)>0)return!1;a=i}return!0},s.scale=function(e,t,i,r){if(1===t&&1===i)return e;var a,o;r=r||s.centre(e);for(var l=0;l<e.length;l++)a=e[l],o=n.sub(a,r),e[l].x=r.x+o.x*t,e[l].y=r.y+o.y*i;return e},s.chamfer=function(e,t,i,s,a){t="number"==typeof t?[t]:t||[8],i=void 0!==i?i:-1,s=s||2,a=a||14;for(var o=[],l=0;l<e.length;l++){var c=e[l-1>=0?l-1:e.length-1],h=e[l],u=e[(l+1)%e.length],d=t[l<t.length?l:t.length-1];if(0!==d){var p=n.normalise({x:h.y-c.y,y:c.x-h.x}),f=n.normalise({x:u.y-h.y,y:h.x-u.x}),m=Math.sqrt(2*Math.pow(d,2)),g=n.mult(r.clone(p),d),y=n.normalise(n.mult(n.add(p,f),.5)),v=n.sub(h,n.mult(y,m)),b=i;-1===i&&(b=1.75*Math.pow(d,.32)),(b=r.clamp(b,s,a))%2==1&&(b+=1);for(var _=Math.acos(n.dot(p,f))/b,x=0;x<b;x++)o.push(n.add(n.rotate(g,_*x),v))}else o.push(h)}return o},s.clockwiseSort=function(e){var t=s.mean(e);return e.sort(function(e,i){return n.angle(t,e)-n.angle(t,i)}),e},s.isConvex=function(e){var t,i,s,n,r=0,a=e.length;if(a<3)return null;for(t=0;t<a;t++)if(s=(t+2)%a,n=(e[i=(t+1)%a].x-e[t].x)*(e[s].y-e[i].y),(n-=(e[i].y-e[t].y)*(e[s].x-e[i].x))<0?r|=1:n>0&&(r|=2),3===r)return!1;return 0!==r||null},s.hull=function(e){var t,i,s=[],r=[];for((e=e.slice(0)).sort(function(e,t){var i=e.x-t.x;return 0!==i?i:e.y-t.y}),i=0;i<e.length;i+=1){for(t=e[i];r.length>=2&&n.cross3(r[r.length-2],r[r.length-1],t)<=0;)r.pop();r.push(t)}for(i=e.length-1;i>=0;i-=1){for(t=e[i];s.length>=2&&n.cross3(s[s.length-2],s[s.length-1],t)<=0;)s.pop();s.push(t)}return s.pop(),r.pop(),s.concat(r)}},function(e,t,i){var s={};e.exports=s;var n=i(3),r=i(2),a=i(7),o=i(0),l=i(1),c=i(11);!function(){s._timeCorrection=!0,s._inertiaScale=4,s._nextCollidingGroupId=1,s._nextNonCollidingGroupId=-1,s._nextCategory=1,s._baseDelta=1e3/60,s.create=function(t){var i={id:o.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"),position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,render:{visible:!0,opacity:1,strokeStyle:null,fillStyle:null,lineWidth:null,sprite:{xScale:1,yScale:1,xOffset:0,yOffset:0}},events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inertia:0,deltaTime:1e3/60,_original:null},s=o.extend(i,t);return e(s,t),s},s.nextGroup=function(e){return e?s._nextNonCollidingGroupId--:s._nextCollidingGroupId++},s.nextCategory=function(){return s._nextCategory=s._nextCategory<<1,s._nextCategory};var e=function(e,t){t=t||{},s.set(e,{bounds:e.bounds||l.create(e.vertices),positionPrev:e.positionPrev||r.clone(e.position),anglePrev:e.anglePrev||e.angle,vertices:e.vertices,parts:e.parts||[e],isStatic:e.isStatic,isSleeping:e.isSleeping,parent:e.parent||e}),n.rotate(e.vertices,e.angle,e.position),c.rotate(e.axes,e.angle),l.update(e.bounds,e.vertices,e.velocity),s.set(e,{axes:t.axes||e.axes,area:t.area||e.area,mass:t.mass||e.mass,inertia:t.inertia||e.inertia});var i=e.isStatic?"#14151f":o.choose(["#f19648","#f5d259","#f55a3c","#063e7b","#ececd1"]),a=e.isStatic?"#555":"#ccc",h=e.isStatic&&null===e.render.fillStyle?1:0;e.render.fillStyle=e.render.fillStyle||i,e.render.strokeStyle=e.render.strokeStyle||a,e.render.lineWidth=e.render.lineWidth||h,e.render.sprite.xOffset+=-(e.bounds.min.x-e.position.x)/(e.bounds.max.x-e.bounds.min.x),e.render.sprite.yOffset+=-(e.bounds.min.y-e.position.y)/(e.bounds.max.y-e.bounds.min.y)};s.set=function(e,t,i){var n;for(n in"string"==typeof t&&(n=t,(t={})[n]=i),t)if(Object.prototype.hasOwnProperty.call(t,n))switch(i=t[n],n){case"isStatic":s.setStatic(e,i);break;case"isSleeping":a.set(e,i);break;case"mass":s.setMass(e,i);break;case"density":s.setDensity(e,i);break;case"inertia":s.setInertia(e,i);break;case"vertices":s.setVertices(e,i);break;case"position":s.setPosition(e,i);break;case"angle":s.setAngle(e,i);break;case"velocity":s.setVelocity(e,i);break;case"angularVelocity":s.setAngularVelocity(e,i);break;case"speed":s.setSpeed(e,i);break;case"angularSpeed":s.setAngularSpeed(e,i);break;case"parts":s.setParts(e,i);break;case"centre":s.setCentre(e,i);break;default:e[n]=i}},s.setStatic=function(e,t){for(var i=0;i<e.parts.length;i++){var s=e.parts[i];t?(s.isStatic||(s._original={restitution:s.restitution,friction:s.friction,mass:s.mass,inertia:s.inertia,density:s.density,inverseMass:s.inverseMass,inverseInertia:s.inverseInertia}),s.restitution=0,s.friction=1,s.mass=s.inertia=s.density=1/0,s.inverseMass=s.inverseInertia=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.angularVelocity=0,s.speed=0,s.angularSpeed=0,s.motion=0):s._original&&(s.restitution=s._original.restitution,s.friction=s._original.friction,s.mass=s._original.mass,s.inertia=s._original.inertia,s.density=s._original.density,s.inverseMass=s._original.inverseMass,s.inverseInertia=s._original.inverseInertia,s._original=null),s.isStatic=t}},s.setMass=function(e,t){var i=e.inertia/(e.mass/6);e.inertia=i*(t/6),e.inverseInertia=1/e.inertia,e.mass=t,e.inverseMass=1/e.mass,e.density=e.mass/e.area},s.setDensity=function(e,t){s.setMass(e,t*e.area),e.density=t},s.setInertia=function(e,t){e.inertia=t,e.inverseInertia=1/e.inertia},s.setVertices=function(e,t){t[0].body===e?e.vertices=t:e.vertices=n.create(t,e),e.axes=c.fromVertices(e.vertices),e.area=n.area(e.vertices),s.setMass(e,e.density*e.area);var i=n.centre(e.vertices);n.translate(e.vertices,i,-1),s.setInertia(e,s._inertiaScale*n.inertia(e.vertices,e.mass)),n.translate(e.vertices,e.position),l.update(e.bounds,e.vertices,e.velocity)},s.setParts=function(e,t,i){var r;for(t=t.slice(0),e.parts.length=0,e.parts.push(e),e.parent=e,r=0;r<t.length;r++){var a=t[r];a!==e&&(a.parent=e,e.parts.push(a))}if(1!==e.parts.length){if(i=void 0===i||i){var o=[];for(r=0;r<t.length;r++)o=o.concat(t[r].vertices);n.clockwiseSort(o);var l=n.hull(o),c=n.centre(l);s.setVertices(e,l),n.translate(e.vertices,c)}var h=s._totalProperties(e);e.area=h.area,e.parent=e,e.position.x=h.centre.x,e.position.y=h.centre.y,e.positionPrev.x=h.centre.x,e.positionPrev.y=h.centre.y,s.setMass(e,h.mass),s.setInertia(e,h.inertia),s.setPosition(e,h.centre)}},s.setCentre=function(e,t,i){i?(e.positionPrev.x+=t.x,e.positionPrev.y+=t.y,e.position.x+=t.x,e.position.y+=t.y):(e.positionPrev.x=t.x-(e.position.x-e.positionPrev.x),e.positionPrev.y=t.y-(e.position.y-e.positionPrev.y),e.position.x=t.x,e.position.y=t.y)},s.setPosition=function(e,t,i){var s=r.sub(t,e.position);i?(e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.velocity.x=s.x,e.velocity.y=s.y,e.speed=r.magnitude(s)):(e.positionPrev.x+=s.x,e.positionPrev.y+=s.y);for(var a=0;a<e.parts.length;a++){var o=e.parts[a];o.position.x+=s.x,o.position.y+=s.y,n.translate(o.vertices,s),l.update(o.bounds,o.vertices,e.velocity)}},s.setAngle=function(e,t,i){var s=t-e.angle;i?(e.anglePrev=e.angle,e.angularVelocity=s,e.angularSpeed=Math.abs(s)):e.anglePrev+=s;for(var a=0;a<e.parts.length;a++){var o=e.parts[a];o.angle+=s,n.rotate(o.vertices,s,e.position),c.rotate(o.axes,s),l.update(o.bounds,o.vertices,e.velocity),a>0&&r.rotateAbout(o.position,s,e.position,o.position)}},s.setVelocity=function(e,t){var i=e.deltaTime/s._baseDelta;e.positionPrev.x=e.position.x-t.x*i,e.positionPrev.y=e.position.y-t.y*i,e.velocity.x=(e.position.x-e.positionPrev.x)/i,e.velocity.y=(e.position.y-e.positionPrev.y)/i,e.speed=r.magnitude(e.velocity)},s.getVelocity=function(e){var t=s._baseDelta/e.deltaTime;return{x:(e.position.x-e.positionPrev.x)*t,y:(e.position.y-e.positionPrev.y)*t}},s.getSpeed=function(e){return r.magnitude(s.getVelocity(e))},s.setSpeed=function(e,t){s.setVelocity(e,r.mult(r.normalise(s.getVelocity(e)),t))},s.setAngularVelocity=function(e,t){var i=e.deltaTime/s._baseDelta;e.anglePrev=e.angle-t*i,e.angularVelocity=(e.angle-e.anglePrev)/i,e.angularSpeed=Math.abs(e.angularVelocity)},s.getAngularVelocity=function(e){return(e.angle-e.anglePrev)*s._baseDelta/e.deltaTime},s.getAngularSpeed=function(e){return Math.abs(s.getAngularVelocity(e))},s.setAngularSpeed=function(e,t){s.setAngularVelocity(e,o.sign(s.getAngularVelocity(e))*t)},s.translate=function(e,t,i){s.setPosition(e,r.add(e.position,t),i)},s.rotate=function(e,t,i,n){if(i){var r=Math.cos(t),a=Math.sin(t),o=e.position.x-i.x,l=e.position.y-i.y;s.setPosition(e,{x:i.x+(o*r-l*a),y:i.y+(o*a+l*r)},n),s.setAngle(e,e.angle+t,n)}else s.setAngle(e,e.angle+t,n)},s.scale=function(e,t,i,r){var a=0,o=0;r=r||e.position;for(var h=0;h<e.parts.length;h++){var u=e.parts[h];n.scale(u.vertices,t,i,r),u.axes=c.fromVertices(u.vertices),u.area=n.area(u.vertices),s.setMass(u,e.density*u.area),n.translate(u.vertices,{x:-u.position.x,y:-u.position.y}),s.setInertia(u,s._inertiaScale*n.inertia(u.vertices,u.mass)),n.translate(u.vertices,{x:u.position.x,y:u.position.y}),h>0&&(a+=u.area,o+=u.inertia),u.position.x=r.x+(u.position.x-r.x)*t,u.position.y=r.y+(u.position.y-r.y)*i,l.update(u.bounds,u.vertices,e.velocity)}e.parts.length>1&&(e.area=a,e.isStatic||(s.setMass(e,e.density*a),s.setInertia(e,o))),e.circleRadius&&(t===i?e.circleRadius*=t:e.circleRadius=null)},s.update=function(e,t){var i=(t=(void 0!==t?t:1e3/60)*e.timeScale)*t,a=s._timeCorrection?t/(e.deltaTime||t):1,h=1-e.frictionAir*(t/o._baseDelta),u=(e.position.x-e.positionPrev.x)*a,d=(e.position.y-e.positionPrev.y)*a;e.velocity.x=u*h+e.force.x/e.mass*i,e.velocity.y=d*h+e.force.y/e.mass*i,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.position.x+=e.velocity.x,e.position.y+=e.velocity.y,e.deltaTime=t,e.angularVelocity=(e.angle-e.anglePrev)*h*a+e.torque/e.inertia*i,e.anglePrev=e.angle,e.angle+=e.angularVelocity;for(var p=0;p<e.parts.length;p++){var f=e.parts[p];n.translate(f.vertices,e.velocity),p>0&&(f.position.x+=e.velocity.x,f.position.y+=e.velocity.y),0!==e.angularVelocity&&(n.rotate(f.vertices,e.angularVelocity,e.position),c.rotate(f.axes,e.angularVelocity),p>0&&r.rotateAbout(f.position,e.angularVelocity,e.position,f.position)),l.update(f.bounds,f.vertices,e.velocity)}},s.updateVelocities=function(e){var t=s._baseDelta/e.deltaTime,i=e.velocity;i.x=(e.position.x-e.positionPrev.x)*t,i.y=(e.position.y-e.positionPrev.y)*t,e.speed=Math.sqrt(i.x*i.x+i.y*i.y),e.angularVelocity=(e.angle-e.anglePrev)*t,e.angularSpeed=Math.abs(e.angularVelocity)},s.applyForce=function(e,t,i){var s=t.x-e.position.x,n=t.y-e.position.y;e.force.x+=i.x,e.force.y+=i.y,e.torque+=s*i.y-n*i.x},s._totalProperties=function(e){for(var t={mass:0,area:0,inertia:0,centre:{x:0,y:0}},i=1===e.parts.length?0:1;i<e.parts.length;i++){var s=e.parts[i],n=s.mass!==1/0?s.mass:1;t.mass+=n,t.area+=s.area,t.inertia+=s.inertia,t.centre=r.add(t.centre,r.mult(s.position,n))}return t.centre=r.div(t.centre,t.mass),t}}()},function(e,t,i){var s={};e.exports=s;var n=i(0);s.on=function(e,t,i){for(var s,n=t.split(" "),r=0;r<n.length;r++)s=n[r],e.events=e.events||{},e.events[s]=e.events[s]||[],e.events[s].push(i);return i},s.off=function(e,t,i){if(t){"function"==typeof t&&(i=t,t=n.keys(e.events).join(" "));for(var s=t.split(" "),r=0;r<s.length;r++){var a=e.events[s[r]],o=[];if(i&&a)for(var l=0;l<a.length;l++)a[l]!==i&&o.push(a[l]);e.events[s[r]]=o}}else e.events={}},s.trigger=function(e,t,i){var s,r,a,o,l=e.events;if(l&&n.keys(l).length>0){i||(i={}),s=t.split(" ");for(var c=0;c<s.length;c++)if(a=l[r=s[c]]){(o=n.clone(i,!1)).name=r,o.source=e;for(var h=0;h<a.length;h++)a[h].apply(e,[o])}}}},function(e,t,i){var s={};e.exports=s;var n=i(5),r=i(0),a=i(1),o=i(4);s.create=function(e){return r.extend({id:r.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{},cache:{allBodies:null,allConstraints:null,allComposites:null}},e)},s.setModified=function(e,t,i,n){if(e.isModified=t,t&&e.cache&&(e.cache.allBodies=null,e.cache.allConstraints=null,e.cache.allComposites=null),i&&e.parent&&s.setModified(e.parent,t,i,n),n)for(var r=0;r<e.composites.length;r++){var a=e.composites[r];s.setModified(a,t,i,n)}},s.add=function(e,t){var i=[].concat(t);n.trigger(e,"beforeAdd",{object:t});for(var a=0;a<i.length;a++){var o=i[a];switch(o.type){case"body":if(o.parent!==o){r.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}s.addBody(e,o);break;case"constraint":s.addConstraint(e,o);break;case"composite":s.addComposite(e,o);break;case"mouseConstraint":s.addConstraint(e,o.constraint)}}return n.trigger(e,"afterAdd",{object:t}),e},s.remove=function(e,t,i){var r=[].concat(t);n.trigger(e,"beforeRemove",{object:t});for(var a=0;a<r.length;a++){var o=r[a];switch(o.type){case"body":s.removeBody(e,o,i);break;case"constraint":s.removeConstraint(e,o,i);break;case"composite":s.removeComposite(e,o,i);break;case"mouseConstraint":s.removeConstraint(e,o.constraint)}}return n.trigger(e,"afterRemove",{object:t}),e},s.addComposite=function(e,t){return e.composites.push(t),t.parent=e,s.setModified(e,!0,!0,!1),e},s.removeComposite=function(e,t,i){var n=r.indexOf(e.composites,t);if(-1!==n){var a=s.allBodies(t);s.removeCompositeAt(e,n);for(var o=0;o<a.length;o++)a[o].sleepCounter=0}if(i)for(o=0;o<e.composites.length;o++)s.removeComposite(e.composites[o],t,!0);return e},s.removeCompositeAt=function(e,t){return e.composites.splice(t,1),s.setModified(e,!0,!0,!1),e},s.addBody=function(e,t){return e.bodies.push(t),s.setModified(e,!0,!0,!1),e},s.removeBody=function(e,t,i){var n=r.indexOf(e.bodies,t);if(-1!==n&&(s.removeBodyAt(e,n),t.sleepCounter=0),i)for(var a=0;a<e.composites.length;a++)s.removeBody(e.composites[a],t,!0);return e},s.removeBodyAt=function(e,t){return e.bodies.splice(t,1),s.setModified(e,!0,!0,!1),e},s.addConstraint=function(e,t){return e.constraints.push(t),s.setModified(e,!0,!0,!1),e},s.removeConstraint=function(e,t,i){var n=r.indexOf(e.constraints,t);if(-1!==n&&s.removeConstraintAt(e,n),i)for(var a=0;a<e.composites.length;a++)s.removeConstraint(e.composites[a],t,!0);return e},s.removeConstraintAt=function(e,t){return e.constraints.splice(t,1),s.setModified(e,!0,!0,!1),e},s.clear=function(e,t,i){if(i)for(var n=0;n<e.composites.length;n++)s.clear(e.composites[n],t,!0);return t?e.bodies=e.bodies.filter(function(e){return e.isStatic}):e.bodies.length=0,e.constraints.length=0,e.composites.length=0,s.setModified(e,!0,!0,!1),e},s.allBodies=function(e){if(e.cache&&e.cache.allBodies)return e.cache.allBodies;for(var t=[].concat(e.bodies),i=0;i<e.composites.length;i++)t=t.concat(s.allBodies(e.composites[i]));return e.cache&&(e.cache.allBodies=t),t},s.allConstraints=function(e){if(e.cache&&e.cache.allConstraints)return e.cache.allConstraints;for(var t=[].concat(e.constraints),i=0;i<e.composites.length;i++)t=t.concat(s.allConstraints(e.composites[i]));return e.cache&&(e.cache.allConstraints=t),t},s.allComposites=function(e){if(e.cache&&e.cache.allComposites)return e.cache.allComposites;for(var t=[].concat(e.composites),i=0;i<e.composites.length;i++)t=t.concat(s.allComposites(e.composites[i]));return e.cache&&(e.cache.allComposites=t),t},s.get=function(e,t,i){var n,r;switch(i){case"body":n=s.allBodies(e);break;case"constraint":n=s.allConstraints(e);break;case"composite":n=s.allComposites(e).concat(e)}return n?0===(r=n.filter(function(e){return e.id.toString()===t.toString()})).length?null:r[0]:null},s.move=function(e,t,i){return s.remove(e,t),s.add(i,t),e},s.rebase=function(e){for(var t=s.allBodies(e).concat(s.allConstraints(e)).concat(s.allComposites(e)),i=0;i<t.length;i++)t[i].id=r.nextId();return e},s.translate=function(e,t,i){for(var n=i?s.allBodies(e):e.bodies,r=0;r<n.length;r++)o.translate(n[r],t);return e},s.rotate=function(e,t,i,n){for(var r=Math.cos(t),a=Math.sin(t),l=n?s.allBodies(e):e.bodies,c=0;c<l.length;c++){var h=l[c],u=h.position.x-i.x,d=h.position.y-i.y;o.setPosition(h,{x:i.x+(u*r-d*a),y:i.y+(u*a+d*r)}),o.rotate(h,t)}return e},s.scale=function(e,t,i,n,r){for(var a=r?s.allBodies(e):e.bodies,l=0;l<a.length;l++){var c=a[l],h=c.position.x-n.x,u=c.position.y-n.y;o.setPosition(c,{x:n.x+h*t,y:n.y+u*i}),o.scale(c,t,i)}return e},s.bounds=function(e){for(var t=s.allBodies(e),i=[],n=0;n<t.length;n+=1){var r=t[n];i.push(r.bounds.min,r.bounds.max)}return a.create(i)}},function(e,t,i){var s={};e.exports=s;var n=i(4),r=i(5),a=i(0);s._motionWakeThreshold=.18,s._motionSleepThreshold=.08,s._minBias=.9,s.update=function(e,t){for(var i=t/a._baseDelta,r=s._motionSleepThreshold,o=0;o<e.length;o++){var l=e[o],c=n.getSpeed(l),h=n.getAngularSpeed(l),u=c*c+h*h;if(0===l.force.x&&0===l.force.y){var d=Math.min(l.motion,u),p=Math.max(l.motion,u);l.motion=s._minBias*d+(1-s._minBias)*p,l.sleepThreshold>0&&l.motion<r?(l.sleepCounter+=1,l.sleepCounter>=l.sleepThreshold/i&&s.set(l,!0)):l.sleepCounter>0&&(l.sleepCounter-=1)}else s.set(l,!1)}},s.afterCollisions=function(e){for(var t=s._motionSleepThreshold,i=0;i<e.length;i++){var n=e[i];if(n.isActive){var r=n.collision,a=r.bodyA.parent,o=r.bodyB.parent;if(!(a.isSleeping&&o.isSleeping||a.isStatic||o.isStatic)&&(a.isSleeping||o.isSleeping)){var l=a.isSleeping&&!a.isStatic?a:o,c=l===a?o:a;!l.isStatic&&c.motion>t&&s.set(l,!1)}}}},s.set=function(e,t){var i=e.isSleeping;t?(e.isSleeping=!0,e.sleepCounter=e.sleepThreshold,e.positionImpulse.x=0,e.positionImpulse.y=0,e.positionPrev.x=e.position.x,e.positionPrev.y=e.position.y,e.anglePrev=e.angle,e.speed=0,e.angularSpeed=0,e.motion=0,i||r.trigger(e,"sleepStart")):(e.isSleeping=!1,e.sleepCounter=0,i&&r.trigger(e,"sleepEnd"))}},function(e,t,i){var s={};e.exports=s;var n,r,a,o=i(3),l=i(9);n=[],r={overlap:0,axis:null},a={overlap:0,axis:null},s.create=function(e,t){return{pair:null,collided:!1,bodyA:e,bodyB:t,parentA:e.parent,parentB:t.parent,depth:0,normal:{x:0,y:0},tangent:{x:0,y:0},penetration:{x:0,y:0},supports:[null,null],supportCount:0}},s.collides=function(e,t,i){if(s._overlapAxes(r,e.vertices,t.vertices,e.axes),r.overlap<=0)return null;if(s._overlapAxes(a,t.vertices,e.vertices,t.axes),a.overlap<=0)return null;var n,c,h=i&&i.table[l.id(e,t)];h?n=h.collision:((n=s.create(e,t)).collided=!0,n.bodyA=e.id<t.id?e:t,n.bodyB=e.id<t.id?t:e,n.parentA=n.bodyA.parent,n.parentB=n.bodyB.parent),e=n.bodyA,t=n.bodyB,c=r.overlap<a.overlap?r:a;var u=n.normal,d=n.tangent,p=n.penetration,f=n.supports,m=c.overlap,g=c.axis,y=g.x,v=g.y;y*(t.position.x-e.position.x)+v*(t.position.y-e.position.y)>=0&&(y=-y,v=-v),u.x=y,u.y=v,d.x=-v,d.y=y,p.x=y*m,p.y=v*m,n.depth=m;var b=s._findSupports(e,t,u,1),_=0;if(o.contains(e.vertices,b[0])&&(f[_++]=b[0]),o.contains(e.vertices,b[1])&&(f[_++]=b[1]),_<2){var x=s._findSupports(t,e,u,-1);o.contains(t.vertices,x[0])&&(f[_++]=x[0]),_<2&&o.contains(t.vertices,x[1])&&(f[_++]=x[1])}return 0===_&&(f[_++]=b[0]),n.supportCount=_,n},s._overlapAxes=function(e,t,i,s){var n,r,a,o,l,c,h=t.length,u=i.length,d=t[0].x,p=t[0].y,f=i[0].x,m=i[0].y,g=s.length,y=Number.MAX_VALUE,v=0;for(l=0;l<g;l++){var b=s[l],_=b.x,x=b.y,w=d*_+p*x,S=f*_+m*x,k=w,T=S;for(c=1;c<h;c+=1)(o=t[c].x*_+t[c].y*x)>k?k=o:o<w&&(w=o);for(c=1;c<u;c+=1)(o=i[c].x*_+i[c].y*x)>T?T=o:o<S&&(S=o);if((n=(r=k-S)<(a=T-w)?r:a)<y&&(y=n,v=l,n<=0))break}e.axis=s[v],e.overlap=y},s._findSupports=function(e,t,i,s){var r,a,o,l=t.vertices,c=l.length,h=e.position.x,u=e.position.y,d=i.x*s,p=i.y*s,f=l[0],m=f,g=d*(h-m.x)+p*(u-m.y);for(o=1;o<c;o+=1)(a=d*(h-(m=l[o]).x)+p*(u-m.y))<g&&(g=a,f=m);return g=d*(h-(r=l[(c+f.index-1)%c]).x)+p*(u-r.y),d*(h-(m=l[(f.index+1)%c]).x)+p*(u-m.y)<g?(n[0]=f,n[1]=m,n):(n[0]=f,n[1]=r,n)}},function(e,t,i){var s={};e.exports=s;var n=i(16);s.create=function(e,t){var i=e.bodyA,r=e.bodyB,a={id:s.id(i,r),bodyA:i,bodyB:r,collision:e,contacts:[n.create(),n.create()],contactCount:0,separation:0,isActive:!0,isSensor:i.isSensor||r.isSensor,timeCreated:t,timeUpdated:t,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return s.update(a,e,t),a},s.update=function(e,t,i){var s=t.supports,n=t.supportCount,r=e.contacts,a=t.parentA,o=t.parentB;e.isActive=!0,e.timeUpdated=i,e.collision=t,e.separation=t.depth,e.inverseMass=a.inverseMass+o.inverseMass,e.friction=a.friction<o.friction?a.friction:o.friction,e.frictionStatic=a.frictionStatic>o.frictionStatic?a.frictionStatic:o.frictionStatic,e.restitution=a.restitution>o.restitution?a.restitution:o.restitution,e.slop=a.slop>o.slop?a.slop:o.slop,e.contactCount=n,t.pair=e;var l=s[0],c=r[0],h=s[1],u=r[1];u.vertex!==l&&c.vertex!==h||(r[1]=c,r[0]=c=u,u=r[1]),c.vertex=l,u.vertex=h},s.setActive=function(e,t,i){t?(e.isActive=!0,e.timeUpdated=i):(e.isActive=!1,e.contactCount=0)},s.id=function(e,t){return e.id<t.id?e.id.toString(36)+":"+t.id.toString(36):t.id.toString(36)+":"+e.id.toString(36)}},function(e,t,i){var s={};e.exports=s;var n=i(3),r=i(2),a=i(7),o=i(1),l=i(11),c=i(0);s._warming=.4,s._torqueDampen=1,s._minLength=1e-6,s.create=function(e){var t=e;t.bodyA&&!t.pointA&&(t.pointA={x:0,y:0}),t.bodyB&&!t.pointB&&(t.pointB={x:0,y:0});var i=t.bodyA?r.add(t.bodyA.position,t.pointA):t.pointA,s=t.bodyB?r.add(t.bodyB.position,t.pointB):t.pointB,n=r.magnitude(r.sub(i,s));t.length=void 0!==t.length?t.length:n,t.id=t.id||c.nextId(),t.label=t.label||"Constraint",t.type="constraint",t.stiffness=t.stiffness||(t.length>0?1:.7),t.damping=t.damping||0,t.angularStiffness=t.angularStiffness||0,t.angleA=t.bodyA?t.bodyA.angle:t.angleA,t.angleB=t.bodyB?t.bodyB.angle:t.angleB,t.plugin={};var a={visible:!0,lineWidth:2,strokeStyle:"#ffffff",type:"line",anchors:!0};return 0===t.length&&t.stiffness>.1?(a.type="pin",a.anchors=!1):t.stiffness<.9&&(a.type="spring"),t.render=c.extend(a,t.render),t},s.preSolveAll=function(e){for(var t=0;t<e.length;t+=1){var i=e[t],s=i.constraintImpulse;i.isStatic||0===s.x&&0===s.y&&0===s.angle||(i.position.x+=s.x,i.position.y+=s.y,i.angle+=s.angle)}},s.solveAll=function(e,t){for(var i=c.clamp(t/c._baseDelta,0,1),n=0;n<e.length;n+=1){var r=e[n],a=!r.bodyA||r.bodyA&&r.bodyA.isStatic,o=!r.bodyB||r.bodyB&&r.bodyB.isStatic;(a||o)&&s.solve(e[n],i)}for(n=0;n<e.length;n+=1)a=!(r=e[n]).bodyA||r.bodyA&&r.bodyA.isStatic,o=!r.bodyB||r.bodyB&&r.bodyB.isStatic,a||o||s.solve(e[n],i)},s.solve=function(e,t){var i=e.bodyA,n=e.bodyB,a=e.pointA,o=e.pointB;if(i||n){i&&!i.isStatic&&(r.rotate(a,i.angle-e.angleA,a),e.angleA=i.angle),n&&!n.isStatic&&(r.rotate(o,n.angle-e.angleB,o),e.angleB=n.angle);var l=a,c=o;if(i&&(l=r.add(i.position,a)),n&&(c=r.add(n.position,o)),l&&c){var h=r.sub(l,c),u=r.magnitude(h);u<s._minLength&&(u=s._minLength);var d,p,f,m,g,y=(u-e.length)/u,v=e.stiffness>=1||0===e.length?e.stiffness*t:e.stiffness*t*t,b=e.damping*t,_=r.mult(h,y*v),x=(i?i.inverseMass:0)+(n?n.inverseMass:0),w=x+((i?i.inverseInertia:0)+(n?n.inverseInertia:0));if(b>0){var S=r.create();f=r.div(h,u),g=r.sub(n&&r.sub(n.position,n.positionPrev)||S,i&&r.sub(i.position,i.positionPrev)||S),m=r.dot(f,g)}i&&!i.isStatic&&(p=i.inverseMass/x,i.constraintImpulse.x-=_.x*p,i.constraintImpulse.y-=_.y*p,i.position.x-=_.x*p,i.position.y-=_.y*p,b>0&&(i.positionPrev.x-=b*f.x*m*p,i.positionPrev.y-=b*f.y*m*p),d=r.cross(a,_)/w*s._torqueDampen*i.inverseInertia*(1-e.angularStiffness),i.constraintImpulse.angle-=d,i.angle-=d),n&&!n.isStatic&&(p=n.inverseMass/x,n.constraintImpulse.x+=_.x*p,n.constraintImpulse.y+=_.y*p,n.position.x+=_.x*p,n.position.y+=_.y*p,b>0&&(n.positionPrev.x+=b*f.x*m*p,n.positionPrev.y+=b*f.y*m*p),d=r.cross(o,_)/w*s._torqueDampen*n.inverseInertia*(1-e.angularStiffness),n.constraintImpulse.angle+=d,n.angle+=d)}}},s.postSolveAll=function(e){for(var t=0;t<e.length;t++){var i=e[t],c=i.constraintImpulse;if(!(i.isStatic||0===c.x&&0===c.y&&0===c.angle)){a.set(i,!1);for(var h=0;h<i.parts.length;h++){var u=i.parts[h];n.translate(u.vertices,c),h>0&&(u.position.x+=c.x,u.position.y+=c.y),0!==c.angle&&(n.rotate(u.vertices,c.angle,i.position),l.rotate(u.axes,c.angle),h>0&&r.rotateAbout(u.position,c.angle,i.position,u.position)),o.update(u.bounds,u.vertices,i.velocity)}c.angle*=s._warming,c.x*=s._warming,c.y*=s._warming}}},s.pointAWorld=function(e){return{x:(e.bodyA?e.bodyA.position.x:0)+(e.pointA?e.pointA.x:0),y:(e.bodyA?e.bodyA.position.y:0)+(e.pointA?e.pointA.y:0)}},s.pointBWorld=function(e){return{x:(e.bodyB?e.bodyB.position.x:0)+(e.pointB?e.pointB.x:0),y:(e.bodyB?e.bodyB.position.y:0)+(e.pointB?e.pointB.y:0)}},s.currentLength=function(e){var t=(e.bodyA?e.bodyA.position.x:0)+(e.pointA?e.pointA.x:0),i=(e.bodyA?e.bodyA.position.y:0)+(e.pointA?e.pointA.y:0),s=t-((e.bodyB?e.bodyB.position.x:0)+(e.pointB?e.pointB.x:0)),n=i-((e.bodyB?e.bodyB.position.y:0)+(e.pointB?e.pointB.y:0));return Math.sqrt(s*s+n*n)}},function(e,t,i){var s={};e.exports=s;var n=i(2),r=i(0);s.fromVertices=function(e){for(var t={},i=0;i<e.length;i++){var s=(i+1)%e.length,a=n.normalise({x:e[s].y-e[i].y,y:e[i].x-e[s].x}),o=0===a.y?1/0:a.x/a.y;t[o=o.toFixed(3).toString()]=a}return r.values(t)},s.rotate=function(e,t){if(0!==t)for(var i=Math.cos(t),s=Math.sin(t),n=0;n<e.length;n++){var r,a=e[n];r=a.x*i-a.y*s,a.y=a.x*s+a.y*i,a.x=r}}},function(e,t,i){var s={};e.exports=s;var n=i(3),r=i(0),a=i(4),o=i(1),l=i(2);s.rectangle=function(e,t,i,s,o){o=o||{};var l={label:"Rectangle Body",position:{x:e,y:t},vertices:n.fromPath("L 0 0 L "+i+" 0 L "+i+" "+s+" L 0 "+s)};if(o.chamfer){var c=o.chamfer;l.vertices=n.chamfer(l.vertices,c.radius,c.quality,c.qualityMin,c.qualityMax),delete o.chamfer}return a.create(r.extend({},l,o))},s.trapezoid=function(e,t,i,s,o,l){l=l||{},o>=1&&r.warn("Bodies.trapezoid: slope parameter must be < 1.");var c,h=i*(o*=.5),u=h+(1-2*o)*i,d=u+h;c=o<.5?"L 0 0 L "+h+" "+-s+" L "+u+" "+-s+" L "+d+" 0":"L 0 0 L "+u+" "+-s+" L "+d+" 0";var p={label:"Trapezoid Body",position:{x:e,y:t},vertices:n.fromPath(c)};if(l.chamfer){var f=l.chamfer;p.vertices=n.chamfer(p.vertices,f.radius,f.quality,f.qualityMin,f.qualityMax),delete l.chamfer}return a.create(r.extend({},p,l))},s.circle=function(e,t,i,n,a){n=n||{};var o={label:"Circle Body",circleRadius:i};a=a||25;var l=Math.ceil(Math.max(10,Math.min(a,i)));return l%2==1&&(l+=1),s.polygon(e,t,l,i,r.extend({},o,n))},s.polygon=function(e,t,i,o,l){if(l=l||{},i<3)return s.circle(e,t,o,l);for(var c=2*Math.PI/i,h="",u=.5*c,d=0;d<i;d+=1){var p=u+d*c,f=Math.cos(p)*o,m=Math.sin(p)*o;h+="L "+f.toFixed(3)+" "+m.toFixed(3)+" "}var g={label:"Polygon Body",position:{x:e,y:t},vertices:n.fromPath(h)};if(l.chamfer){var y=l.chamfer;g.vertices=n.chamfer(g.vertices,y.radius,y.quality,y.qualityMin,y.qualityMax),delete l.chamfer}return a.create(r.extend({},g,l))},s.fromVertices=function(e,t,i,s,c,h,u,d){var p,f,m,g,y,v,b,_,x,w,S=r.getDecomp();for(p=Boolean(S&&S.quickDecomp),s=s||{},m=[],c=void 0!==c&&c,h=void 0!==h?h:.01,u=void 0!==u?u:10,d=void 0!==d?d:.01,r.isArray(i[0])||(i=[i]),x=0;x<i.length;x+=1)if(y=i[x],!(g=n.isConvex(y))&&!p&&r.warnOnce("Bodies.fromVertices: Install the 'poly-decomp' library and use Common.setDecomp or provide 'decomp' as a global to decompose concave vertices."),g||!p)y=g?n.clockwiseSort(y):n.hull(y),m.push({position:{x:e,y:t},vertices:y});else{var k=y.map(function(e){return[e.x,e.y]});S.makeCCW(k),!1!==h&&S.removeCollinearPoints(k,h),!1!==d&&S.removeDuplicatePoints&&S.removeDuplicatePoints(k,d);var T=S.quickDecomp(k);for(v=0;v<T.length;v++){var E=T[v].map(function(e){return{x:e[0],y:e[1]}});u>0&&n.area(E)<u||m.push({position:n.centre(E),vertices:E})}}for(v=0;v<m.length;v++)m[v]=a.create(r.extend(m[v],s));if(c)for(v=0;v<m.length;v++){var C=m[v];for(b=v+1;b<m.length;b++){var A=m[b];if(o.overlaps(C.bounds,A.bounds)){var M=C.vertices,P=A.vertices;for(_=0;_<C.vertices.length;_++)for(w=0;w<A.vertices.length;w++){var L=l.magnitudeSquared(l.sub(M[(_+1)%M.length],P[w])),I=l.magnitudeSquared(l.sub(M[_],P[(w+1)%P.length]));L<5&&I<5&&(M[_].isInternal=!0,P[w].isInternal=!0)}}}}return m.length>1?(f=a.create(r.extend({parts:m.slice(0)},s)),a.setPosition(f,{x:e,y:t}),f):m[0]}},function(e,t,i){var s={};e.exports=s;var n=i(0),r=i(8);s.create=function(e){return n.extend({bodies:[],collisions:[],pairs:null},e)},s.setBodies=function(e,t){e.bodies=t.slice(0)},s.clear=function(e){e.bodies=[],e.collisions=[]},s.collisions=function(e){var t,i,n=e.pairs,a=e.bodies,o=a.length,l=s.canCollide,c=r.collides,h=e.collisions,u=0;for(a.sort(s._compareBoundsX),t=0;t<o;t++){var d=a[t],p=d.bounds,f=d.bounds.max.x,m=d.bounds.max.y,g=d.bounds.min.y,y=d.isStatic||d.isSleeping,v=d.parts.length,b=1===v;for(i=t+1;i<o;i++){var _=a[i];if((A=_.bounds).min.x>f)break;if(!(m<A.min.y||g>A.max.y)&&(!y||!_.isStatic&&!_.isSleeping)&&l(d.collisionFilter,_.collisionFilter)){var x=_.parts.length;if(b&&1===x)(E=c(d,_,n))&&(h[u++]=E);else for(var w=x>1?1:0,S=v>1?1:0;S<v;S++)for(var k=d.parts[S],T=(p=k.bounds,w);T<x;T++){var E,C=_.parts[T],A=C.bounds;p.min.x>A.max.x||p.max.x<A.min.x||p.max.y<A.min.y||p.min.y>A.max.y||(E=c(k,C,n))&&(h[u++]=E)}}}}return h.length!==u&&(h.length=u),h},s.canCollide=function(e,t){return e.group===t.group&&0!==e.group?e.group>0:0!==(e.mask&t.category)&&0!==(t.mask&e.category)},s._compareBoundsX=function(e,t){return e.bounds.min.x-t.bounds.min.x}},function(e,t,i){var s={};e.exports=s;var n=i(0);s.create=function(e){var t={};return e||n.log("Mouse.create: element was undefined, defaulting to document.body","warn"),t.element=e||document.body,t.absolute={x:0,y:0},t.position={x:0,y:0},t.mousedownPosition={x:0,y:0},t.mouseupPosition={x:0,y:0},t.offset={x:0,y:0},t.scale={x:1,y:1},t.wheelDelta=0,t.button=-1,t.pixelRatio=parseInt(t.element.getAttribute("data-pixel-ratio"),10)||1,t.sourceEvents={mousemove:null,mousedown:null,mouseup:null,mousewheel:null},t.mousemove=function(e){var i=s._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&(t.button=0,e.preventDefault()),t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.sourceEvents.mousemove=e},t.mousedown=function(e){var i=s._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches?(t.button=0,e.preventDefault()):t.button=e.button,t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mousedownPosition.x=t.position.x,t.mousedownPosition.y=t.position.y,t.sourceEvents.mousedown=e},t.mouseup=function(e){var i=s._getRelativeMousePosition(e,t.element,t.pixelRatio);e.changedTouches&&e.preventDefault(),t.button=-1,t.absolute.x=i.x,t.absolute.y=i.y,t.position.x=t.absolute.x*t.scale.x+t.offset.x,t.position.y=t.absolute.y*t.scale.y+t.offset.y,t.mouseupPosition.x=t.position.x,t.mouseupPosition.y=t.position.y,t.sourceEvents.mouseup=e},t.mousewheel=function(e){t.wheelDelta=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),e.preventDefault(),t.sourceEvents.mousewheel=e},s.setElement(t,t.element),t},s.setElement=function(e,t){e.element=t,t.addEventListener("mousemove",e.mousemove,{passive:!0}),t.addEventListener("mousedown",e.mousedown,{passive:!0}),t.addEventListener("mouseup",e.mouseup,{passive:!0}),t.addEventListener("wheel",e.mousewheel,{passive:!1}),t.addEventListener("touchmove",e.mousemove,{passive:!1}),t.addEventListener("touchstart",e.mousedown,{passive:!1}),t.addEventListener("touchend",e.mouseup,{passive:!1})},s.clearSourceEvents=function(e){e.sourceEvents.mousemove=null,e.sourceEvents.mousedown=null,e.sourceEvents.mouseup=null,e.sourceEvents.mousewheel=null,e.wheelDelta=0},s.setOffset=function(e,t){e.offset.x=t.x,e.offset.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},s.setScale=function(e,t){e.scale.x=t.x,e.scale.y=t.y,e.position.x=e.absolute.x*e.scale.x+e.offset.x,e.position.y=e.absolute.y*e.scale.y+e.offset.y},s._getRelativeMousePosition=function(e,t,i){var s,n,r=t.getBoundingClientRect(),a=document.documentElement||document.body.parentNode||document.body,o=void 0!==window.pageXOffset?window.pageXOffset:a.scrollLeft,l=void 0!==window.pageYOffset?window.pageYOffset:a.scrollTop,c=e.changedTouches;return c?(s=c[0].pageX-r.left-o,n=c[0].pageY-r.top-l):(s=e.pageX-r.left-o,n=e.pageY-r.top-l),{x:s/(t.clientWidth/(t.width||t.clientWidth)*i),y:n/(t.clientHeight/(t.height||t.clientHeight)*i)}}},function(e,t,i){var s={};e.exports=s;var n=i(0);s._registry={},s.register=function(e){if(s.isPlugin(e)||n.warn("Plugin.register:",s.toString(e),"does not implement all required fields."),e.name in s._registry){var t=s._registry[e.name],i=s.versionParse(e.version).number,r=s.versionParse(t.version).number;i>r?(n.warn("Plugin.register:",s.toString(t),"was upgraded to",s.toString(e)),s._registry[e.name]=e):i<r?n.warn("Plugin.register:",s.toString(t),"can not be downgraded to",s.toString(e)):e!==t&&n.warn("Plugin.register:",s.toString(e),"is already registered to different plugin object")}else s._registry[e.name]=e;return e},s.resolve=function(e){return s._registry[s.dependencyParse(e).name]},s.toString=function(e){return"string"==typeof e?e:(e.name||"anonymous")+"@"+(e.version||e.range||"0.0.0")},s.isPlugin=function(e){return e&&e.name&&e.version&&e.install},s.isUsed=function(e,t){return e.used.indexOf(t)>-1},s.isFor=function(e,t){var i=e.for&&s.dependencyParse(e.for);return!e.for||t.name===i.name&&s.versionSatisfies(t.version,i.range)},s.use=function(e,t){if(e.uses=(e.uses||[]).concat(t||[]),0!==e.uses.length){for(var i=s.dependencies(e),r=n.topologicalSort(i),a=[],o=0;o<r.length;o+=1)if(r[o]!==e.name){var l=s.resolve(r[o]);l?s.isUsed(e,l.name)||(s.isFor(l,e)||(n.warn("Plugin.use:",s.toString(l),"is for",l.for,"but installed on",s.toString(e)+"."),l._warned=!0),l.install?l.install(e):(n.warn("Plugin.use:",s.toString(l),"does not specify an install function."),l._warned=!0),l._warned?(a.push("ðŸ”¶ "+s.toString(l)),delete l._warned):a.push("âœ… "+s.toString(l)),e.used.push(l.name)):a.push("âŒ "+r[o])}a.length>0&&n.info(a.join("  "))}else n.warn("Plugin.use:",s.toString(e),"does not specify any dependencies to install.")},s.dependencies=function(e,t){var i=s.dependencyParse(e),r=i.name;if(!(r in(t=t||{}))){e=s.resolve(e)||e,t[r]=n.map(e.uses||[],function(t){s.isPlugin(t)&&s.register(t);var r=s.dependencyParse(t),a=s.resolve(t);return a&&!s.versionSatisfies(a.version,r.range)?(n.warn("Plugin.dependencies:",s.toString(a),"does not satisfy",s.toString(r),"used by",s.toString(i)+"."),a._warned=!0,e._warned=!0):a||(n.warn("Plugin.dependencies:",s.toString(t),"used by",s.toString(i),"could not be resolved."),e._warned=!0),r.name});for(var a=0;a<t[r].length;a+=1)s.dependencies(t[r][a],t);return t}},s.dependencyParse=function(e){return n.isString(e)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-+]+)?))?$/.test(e)||n.warn("Plugin.dependencyParse:",e,"is not a valid dependency string."),{name:e.split("@")[0],range:e.split("@")[1]||"*"}):{name:e.name,range:e.range||e.version}},s.versionParse=function(e){var t=/^(\*)|(\^|~|>=|>)?\s*((\d+)\.(\d+)\.(\d+))(-[0-9A-Za-z-+]+)?$/;t.test(e)||n.warn("Plugin.versionParse:",e,"is not a valid version or range.");var i=t.exec(e),s=Number(i[4]),r=Number(i[5]),a=Number(i[6]);return{isRange:Boolean(i[1]||i[2]),version:i[3],range:e,operator:i[1]||i[2]||"",major:s,minor:r,patch:a,parts:[s,r,a],prerelease:i[7],number:1e8*s+1e4*r+a}},s.versionSatisfies=function(e,t){t=t||"*";var i=s.versionParse(t),n=s.versionParse(e);if(i.isRange){if("*"===i.operator||"*"===e)return!0;if(">"===i.operator)return n.number>i.number;if(">="===i.operator)return n.number>=i.number;if("~"===i.operator)return n.major===i.major&&n.minor===i.minor&&n.patch>=i.patch;if("^"===i.operator)return i.major>0?n.major===i.major&&n.number>=i.number:i.minor>0?n.minor===i.minor&&n.patch>=i.patch:n.patch===i.patch}return e===t||"*"===e}},function(e,t){var i={};e.exports=i,i.create=function(e){return{vertex:e,normalImpulse:0,tangentImpulse:0}}},function(e,t,i){var s={};e.exports=s;var n=i(7),r=i(18),a=i(13),o=i(19),l=i(5),c=i(6),h=i(10),u=i(0),d=i(4);s._deltaMax=1e3/60,s.create=function(e){e=e||{};var t=u.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},gravity:{x:0,y:1,scale:.001},timing:{timestamp:0,timeScale:1,lastDelta:0,lastElapsed:0,lastUpdatesPerFrame:0}},e);return t.world=e.world||c.create({label:"World"}),t.pairs=e.pairs||o.create(),t.detector=e.detector||a.create(),t.detector.pairs=t.pairs,t.grid={buckets:[]},t.world.gravity=t.gravity,t.broadphase=t.grid,t.metrics={},t},s.update=function(e,t){var i,d=u.now(),p=e.world,f=e.detector,m=e.pairs,g=e.timing,y=g.timestamp;t>s._deltaMax&&u.warnOnce("Matter.Engine.update: delta argument is recommended to be less than or equal to",s._deltaMax.toFixed(3),"ms."),t=void 0!==t?t:u._baseDelta,t*=g.timeScale,g.timestamp+=t,g.lastDelta=t;var v={timestamp:g.timestamp,delta:t};l.trigger(e,"beforeUpdate",v);var b=c.allBodies(p),_=c.allConstraints(p);for(p.isModified&&(a.setBodies(f,b),c.setModified(p,!1,!1,!0)),e.enableSleeping&&n.update(b,t),s._bodiesApplyGravity(b,e.gravity),t>0&&s._bodiesUpdate(b,t),l.trigger(e,"beforeSolve",v),h.preSolveAll(b),i=0;i<e.constraintIterations;i++)h.solveAll(_,t);h.postSolveAll(b);var x=a.collisions(f);o.update(m,x,y),e.enableSleeping&&n.afterCollisions(m.list),m.collisionStart.length>0&&l.trigger(e,"collisionStart",{pairs:m.collisionStart,timestamp:g.timestamp,delta:t});var w=u.clamp(20/e.positionIterations,0,1);for(r.preSolvePosition(m.list),i=0;i<e.positionIterations;i++)r.solvePosition(m.list,t,w);for(r.postSolvePosition(b),h.preSolveAll(b),i=0;i<e.constraintIterations;i++)h.solveAll(_,t);for(h.postSolveAll(b),r.preSolveVelocity(m.list),i=0;i<e.velocityIterations;i++)r.solveVelocity(m.list,t);return s._bodiesUpdateVelocities(b),m.collisionActive.length>0&&l.trigger(e,"collisionActive",{pairs:m.collisionActive,timestamp:g.timestamp,delta:t}),m.collisionEnd.length>0&&l.trigger(e,"collisionEnd",{pairs:m.collisionEnd,timestamp:g.timestamp,delta:t}),s._bodiesClearForces(b),l.trigger(e,"afterUpdate",v),e.timing.lastElapsed=u.now()-d,e},s.merge=function(e,t){if(u.extend(e,t),t.world){e.world=t.world,s.clear(e);for(var i=c.allBodies(e.world),r=0;r<i.length;r++){var a=i[r];n.set(a,!1),a.id=u.nextId()}}},s.clear=function(e){o.clear(e.pairs),a.clear(e.detector)},s._bodiesClearForces=function(e){for(var t=e.length,i=0;i<t;i++){var s=e[i];s.force.x=0,s.force.y=0,s.torque=0}},s._bodiesApplyGravity=function(e,t){var i=void 0!==t.scale?t.scale:.001,s=e.length;if((0!==t.x||0!==t.y)&&0!==i)for(var n=0;n<s;n++){var r=e[n];r.isStatic||r.isSleeping||(r.force.y+=r.mass*t.y*i,r.force.x+=r.mass*t.x*i)}},s._bodiesUpdate=function(e,t){for(var i=e.length,s=0;s<i;s++){var n=e[s];n.isStatic||n.isSleeping||d.update(n,t)}},s._bodiesUpdateVelocities=function(e){for(var t=e.length,i=0;i<t;i++)d.updateVelocities(e[i])}},function(e,t,i){var s={};e.exports=s;var n=i(3),r=i(0),a=i(1);s._restingThresh=2,s._restingThreshTangent=Math.sqrt(6),s._positionDampen=.9,s._positionWarming=.8,s._frictionNormalMultiplier=5,s._frictionMaxStatic=Number.MAX_VALUE,s.preSolvePosition=function(e){var t,i,s,n=e.length;for(t=0;t<n;t++)(i=e[t]).isActive&&(s=i.contactCount,i.collision.parentA.totalContacts+=s,i.collision.parentB.totalContacts+=s)},s.solvePosition=function(e,t,i){var n,a,o,l,c,h,u,d,p=s._positionDampen*(i||1),f=r.clamp(t/r._baseDelta,0,1),m=e.length;for(n=0;n<m;n++)(a=e[n]).isActive&&!a.isSensor&&(l=(o=a.collision).parentA,c=o.parentB,h=o.normal,a.separation=o.depth+h.x*(c.positionImpulse.x-l.positionImpulse.x)+h.y*(c.positionImpulse.y-l.positionImpulse.y));for(n=0;n<m;n++)(a=e[n]).isActive&&!a.isSensor&&(l=(o=a.collision).parentA,c=o.parentB,h=o.normal,d=a.separation-a.slop*f,(l.isStatic||c.isStatic)&&(d*=2),l.isStatic||l.isSleeping||(u=p/l.totalContacts,l.positionImpulse.x+=h.x*d*u,l.positionImpulse.y+=h.y*d*u),c.isStatic||c.isSleeping||(u=p/c.totalContacts,c.positionImpulse.x-=h.x*d*u,c.positionImpulse.y-=h.y*d*u))},s.postSolvePosition=function(e){for(var t=s._positionWarming,i=e.length,r=n.translate,o=a.update,l=0;l<i;l++){var c=e[l],h=c.positionImpulse,u=h.x,d=h.y,p=c.velocity;if(c.totalContacts=0,0!==u||0!==d){for(var f=0;f<c.parts.length;f++){var m=c.parts[f];r(m.vertices,h),o(m.bounds,m.vertices,p),m.position.x+=u,m.position.y+=d}c.positionPrev.x+=u,c.positionPrev.y+=d,u*p.x+d*p.y<0?(h.x=0,h.y=0):(h.x*=t,h.y*=t)}}},s.preSolveVelocity=function(e){var t,i,s=e.length;for(t=0;t<s;t++){var n=e[t];if(n.isActive&&!n.isSensor){var r=n.contacts,a=n.contactCount,o=n.collision,l=o.parentA,c=o.parentB,h=o.normal,u=o.tangent;for(i=0;i<a;i++){var d=r[i],p=d.vertex,f=d.normalImpulse,m=d.tangentImpulse;if(0!==f||0!==m){var g=h.x*f+u.x*m,y=h.y*f+u.y*m;l.isStatic||l.isSleeping||(l.positionPrev.x+=g*l.inverseMass,l.positionPrev.y+=y*l.inverseMass,l.anglePrev+=l.inverseInertia*((p.x-l.position.x)*y-(p.y-l.position.y)*g)),c.isStatic||c.isSleeping||(c.positionPrev.x-=g*c.inverseMass,c.positionPrev.y-=y*c.inverseMass,c.anglePrev-=c.inverseInertia*((p.x-c.position.x)*y-(p.y-c.position.y)*g))}}}}},s.solveVelocity=function(e,t){var i,n,a,o,l=t/r._baseDelta,c=l*l*l,h=-s._restingThresh*l,u=s._restingThreshTangent,d=s._frictionNormalMultiplier*l,p=s._frictionMaxStatic,f=e.length;for(a=0;a<f;a++){var m=e[a];if(m.isActive&&!m.isSensor){var g=m.collision,y=g.parentA,v=g.parentB,b=g.normal.x,_=g.normal.y,x=g.tangent.x,w=g.tangent.y,S=m.inverseMass,k=m.friction*m.frictionStatic*d,T=m.contacts,E=m.contactCount,C=1/E,A=y.position.x-y.positionPrev.x,M=y.position.y-y.positionPrev.y,P=y.angle-y.anglePrev,L=v.position.x-v.positionPrev.x,I=v.position.y-v.positionPrev.y,R=v.angle-v.anglePrev;for(o=0;o<E;o++){var O=T[o],F=O.vertex,B=F.x-y.position.x,D=F.y-y.position.y,j=F.x-v.position.x,N=F.y-v.position.y,V=A-D*P-(L-N*R),z=M+B*P-(I+j*R),H=b*V+_*z,q=x*V+w*z,$=m.separation+H,U=Math.min($,1),W=(U=$<0?0:U)*k;q<-W||q>W?(n=q>0?q:-q,(i=m.friction*(q>0?1:-1)*c)<-n?i=-n:i>n&&(i=n)):(i=q,n=p);var G=B*_-D*b,Y=j*_-N*b,X=C/(S+y.inverseInertia*G*G+v.inverseInertia*Y*Y),K=(1+m.restitution)*H*X;if(i*=X,H<h)O.normalImpulse=0;else{var Z=O.normalImpulse;O.normalImpulse+=K,O.normalImpulse>0&&(O.normalImpulse=0),K=O.normalImpulse-Z}if(q<-u||q>u)O.tangentImpulse=0;else{var J=O.tangentImpulse;O.tangentImpulse+=i,O.tangentImpulse<-n&&(O.tangentImpulse=-n),O.tangentImpulse>n&&(O.tangentImpulse=n),i=O.tangentImpulse-J}var Q=b*K+x*i,ee=_*K+w*i;y.isStatic||y.isSleeping||(y.positionPrev.x+=Q*y.inverseMass,y.positionPrev.y+=ee*y.inverseMass,y.anglePrev+=(B*ee-D*Q)*y.inverseInertia),v.isStatic||v.isSleeping||(v.positionPrev.x-=Q*v.inverseMass,v.positionPrev.y-=ee*v.inverseMass,v.anglePrev-=(j*ee-N*Q)*v.inverseInertia)}}}}},function(e,t,i){var s={};e.exports=s;var n=i(9),r=i(0);s.create=function(e){return r.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},e)},s.update=function(e,t,i){var s,r,a,o=n.update,l=n.create,c=n.setActive,h=e.table,u=e.list,d=u.length,p=d,f=e.collisionStart,m=e.collisionEnd,g=e.collisionActive,y=t.length,v=0,b=0,_=0;for(a=0;a<y;a++)(r=(s=t[a]).pair)?(r.isActive&&(g[_++]=r),o(r,s,i)):(h[(r=l(s,i)).id]=r,f[v++]=r,u[p++]=r);for(p=0,d=u.length,a=0;a<d;a++)(r=u[a]).timeUpdated>=i?u[p++]=r:(c(r,!1,i),r.collision.bodyA.sleepCounter>0&&r.collision.bodyB.sleepCounter>0?u[p++]=r:(m[b++]=r,delete h[r.id]));u.length!==p&&(u.length=p),f.length!==v&&(f.length=v),m.length!==b&&(m.length=b),g.length!==_&&(g.length=_)},s.clear=function(e){return e.table={},e.list.length=0,e.collisionStart.length=0,e.collisionActive.length=0,e.collisionEnd.length=0,e}},function(e,t,i){var s=e.exports=i(21);s.Axes=i(11),s.Bodies=i(12),s.Body=i(4),s.Bounds=i(1),s.Collision=i(8),s.Common=i(0),s.Composite=i(6),s.Composites=i(22),s.Constraint=i(10),s.Contact=i(16),s.Detector=i(13),s.Engine=i(17),s.Events=i(5),s.Grid=i(23),s.Mouse=i(14),s.MouseConstraint=i(24),s.Pair=i(9),s.Pairs=i(19),s.Plugin=i(15),s.Query=i(25),s.Render=i(26),s.Resolver=i(18),s.Runner=i(27),s.SAT=i(28),s.Sleeping=i(7),s.Svg=i(29),s.Vector=i(2),s.Vertices=i(3),s.World=i(30),s.Engine.run=s.Runner.run,s.Common.deprecated(s.Engine,"run","Engine.run âž¤ use Matter.Runner.run(engine) instead")},function(e,t,i){var s={};e.exports=s;var n=i(15),r=i(0);s.name="matter-js",s.version="0.20.0",s.uses=[],s.used=[],s.use=function(){n.use(s,Array.prototype.slice.call(arguments))},s.before=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathBefore(s,e,t)},s.after=function(e,t){return e=e.replace(/^Matter./,""),r.chainPathAfter(s,e,t)}},function(e,t,i){var s={};e.exports=s;var n=i(6),r=i(10),a=i(0),o=i(4),l=i(12),c=a.deprecated;s.stack=function(e,t,i,s,r,a,l){for(var c,h=n.create({label:"Stack"}),u=e,d=t,p=0,f=0;f<s;f++){for(var m=0,g=0;g<i;g++){var y=l(u,d,g,f,c,p);if(y){var v=y.bounds.max.y-y.bounds.min.y,b=y.bounds.max.x-y.bounds.min.x;v>m&&(m=v),o.translate(y,{x:.5*b,y:.5*v}),u=y.bounds.max.x+r,n.addBody(h,y),c=y,p+=1}else u+=r}d+=m+a,u=e}return h},s.chain=function(e,t,i,s,o,l){for(var c=e.bodies,h=1;h<c.length;h++){var u=c[h-1],d=c[h],p=u.bounds.max.y-u.bounds.min.y,f=u.bounds.max.x-u.bounds.min.x,m=d.bounds.max.y-d.bounds.min.y,g={bodyA:u,pointA:{x:f*t,y:p*i},bodyB:d,pointB:{x:(d.bounds.max.x-d.bounds.min.x)*s,y:m*o}},y=a.extend(g,l);n.addConstraint(e,r.create(y))}return e.label+=" Chain",e},s.mesh=function(e,t,i,s,o){var l,c,h,u,d,p=e.bodies;for(l=0;l<i;l++){for(c=1;c<t;c++)h=p[c-1+l*t],u=p[c+l*t],n.addConstraint(e,r.create(a.extend({bodyA:h,bodyB:u},o)));if(l>0)for(c=0;c<t;c++)h=p[c+(l-1)*t],u=p[c+l*t],n.addConstraint(e,r.create(a.extend({bodyA:h,bodyB:u},o))),s&&c>0&&(d=p[c-1+(l-1)*t],n.addConstraint(e,r.create(a.extend({bodyA:d,bodyB:u},o)))),s&&c<t-1&&(d=p[c+1+(l-1)*t],n.addConstraint(e,r.create(a.extend({bodyA:d,bodyB:u},o))))}return e.label+=" Mesh",e},s.pyramid=function(e,t,i,n,r,a,l){return s.stack(e,t,i,n,r,a,function(t,s,a,c,h,u){var d=Math.min(n,Math.ceil(i/2)),p=h?h.bounds.max.x-h.bounds.min.x:0;if(!(c>d||a<(c=d-c)||a>i-1-c))return 1===u&&o.translate(h,{x:(a+(i%2==1?1:-1))*p,y:0}),l(e+(h?a*p:0)+a*r,s,a,c,h,u)})},s.newtonsCradle=function(e,t,i,s,a){for(var o=n.create({label:"Newtons Cradle"}),c=0;c<i;c++){var h=l.circle(e+c*(1.9*s),t+a,s,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),u=r.create({pointA:{x:e+c*(1.9*s),y:t},bodyB:h});n.addBody(o,h),n.addConstraint(o,u)}return o},c(s,"newtonsCradle","Composites.newtonsCradle âž¤ moved to newtonsCradle example"),s.car=function(e,t,i,s,a){var c=o.nextGroup(!0),h=.5*-i+20,u=.5*i-20,d=n.create({label:"Car"}),p=l.rectangle(e,t,i,s,{collisionFilter:{group:c},chamfer:{radius:.5*s},density:2e-4}),f=l.circle(e+h,t+0,a,{collisionFilter:{group:c},friction:.8}),m=l.circle(e+u,t+0,a,{collisionFilter:{group:c},friction:.8}),g=r.create({bodyB:p,pointB:{x:h,y:0},bodyA:f,stiffness:1,length:0}),y=r.create({bodyB:p,pointB:{x:u,y:0},bodyA:m,stiffness:1,length:0});return n.addBody(d,p),n.addBody(d,f),n.addBody(d,m),n.addConstraint(d,g),n.addConstraint(d,y),d},c(s,"car","Composites.car âž¤ moved to car example"),s.softBody=function(e,t,i,n,r,o,c,h,u,d){u=a.extend({inertia:1/0},u),d=a.extend({stiffness:.2,render:{type:"line",anchors:!1}},d);var p=s.stack(e,t,i,n,r,o,function(e,t){return l.circle(e,t,h,u)});return s.mesh(p,i,n,c,d),p.label="Soft Body",p},c(s,"softBody","Composites.softBody âž¤ moved to softBody and cloth examples")},function(e,t,i){var s={};e.exports=s;var n=i(9),r=i(0),a=r.deprecated;s.create=function(e){return r.extend({buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},e)},s.update=function(e,t,i,n){var r,a,o,l,c,h=i.world,u=e.buckets,d=!1;for(r=0;r<t.length;r++){var p=t[r];if((!p.isSleeping||n)&&(!h.bounds||!(p.bounds.max.x<h.bounds.min.x||p.bounds.min.x>h.bounds.max.x||p.bounds.max.y<h.bounds.min.y||p.bounds.min.y>h.bounds.max.y))){var f=s._getRegion(e,p);if(!p.region||f.id!==p.region.id||n){p.region&&!n||(p.region=f);var m=s._regionUnion(f,p.region);for(a=m.startCol;a<=m.endCol;a++)for(o=m.startRow;o<=m.endRow;o++){l=u[c=s._getBucketId(a,o)];var g=a>=f.startCol&&a<=f.endCol&&o>=f.startRow&&o<=f.endRow,y=a>=p.region.startCol&&a<=p.region.endCol&&o>=p.region.startRow&&o<=p.region.endRow;!g&&y&&y&&l&&s._bucketRemoveBody(e,l,p),(p.region===f||g&&!y||n)&&(l||(l=s._createBucket(u,c)),s._bucketAddBody(e,l,p))}p.region=f,d=!0}}}d&&(e.pairsList=s._createActivePairsList(e))},a(s,"update","Grid.update âž¤ replaced by Matter.Detector"),s.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},a(s,"clear","Grid.clear âž¤ replaced by Matter.Detector"),s._regionUnion=function(e,t){var i=Math.min(e.startCol,t.startCol),n=Math.max(e.endCol,t.endCol),r=Math.min(e.startRow,t.startRow),a=Math.max(e.endRow,t.endRow);return s._createRegion(i,n,r,a)},s._getRegion=function(e,t){var i=t.bounds,n=Math.floor(i.min.x/e.bucketWidth),r=Math.floor(i.max.x/e.bucketWidth),a=Math.floor(i.min.y/e.bucketHeight),o=Math.floor(i.max.y/e.bucketHeight);return s._createRegion(n,r,a,o)},s._createRegion=function(e,t,i,s){return{id:e+","+t+","+i+","+s,startCol:e,endCol:t,startRow:i,endRow:s}},s._getBucketId=function(e,t){return"C"+e+"R"+t},s._createBucket=function(e,t){return e[t]=[]},s._bucketAddBody=function(e,t,i){var s,r=e.pairs,a=n.id,o=t.length;for(s=0;s<o;s++){var l=t[s];if(!(i.id===l.id||i.isStatic&&l.isStatic)){var c=a(i,l),h=r[c];h?h[2]+=1:r[c]=[i,l,1]}}t.push(i)},s._bucketRemoveBody=function(e,t,i){var s,a=e.pairs,o=n.id;t.splice(r.indexOf(t,i),1);var l=t.length;for(s=0;s<l;s++){var c=a[o(i,t[s])];c&&(c[2]-=1)}},s._createActivePairsList=function(e){var t,i,s=e.pairs,n=r.keys(s),a=n.length,o=[];for(i=0;i<a;i++)(t=s[n[i]])[2]>0?o.push(t):delete s[n[i]];return o}},function(e,t,i){var s={};e.exports=s;var n=i(3),r=i(7),a=i(14),o=i(5),l=i(13),c=i(10),h=i(6),u=i(0),d=i(1);s.create=function(e,t){var i=(e?e.mouse:null)||(t?t.mouse:null);i||(e&&e.render&&e.render.canvas?i=a.create(e.render.canvas):t&&t.element?i=a.create(t.element):(i=a.create(),u.warn("MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected")));var n={type:"mouseConstraint",mouse:i,element:null,body:null,constraint:c.create({label:"Mouse Constraint",pointA:i.position,pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,render:{strokeStyle:"#90EE90",lineWidth:3}}),collisionFilter:{category:1,mask:4294967295,group:0}},r=u.extend(n,t);return o.on(e,"beforeUpdate",function(){var t=h.allBodies(e.world);s.update(r,t),s._triggerEvents(r)}),r},s.update=function(e,t){var i=e.mouse,s=e.constraint,a=e.body;if(0===i.button){if(s.bodyB)r.set(s.bodyB,!1),s.pointA=i.position;else for(var c=0;c<t.length;c++)if(a=t[c],d.contains(a.bounds,i.position)&&l.canCollide(a.collisionFilter,e.collisionFilter))for(var h=a.parts.length>1?1:0;h<a.parts.length;h++){var u=a.parts[h];if(n.contains(u.vertices,i.position)){s.pointA=i.position,s.bodyB=e.body=a,s.pointB={x:i.position.x-a.position.x,y:i.position.y-a.position.y},s.angleB=a.angle,r.set(a,!1),o.trigger(e,"startdrag",{mouse:i,body:a});break}}}else s.bodyB=e.body=null,s.pointB=null,a&&o.trigger(e,"enddrag",{mouse:i,body:a})},s._triggerEvents=function(e){var t=e.mouse,i=t.sourceEvents;i.mousemove&&o.trigger(e,"mousemove",{mouse:t}),i.mousedown&&o.trigger(e,"mousedown",{mouse:t}),i.mouseup&&o.trigger(e,"mouseup",{mouse:t}),a.clearSourceEvents(t)}},function(e,t,i){var s={};e.exports=s;var n=i(2),r=i(8),a=i(1),o=i(12),l=i(3);s.collides=function(e,t){for(var i=[],s=t.length,n=e.bounds,o=r.collides,l=a.overlaps,c=0;c<s;c++){var h=t[c],u=h.parts.length,d=1===u?0:1;if(l(h.bounds,n))for(var p=d;p<u;p++){var f=h.parts[p];if(l(f.bounds,n)){var m=o(f,e);if(m){i.push(m);break}}}}return i},s.ray=function(e,t,i,r){r=r||1e-100;for(var a=n.angle(t,i),l=n.magnitude(n.sub(t,i)),c=.5*(i.x+t.x),h=.5*(i.y+t.y),u=o.rectangle(c,h,l,r,{angle:a}),d=s.collides(u,e),p=0;p<d.length;p+=1){var f=d[p];f.body=f.bodyB=f.bodyA}return d},s.region=function(e,t,i){for(var s=[],n=0;n<e.length;n++){var r=e[n],o=a.overlaps(r.bounds,t);(o&&!i||!o&&i)&&s.push(r)}return s},s.point=function(e,t){for(var i=[],s=0;s<e.length;s++){var n=e[s];if(a.contains(n.bounds,t))for(var r=1===n.parts.length?0:1;r<n.parts.length;r++){var o=n.parts[r];if(a.contains(o.bounds,t)&&l.contains(o.vertices,t)){i.push(n);break}}}return i}},function(e,t,i){var s={};e.exports=s;var n=i(4),r=i(0),a=i(6),o=i(1),l=i(5),c=i(2),h=i(14);!function(){var e,t;"undefined"!=typeof window&&(e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(function(){e(r.now())},1e3/60)},t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.webkitCancelAnimationFrame||window.msCancelAnimationFrame),s._goodFps=30,s._goodDelta=1e3/60,s.create=function(e){var t={engine:null,element:null,canvas:null,mouse:null,frameRequestId:null,timing:{historySize:60,delta:0,deltaHistory:[],lastTime:0,lastTimestamp:0,lastElapsed:0,timestampElapsed:0,timestampElapsedHistory:[],engineDeltaHistory:[],engineElapsedHistory:[],engineUpdatesHistory:[],elapsedHistory:[]},options:{width:800,height:600,pixelRatio:1,background:"#14151f",wireframeBackground:"#14151f",wireframeStrokeStyle:"#bbb",hasBounds:!!e.bounds,enabled:!0,wireframes:!0,showSleeping:!0,showDebug:!1,showStats:!1,showPerformance:!1,showBounds:!1,showVelocity:!1,showCollisions:!1,showSeparations:!1,showAxes:!1,showPositions:!1,showAngleIndicator:!1,showIds:!1,showVertexNumbers:!1,showConvexHulls:!1,showInternalEdges:!1,showMousePosition:!1}},i=r.extend(t,e);return i.canvas&&(i.canvas.width=i.options.width||i.canvas.width,i.canvas.height=i.options.height||i.canvas.height),i.mouse=e.mouse,i.engine=e.engine,i.canvas=i.canvas||d(i.options.width,i.options.height),i.context=i.canvas.getContext("2d"),i.textures={},i.bounds=i.bounds||{min:{x:0,y:0},max:{x:i.canvas.width,y:i.canvas.height}},i.controller=s,i.options.showBroadphase=!1,1!==i.options.pixelRatio&&s.setPixelRatio(i,i.options.pixelRatio),r.isElement(i.element)&&i.element.appendChild(i.canvas),i},s.run=function(t){!function n(r){t.frameRequestId=e(n),i(t,r),s.world(t,r),t.context.setTransform(t.options.pixelRatio,0,0,t.options.pixelRatio,0,0),(t.options.showStats||t.options.showDebug)&&s.stats(t,t.context,r),(t.options.showPerformance||t.options.showDebug)&&s.performance(t,t.context,r),t.context.setTransform(1,0,0,1,0,0)}()},s.stop=function(e){t(e.frameRequestId)},s.setPixelRatio=function(e,t){var i=e.options,s=e.canvas;"auto"===t&&(t=p(s)),i.pixelRatio=t,s.setAttribute("data-pixel-ratio",t),s.width=i.width*t,s.height=i.height*t,s.style.width=i.width+"px",s.style.height=i.height+"px"},s.setSize=function(e,t,i){e.options.width=t,e.options.height=i,e.bounds.max.x=e.bounds.min.x+t,e.bounds.max.y=e.bounds.min.y+i,1!==e.options.pixelRatio?s.setPixelRatio(e,e.options.pixelRatio):(e.canvas.width=t,e.canvas.height=i)},s.lookAt=function(e,t,i,s){s=void 0===s||s,t=r.isArray(t)?t:[t],i=i||{x:0,y:0};for(var n={min:{x:1/0,y:1/0},max:{x:-1/0,y:-1/0}},a=0;a<t.length;a+=1){var o=t[a],l=o.bounds?o.bounds.min:o.min||o.position||o,c=o.bounds?o.bounds.max:o.max||o.position||o;l&&c&&(l.x<n.min.x&&(n.min.x=l.x),c.x>n.max.x&&(n.max.x=c.x),l.y<n.min.y&&(n.min.y=l.y),c.y>n.max.y&&(n.max.y=c.y))}var u=n.max.x-n.min.x+2*i.x,d=n.max.y-n.min.y+2*i.y,p=e.canvas.height,f=e.canvas.width/p,m=u/d,g=1,y=1;m>f?y=m/f:g=f/m,e.options.hasBounds=!0,e.bounds.min.x=n.min.x,e.bounds.max.x=n.min.x+u*g,e.bounds.min.y=n.min.y,e.bounds.max.y=n.min.y+d*y,s&&(e.bounds.min.x+=.5*u-u*g*.5,e.bounds.max.x+=.5*u-u*g*.5,e.bounds.min.y+=.5*d-d*y*.5,e.bounds.max.y+=.5*d-d*y*.5),e.bounds.min.x-=i.x,e.bounds.max.x-=i.x,e.bounds.min.y-=i.y,e.bounds.max.y-=i.y,e.mouse&&(h.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.canvas.width,y:(e.bounds.max.y-e.bounds.min.y)/e.canvas.height}),h.setOffset(e.mouse,e.bounds.min))},s.startViewTransform=function(e){var t=e.bounds.max.x-e.bounds.min.x,i=e.bounds.max.y-e.bounds.min.y,s=t/e.options.width,n=i/e.options.height;e.context.setTransform(e.options.pixelRatio/s,0,0,e.options.pixelRatio/n,0,0),e.context.translate(-e.bounds.min.x,-e.bounds.min.y)},s.endViewTransform=function(e){e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0)},s.world=function(e,t){var i,n=r.now(),u=e.engine,d=u.world,p=e.canvas,f=e.context,g=e.options,y=e.timing,v=a.allBodies(d),b=a.allConstraints(d),_=g.wireframes?g.wireframeBackground:g.background,x=[],w=[],S={timestamp:u.timing.timestamp};if(l.trigger(e,"beforeRender",S),e.currentBackground!==_&&m(e,_),f.globalCompositeOperation="source-in",f.fillStyle="transparent",f.fillRect(0,0,p.width,p.height),f.globalCompositeOperation="source-over",g.hasBounds){for(i=0;i<v.length;i++){var k=v[i];o.overlaps(k.bounds,e.bounds)&&x.push(k)}for(i=0;i<b.length;i++){var T=b[i],E=T.bodyA,C=T.bodyB,A=T.pointA,M=T.pointB;E&&(A=c.add(E.position,T.pointA)),C&&(M=c.add(C.position,T.pointB)),A&&M&&(o.contains(e.bounds,A)||o.contains(e.bounds,M))&&w.push(T)}s.startViewTransform(e),e.mouse&&(h.setScale(e.mouse,{x:(e.bounds.max.x-e.bounds.min.x)/e.options.width,y:(e.bounds.max.y-e.bounds.min.y)/e.options.height}),h.setOffset(e.mouse,e.bounds.min))}else w=b,x=v,1!==e.options.pixelRatio&&e.context.setTransform(e.options.pixelRatio,0,0,e.options.pixelRatio,0,0);!g.wireframes||u.enableSleeping&&g.showSleeping?s.bodies(e,x,f):(g.showConvexHulls&&s.bodyConvexHulls(e,x,f),s.bodyWireframes(e,x,f)),g.showBounds&&s.bodyBounds(e,x,f),(g.showAxes||g.showAngleIndicator)&&s.bodyAxes(e,x,f),g.showPositions&&s.bodyPositions(e,x,f),g.showVelocity&&s.bodyVelocity(e,x,f),g.showIds&&s.bodyIds(e,x,f),g.showSeparations&&s.separations(e,u.pairs.list,f),g.showCollisions&&s.collisions(e,u.pairs.list,f),g.showVertexNumbers&&s.vertexNumbers(e,x,f),g.showMousePosition&&s.mousePosition(e,e.mouse,f),s.constraints(w,f),g.hasBounds&&s.endViewTransform(e),l.trigger(e,"afterRender",S),y.lastElapsed=r.now()-n},s.stats=function(e,t,i){for(var s=e.engine,n=s.world,r=a.allBodies(n),o=0,l=0,c=0;c<r.length;c+=1)o+=r[c].parts.length;var h={Part:o,Body:r.length,Cons:a.allConstraints(n).length,Comp:a.allComposites(n).length,Pair:s.pairs.list.length};for(var u in t.fillStyle="#0e0f19",t.fillRect(l,0,302.5,44),t.font="12px Arial",t.textBaseline="top",t.textAlign="right",h){var d=h[u];t.fillStyle="#aaa",t.fillText(u,l+55,8),t.fillStyle="#eee",t.fillText(d,l+55,26),l+=55}},s.performance=function(e,t){var i=e.engine,n=e.timing,a=n.deltaHistory,o=n.elapsedHistory,l=n.timestampElapsedHistory,c=n.engineDeltaHistory,h=n.engineUpdatesHistory,d=n.engineElapsedHistory,p=i.timing.lastUpdatesPerFrame,f=i.timing.lastDelta,m=u(a),g=u(o),y=u(c),v=u(h),b=u(d),_=u(l)/m||0,x=Math.round(m/f),w=1e3/m||0,S=60,k=69;t.fillStyle="#0e0f19",t.fillRect(0,50,442,34),s.status(t,10,k,S,4,a.length,Math.round(w)+" fps",w/s._goodFps,function(e){return a[e]/m-1}),s.status(t,82,k,S,4,c.length,f.toFixed(2)+" dt",s._goodDelta/f,function(e){return c[e]/y-1}),s.status(t,154,k,S,4,h.length,p+" upf",Math.pow(r.clamp(v/x||1,0,1),4),function(e){return h[e]/v-1}),s.status(t,226,k,S,4,d.length,b.toFixed(2)+" ut",1-p*b/s._goodFps,function(e){return d[e]/b-1}),s.status(t,298,k,S,4,o.length,g.toFixed(2)+" rt",1-g/s._goodFps,function(e){return o[e]/g-1}),s.status(t,370,k,S,4,l.length,_.toFixed(2)+" x",_*_*_,function(e){return(l[e]/a[e]/_||0)-1})},s.status=function(e,t,i,s,n,a,o,l,c){e.strokeStyle="#888",e.fillStyle="#444",e.lineWidth=1,e.fillRect(t,i+7,s,1),e.beginPath(),e.moveTo(t,i+7-n*r.clamp(.4*c(0),-2,2));for(var h=0;h<s;h+=1)e.lineTo(t+h,i+7-(h<a?n*r.clamp(.4*c(h),-2,2):0));e.stroke(),e.fillStyle="hsl("+r.clamp(25+95*l,0,120)+",100%,60%)",e.fillRect(t,i-7,4,4),e.font="12px Arial",e.textBaseline="middle",e.textAlign="right",e.fillStyle="#eee",e.fillText(o,t+s,i-5)},s.constraints=function(e,t){for(var i=t,s=0;s<e.length;s++){var n=e[s];if(n.render.visible&&n.pointA&&n.pointB){var a,o,l=n.bodyA,h=n.bodyB;if(a=l?c.add(l.position,n.pointA):n.pointA,"pin"===n.render.type)i.beginPath(),i.arc(a.x,a.y,3,0,2*Math.PI),i.closePath();else{if(o=h?c.add(h.position,n.pointB):n.pointB,i.beginPath(),i.moveTo(a.x,a.y),"spring"===n.render.type)for(var u,d=c.sub(o,a),p=c.perp(c.normalise(d)),f=Math.ceil(r.clamp(n.length/5,12,20)),m=1;m<f;m+=1)u=m%2==0?1:-1,i.lineTo(a.x+d.x*(m/f)+p.x*u*4,a.y+d.y*(m/f)+p.y*u*4);i.lineTo(o.x,o.y)}n.render.lineWidth&&(i.lineWidth=n.render.lineWidth,i.strokeStyle=n.render.strokeStyle,i.stroke()),n.render.anchors&&(i.fillStyle=n.render.strokeStyle,i.beginPath(),i.arc(a.x,a.y,3,0,2*Math.PI),i.arc(o.x,o.y,3,0,2*Math.PI),i.closePath(),i.fill())}}},s.bodies=function(e,t,i){var s,n,r,a,o=i,l=(e.engine,e.options),c=l.showInternalEdges||!l.wireframes;for(r=0;r<t.length;r++)if((s=t[r]).render.visible)for(a=s.parts.length>1?1:0;a<s.parts.length;a++)if((n=s.parts[a]).render.visible){if(l.showSleeping&&s.isSleeping?o.globalAlpha=.5*n.render.opacity:1!==n.render.opacity&&(o.globalAlpha=n.render.opacity),n.render.sprite&&n.render.sprite.texture&&!l.wireframes){var h=n.render.sprite,u=f(e,h.texture);o.translate(n.position.x,n.position.y),o.rotate(n.angle),o.drawImage(u,u.width*-h.xOffset*h.xScale,u.height*-h.yOffset*h.yScale,u.width*h.xScale,u.height*h.yScale),o.rotate(-n.angle),o.translate(-n.position.x,-n.position.y)}else{if(n.circleRadius)o.beginPath(),o.arc(n.position.x,n.position.y,n.circleRadius,0,2*Math.PI);else{o.beginPath(),o.moveTo(n.vertices[0].x,n.vertices[0].y);for(var d=1;d<n.vertices.length;d++)!n.vertices[d-1].isInternal||c?o.lineTo(n.vertices[d].x,n.vertices[d].y):o.moveTo(n.vertices[d].x,n.vertices[d].y),n.vertices[d].isInternal&&!c&&o.moveTo(n.vertices[(d+1)%n.vertices.length].x,n.vertices[(d+1)%n.vertices.length].y);o.lineTo(n.vertices[0].x,n.vertices[0].y),o.closePath()}l.wireframes?(o.lineWidth=1,o.strokeStyle=e.options.wireframeStrokeStyle,o.stroke()):(o.fillStyle=n.render.fillStyle,n.render.lineWidth&&(o.lineWidth=n.render.lineWidth,o.strokeStyle=n.render.strokeStyle,o.stroke()),o.fill())}o.globalAlpha=1}},s.bodyWireframes=function(e,t,i){var s,n,r,a,o,l=i,c=e.options.showInternalEdges;for(l.beginPath(),r=0;r<t.length;r++)if((s=t[r]).render.visible)for(o=s.parts.length>1?1:0;o<s.parts.length;o++){for(n=s.parts[o],l.moveTo(n.vertices[0].x,n.vertices[0].y),a=1;a<n.vertices.length;a++)!n.vertices[a-1].isInternal||c?l.lineTo(n.vertices[a].x,n.vertices[a].y):l.moveTo(n.vertices[a].x,n.vertices[a].y),n.vertices[a].isInternal&&!c&&l.moveTo(n.vertices[(a+1)%n.vertices.length].x,n.vertices[(a+1)%n.vertices.length].y);l.lineTo(n.vertices[0].x,n.vertices[0].y)}l.lineWidth=1,l.strokeStyle=e.options.wireframeStrokeStyle,l.stroke()},s.bodyConvexHulls=function(e,t,i){var s,n,r,a=i;for(a.beginPath(),n=0;n<t.length;n++)if((s=t[n]).render.visible&&1!==s.parts.length){for(a.moveTo(s.vertices[0].x,s.vertices[0].y),r=1;r<s.vertices.length;r++)a.lineTo(s.vertices[r].x,s.vertices[r].y);a.lineTo(s.vertices[0].x,s.vertices[0].y)}a.lineWidth=1,a.strokeStyle="rgba(255,255,255,0.2)",a.stroke()},s.vertexNumbers=function(e,t,i){var s,n,r,a=i;for(s=0;s<t.length;s++){var o=t[s].parts;for(r=o.length>1?1:0;r<o.length;r++){var l=o[r];for(n=0;n<l.vertices.length;n++)a.fillStyle="rgba(255,255,255,0.2)",a.fillText(s+"_"+n,l.position.x+.8*(l.vertices[n].x-l.position.x),l.position.y+.8*(l.vertices[n].y-l.position.y))}}},s.mousePosition=function(e,t,i){var s=i;s.fillStyle="rgba(255,255,255,0.8)",s.fillText(t.position.x+"  "+t.position.y,t.position.x+5,t.position.y-5)},s.bodyBounds=function(e,t,i){var s=i,n=(e.engine,e.options);s.beginPath();for(var r=0;r<t.length;r++)if(t[r].render.visible)for(var a=t[r].parts,o=a.length>1?1:0;o<a.length;o++){var l=a[o];s.rect(l.bounds.min.x,l.bounds.min.y,l.bounds.max.x-l.bounds.min.x,l.bounds.max.y-l.bounds.min.y)}n.wireframes?s.strokeStyle="rgba(255,255,255,0.08)":s.strokeStyle="rgba(0,0,0,0.1)",s.lineWidth=1,s.stroke()},s.bodyAxes=function(e,t,i){var s,n,r,a,o=i,l=(e.engine,e.options);for(o.beginPath(),n=0;n<t.length;n++){var c=t[n],h=c.parts;if(c.render.visible)if(l.showAxes)for(r=h.length>1?1:0;r<h.length;r++)for(s=h[r],a=0;a<s.axes.length;a++){var u=s.axes[a];o.moveTo(s.position.x,s.position.y),o.lineTo(s.position.x+20*u.x,s.position.y+20*u.y)}else for(r=h.length>1?1:0;r<h.length;r++)for(s=h[r],a=0;a<s.axes.length;a++)o.moveTo(s.position.x,s.position.y),o.lineTo((s.vertices[0].x+s.vertices[s.vertices.length-1].x)/2,(s.vertices[0].y+s.vertices[s.vertices.length-1].y)/2)}l.wireframes?(o.strokeStyle="indianred",o.lineWidth=1):(o.strokeStyle="rgba(255, 255, 255, 0.4)",o.globalCompositeOperation="overlay",o.lineWidth=2),o.stroke(),o.globalCompositeOperation="source-over"},s.bodyPositions=function(e,t,i){var s,n,r,a,o=i,l=(e.engine,e.options);for(o.beginPath(),r=0;r<t.length;r++)if((s=t[r]).render.visible)for(a=0;a<s.parts.length;a++)n=s.parts[a],o.arc(n.position.x,n.position.y,3,0,2*Math.PI,!1),o.closePath();for(l.wireframes?o.fillStyle="indianred":o.fillStyle="rgba(0,0,0,0.5)",o.fill(),o.beginPath(),r=0;r<t.length;r++)(s=t[r]).render.visible&&(o.arc(s.positionPrev.x,s.positionPrev.y,2,0,2*Math.PI,!1),o.closePath());o.fillStyle="rgba(255,165,0,0.8)",o.fill()},s.bodyVelocity=function(e,t,i){var s=i;s.beginPath();for(var r=0;r<t.length;r++){var a=t[r];if(a.render.visible){var o=n.getVelocity(a);s.moveTo(a.position.x,a.position.y),s.lineTo(a.position.x+o.x,a.position.y+o.y)}}s.lineWidth=3,s.strokeStyle="cornflowerblue",s.stroke()},s.bodyIds=function(e,t,i){var s,n,r=i;for(s=0;s<t.length;s++)if(t[s].render.visible){var a=t[s].parts;for(n=a.length>1?1:0;n<a.length;n++){var o=a[n];r.font="12px Arial",r.fillStyle="rgba(255,255,255,0.5)",r.fillText(o.id,o.position.x+10,o.position.y-10)}}},s.collisions=function(e,t,i){var s,n,r,a,o=i,l=e.options;for(o.beginPath(),r=0;r<t.length;r++)if((s=t[r]).isActive)for(n=s.collision,a=0;a<s.contactCount;a++){var c=s.contacts[a].vertex;o.rect(c.x-1.5,c.y-1.5,3.5,3.5)}for(l.wireframes?o.fillStyle="rgba(255,255,255,0.7)":o.fillStyle="orange",o.fill(),o.beginPath(),r=0;r<t.length;r++)if((s=t[r]).isActive&&(n=s.collision,s.contactCount>0)){var h=s.contacts[0].vertex.x,u=s.contacts[0].vertex.y;2===s.contactCount&&(h=(s.contacts[0].vertex.x+s.contacts[1].vertex.x)/2,u=(s.contacts[0].vertex.y+s.contacts[1].vertex.y)/2),n.bodyB===n.supports[0].body||!0===n.bodyA.isStatic?o.moveTo(h-8*n.normal.x,u-8*n.normal.y):o.moveTo(h+8*n.normal.x,u+8*n.normal.y),o.lineTo(h,u)}l.wireframes?o.strokeStyle="rgba(255,165,0,0.7)":o.strokeStyle="orange",o.lineWidth=1,o.stroke()},s.separations=function(e,t,i){var s,n,r,a,o,l=i,c=e.options;for(l.beginPath(),o=0;o<t.length;o++)if((s=t[o]).isActive){r=(n=s.collision).bodyA;var h=1;(a=n.bodyB).isStatic||r.isStatic||(h=.5),a.isStatic&&(h=0),l.moveTo(a.position.x,a.position.y),l.lineTo(a.position.x-n.penetration.x*h,a.position.y-n.penetration.y*h),h=1,a.isStatic||r.isStatic||(h=.5),r.isStatic&&(h=0),l.moveTo(r.position.x,r.position.y),l.lineTo(r.position.x+n.penetration.x*h,r.position.y+n.penetration.y*h)}c.wireframes?l.strokeStyle="rgba(255,165,0,0.5)":l.strokeStyle="orange",l.stroke()},s.inspector=function(e,t){e.engine;var i,s=e.selected,n=e.render,r=n.options;if(r.hasBounds){var a=n.bounds.max.x-n.bounds.min.x,o=n.bounds.max.y-n.bounds.min.y,l=a/n.options.width,c=o/n.options.height;t.scale(1/l,1/c),t.translate(-n.bounds.min.x,-n.bounds.min.y)}for(var h=0;h<s.length;h++){var u=s[h].data;switch(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.9)",t.setLineDash([1,2]),u.type){case"body":i=u.bounds,t.beginPath(),t.rect(Math.floor(i.min.x-3),Math.floor(i.min.y-3),Math.floor(i.max.x-i.min.x+6),Math.floor(i.max.y-i.min.y+6)),t.closePath(),t.stroke();break;case"constraint":var d=u.pointA;u.bodyA&&(d=u.pointB),t.beginPath(),t.arc(d.x,d.y,10,0,2*Math.PI),t.closePath(),t.stroke()}t.setLineDash([]),t.translate(-.5,-.5)}null!==e.selectStart&&(t.translate(.5,.5),t.lineWidth=1,t.strokeStyle="rgba(255,165,0,0.6)",t.fillStyle="rgba(255,165,0,0.1)",i=e.selectBounds,t.beginPath(),t.rect(Math.floor(i.min.x),Math.floor(i.min.y),Math.floor(i.max.x-i.min.x),Math.floor(i.max.y-i.min.y)),t.closePath(),t.stroke(),t.fill(),t.translate(-.5,-.5)),r.hasBounds&&t.setTransform(1,0,0,1,0,0)};var i=function(e,t){var i=e.engine,n=e.timing,r=n.historySize,a=i.timing.timestamp;n.delta=t-n.lastTime||s._goodDelta,n.lastTime=t,n.timestampElapsed=a-n.lastTimestamp||0,n.lastTimestamp=a,n.deltaHistory.unshift(n.delta),n.deltaHistory.length=Math.min(n.deltaHistory.length,r),n.engineDeltaHistory.unshift(i.timing.lastDelta),n.engineDeltaHistory.length=Math.min(n.engineDeltaHistory.length,r),n.timestampElapsedHistory.unshift(n.timestampElapsed),n.timestampElapsedHistory.length=Math.min(n.timestampElapsedHistory.length,r),n.engineUpdatesHistory.unshift(i.timing.lastUpdatesPerFrame),n.engineUpdatesHistory.length=Math.min(n.engineUpdatesHistory.length,r),n.engineElapsedHistory.unshift(i.timing.lastElapsed),n.engineElapsedHistory.length=Math.min(n.engineElapsedHistory.length,r),n.elapsedHistory.unshift(n.lastElapsed),n.elapsedHistory.length=Math.min(n.elapsedHistory.length,r)},u=function(e){for(var t=0,i=0;i<e.length;i+=1)t+=e[i];return t/e.length||0},d=function(e,t){var i=document.createElement("canvas");return i.width=e,i.height=t,i.oncontextmenu=function(){return!1},i.onselectstart=function(){return!1},i},p=function(e){var t=e.getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},f=function(e,t){var i=e.textures[t];return i||((i=e.textures[t]=new Image).src=t,i)},m=function(e,t){var i=t;/(jpg|gif|png)$/.test(t)&&(i="url("+t+")"),e.canvas.style.background=i,e.canvas.style.backgroundSize="contain",e.currentBackground=t}}()},function(e,t,i){var s={};e.exports=s;var n=i(5),r=i(17),a=i(0);!function(){s._maxFrameDelta=1e3/15,s._frameDeltaFallback=1e3/60,s._timeBufferMargin=1.5,s._elapsedNextEstimate=1,s._smoothingLowerBound=.1,s._smoothingUpperBound=.9,s.create=function(e){var t=a.extend({delta:1e3/60,frameDelta:null,frameDeltaSmoothing:!0,frameDeltaSnapping:!0,frameDeltaHistory:[],frameDeltaHistorySize:100,frameRequestId:null,timeBuffer:0,timeLastTick:null,maxUpdates:null,maxFrameTime:1e3/30,lastUpdatesDeferred:0,enabled:!0},e);return t.fps=0,t},s.run=function(e,t){return e.timeBuffer=s._frameDeltaFallback,function i(n){e.frameRequestId=s._onNextFrame(e,i),n&&e.enabled&&s.tick(e,t,n)}(),e},s.tick=function(t,i,o){var l=a.now(),c=t.delta,h=0,u=o-t.timeLastTick;if((!u||!t.timeLastTick||u>Math.max(s._maxFrameDelta,t.maxFrameTime))&&(u=t.frameDelta||s._frameDeltaFallback),t.frameDeltaSmoothing){t.frameDeltaHistory.push(u),t.frameDeltaHistory=t.frameDeltaHistory.slice(-t.frameDeltaHistorySize);var d=t.frameDeltaHistory.slice(0).sort(),p=t.frameDeltaHistory.slice(d.length*s._smoothingLowerBound,d.length*s._smoothingUpperBound);u=e(p)||u}t.frameDeltaSnapping&&(u=1e3/Math.round(1e3/u)),t.frameDelta=u,t.timeLastTick=o,t.timeBuffer+=t.frameDelta,t.timeBuffer=a.clamp(t.timeBuffer,0,t.frameDelta+c*s._timeBufferMargin),t.lastUpdatesDeferred=0;var f=t.maxUpdates||Math.ceil(t.maxFrameTime/c),m={timestamp:i.timing.timestamp};n.trigger(t,"beforeTick",m),n.trigger(t,"tick",m);for(var g=a.now();c>0&&t.timeBuffer>=c*s._timeBufferMargin;){n.trigger(t,"beforeUpdate",m),r.update(i,c),n.trigger(t,"afterUpdate",m),t.timeBuffer-=c,h+=1;var y=a.now()-l,v=a.now()-g,b=y+s._elapsedNextEstimate*v/h;if(h>=f||b>t.maxFrameTime){t.lastUpdatesDeferred=Math.round(Math.max(0,t.timeBuffer/c-s._timeBufferMargin));break}}i.timing.lastUpdatesPerFrame=h,n.trigger(t,"afterTick",m),t.frameDeltaHistory.length>=100&&(t.lastUpdatesDeferred&&Math.round(t.frameDelta/c)>f?a.warnOnce("Matter.Runner: runner reached runner.maxUpdates, see docs."):t.lastUpdatesDeferred&&a.warnOnce("Matter.Runner: runner reached runner.maxFrameTime, see docs."),void 0!==t.isFixed&&a.warnOnce("Matter.Runner: runner.isFixed is now redundant, see docs."),(t.deltaMin||t.deltaMax)&&a.warnOnce("Matter.Runner: runner.deltaMin and runner.deltaMax were removed, see docs."),0!==t.fps&&a.warnOnce("Matter.Runner: runner.fps was replaced by runner.delta, see docs."))},s.stop=function(e){s._cancelNextFrame(e)},s._onNextFrame=function(e,t){if("undefined"==typeof window||!window.requestAnimationFrame)throw new Error("Matter.Runner: missing required global window.requestAnimationFrame.");return e.frameRequestId=window.requestAnimationFrame(t),e.frameRequestId},s._cancelNextFrame=function(e){if("undefined"==typeof window||!window.cancelAnimationFrame)throw new Error("Matter.Runner: missing required global window.cancelAnimationFrame.");window.cancelAnimationFrame(e.frameRequestId)};var e=function(e){for(var t=0,i=e.length,s=0;s<i;s+=1)t+=e[s];return t/i||0}}()},function(e,t,i){var s={};e.exports=s;var n=i(8),r=i(0).deprecated;s.collides=function(e,t){return n.collides(e,t)},r(s,"collides","SAT.collides âž¤ replaced by Collision.collides")},function(e,t,i){var s={};e.exports=s,i(1);var n=i(0);s.pathToVertices=function(e,t){"undefined"==typeof window||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var i,r,a,o,l,c,h,u,d,p,f,m=[],g=0,y=0,v=0;t=t||15;var b=function(e,t,i){var s=i%2==1&&i>1;if(!d||e!=d.x||t!=d.y){d&&s?(p=d.x,f=d.y):(p=0,f=0);var n={x:p+e,y:f+t};!s&&d||(d=n),m.push(n),y=p+e,v=f+t}},_=function(e){var t=e.pathSegTypeAsLetter.toUpperCase();if("Z"!==t){switch(t){case"M":case"L":case"T":case"C":case"S":case"Q":y=e.x,v=e.y;break;case"H":y=e.x;break;case"V":v=e.y}b(y,v,e.pathSegType)}};for(s._svgPathToAbsolute(e),a=e.getTotalLength(),c=[],i=0;i<e.pathSegList.numberOfItems;i+=1)c.push(e.pathSegList.getItem(i));for(h=c.concat();g<a;){if((l=c[e.getPathSegAtLength(g)])!=u){for(;h.length&&h[0]!=l;)_(h.shift());u=l}switch(l.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":o=e.getPointAtLength(g),b(o.x,o.y,0)}g+=t}for(i=0,r=h.length;i<r;++i)_(h[i]);return m},s._svgPathToAbsolute=function(e){for(var t,i,s,n,r,a,o=e.pathSegList,l=0,c=0,h=o.numberOfItems,u=0;u<h;++u){var d=o.getItem(u),p=d.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(p))"x"in d&&(l=d.x),"y"in d&&(c=d.y);else switch("x1"in d&&(s=l+d.x1),"x2"in d&&(r=l+d.x2),"y1"in d&&(n=c+d.y1),"y2"in d&&(a=c+d.y2),"x"in d&&(l+=d.x),"y"in d&&(c+=d.y),p){case"m":o.replaceItem(e.createSVGPathSegMovetoAbs(l,c),u);break;case"l":o.replaceItem(e.createSVGPathSegLinetoAbs(l,c),u);break;case"h":o.replaceItem(e.createSVGPathSegLinetoHorizontalAbs(l),u);break;case"v":o.replaceItem(e.createSVGPathSegLinetoVerticalAbs(c),u);break;case"c":o.replaceItem(e.createSVGPathSegCurvetoCubicAbs(l,c,s,n,r,a),u);break;case"s":o.replaceItem(e.createSVGPathSegCurvetoCubicSmoothAbs(l,c,r,a),u);break;case"q":o.replaceItem(e.createSVGPathSegCurvetoQuadraticAbs(l,c,s,n),u);break;case"t":o.replaceItem(e.createSVGPathSegCurvetoQuadraticSmoothAbs(l,c),u);break;case"a":o.replaceItem(e.createSVGPathSegArcAbs(l,c,d.r1,d.r2,d.angle,d.largeArcFlag,d.sweepFlag),u);break;case"z":case"Z":l=t,c=i}"M"!=p&&"m"!=p||(t=l,i=c)}}},function(e,t,i){var s={};e.exports=s;var n=i(6);i(0),s.create=n.create,s.add=n.add,s.remove=n.remove,s.clear=n.clear,s.addComposite=n.addComposite,s.addBody=n.addBody,s.addConstraint=n.addConstraint}])},e.exports=s()},81:e=>{class t{constructor(){this.locale=void 0,this.messages={after:"The date must be after: '[PARAM]'",afterOrEqual:"The date must be after or equal to: '[PARAM]'",array:"[FIELD] must be an array",before:"The date must be before: '[PARAM]'",beforeOrEqual:"The date must be before or equal to: '[PARAM]'",boolean:"[FIELD] must be true or false",date:"[FIELD] must be a date",different:"[FIELD] must be different to '[PARAM]'",endsWith:"[FIELD] must end with '[PARAM]'",email:"[FIELD] must be a valid email address",falsy:"[FIELD] must be a falsy value (false, 'false', 0 or '0')",in:"[FIELD] must be one of the following options: [PARAM]",integer:"[FIELD] must be an integer",json:"[FIELD] must be a parsable JSON object string",max:"[FIELD] must be less than or equal to [PARAM]",min:"[FIELD] must be greater than or equal to [PARAM]",maxLength:"[FIELD] must not be greater than '[PARAM]' in character length",minLength:"[FIELD] must not be less than '[PARAM]' character length",notIn:"[FIELD] must not be one of the following options: [PARAM]",numeric:"[FIELD] must be numeric",optional:"[FIELD] is optional",regexMatch:"[FIELD] must satisify the regular expression: [PARAM]",required:"[FIELD] must be present",same:"[FIELD] must be '[PARAM]'",startsWith:"[FIELD] must start with '[PARAM]'",string:"[FIELD] must be a string",truthy:"[FIELD] must be a truthy value (true, 'true', 1 or '1')",url:"[FIELD] must be a valid url",uuid:"[FIELD] must be a valid UUID"}}_compare(e,t,i,s=!1){return!!this.assertDate(e)&&!(!this.assertDate(t)&&!this.assertInteger(t))&&(t="number"==typeof t?t:t.getTime(),"less"===i&&s?e.getTime()<=t:"less"!==i||s?"more"===i&&s?e.getTime()>=t:"more"!==i||s?void 0:e.getTime()>t:e.getTime()<t)}_error(e,t=void 0){let{param:i,field:s}="object"==typeof t?t:{param:t,field:void 0};const n=e.split(":");let r=n.shift();i=i||n.join(":"),["after","afterOrEqual","before","beforeOrEqual"].includes(r)&&(i=new Date(parseInt(i)).toLocaleTimeString(this.locale,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"numeric",hour12:!1}));let a=[null,void 0,""].includes(i)?this.messages[r]:this.messages[r].replace("[PARAM]",i);return[null,void 0,""].includes(s)?a.replace("[FIELD]",this.default_field_name||"Value"):a.replace("[FIELD]",s)}_missing(){return{valid:!1,rule:"None",error:"Rules exist, but no value was provided to check"}}_prepare(e,t=[]){return t.length?"optional"===t[0]&&this.assertOptional(e)?[]:t.filter(e=>"optional"!==e).map(e=>"string"==typeof e?[e,this._title(e.split(":").shift()),e.split(":").slice(1).join(":")]:[`${e.rule}:${e.param}`,this._title(e.rule),e.param]):[]}_title(e){return`${e[0].toUpperCase()}${e.slice(1)}`}_validate(e,t,i=null){for(let s in t=this._prepare(e,t))if(!this[`assert${t[s][1]}`].apply(this,[e,t[s][2]]))return{valid:!1,rule:t[s][0],error:i?i[t[s][0]]:this._error(t[s][0])};return{valid:!0,rule:"",error:""}}assert(e,t,i=null){if(Array.isArray(t))return this._validate(e,t,i);let s=Object.keys(t),n={valid:!0,fields:{}};for(let r=0;r<s.length;r++)n.fields[s[r]]=e.hasOwnProperty(s[r])?this._validate(e[s[r]],t[s[r]],null!=i?i[s[r]]:null):this._missing(),n.fields[s[r]].valid||(n.valid=!1);return n}assertAfter(e,t){return this._compare(e,t,"more",!1)}assertAfterOrEqual(e,t){return this._compare(e,t,"more",!0)}assertArray(e){return Array.isArray(e)}assertBefore(e,t){return this._compare(e,t,"less",!1)}assertBeforeOrEqual(e,t){return this._compare(e,t,"less",!0)}assertBoolean(e){return[!0,!1].includes(e)}assertDate(e){return e&&"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e)}assertDifferent(e,t){return e!=t}assertEndsWith(e,t){return this.assertString(e)&&e.endsWith(t)}assertEmail(e){return new RegExp("^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$").test(String(e).toLowerCase())}assertFalsy(e){return[0,"0",!1,"false"].includes(e)}assertIn(e,t){return("string"==typeof t?t.split(","):t).includes(e)}assertInteger(e){return Number.isInteger(e)&&parseInt(e).toString()===e.toString()}assertJson(e){try{return"object"==typeof JSON.parse(e)}catch(e){return!1}}assertMax(e,t){return parseFloat(e)<=t}assertMin(e,t){return parseFloat(e)>=t}assertMaxLength(e,t){return"string"==typeof e&&e.length<=t}assertMinLength(e,t){return"string"==typeof e&&e.length>=t}assertNotIn(e,t){return!this.assertIn(e,t)}assertNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}assertOptional(e){return[null,void 0,""].includes(e)}assertRegexMatch(e,t){return new RegExp(t).test(String(e))}assertRequired(e){return!this.assertOptional(e)}assertSame(e,t){return e==t}assertStartsWith(e,t){return this.assertString(e)&&e.startsWith(t)}assertString(e){return"string"==typeof e}assertTruthy(e){return[1,"1",!0,"true"].includes(e)}assertUrl(e){return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$").test(String(e).toLowerCase())}assertUuid(e){return new RegExp("^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$").test(String(e).toLowerCase())}rule(e,i){t.prototype[`assert${this._title(e)}`]=i}setErrorMessages(e){this.messages=e}setErrorMessage(e,t){this.messages[e]=t}setLocale(e){this.locale=e}setDefaultFieldName(e){this.default_field_name=e}}"undefined"!=typeof window&&(window.Iodine=new t),e.exports=t},929:function(e,t,i){"object"==typeof navigator&&(e.exports=function(){"use strict";function e(e,t,i){return(t=function(e){var t=function(e){if("object"!=typeof e||null===e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function t(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach(function(t){s(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var a={addCSS:!0,thumbWidth:15,watch:!0},o=function(e){return null!=e?e.constructor:null},l=function(e,t){return!!(e&&t&&e instanceof t)},c=function(e){return null==e},h=function(e){return o(e)===Object},u=function(e){return o(e)===String},d=function(e){return Array.isArray(e)},p=function(e){return l(e,NodeList)},f={nullOrUndefined:c,object:h,number:function(e){return o(e)===Number&&!Number.isNaN(e)},string:u,boolean:function(e){return o(e)===Boolean},function:function(e){return o(e)===Function},array:d,nodeList:p,element:function(e){return l(e,Element)},event:function(e){return l(e,Event)},empty:function(e){return c(e)||(u(e)||d(e)||p(e))&&!e.length||h(e)&&!Object.keys(e).length}};var m=function(){function e(t,i){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),f.element(t)?this.element=t:f.string(t)&&(this.element=document.querySelector(t)),f.element(this.element)&&f.empty(this.element.rangeTouch)&&(this.config=r({},a,{},i),this.init())}return function(e,i,s){i&&t(e.prototype,i),s&&t(e,s)}(e,[{key:"init",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){e.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(e){var t=this,i=e?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(e){t.element[i](e,function(e){return t.set(e)},!1)})}},{key:"get",value:function(t){if(!e.enabled||!f.event(t))return null;var i,s=t.target,n=t.changedTouches[0],r=parseFloat(s.getAttribute("min"))||0,a=parseFloat(s.getAttribute("max"))||100,o=parseFloat(s.getAttribute("step"))||1,l=s.getBoundingClientRect(),c=100/l.width*(this.config.thumbWidth/2)/100;return 0>(i=100/l.width*(n.clientX-l.left))?i=0:100<i&&(i=100),50>i?i-=(100-2*i)*c:50<i&&(i+=2*(i-50)*c),r+function(e,t){if(1>t){var i=function(e){var t="".concat(e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0}(t);return parseFloat(e.toFixed(i))}return Math.round(e/t)*t}(i/100*(a-r),o)}},{key:"set",value:function(t){e.enabled&&f.event(t)&&!t.target.disabled&&(t.preventDefault(),t.target.value=this.get(t),function(e,t){if(e&&t){var i=new Event(t,{bubbles:!0});e.dispatchEvent(i)}}(t.target,"touchend"===t.type?"change":"input"))}}],[{key:"setup",value:function(t){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=null;if(f.empty(t)||f.string(t)?s=Array.from(document.querySelectorAll(f.string(t)?t:'input[type="range"]')):f.element(t)?s=[t]:f.nodeList(t)?s=Array.from(t):f.array(t)&&(s=t.filter(f.element)),f.empty(s))return null;var n=r({},a,{},i);if(f.string(t)&&n.watch){var o=new MutationObserver(function(i){Array.from(i).forEach(function(i){Array.from(i.addedNodes).forEach(function(i){f.element(i)&&function(e,t){return function(){return Array.from(document.querySelectorAll(t)).includes(this)}.call(e,t)}(i,t)&&new e(i,n)})})});o.observe(document.body,{childList:!0,subtree:!0})}return s.map(function(t){return new e(t,i)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),e}();const g=e=>null!=e?e.constructor:null,y=(e,t)=>Boolean(e&&t&&e instanceof t),v=e=>null==e,b=e=>g(e)===Object,_=e=>g(e)===String,x=e=>"function"==typeof e,w=e=>Array.isArray(e),S=e=>y(e,NodeList),k=e=>v(e)||(_(e)||w(e)||S(e))&&!e.length||b(e)&&!Object.keys(e).length;var T=v,E=b,C=e=>g(e)===Number&&!Number.isNaN(e),A=_,M=e=>g(e)===Boolean,P=x,L=w,I=S,R=e=>null!==e&&"object"==typeof e&&1===e.nodeType&&"object"==typeof e.style&&"object"==typeof e.ownerDocument,O=e=>y(e,Event),F=e=>y(e,KeyboardEvent),B=e=>y(e,TextTrack)||!v(e)&&_(e.kind),D=e=>y(e,Promise)&&x(e.then),j=e=>{if(y(e,window.URL))return!0;if(!_(e))return!1;let t=e;e.startsWith("http://")&&e.startsWith("https://")||(t=`http://${e}`);try{return!k(new URL(t).hostname)}catch(e){return!1}},N=k;const V=(()=>{const e=document.createElement("span"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},i=Object.keys(t).find(t=>void 0!==e.style[t]);return!!A(i)&&t[i]})();function z(e,t){setTimeout(()=>{try{e.hidden=!0,e.offsetHeight,e.hidden=!1}catch(e){}},t)}var H={isIE:Boolean(window.document.documentMode),isEdge:/Edge/g.test(navigator.userAgent),isWebKit:"WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone:/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIPadOS:"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,isIos:/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1};function q(e,t){return t.split(".").reduce((e,t)=>e&&e[t],e)}function $(e={},...t){if(!t.length)return e;const i=t.shift();return E(i)?(Object.keys(i).forEach(t=>{E(i[t])?(Object.keys(e).includes(t)||Object.assign(e,{[t]:{}}),$(e[t],i[t])):Object.assign(e,{[t]:i[t]})}),$(e,...t)):e}function U(e,t){const i=e.length?e:[e];Array.from(i).reverse().forEach((e,i)=>{const s=i>0?t.cloneNode(!0):t,n=e.parentNode,r=e.nextSibling;s.appendChild(e),r?n.insertBefore(s,r):n.appendChild(s)})}function W(e,t){R(e)&&!N(t)&&Object.entries(t).filter(([,e])=>!T(e)).forEach(([t,i])=>e.setAttribute(t,i))}function G(e,t,i){const s=document.createElement(e);return E(t)&&W(s,t),A(i)&&(s.innerText=i),s}function Y(e,t,i,s){R(t)&&t.appendChild(G(e,i,s))}function X(e){I(e)||L(e)?Array.from(e).forEach(X):R(e)&&R(e.parentNode)&&e.parentNode.removeChild(e)}function K(e){if(!R(e))return;let{length:t}=e.childNodes;for(;t>0;)e.removeChild(e.lastChild),t-=1}function Z(e,t){return R(t)&&R(t.parentNode)&&R(e)?(t.parentNode.replaceChild(e,t),e):null}function J(e,t){if(!A(e)||N(e))return{};const i={},s=$({},t);return e.split(",").forEach(e=>{const t=e.trim(),n=t.replace(".",""),r=t.replace(/[[\]]/g,"").split("="),[a]=r,o=r.length>1?r[1].replace(/["']/g,""):"";switch(t.charAt(0)){case".":A(s.class)?i.class=`${s.class} ${n}`:i.class=n;break;case"#":i.id=t.replace("#","");break;case"[":i[a]=o}}),$(s,i)}function Q(e,t){if(!R(e))return;let i=t;M(i)||(i=!e.hidden),e.hidden=i}function ee(e,t,i){if(I(e))return Array.from(e).map(e=>ee(e,t,i));if(R(e)){let s="toggle";return void 0!==i&&(s=i?"add":"remove"),e.classList[s](t),e.classList.contains(t)}return!1}function te(e,t){return R(e)&&e.classList.contains(t)}function ie(e,t){const{prototype:i}=Element;return(i.matches||i.webkitMatchesSelector||i.mozMatchesSelector||i.msMatchesSelector||function(){return Array.from(document.querySelectorAll(t)).includes(this)}).call(e,t)}function se(e){return this.elements.container.querySelectorAll(e)}function ne(e){return this.elements.container.querySelector(e)}function re(e=null,t=!1){R(e)&&e.focus({preventScroll:!0,focusVisible:t})}const ae={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},oe={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(e,t){const i=oe[e]||"html5"!==t;return{api:i,ui:i&&oe.rangeInput}},pip:!(H.isIPhone||!P(G("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||G("video").disablePictureInPicture)),airplay:P(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(e){if(N(e))return!1;const[t]=e.split("/");let i=e;if(!this.isHTML5||t!==this.type)return!1;Object.keys(ae).includes(i)&&(i+=`; codecs="${ae[e]}"`);try{return Boolean(i&&this.media.canPlayType(i).replace(/no/,""))}catch(e){return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const e=document.createElement("input");return e.type="range","range"===e.type})(),touch:"ontouchstart"in document.documentElement,transitions:!1!==V,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},le=(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e=!0,null)});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e})();function ce(e,t,i,s=!1,n=!0,r=!1){if(!e||!("addEventListener"in e)||N(t)||!P(i))return;const a=t.split(" ");let o=r;le&&(o={passive:n,capture:r}),a.forEach(t=>{this&&this.eventListeners&&s&&this.eventListeners.push({element:e,type:t,callback:i,options:o}),e[s?"addEventListener":"removeEventListener"](t,i,o)})}function he(e,t="",i,s=!0,n=!1){ce.call(this,e,t,i,!0,s,n)}function ue(e,t="",i,s=!0,n=!1){ce.call(this,e,t,i,!1,s,n)}function de(e,t="",i,s=!0,n=!1){const r=(...a)=>{ue(e,t,r,s,n),i.apply(this,a)};ce.call(this,e,t,r,!0,s,n)}function pe(e,t="",i=!1,s={}){if(!R(e)||N(t))return;const n=new CustomEvent(t,{bubbles:i,detail:{...s,plyr:this}});e.dispatchEvent(n)}function fe(){this&&this.eventListeners&&(this.eventListeners.forEach(e=>{const{element:t,type:i,callback:s,options:n}=e;t.removeEventListener(i,s,n)}),this.eventListeners=[])}function me(){return new Promise(e=>this.ready?setTimeout(e,0):he.call(this,this.elements.container,"ready",e)).then(()=>{})}function ge(e){D(e)&&e.then(null,()=>{})}function ye(e){return L(e)?e.filter((t,i)=>e.indexOf(t)===i):e}function ve(e,t){return L(e)&&e.length?e.reduce((e,i)=>Math.abs(i-t)<Math.abs(e-t)?i:e):null}function be(e){return!(!window||!window.CSS)&&window.CSS.supports(e)}const _e=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((e,[t,i])=>({...e,[t/i]:[t,i]}),{});function xe(e){return!!(L(e)||A(e)&&e.includes(":"))&&(L(e)?e:e.split(":")).map(Number).every(C)}function we(e){if(!L(e)||!e.every(C))return null;const[t,i]=e,s=(e,t)=>0===t?e:s(t,e%t),n=s(t,i);return[t/n,i/n]}function Se(e){const t=e=>xe(e)?e.split(":").map(Number):null;let i=t(e);if(null===i&&(i=t(this.config.ratio)),null===i&&!N(this.embed)&&L(this.embed.ratio)&&({ratio:i}=this.embed),null===i&&this.isHTML5){const{videoWidth:e,videoHeight:t}=this.media;i=[e,t]}return we(i)}function ke(e){if(!this.isVideo)return{};const{wrapper:t}=this.elements,i=Se.call(this,e);if(!L(i))return{};const[s,n]=we(i),r=100/s*n;if(be(`aspect-ratio: ${s}/${n}`)?t.style.aspectRatio=`${s}/${n}`:t.style.paddingBottom=`${r}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const e=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),i=(e-r)/(e/50);this.fullscreen.active?t.style.paddingBottom=null:this.media.style.transform=`translateY(-${i}%)`}else this.isHTML5&&t.classList.add(this.config.classNames.videoFixedRatio);return{padding:r,ratio:i}}function Te(e,t,i=.05){const s=e/t,n=ve(Object.keys(_e),s);return Math.abs(n-s)<=i?_e[n]:[e,t]}const Ee={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(e=>{const t=e.getAttribute("type");return!!N(t)||oe.mime.call(this,t)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:Ee.getSources.call(this).map(e=>Number(e.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const e=this;e.options.speed=e.config.speed.options,N(this.config.ratio)||ke.call(e),Object.defineProperty(e.media,"quality",{get(){const t=Ee.getSources.call(e).find(t=>t.getAttribute("src")===e.source);return t&&Number(t.getAttribute("size"))},set(t){if(e.quality!==t){if(e.config.quality.forced&&P(e.config.quality.onChange))e.config.quality.onChange(t);else{const i=Ee.getSources.call(e).find(e=>Number(e.getAttribute("size"))===t);if(!i)return;const{currentTime:s,paused:n,preload:r,readyState:a,playbackRate:o}=e.media;e.media.src=i.getAttribute("src"),("none"!==r||a)&&(e.once("loadedmetadata",()=>{e.speed=o,e.currentTime=s,n||ge(e.play())}),e.media.load())}pe.call(e,e.media,"qualitychange",!1,{quality:t})}}})},cancelRequests(){this.isHTML5&&(X(Ee.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function Ce(e,...t){return N(e)?e:e.toString().replace(/{(\d+)}/g,(e,i)=>t[i].toString())}const Ae=(e="",t="",i="")=>e.replace(new RegExp(t.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),i.toString()),Me=(e="")=>e.toString().replace(/\w\S*/g,e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase());function Pe(e){const t=document.createElement("div");return t.appendChild(e),t.innerHTML}const Le={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},Ie={get(e="",t={}){if(N(e)||N(t))return"";let i=q(t.i18n,e);if(N(i))return Object.keys(Le).includes(e)?Le[e]:"";const s={"{seektime}":t.seekTime,"{title}":t.title};return Object.entries(s).forEach(([e,t])=>{i=Ae(i,e,t)}),i}};class Re{constructor(t){e(this,"get",e=>{if(!Re.supported||!this.enabled)return null;const t=window.localStorage.getItem(this.key);if(N(t))return null;const i=JSON.parse(t);return A(e)&&e.length?i[e]:i}),e(this,"set",e=>{if(!Re.supported||!this.enabled)return;if(!E(e))return;let t=this.get();N(t)&&(t={}),$(t,e);try{window.localStorage.setItem(this.key,JSON.stringify(t))}catch(e){}}),this.enabled=t.config.storage.enabled,this.key=t.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const e="___test";return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(e){return!1}}}function Oe(e,t="text"){return new Promise((i,s)=>{try{const s=new XMLHttpRequest;if(!("withCredentials"in s))return;s.addEventListener("load",()=>{if("text"===t)try{i(JSON.parse(s.responseText))}catch(e){i(s.responseText)}else i(s.response)}),s.addEventListener("error",()=>{throw new Error(s.status)}),s.open("GET",e,!0),s.responseType=t,s.send()}catch(e){s(e)}})}function Fe(e,t){if(!A(e))return;const i="cache",s=A(t);let n=!1;const r=()=>null!==document.getElementById(t),a=(e,t)=>{e.innerHTML=t,s&&r()||document.body.insertAdjacentElement("afterbegin",e)};if(!s||!r()){const r=Re.supported,o=document.createElement("div");if(o.setAttribute("hidden",""),s&&o.setAttribute("id",t),r){const e=window.localStorage.getItem(`${i}-${t}`);if(n=null!==e,n){const t=JSON.parse(e);a(o,t.content)}}Oe(e).then(e=>{if(!N(e)){if(r)try{window.localStorage.setItem(`${i}-${t}`,JSON.stringify({content:e}))}catch(e){}a(o,e)}}).catch(()=>{})}}const Be=e=>Math.trunc(e/60/60%60,10);function De(e=0,t=!1,i=!1){if(!C(e))return De(void 0,t,i);const s=e=>`0${e}`.slice(-2);let n=Be(e);const r=(e=>Math.trunc(e/60%60,10))(e),a=(e=>Math.trunc(e%60,10))(e);return n=t||n>0?`${n}:`:"",`${i&&e>0?"-":""}${n}${s(r)}:${s(a)}`}const je={getIconUrl(){const e=new URL(this.config.iconUrl,window.location),t=window.location.host?window.location.host:window.top.location.host,i=e.host!==t||H.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:i}},findElements(){try{return this.elements.controls=ne.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:se.call(this,this.config.selectors.buttons.play),pause:ne.call(this,this.config.selectors.buttons.pause),restart:ne.call(this,this.config.selectors.buttons.restart),rewind:ne.call(this,this.config.selectors.buttons.rewind),fastForward:ne.call(this,this.config.selectors.buttons.fastForward),mute:ne.call(this,this.config.selectors.buttons.mute),pip:ne.call(this,this.config.selectors.buttons.pip),airplay:ne.call(this,this.config.selectors.buttons.airplay),settings:ne.call(this,this.config.selectors.buttons.settings),captions:ne.call(this,this.config.selectors.buttons.captions),fullscreen:ne.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=ne.call(this,this.config.selectors.progress),this.elements.inputs={seek:ne.call(this,this.config.selectors.inputs.seek),volume:ne.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:ne.call(this,this.config.selectors.display.buffer),currentTime:ne.call(this,this.config.selectors.display.currentTime),duration:ne.call(this,this.config.selectors.display.duration)},R(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(e){return this.debug.warn("It looks like there is a problem with your custom controls HTML",e),this.toggleNativeControls(!0),!1}},createIcon(e,t){const i="http://www.w3.org/2000/svg",s=je.getIconUrl.call(this),n=`${s.cors?"":s.url}#${this.config.iconPrefix}`,r=document.createElementNS(i,"svg");W(r,$(t,{"aria-hidden":"true",focusable:"false"}));const a=document.createElementNS(i,"use"),o=`${n}-${e}`;return"href"in a&&a.setAttributeNS("http://www.w3.org/1999/xlink","href",o),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o),r.appendChild(a),r},createLabel(e,t={}){const i=Ie.get(e,this.config);return G("span",{...t,class:[t.class,this.config.classNames.hidden].filter(Boolean).join(" ")},i)},createBadge(e){if(N(e))return null;const t=G("span",{class:this.config.classNames.menu.value});return t.appendChild(G("span",{class:this.config.classNames.menu.badge},e)),t},createButton(e,t){const i=$({},t);let s=function(e=""){let t=e.toString();return t=function(e=""){let t=e.toString();return t=Ae(t,"-"," "),t=Ae(t,"_"," "),t=Me(t),Ae(t," ","")}(t),t.charAt(0).toLowerCase()+t.slice(1)}(e);const n={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(e=>{Object.keys(i).includes(e)&&(n[e]=i[e],delete i[e])}),"button"!==n.element||Object.keys(i).includes("type")||(i.type="button"),Object.keys(i).includes("class")?i.class.split(" ").some(e=>e===this.config.classNames.control)||$(i,{class:`${i.class} ${this.config.classNames.control}`}):i.class=this.config.classNames.control,e){case"play":n.toggle=!0,n.label="play",n.labelPressed="pause",n.icon="play",n.iconPressed="pause";break;case"mute":n.toggle=!0,n.label="mute",n.labelPressed="unmute",n.icon="volume",n.iconPressed="muted";break;case"captions":n.toggle=!0,n.label="enableCaptions",n.labelPressed="disableCaptions",n.icon="captions-off",n.iconPressed="captions-on";break;case"fullscreen":n.toggle=!0,n.label="enterFullscreen",n.labelPressed="exitFullscreen",n.icon="enter-fullscreen",n.iconPressed="exit-fullscreen";break;case"play-large":i.class+=` ${this.config.classNames.control}--overlaid`,s="play",n.label="play",n.icon="play";break;default:N(n.label)&&(n.label=s),N(n.icon)&&(n.icon=e)}const r=G(n.element);return n.toggle?(r.appendChild(je.createIcon.call(this,n.iconPressed,{class:"icon--pressed"})),r.appendChild(je.createIcon.call(this,n.icon,{class:"icon--not-pressed"})),r.appendChild(je.createLabel.call(this,n.labelPressed,{class:"label--pressed"})),r.appendChild(je.createLabel.call(this,n.label,{class:"label--not-pressed"}))):(r.appendChild(je.createIcon.call(this,n.icon)),r.appendChild(je.createLabel.call(this,n.label))),$(i,J(this.config.selectors.buttons[s],i)),W(r,i),"play"===s?(L(this.elements.buttons[s])||(this.elements.buttons[s]=[]),this.elements.buttons[s].push(r)):this.elements.buttons[s]=r,r},createRange(e,t){const i=G("input",$(J(this.config.selectors.inputs[e]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":Ie.get(e,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},t));return this.elements.inputs[e]=i,je.updateRangeFill.call(this,i),m.setup(i),i},createProgress(e,t){const i=G("progress",$(J(this.config.selectors.display[e]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},t));if("volume"!==e){i.appendChild(G("span",null,"0"));const t={played:"played",buffer:"buffered"}[e],s=t?Ie.get(t,this.config):"";i.innerText=`% ${s.toLowerCase()}`}return this.elements.display[e]=i,i},createTime(e,t){const i=J(this.config.selectors.display[e],t),s=G("div",$(i,{class:`${i.class?i.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":Ie.get(e,this.config),role:"timer"}),"00:00");return this.elements.display[e]=s,s},bindMenuItemShortcuts(e,t){he.call(this,e,"keydown keyup",i=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(i.key))return;if(i.preventDefault(),i.stopPropagation(),"keydown"===i.type)return;const s=ie(e,'[role="menuitemradio"]');if(!s&&[" ","ArrowRight"].includes(i.key))je.showMenuPanel.call(this,t,!0);else{let t;" "!==i.key&&("ArrowDown"===i.key||s&&"ArrowRight"===i.key?(t=e.nextElementSibling,R(t)||(t=e.parentNode.firstElementChild)):(t=e.previousElementSibling,R(t)||(t=e.parentNode.lastElementChild)),re.call(this,t,!0))}},!1),he.call(this,e,"keyup",e=>{"Return"===e.key&&je.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:e,list:t,type:i,title:s,badge:n=null,checked:r=!1}){const a=J(this.config.selectors.inputs[i]),o=G("button",$(a,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${a.class?a.class:""}`.trim(),"aria-checked":r,value:e})),l=G("span");l.innerHTML=s,R(n)&&l.appendChild(n),o.appendChild(l),Object.defineProperty(o,"checked",{enumerable:!0,get:()=>"true"===o.getAttribute("aria-checked"),set(e){e&&Array.from(o.parentNode.children).filter(e=>ie(e,'[role="menuitemradio"]')).forEach(e=>e.setAttribute("aria-checked","false")),o.setAttribute("aria-checked",e?"true":"false")}}),this.listeners.bind(o,"click keyup",t=>{if(!F(t)||" "===t.key){switch(t.preventDefault(),t.stopPropagation(),o.checked=!0,i){case"language":this.currentTrack=Number(e);break;case"quality":this.quality=e;break;case"speed":this.speed=parseFloat(e)}je.showMenuPanel.call(this,"home",F(t))}},i,!1),je.bindMenuItemShortcuts.call(this,o,i),t.appendChild(o)},formatTime(e=0,t=!1){return C(e)?De(e,Be(this.duration)>0,t):e},updateTimeDisplay(e=null,t=0,i=!1){R(e)&&C(t)&&(e.innerText=je.formatTime(t,i))},updateVolume(){this.supported.ui&&(R(this.elements.inputs.volume)&&je.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),R(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||0===this.volume))},setRange(e,t=0){R(e)&&(e.value=t,je.updateRangeFill.call(this,e))},updateProgress(e){if(!this.supported.ui||!O(e))return;let t=0;const i=(e,t)=>{const i=C(t)?t:0,s=R(e)?e:this.elements.display.buffer;if(R(s)){s.value=i;const e=s.getElementsByTagName("span")[0];R(e)&&(e.childNodes[0].nodeValue=i)}};if(e)switch(e.type){case"timeupdate":case"seeking":case"seeked":s=this.currentTime,n=this.duration,t=0===s||0===n||Number.isNaN(s)||Number.isNaN(n)?0:(s/n*100).toFixed(2),"timeupdate"===e.type&&je.setRange.call(this,this.elements.inputs.seek,t);break;case"playing":case"progress":i(this.elements.display.buffer,100*this.buffered)}var s,n},updateRangeFill(e){const t=O(e)?e.target:e;if(R(t)&&"range"===t.getAttribute("type")){if(ie(t,this.config.selectors.inputs.seek)){t.setAttribute("aria-valuenow",this.currentTime);const e=je.formatTime(this.currentTime),i=je.formatTime(this.duration),s=Ie.get("seekLabel",this.config);t.setAttribute("aria-valuetext",s.replace("{currentTime}",e).replace("{duration}",i))}else if(ie(t,this.config.selectors.inputs.volume)){const e=100*t.value;t.setAttribute("aria-valuenow",e),t.setAttribute("aria-valuetext",`${e.toFixed(1)}%`)}else t.setAttribute("aria-valuenow",t.value);(H.isWebKit||H.isIPadOS)&&t.style.setProperty("--value",t.value/t.max*100+"%")}},updateSeekTooltip(e){var t,i;if(!this.config.tooltips.seek||!R(this.elements.inputs.seek)||!R(this.elements.display.seekTooltip)||0===this.duration)return;const s=this.elements.display.seekTooltip,n=`${this.config.classNames.tooltip}--visible`,r=e=>ee(s,n,e);if(this.touch)return void r(!1);let a=0;const o=this.elements.progress.getBoundingClientRect();if(O(e))a=100/o.width*(e.pageX-o.left);else{if(!te(s,n))return;a=parseFloat(s.style.left,10)}a<0?a=0:a>100&&(a=100);const l=this.duration/100*a;s.innerText=je.formatTime(l);const c=null===(t=this.config.markers)||void 0===t||null===(i=t.points)||void 0===i?void 0:i.find(({time:e})=>e===Math.round(l));c&&s.insertAdjacentHTML("afterbegin",`${c.label}<br>`),s.style.left=`${a}%`,O(e)&&["mouseenter","mouseleave"].includes(e.type)&&r("mouseenter"===e.type)},timeUpdate(e){const t=!R(this.elements.display.duration)&&this.config.invertTime;je.updateTimeDisplay.call(this,this.elements.display.currentTime,t?this.duration-this.currentTime:this.currentTime,t),e&&"timeupdate"===e.type&&this.media.seeking||je.updateProgress.call(this,e)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return Q(this.elements.display.currentTime,!0),void Q(this.elements.progress,!0);R(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const e=R(this.elements.display.duration);!e&&this.config.displayDuration&&this.paused&&je.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),e&&je.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&je.setMarkers.call(this),je.updateSeekTooltip.call(this)},toggleMenuButton(e,t){Q(this.elements.settings.buttons[e],!t)},updateSetting(e,t,i){const s=this.elements.settings.panels[e];let n=null,r=t;if("captions"===e)n=this.currentTrack;else{if(n=N(i)?this[e]:i,N(n)&&(n=this.config[e].default),!N(this.options[e])&&!this.options[e].includes(n))return void this.debug.warn(`Unsupported value of '${n}' for ${e}`);if(!this.config[e].options.includes(n))return void this.debug.warn(`Disabled value of '${n}' for ${e}`)}if(R(r)||(r=s&&s.querySelector('[role="menu"]')),!R(r))return;this.elements.settings.buttons[e].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=je.getLabel.call(this,e,n);const a=r&&r.querySelector(`[value="${n}"]`);R(a)&&(a.checked=!0)},getLabel(e,t){switch(e){case"speed":return 1===t?Ie.get("normal",this.config):`${t}&times;`;case"quality":if(C(t)){const e=Ie.get(`qualityLabel.${t}`,this.config);return e.length?e:`${t}p`}return Me(t);case"captions":return ze.getLabel.call(this);default:return null}},setQualityMenu(e){if(!R(this.elements.settings.panels.quality))return;const t="quality",i=this.elements.settings.panels.quality.querySelector('[role="menu"]');L(e)&&(this.options.quality=ye(e).filter(e=>this.config.quality.options.includes(e)));const s=!N(this.options.quality)&&this.options.quality.length>1;if(je.toggleMenuButton.call(this,t,s),K(i),je.checkMenu.call(this),!s)return;const n=e=>{const t=Ie.get(`qualityBadge.${e}`,this.config);return t.length?je.createBadge.call(this,t):null};this.options.quality.sort((e,t)=>{const i=this.config.quality.options;return i.indexOf(e)>i.indexOf(t)?1:-1}).forEach(e=>{je.createMenuItem.call(this,{value:e,list:i,type:t,title:je.getLabel.call(this,"quality",e),badge:n(e)})}),je.updateSetting.call(this,t,i)},setCaptionsMenu(){if(!R(this.elements.settings.panels.captions))return;const e="captions",t=this.elements.settings.panels.captions.querySelector('[role="menu"]'),i=ze.getTracks.call(this),s=Boolean(i.length);if(je.toggleMenuButton.call(this,e,s),K(t),je.checkMenu.call(this),!s)return;const n=i.map((e,i)=>({value:i,checked:this.captions.toggled&&this.currentTrack===i,title:ze.getLabel.call(this,e),badge:e.language&&je.createBadge.call(this,e.language.toUpperCase()),list:t,type:"language"}));n.unshift({value:-1,checked:!this.captions.toggled,title:Ie.get("disabled",this.config),list:t,type:"language"}),n.forEach(je.createMenuItem.bind(this)),je.updateSetting.call(this,e,t)},setSpeedMenu(){if(!R(this.elements.settings.panels.speed))return;const e="speed",t=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(e=>e>=this.minimumSpeed&&e<=this.maximumSpeed);const i=!N(this.options.speed)&&this.options.speed.length>1;je.toggleMenuButton.call(this,e,i),K(t),je.checkMenu.call(this),i&&(this.options.speed.forEach(i=>{je.createMenuItem.call(this,{value:i,list:t,type:e,title:je.getLabel.call(this,"speed",i)})}),je.updateSetting.call(this,e,t))},checkMenu(){const{buttons:e}=this.elements.settings,t=!N(e)&&Object.values(e).some(e=>!e.hidden);Q(this.elements.settings.menu,!t)},focusFirstMenuItem(e,t=!1){if(this.elements.settings.popup.hidden)return;let i=e;R(i)||(i=Object.values(this.elements.settings.panels).find(e=>!e.hidden));const s=i.querySelector('[role^="menuitem"]');re.call(this,s,t)},toggleMenu(e){const{popup:t}=this.elements.settings,i=this.elements.buttons.settings;if(!R(t)||!R(i))return;const{hidden:s}=t;let n=s;if(M(e))n=e;else if(F(e)&&"Escape"===e.key)n=!1;else if(O(e)){const s=P(e.composedPath)?e.composedPath()[0]:e.target,r=t.contains(s);if(r||!r&&e.target!==i&&n)return}i.setAttribute("aria-expanded",n),Q(t,!n),ee(this.elements.container,this.config.classNames.menu.open,n),n&&F(e)?je.focusFirstMenuItem.call(this,null,!0):n||s||re.call(this,i,F(e))},getMenuSize(e){const t=e.cloneNode(!0);t.style.position="absolute",t.style.opacity=0,t.removeAttribute("hidden"),e.parentNode.appendChild(t);const i=t.scrollWidth,s=t.scrollHeight;return X(t),{width:i,height:s}},showMenuPanel(e="",t=!1){const i=this.elements.container.querySelector(`#plyr-settings-${this.id}-${e}`);if(!R(i))return;const s=i.parentNode,n=Array.from(s.children).find(e=>!e.hidden);if(oe.transitions&&!oe.reducedMotion){s.style.width=`${n.scrollWidth}px`,s.style.height=`${n.scrollHeight}px`;const e=je.getMenuSize.call(this,i),t=e=>{e.target===s&&["width","height"].includes(e.propertyName)&&(s.style.width="",s.style.height="",ue.call(this,s,V,t))};he.call(this,s,V,t),s.style.width=`${e.width}px`,s.style.height=`${e.height}px`}Q(n,!0),Q(i,!1),je.focusFirstMenuItem.call(this,i,t)},setDownloadUrl(){const e=this.elements.buttons.download;R(e)&&e.setAttribute("href",this.download)},create(e){const{bindMenuItemShortcuts:t,createButton:i,createProgress:s,createRange:n,createTime:r,setQualityMenu:a,setSpeedMenu:o,showMenuPanel:l}=je;this.elements.controls=null,L(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(i.call(this,"play-large"));const c=G("div",J(this.config.selectors.controls.wrapper));this.elements.controls=c;const h={class:"plyr__controls__item"};return ye(L(this.config.controls)?this.config.controls:[]).forEach(a=>{if("restart"===a&&c.appendChild(i.call(this,"restart",h)),"rewind"===a&&c.appendChild(i.call(this,"rewind",h)),"play"===a&&c.appendChild(i.call(this,"play",h)),"fast-forward"===a&&c.appendChild(i.call(this,"fast-forward",h)),"progress"===a){const t=G("div",{class:`${h.class} plyr__progress__container`}),i=G("div",J(this.config.selectors.progress));if(i.appendChild(n.call(this,"seek",{id:`plyr-seek-${e.id}`})),i.appendChild(s.call(this,"buffer")),this.config.tooltips.seek){const e=G("span",{class:this.config.classNames.tooltip},"00:00");i.appendChild(e),this.elements.display.seekTooltip=e}this.elements.progress=i,t.appendChild(this.elements.progress),c.appendChild(t)}if("current-time"===a&&c.appendChild(r.call(this,"currentTime",h)),"duration"===a&&c.appendChild(r.call(this,"duration",h)),"mute"===a||"volume"===a){let{volume:t}=this.elements;if(R(t)&&c.contains(t)||(t=G("div",$({},h,{class:`${h.class} plyr__volume`.trim()})),this.elements.volume=t,c.appendChild(t)),"mute"===a&&t.appendChild(i.call(this,"mute")),"volume"===a&&!H.isIos&&!H.isIPadOS){const i={max:1,step:.05,value:this.config.volume};t.appendChild(n.call(this,"volume",$(i,{id:`plyr-volume-${e.id}`})))}}if("captions"===a&&c.appendChild(i.call(this,"captions",h)),"settings"===a&&!N(this.config.settings)){const s=G("div",$({},h,{class:`${h.class} plyr__menu`.trim(),hidden:""}));s.appendChild(i.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${e.id}`,"aria-expanded":!1}));const n=G("div",{class:"plyr__menu__container",id:`plyr-settings-${e.id}`,hidden:""}),r=G("div"),a=G("div",{id:`plyr-settings-${e.id}-home`}),o=G("div",{role:"menu"});a.appendChild(o),r.appendChild(a),this.elements.settings.panels.home=a,this.config.settings.forEach(i=>{const s=G("button",$(J(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));t.call(this,s,i),he.call(this,s,"click",()=>{l.call(this,i,!1)});const n=G("span",null,Ie.get(i,this.config)),a=G("span",{class:this.config.classNames.menu.value});a.innerHTML=e[i],n.appendChild(a),s.appendChild(n),o.appendChild(s);const c=G("div",{id:`plyr-settings-${e.id}-${i}`,hidden:""}),h=G("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});h.appendChild(G("span",{"aria-hidden":!0},Ie.get(i,this.config))),h.appendChild(G("span",{class:this.config.classNames.hidden},Ie.get("menuBack",this.config))),he.call(this,c,"keydown",e=>{"ArrowLeft"===e.key&&(e.preventDefault(),e.stopPropagation(),l.call(this,"home",!0))},!1),he.call(this,h,"click",()=>{l.call(this,"home",!1)}),c.appendChild(h),c.appendChild(G("div",{role:"menu"})),r.appendChild(c),this.elements.settings.buttons[i]=s,this.elements.settings.panels[i]=c}),n.appendChild(r),s.appendChild(n),c.appendChild(s),this.elements.settings.popup=n,this.elements.settings.menu=s}if("pip"===a&&oe.pip&&c.appendChild(i.call(this,"pip",h)),"airplay"===a&&oe.airplay&&c.appendChild(i.call(this,"airplay",h)),"download"===a){const e=$({},h,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(e.download="");const{download:t}=this.config.urls;!j(t)&&this.isEmbed&&$(e,{icon:`logo-${this.provider}`,label:this.provider}),c.appendChild(i.call(this,"download",e))}"fullscreen"===a&&c.appendChild(i.call(this,"fullscreen",h))}),this.isHTML5&&a.call(this,Ee.getQualityOptions.call(this)),o.call(this),c},inject(){if(this.config.loadSprite){const e=je.getIconUrl.call(this);e.cors&&Fe(e.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let e=null;this.elements.controls=null;const t={id:this.id,seektime:this.config.seekTime,title:this.config.title};let i,s=!0;if(P(this.config.controls)&&(this.config.controls=this.config.controls.call(this,t)),this.config.controls||(this.config.controls=[]),R(this.config.controls)||A(this.config.controls)?e=this.config.controls:(e=je.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:ze.getLabel.call(this)}),s=!1),s&&A(this.config.controls)&&(e=(e=>{let i=e;return Object.entries(t).forEach(([e,t])=>{i=Ae(i,`{${e}}`,t)}),i})(e)),A(this.config.selectors.controls.container)&&(i=document.querySelector(this.config.selectors.controls.container)),R(i)||(i=this.elements.container),i[R(e)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",e),R(this.elements.controls)||je.findElements.call(this),!N(this.elements.buttons)){const e=e=>{const t=this.config.classNames.controlPressed;e.setAttribute("aria-pressed","false"),Object.defineProperty(e,"pressed",{configurable:!0,enumerable:!0,get:()=>te(e,t),set(i=!1){ee(e,t,i),e.setAttribute("aria-pressed",i?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(t=>{L(t)||I(t)?Array.from(t).filter(Boolean).forEach(e):e(t)})}if(H.isEdge&&z(i),this.config.tooltips.controls){const{classNames:e,selectors:t}=this.config,i=`${t.controls.wrapper} ${t.labels} .${e.hidden}`,s=se.call(this,i);Array.from(s).forEach(e=>{ee(e,this.config.classNames.hidden,!1),ee(e,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch(e){}},setMarkers(){var e,t;if(!this.duration||this.elements.markers)return;const i=null===(e=this.config.markers)||void 0===e||null===(t=e.points)||void 0===t?void 0:t.filter(({time:e})=>e>0&&e<this.duration);if(null==i||!i.length)return;const s=document.createDocumentFragment(),n=document.createDocumentFragment();let r=null;const a=`${this.config.classNames.tooltip}--visible`,o=e=>ee(r,a,e);i.forEach(e=>{const t=G("span",{class:this.config.classNames.marker},""),i=e.time/this.duration*100+"%";r&&(t.addEventListener("mouseenter",()=>{e.label||(r.style.left=i,r.innerHTML=e.label,o(!0))}),t.addEventListener("mouseleave",()=>{o(!1)})),t.addEventListener("click",()=>{this.currentTime=e.time}),t.style.left=i,n.appendChild(t)}),s.appendChild(n),this.config.tooltips.seek||(r=G("span",{class:this.config.classNames.tooltip},""),s.appendChild(r)),this.elements.markers={points:n,tip:r},this.elements.progress.appendChild(s)}};function Ne(e,t=!0){let i=e;if(t){const e=document.createElement("a");e.href=i,i=e.href}try{return new URL(i)}catch(e){return null}}function Ve(e){const t=new URLSearchParams;return E(e)&&Object.entries(e).forEach(([e,i])=>{t.set(e,i)}),t}const ze={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!oe.textTracks)return void(L(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&je.setCaptionsMenu.call(this));var e,t;if(R(this.elements.captions)||(this.elements.captions=G("div",J(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),e=this.elements.captions,t=this.elements.wrapper,R(e)&&R(t)&&t.parentNode.insertBefore(e,t.nextSibling)),H.isIE&&window.URL){const e=this.media.querySelectorAll("track");Array.from(e).forEach(e=>{const t=e.getAttribute("src"),i=Ne(t);null!==i&&i.hostname!==window.location.href.hostname&&["http:","https:"].includes(i.protocol)&&Oe(t,"blob").then(t=>{e.setAttribute("src",window.URL.createObjectURL(t))}).catch(()=>{X(e)})})}const i=ye((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(e=>e.split("-")[0]));let s=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();"auto"===s&&([s]=i);let n=this.storage.get("captions");if(M(n)||({active:n}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:n,language:s,languages:i}),this.isHTML5){const e=this.config.captions.update?"addtrack removetrack":"removetrack";he.call(this,this.media.textTracks,e,ze.update.bind(this))}setTimeout(ze.update.bind(this),0)},update(){const e=ze.getTracks.call(this,!0),{active:t,language:i,meta:s,currentTrackNode:n}=this.captions,r=Boolean(e.find(e=>e.language===i));this.isHTML5&&this.isVideo&&e.filter(e=>!s.get(e)).forEach(e=>{this.debug.log("Track added",e),s.set(e,{default:"showing"===e.mode}),"showing"===e.mode&&(e.mode="hidden"),he.call(this,e,"cuechange",()=>ze.updateCues.call(this))}),(r&&this.language!==i||!e.includes(n))&&(ze.setLanguage.call(this,i),ze.toggle.call(this,t&&r)),this.elements&&ee(this.elements.container,this.config.classNames.captions.enabled,!N(e)),L(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&je.setCaptionsMenu.call(this)},toggle(e,t=!0){if(!this.supported.ui)return;const{toggled:i}=this.captions,s=this.config.classNames.captions.active,n=T(e)?!i:e;if(n!==i){if(t||(this.captions.active=n,this.storage.set({captions:n})),!this.language&&n&&!t){const e=ze.getTracks.call(this),t=ze.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=t.language,void ze.set.call(this,e.indexOf(t))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=n),ee(this.elements.container,s,n),this.captions.toggled=n,je.updateSetting.call(this,"captions"),pe.call(this,this.media,n?"captionsenabled":"captionsdisabled")}setTimeout(()=>{n&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(e,t=!0){const i=ze.getTracks.call(this);if(-1!==e)if(C(e))if(e in i){if(this.captions.currentTrack!==e){this.captions.currentTrack=e;const s=i[e],{language:n}=s||{};this.captions.currentTrackNode=s,je.updateSetting.call(this,"captions"),t||(this.captions.language=n,this.storage.set({language:n})),this.isVimeo&&this.embed.enableTextTrack(n),pe.call(this,this.media,"languagechange")}ze.toggle.call(this,!0,t),this.isHTML5&&this.isVideo&&ze.updateCues.call(this)}else this.debug.warn("Track not found",e);else this.debug.warn("Invalid caption argument",e);else ze.toggle.call(this,!1,t)},setLanguage(e,t=!0){if(!A(e))return void this.debug.warn("Invalid language argument",e);const i=e.toLowerCase();this.captions.language=i;const s=ze.getTracks.call(this),n=ze.findTrack.call(this,[i]);ze.set.call(this,s.indexOf(n),t)},getTracks(e=!1){return Array.from((this.media||{}).textTracks||[]).filter(t=>!this.isHTML5||e||this.captions.meta.has(t)).filter(e=>["captions","subtitles"].includes(e.kind))},findTrack(e,t=!1){const i=ze.getTracks.call(this),s=e=>Number((this.captions.meta.get(e)||{}).default),n=Array.from(i).sort((e,t)=>s(t)-s(e));let r;return e.every(e=>(r=n.find(t=>t.language===e),!r)),r||(t?n[0]:void 0)},getCurrentTrack(){return ze.getTracks.call(this)[this.currentTrack]},getLabel(e){let t=e;return!B(t)&&oe.textTracks&&this.captions.toggled&&(t=ze.getCurrentTrack.call(this)),B(t)?N(t.label)?N(t.language)?Ie.get("enabled",this.config):e.language.toUpperCase():t.label:Ie.get("disabled",this.config)},updateCues(e){if(!this.supported.ui)return;if(!R(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!T(e)&&!Array.isArray(e))return void this.debug.warn("updateCues: Invalid input",e);let t=e;if(!t){const e=ze.getCurrentTrack.call(this);t=Array.from((e||{}).activeCues||[]).map(e=>e.getCueAsHTML()).map(Pe)}const i=t.map(e=>e.trim()).join("\n");if(i!==this.elements.captions.innerHTML){K(this.elements.captions);const e=G("span",J(this.config.selectors.caption));e.innerHTML=i,this.elements.captions.appendChild(e),pe.call(this,this.media,"cuechange")}}},He={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},qe="picture-in-picture",$e={html5:"html5",youtube:"youtube",vimeo:"vimeo"},Ue="video",We=()=>{};class Ge{constructor(e=!1){this.enabled=window.console&&e,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):We}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):We}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):We}}class Ye{constructor(t){e(this,"onChange",()=>{if(!this.supported)return;const e=this.player.elements.buttons.fullscreen;R(e)&&(e.pressed=this.active);const t=this.target===this.player.media?this.target:this.player.elements.container;pe.call(this.player,t,this.active?"enterfullscreen":"exitfullscreen",!0)}),e(this,"toggleFallback",(e=!1)=>{if(e?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=e?"hidden":"",ee(this.target,this.player.config.classNames.fullscreen.fallback,e),H.isIos){let t=document.head.querySelector('meta[name="viewport"]');const i="viewport-fit=cover";t||(t=document.createElement("meta"),t.setAttribute("name","viewport"));const s=A(t.content)&&t.content.includes(i);e?(this.cleanupViewport=!s,s||(t.content+=`,${i}`)):this.cleanupViewport&&(t.content=t.content.split(",").filter(e=>e.trim()!==i).join(","))}this.onChange()}),e(this,"trapFocus",e=>{if(H.isIos||H.isIPadOS||!this.active||"Tab"!==e.key)return;const t=document.activeElement,i=se.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[s]=i,n=i[i.length-1];t!==n||e.shiftKey?t===s&&e.shiftKey&&(n.focus(),e.preventDefault()):(s.focus(),e.preventDefault())}),e(this,"update",()=>{if(this.supported){let e;e=this.forceFallback?"Fallback (forced)":Ye.nativeSupported?"Native":"Fallback",this.player.debug.log(`${e} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");ee(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),e(this,"enter",()=>{this.supported&&(H.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Ye.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?N(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),e(this,"exit",()=>{if(this.supported)if(H.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),ge(this.player.play());else if(!Ye.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!N(this.prefix)){const e="moz"===this.prefix?"Cancel":"Exit";document[`${this.prefix}${e}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),e(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=t,this.prefix=Ye.prefix,this.property=Ye.property,this.scrollPosition={x:0,y:0},this.forceFallback="force"===t.config.fullscreen.fallback,this.player.elements.fullscreen=t.config.fullscreen.container&&function(e,t){const{prototype:i}=Element;return(i.closest||function(){let e=this;do{if(ie.matches(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null}).call(e,t)}(this.player.elements.container,t.config.fullscreen.container),he.call(this.player,document,"ms"===this.prefix?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),he.call(this.player,this.player.elements.container,"dblclick",e=>{R(this.player.elements.controls)&&this.player.elements.controls.contains(e.target)||this.player.listeners.proxy(e,this.toggle,"fullscreen")}),he.call(this,this.player.elements.container,"keydown",e=>this.trapFocus(e)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Ye.nativeSupported&&!this.forceFallback}static get prefix(){if(P(document.exitFullscreen))return"";let e="";return["webkit","moz","ms"].some(t=>!(!P(document[`${t}ExitFullscreen`])&&!P(document[`${t}CancelFullScreen`])||(e=t,0))),e}static get property(){return"moz"===this.prefix?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Ye.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Ye.nativeSupported||!H.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Ye.nativeSupported||this.forceFallback)return te(this.target,this.player.config.classNames.fullscreen.fallback);const e=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return e&&e.shadowRoot?e===this.target.getRootNode().host:e===this.target}get target(){return H.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function Xe(e,t=1){return new Promise((i,s)=>{const n=new Image,r=()=>{delete n.onload,delete n.onerror,(n.naturalWidth>=t?i:s)(n)};Object.assign(n,{onload:r,onerror:r,src:e})})}const Ke={addStyleHook(){ee(this.elements.container,this.config.selectors.container.replace(".",""),!0),ee(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(e=!1){e&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void Ke.toggleNativeControls.call(this,!0);R(this.elements.controls)||(je.inject.call(this),this.listeners.controls()),Ke.toggleNativeControls.call(this),this.isHTML5&&ze.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,je.updateVolume.call(this),je.timeUpdate.call(this),je.durationUpdate.call(this),Ke.checkPlaying.call(this),ee(this.elements.container,this.config.classNames.pip.supported,oe.pip&&this.isHTML5&&this.isVideo),ee(this.elements.container,this.config.classNames.airplay.supported,oe.airplay&&this.isHTML5),ee(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{pe.call(this,this.media,"ready")},0),Ke.setTitle.call(this),this.poster&&Ke.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&je.durationUpdate.call(this),this.config.mediaMetadata&&je.setMediaMetadata.call(this)},setTitle(){let e=Ie.get("play",this.config);if(A(this.config.title)&&!N(this.config.title)&&(e+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(t=>{t.setAttribute("aria-label",e)}),this.isEmbed){const e=ne.call(this,"iframe");if(!R(e))return;const t=N(this.config.title)?"video":this.config.title,i=Ie.get("frameTitle",this.config);e.setAttribute("title",i.replace("{title}",t))}},togglePoster(e){ee(this.elements.container,this.config.classNames.posterEnabled,e)},setPoster(e,t=!0){return t&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",e),this.elements.poster.removeAttribute("hidden"),me.call(this).then(()=>Xe(e)).catch(t=>{throw e===this.poster&&Ke.togglePoster.call(this,!1),t}).then(()=>{if(e!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${e}')`,backgroundSize:""}),Ke.togglePoster.call(this,!0),e)))},checkPlaying(e){ee(this.elements.container,this.config.classNames.playing,this.playing),ee(this.elements.container,this.config.classNames.paused,this.paused),ee(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(e=>{Object.assign(e,{pressed:this.playing}),e.setAttribute("aria-label",Ie.get(this.playing?"pause":"play",this.config))}),O(e)&&"timeupdate"===e.type||Ke.toggleControls.call(this)},checkLoading(e){this.loading=["stalled","waiting"].includes(e.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{ee(this.elements.container,this.config.classNames.loading,this.loading),Ke.toggleControls.call(this)},this.loading?250:0)},toggleControls(e){const{controls:t}=this.elements;if(t&&this.config.hideControls){const i=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(Boolean(e||this.loading||this.paused||t.pressed||t.hover||i))}},migrateStyles(){Object.values({...this.media.style}).filter(e=>!N(e)&&A(e)&&e.startsWith("--plyr")).forEach(e=>{this.elements.container.style.setProperty(e,this.media.style.getPropertyValue(e)),this.media.style.removeProperty(e)}),N(this.media.style)&&this.media.removeAttribute("style")}};class Ze{constructor(t){e(this,"firstTouch",()=>{const{player:e}=this,{elements:t}=e;e.touch=!0,ee(t.container,e.config.classNames.isTouch,!0)}),e(this,"global",(e=!0)=>{const{player:t}=this;t.config.keyboard.global&&ce.call(t,window,"keydown keyup",this.handleKey,e,!1),ce.call(t,document.body,"click",this.toggleMenu,e),de.call(t,document.body,"touchstart",this.firstTouch)}),e(this,"container",()=>{const{player:e}=this,{config:t,elements:i,timers:s}=e;!t.keyboard.global&&t.keyboard.focused&&he.call(e,i.container,"keydown keyup",this.handleKey,!1),he.call(e,i.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",t=>{const{controls:n}=i;n&&"enterfullscreen"===t.type&&(n.pressed=!1,n.hover=!1);let r=0;["touchstart","touchmove","mousemove"].includes(t.type)&&(Ke.toggleControls.call(e,!0),r=e.touch?3e3:2e3),clearTimeout(s.controls),s.controls=setTimeout(()=>Ke.toggleControls.call(e,!1),r)});const n=()=>{if(!e.isVimeo||e.config.vimeo.premium)return;const t=i.wrapper,{active:s}=e.fullscreen,[n,r]=Se.call(e),a=be(`aspect-ratio: ${n} / ${r}`);if(!s)return void(a?(t.style.width=null,t.style.height=null):(t.style.maxWidth=null,t.style.margin=null));const[o,l]=[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)],c=o/l>n/r;a?(t.style.width=c?"auto":"100%",t.style.height=c?"100%":"auto"):(t.style.maxWidth=c?l/r*n+"px":null,t.style.margin=c?"0 auto":null)},r=()=>{clearTimeout(s.resized),s.resized=setTimeout(n,50)};he.call(e,i.container,"enterfullscreen exitfullscreen",t=>{const{target:s}=e.fullscreen;s===i.container&&(!e.isEmbed&&N(e.config.ratio)||(n(),("enterfullscreen"===t.type?he:ue).call(e,window,"resize",r)))})}),e(this,"media",()=>{const{player:e}=this,{elements:t}=e;if(he.call(e,e.media,"timeupdate seeking seeked",t=>je.timeUpdate.call(e,t)),he.call(e,e.media,"durationchange loadeddata loadedmetadata",t=>je.durationUpdate.call(e,t)),he.call(e,e.media,"ended",()=>{e.isHTML5&&e.isVideo&&e.config.resetOnEnd&&(e.restart(),e.pause())}),he.call(e,e.media,"progress playing seeking seeked",t=>je.updateProgress.call(e,t)),he.call(e,e.media,"volumechange",t=>je.updateVolume.call(e,t)),he.call(e,e.media,"playing play pause ended emptied timeupdate",t=>Ke.checkPlaying.call(e,t)),he.call(e,e.media,"waiting canplay seeked playing",t=>Ke.checkLoading.call(e,t)),e.supported.ui&&e.config.clickToPlay&&!e.isAudio){const i=ne.call(e,`.${e.config.classNames.video}`);if(!R(i))return;he.call(e,t.container,"click",s=>{([t.container,i].includes(s.target)||i.contains(s.target))&&(e.touch&&e.config.hideControls||(e.ended?(this.proxy(s,e.restart,"restart"),this.proxy(s,()=>{ge(e.play())},"play")):this.proxy(s,()=>{ge(e.togglePlay())},"play")))})}e.supported.ui&&e.config.disableContextMenu&&he.call(e,t.wrapper,"contextmenu",e=>{e.preventDefault()},!1),he.call(e,e.media,"volumechange",()=>{e.storage.set({volume:e.volume,muted:e.muted})}),he.call(e,e.media,"ratechange",()=>{je.updateSetting.call(e,"speed"),e.storage.set({speed:e.speed})}),he.call(e,e.media,"qualitychange",t=>{je.updateSetting.call(e,"quality",null,t.detail.quality)}),he.call(e,e.media,"ready qualitychange",()=>{je.setDownloadUrl.call(e)});const i=e.config.events.concat(["keyup","keydown"]).join(" ");he.call(e,e.media,i,i=>{let{detail:s={}}=i;"error"===i.type&&(s=e.media.error),pe.call(e,t.container,i.type,!0,s)})}),e(this,"proxy",(e,t,i)=>{const{player:s}=this,n=s.config.listeners[i];let r=!0;P(n)&&(r=n.call(s,e)),!1!==r&&P(t)&&t.call(s,e)}),e(this,"bind",(e,t,i,s,n=!0)=>{const{player:r}=this,a=r.config.listeners[s],o=P(a);he.call(r,e,t,e=>this.proxy(e,i,s),n&&!o)}),e(this,"controls",()=>{const{player:e}=this,{elements:t}=e,i=H.isIE?"change":"input";if(t.buttons.play&&Array.from(t.buttons.play).forEach(t=>{this.bind(t,"click",()=>{ge(e.togglePlay())},"play")}),this.bind(t.buttons.restart,"click",e.restart,"restart"),this.bind(t.buttons.rewind,"click",()=>{e.lastSeekTime=Date.now(),e.rewind()},"rewind"),this.bind(t.buttons.fastForward,"click",()=>{e.lastSeekTime=Date.now(),e.forward()},"fastForward"),this.bind(t.buttons.mute,"click",()=>{e.muted=!e.muted},"mute"),this.bind(t.buttons.captions,"click",()=>e.toggleCaptions()),this.bind(t.buttons.download,"click",()=>{pe.call(e,e.media,"download")},"download"),this.bind(t.buttons.fullscreen,"click",()=>{e.fullscreen.toggle()},"fullscreen"),this.bind(t.buttons.pip,"click",()=>{e.pip="toggle"},"pip"),this.bind(t.buttons.airplay,"click",e.airplay,"airplay"),this.bind(t.buttons.settings,"click",t=>{t.stopPropagation(),t.preventDefault(),je.toggleMenu.call(e,t)},null,!1),this.bind(t.buttons.settings,"keyup",t=>{[" ","Enter"].includes(t.key)&&("Enter"!==t.key?(t.preventDefault(),t.stopPropagation(),je.toggleMenu.call(e,t)):je.focusFirstMenuItem.call(e,null,!0))},null,!1),this.bind(t.settings.menu,"keydown",t=>{"Escape"===t.key&&je.toggleMenu.call(e,t)}),this.bind(t.inputs.seek,"mousedown mousemove",e=>{const i=t.progress.getBoundingClientRect(),s=100/i.width*(e.pageX-i.left);e.currentTarget.setAttribute("seek-value",s)}),this.bind(t.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",t=>{const i=t.currentTarget,s="play-on-seeked";if(F(t)&&!["ArrowLeft","ArrowRight"].includes(t.key))return;e.lastSeekTime=Date.now();const n=i.hasAttribute(s),r=["mouseup","touchend","keyup"].includes(t.type);n&&r?(i.removeAttribute(s),ge(e.play())):!r&&e.playing&&(i.setAttribute(s,""),e.pause())}),H.isIos){const t=se.call(e,'input[type="range"]');Array.from(t).forEach(e=>this.bind(e,i,e=>z(e.target)))}this.bind(t.inputs.seek,i,t=>{const i=t.currentTarget;let s=i.getAttribute("seek-value");N(s)&&(s=i.value),i.removeAttribute("seek-value"),e.currentTime=s/i.max*e.duration},"seek"),this.bind(t.progress,"mouseenter mouseleave mousemove",t=>je.updateSeekTooltip.call(e,t)),this.bind(t.progress,"mousemove touchmove",t=>{const{previewThumbnails:i}=e;i&&i.loaded&&i.startMove(t)}),this.bind(t.progress,"mouseleave touchend click",()=>{const{previewThumbnails:t}=e;t&&t.loaded&&t.endMove(!1,!0)}),this.bind(t.progress,"mousedown touchstart",t=>{const{previewThumbnails:i}=e;i&&i.loaded&&i.startScrubbing(t)}),this.bind(t.progress,"mouseup touchend",t=>{const{previewThumbnails:i}=e;i&&i.loaded&&i.endScrubbing(t)}),H.isWebKit&&Array.from(se.call(e,'input[type="range"]')).forEach(t=>{this.bind(t,"input",t=>je.updateRangeFill.call(e,t.target))}),e.config.toggleInvert&&!R(t.display.duration)&&this.bind(t.display.currentTime,"click",()=>{0!==e.currentTime&&(e.config.invertTime=!e.config.invertTime,je.timeUpdate.call(e))}),this.bind(t.inputs.volume,i,t=>{e.volume=t.target.value},"volume"),this.bind(t.controls,"mouseenter mouseleave",i=>{t.controls.hover=!e.touch&&"mouseenter"===i.type}),t.fullscreen&&Array.from(t.fullscreen.children).filter(e=>!e.contains(t.container)).forEach(i=>{this.bind(i,"mouseenter mouseleave",i=>{t.controls&&(t.controls.hover=!e.touch&&"mouseenter"===i.type)})}),this.bind(t.controls,"mousedown mouseup touchstart touchend touchcancel",e=>{t.controls.pressed=["mousedown","touchstart"].includes(e.type)}),this.bind(t.controls,"focusin",()=>{const{config:i,timers:s}=e;ee(t.controls,i.classNames.noTransition,!0),Ke.toggleControls.call(e,!0),setTimeout(()=>{ee(t.controls,i.classNames.noTransition,!1)},0);const n=this.touch?3e3:4e3;clearTimeout(s.controls),s.controls=setTimeout(()=>Ke.toggleControls.call(e,!1),n)}),this.bind(t.inputs.volume,"wheel",t=>{const i=t.webkitDirectionInvertedFromDevice,[s,n]=[t.deltaX,-t.deltaY].map(e=>i?-e:e),r=Math.sign(Math.abs(s)>Math.abs(n)?s:n);e.increaseVolume(r/50);const{volume:a}=e.media;(1===r&&a<1||-1===r&&a>0)&&t.preventDefault()},"volume",!1)}),this.player=t,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(e){const{player:t}=this,{elements:i}=t,{key:s,type:n,altKey:r,ctrlKey:a,metaKey:o,shiftKey:l}=e,c="keydown"===n,h=c&&s===this.lastKey;var u;if(!(r||a||o||l)&&s)if(c){const n=document.activeElement;if(R(n)){const{editable:s}=t.config.selectors,{seek:r}=i.inputs;if(n!==r&&ie(n,s))return;if(" "===e.key&&ie(n,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(s)&&(e.preventDefault(),e.stopPropagation()),s){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":h||(u=parseInt(s,10),t.currentTime=t.duration/10*u);break;case" ":case"k":h||ge(t.togglePlay());break;case"ArrowUp":t.increaseVolume(.1);break;case"ArrowDown":t.decreaseVolume(.1);break;case"m":h||(t.muted=!t.muted);break;case"ArrowRight":t.forward();break;case"ArrowLeft":t.rewind();break;case"f":t.fullscreen.toggle();break;case"c":h||t.toggleCaptions();break;case"l":t.loop=!t.loop}"Escape"===s&&!t.fullscreen.usingNative&&t.fullscreen.active&&t.fullscreen.toggle(),this.lastKey=s}else this.lastKey=null}toggleMenu(e){je.toggleMenu.call(this.player,e)}}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self&&self;var Je=function(e,t){return function(e){e.exports=function(){var e=function(){},t={},i={},s={};function n(e,t){e=e.push?e:[e];var n,r,a,o=[],l=e.length,c=l;for(n=function(e,i){i.length&&o.push(e),--c||t(o)};l--;)r=e[l],(a=i[r])?n(r,a):(s[r]=s[r]||[]).push(n)}function r(e,t){if(e){var n=s[e];if(i[e]=t,n)for(;n.length;)n[0](e,t),n.splice(0,1)}}function a(t,i){t.call&&(t={success:t}),i.length?(t.error||e)(i):(t.success||e)(t)}function o(t,i,s,n){var r,a,l=document,c=s.async,h=(s.numRetries||0)+1,u=s.before||e,d=t.replace(/[\?|#].*$/,""),p=t.replace(/^(css|img)!/,"");n=n||0,/(^css!|\.css$)/.test(d)?((a=l.createElement("link")).rel="stylesheet",a.href=p,(r="hideFocus"in a)&&a.relList&&(r=0,a.rel="preload",a.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(d)?(a=l.createElement("img")).src=p:((a=l.createElement("script")).src=t,a.async=void 0===c||c),a.onload=a.onerror=a.onbeforeload=function(e){var l=e.type[0];if(r)try{a.sheet.cssText.length||(l="e")}catch(e){18!=e.code&&(l="e")}if("e"==l){if((n+=1)<h)return o(t,i,s,n)}else if("preload"==a.rel&&"style"==a.as)return a.rel="stylesheet";i(t,l,e.defaultPrevented)},!1!==u(t,a)&&l.head.appendChild(a)}function l(e,t,i){var s,n,r=(e=e.push?e:[e]).length,a=r,l=[];for(s=function(e,i,s){if("e"==i&&l.push(e),"b"==i){if(!s)return;l.push(e)}--r||t(l)},n=0;n<a;n++)o(e[n],s,i)}function c(e,i,s){var n,o;if(i&&i.trim&&(n=i),o=(n?s:i)||{},n){if(n in t)throw"LoadJS";t[n]=!0}function c(t,i){l(e,function(e){a(o,e),t&&a({success:t,error:i},e),r(n,e)},o)}if(o.returnPromise)return new Promise(c);c()}return c.ready=function(e,t){return n(e,function(e){a(t,e)}),c},c.done=function(e){r(e,[])},c.reset=function(){t={},i={},s={}},c.isDefined=function(e){return e in t},c}()}(t={exports:{}}),t.exports}();function Qe(e){return new Promise((t,i)=>{Je(e,{success:t,error:i})})}function et(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,pe.call(this,this.media,e?"play":"pause"))}const tt={setup(){const e=this;ee(e.elements.wrapper,e.config.classNames.embed,!0),e.options.speed=e.config.speed.options,ke.call(e),E(window.Vimeo)?tt.ready.call(e):Qe(e.config.urls.vimeo.sdk).then(()=>{tt.ready.call(e)}).catch(t=>{e.debug.warn("Vimeo SDK (player.js) failed to load",t)})},ready(){const e=this,t=e.config.vimeo,{premium:i,referrerPolicy:s,...n}=t;let r=e.media.getAttribute("src"),a="";N(r)?(r=e.media.getAttribute(e.config.attributes.embed.id),a=e.media.getAttribute(e.config.attributes.embed.hash)):a=function(e){const t=e.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return t&&5===t.length?t[4]:null}(r);const o=a?{h:a}:{};i&&Object.assign(n,{controls:!1,sidedock:!1});const l=Ve({loop:e.config.loop.active,autoplay:e.autoplay,muted:e.muted,gesture:"media",playsinline:e.config.playsinline,...o,...n}),c=N(h=r)?null:C(Number(h))?h:h.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:h;var h;const u=G("iframe"),d=Ce(e.config.urls.vimeo.iframe,c,l);if(u.setAttribute("src",d),u.setAttribute("allowfullscreen",""),u.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),N(s)||u.setAttribute("referrerPolicy",s),i||!t.customControls)u.setAttribute("data-poster",e.poster),e.media=Z(u,e.media);else{const t=G("div",{class:e.config.classNames.embedContainer,"data-poster":e.poster});t.appendChild(u),e.media=Z(t,e.media)}t.customControls||Oe(Ce(e.config.urls.vimeo.api,d)).then(t=>{!N(t)&&t.thumbnail_url&&Ke.setPoster.call(e,t.thumbnail_url).catch(()=>{})}),e.embed=new window.Vimeo.Player(u,{autopause:e.config.autopause,muted:e.muted}),e.media.paused=!0,e.media.currentTime=0,e.supported.ui&&e.embed.disableTextTrack(),e.media.play=()=>(et.call(e,!0),e.embed.play()),e.media.pause=()=>(et.call(e,!1),e.embed.pause()),e.media.stop=()=>{e.pause(),e.currentTime=0};let{currentTime:p}=e.media;Object.defineProperty(e.media,"currentTime",{get:()=>p,set(t){const{embed:i,media:s,paused:n,volume:r}=e,a=n&&!i.hasPlayed;s.seeking=!0,pe.call(e,s,"seeking"),Promise.resolve(a&&i.setVolume(0)).then(()=>i.setCurrentTime(t)).then(()=>a&&i.pause()).then(()=>a&&i.setVolume(r)).catch(()=>{})}});let f=e.config.speed.selected;Object.defineProperty(e.media,"playbackRate",{get:()=>f,set(t){e.embed.setPlaybackRate(t).then(()=>{f=t,pe.call(e,e.media,"ratechange")}).catch(()=>{e.options.speed=[1]})}});let{volume:m}=e.config;Object.defineProperty(e.media,"volume",{get:()=>m,set(t){e.embed.setVolume(t).then(()=>{m=t,pe.call(e,e.media,"volumechange")})}});let{muted:g}=e.config;Object.defineProperty(e.media,"muted",{get:()=>g,set(t){const i=!!M(t)&&t;e.embed.setMuted(!!i||e.config.muted).then(()=>{g=i,pe.call(e,e.media,"volumechange")})}});let y,{loop:v}=e.config;Object.defineProperty(e.media,"loop",{get:()=>v,set(t){const i=M(t)?t:e.config.loop.active;e.embed.setLoop(i).then(()=>{v=i})}}),e.embed.getVideoUrl().then(t=>{y=t,je.setDownloadUrl.call(e)}).catch(e=>{this.debug.warn(e)}),Object.defineProperty(e.media,"currentSrc",{get:()=>y}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration}),Promise.all([e.embed.getVideoWidth(),e.embed.getVideoHeight()]).then(t=>{const[i,s]=t;e.embed.ratio=Te(i,s),ke.call(this)}),e.embed.setAutopause(e.config.autopause).then(t=>{e.config.autopause=t}),e.embed.getVideoTitle().then(t=>{e.config.title=t,Ke.setTitle.call(this)}),e.embed.getCurrentTime().then(t=>{p=t,pe.call(e,e.media,"timeupdate")}),e.embed.getDuration().then(t=>{e.media.duration=t,pe.call(e,e.media,"durationchange")}),e.embed.getTextTracks().then(t=>{e.media.textTracks=t,ze.setup.call(e)}),e.embed.on("cuechange",({cues:t=[]})=>{const i=t.map(e=>function(e){const t=document.createDocumentFragment(),i=document.createElement("div");return t.appendChild(i),i.innerHTML=e,t.firstChild.innerText}(e.text));ze.updateCues.call(e,i)}),e.embed.on("loaded",()=>{e.embed.getPaused().then(t=>{et.call(e,!t),t||pe.call(e,e.media,"playing")}),R(e.embed.element)&&e.supported.ui&&e.embed.element.setAttribute("tabindex",-1)}),e.embed.on("bufferstart",()=>{pe.call(e,e.media,"waiting")}),e.embed.on("bufferend",()=>{pe.call(e,e.media,"playing")}),e.embed.on("play",()=>{et.call(e,!0),pe.call(e,e.media,"playing")}),e.embed.on("pause",()=>{et.call(e,!1)}),e.embed.on("timeupdate",t=>{e.media.seeking=!1,p=t.seconds,pe.call(e,e.media,"timeupdate")}),e.embed.on("progress",t=>{e.media.buffered=t.percent,pe.call(e,e.media,"progress"),1===parseInt(t.percent,10)&&pe.call(e,e.media,"canplaythrough"),e.embed.getDuration().then(t=>{t!==e.media.duration&&(e.media.duration=t,pe.call(e,e.media,"durationchange"))})}),e.embed.on("seeked",()=>{e.media.seeking=!1,pe.call(e,e.media,"seeked")}),e.embed.on("ended",()=>{e.media.paused=!0,pe.call(e,e.media,"ended")}),e.embed.on("error",t=>{e.media.error=t,pe.call(e,e.media,"error")}),t.customControls&&setTimeout(()=>Ke.build.call(e),0)}};function it(e){e&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===e&&(this.media.paused=!e,pe.call(this,this.media,e?"play":"pause"))}function st(e){return e.noCookie?"https://www.youtube-nocookie.com":"http:"===window.location.protocol?"http://www.youtube.com":void 0}const nt={setup(){if(ee(this.elements.wrapper,this.config.classNames.embed,!0),E(window.YT)&&P(window.YT.Player))nt.ready.call(this);else{const e=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{P(e)&&e(),nt.ready.call(this)},Qe(this.config.urls.youtube.sdk).catch(e=>{this.debug.warn("YouTube API failed to load",e)})}},getTitle(e){Oe(Ce(this.config.urls.youtube.api,e)).then(e=>{if(E(e)){const{title:t,height:i,width:s}=e;this.config.title=t,Ke.setTitle.call(this),this.embed.ratio=Te(s,i)}ke.call(this)}).catch(()=>{ke.call(this)})},ready(){const e=this,t=e.config.youtube,i=e.media&&e.media.getAttribute("id");if(!N(i)&&i.startsWith("youtube-"))return;let s=e.media.getAttribute("src");N(s)&&(s=e.media.getAttribute(this.config.attributes.embed.id));const n=N(r=s)?null:r.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:r;var r;const a=G("div",{id:`${e.provider}-${Math.floor(1e4*Math.random())}`,"data-poster":t.customControls?e.poster:void 0});if(e.media=Z(a,e.media),t.customControls){const t=e=>`https://i.ytimg.com/vi/${n}/${e}default.jpg`;Xe(t("maxres"),121).catch(()=>Xe(t("sd"),121)).catch(()=>Xe(t("hq"))).then(t=>Ke.setPoster.call(e,t.src)).then(t=>{t.includes("maxres")||(e.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}e.embed=new window.YT.Player(e.media,{videoId:n,host:st(t),playerVars:$({},{autoplay:e.config.autoplay?1:0,hl:e.config.hl,controls:e.supported.ui&&t.customControls?0:1,disablekb:1,playsinline:e.config.playsinline&&!e.config.fullscreen.iosNative?1:0,cc_load_policy:e.captions.active?1:0,cc_lang_pref:e.config.captions.language,widget_referrer:window?window.location.href:null},t),events:{onError(t){if(!e.media.error){const i=t.data,s={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[i]||"An unknown error occurred";e.media.error={code:i,message:s},pe.call(e,e.media,"error")}},onPlaybackRateChange(t){const i=t.target;e.media.playbackRate=i.getPlaybackRate(),pe.call(e,e.media,"ratechange")},onReady(i){if(P(e.media.play))return;const s=i.target;nt.getTitle.call(e,n),e.media.play=()=>{it.call(e,!0),s.playVideo()},e.media.pause=()=>{it.call(e,!1),s.pauseVideo()},e.media.stop=()=>{s.stopVideo()},e.media.duration=s.getDuration(),e.media.paused=!0,e.media.currentTime=0,Object.defineProperty(e.media,"currentTime",{get:()=>Number(s.getCurrentTime()),set(t){e.paused&&!e.embed.hasPlayed&&e.embed.mute(),e.media.seeking=!0,pe.call(e,e.media,"seeking"),s.seekTo(t)}}),Object.defineProperty(e.media,"playbackRate",{get:()=>s.getPlaybackRate(),set(e){s.setPlaybackRate(e)}});let{volume:r}=e.config;Object.defineProperty(e.media,"volume",{get:()=>r,set(t){r=t,s.setVolume(100*r),pe.call(e,e.media,"volumechange")}});let{muted:a}=e.config;Object.defineProperty(e.media,"muted",{get:()=>a,set(t){const i=M(t)?t:a;a=i,s[i?"mute":"unMute"](),s.setVolume(100*r),pe.call(e,e.media,"volumechange")}}),Object.defineProperty(e.media,"currentSrc",{get:()=>s.getVideoUrl()}),Object.defineProperty(e.media,"ended",{get:()=>e.currentTime===e.duration});const o=s.getAvailablePlaybackRates();e.options.speed=o.filter(t=>e.config.speed.options.includes(t)),e.supported.ui&&t.customControls&&e.media.setAttribute("tabindex",-1),pe.call(e,e.media,"timeupdate"),pe.call(e,e.media,"durationchange"),clearInterval(e.timers.buffering),e.timers.buffering=setInterval(()=>{e.media.buffered=s.getVideoLoadedFraction(),(null===e.media.lastBuffered||e.media.lastBuffered<e.media.buffered)&&pe.call(e,e.media,"progress"),e.media.lastBuffered=e.media.buffered,1===e.media.buffered&&(clearInterval(e.timers.buffering),pe.call(e,e.media,"canplaythrough"))},200),t.customControls&&setTimeout(()=>Ke.build.call(e),50)},onStateChange(i){const s=i.target;switch(clearInterval(e.timers.playing),e.media.seeking&&[1,2].includes(i.data)&&(e.media.seeking=!1,pe.call(e,e.media,"seeked")),i.data){case-1:pe.call(e,e.media,"timeupdate"),e.media.buffered=s.getVideoLoadedFraction(),pe.call(e,e.media,"progress");break;case 0:it.call(e,!1),e.media.loop?(s.stopVideo(),s.playVideo()):pe.call(e,e.media,"ended");break;case 1:t.customControls&&!e.config.autoplay&&e.media.paused&&!e.embed.hasPlayed?e.media.pause():(it.call(e,!0),pe.call(e,e.media,"playing"),e.timers.playing=setInterval(()=>{pe.call(e,e.media,"timeupdate")},50),e.media.duration!==s.getDuration()&&(e.media.duration=s.getDuration(),pe.call(e,e.media,"durationchange")));break;case 2:e.muted||e.embed.unMute(),it.call(e,!1);break;case 3:pe.call(e,e.media,"waiting")}pe.call(e,e.elements.container,"statechange",!1,{code:i.data})}}})}},rt={setup(){this.media?(ee(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),ee(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&ee(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=G("div",{class:this.config.classNames.video}),U(this.media,this.elements.wrapper),this.elements.poster=G("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?Ee.setup.call(this):this.isYouTube?nt.setup.call(this):this.isVimeo&&tt.setup.call(this)):this.debug.warn("No media element found!")}};class at{constructor(t){e(this,"load",()=>{this.enabled&&(E(window.google)&&E(window.google.ima)?this.ready():Qe(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),e(this,"ready",()=>{var e;this.enabled||((e=this).manager&&e.manager.destroy(),e.elements.displayContainer&&e.elements.displayContainer.destroy(),e.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),e(this,"setupIMA",()=>{this.elements.container=G("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,e=>this.onAdsManagerLoaded(e),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e=>this.onAdError(e),!1),this.requestAds()}),e(this,"requestAds",()=>{const{container:e}=this.player.elements;try{const t=new google.ima.AdsRequest;t.adTagUrl=this.tagUrl,t.linearAdSlotWidth=e.offsetWidth,t.linearAdSlotHeight=e.offsetHeight,t.nonLinearAdSlotWidth=e.offsetWidth,t.nonLinearAdSlotHeight=e.offsetHeight,t.forceNonLinearFullSlot=!1,t.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(t)}catch(e){this.onAdError(e)}}),e(this,"pollCountdown",(e=!1)=>{if(!e)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const e=De(Math.max(this.manager.getRemainingTime(),0)),t=`${Ie.get("advertisement",this.player.config)} - ${e}`;this.elements.container.setAttribute("data-badge-text",t)},100)}),e(this,"onAdsManagerLoaded",e=>{if(!this.enabled)return;const t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,t.enablePreloading=!0,this.manager=e.getAdsManager(this.player,t),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,e=>this.onAdError(e)),Object.keys(google.ima.AdEvent.Type).forEach(e=>{this.manager.addEventListener(google.ima.AdEvent.Type[e],e=>this.onAdEvent(e))}),this.trigger("loaded")}),e(this,"addCuePoints",()=>{N(this.cuePoints)||this.cuePoints.forEach(e=>{if(0!==e&&-1!==e&&e<this.player.duration){const t=this.player.elements.progress;if(R(t)){const i=100/this.player.duration*e,s=G("span",{class:this.player.config.classNames.cues});s.style.left=`${i.toString()}%`,t.appendChild(s)}}})}),e(this,"onAdEvent",e=>{const{container:t}=this.player.elements,i=e.getAd(),s=e.getAdData();switch((e=>{pe.call(this.player,this.player.media,`ads${e.replace(/_/g,"").toLowerCase()}`)})(e.type),e.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),i.isLinear()||(i.width=t.offsetWidth,i.height=t.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:s.adError&&this.player.debug.warn(`Non-fatal ad error: ${s.adError.getMessage()}`)}}),e(this,"onAdError",e=>{this.cancel(),this.player.debug.warn("Ads error",e)}),e(this,"listeners",()=>{const{container:e}=this.player.elements;let t;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{t=this.player.currentTime}),this.player.on("seeked",()=>{const e=this.player.currentTime;N(this.cuePoints)||this.cuePoints.forEach((i,s)=>{t<i&&i<e&&(this.manager.discardAdBreak(),this.cuePoints.splice(s,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL)})}),e(this,"play",()=>{const{container:e}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(e.offsetWidth,e.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(e){this.onAdError(e)}}).catch(()=>{})}),e(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,ge(this.player.media.play())}),e(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),e(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),e(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(e=>{this.on("loaded",e),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),e(this,"trigger",(e,...t)=>{const i=this.events[e];L(i)&&i.forEach(e=>{P(e)&&e.apply(this,t)})}),e(this,"on",(e,t)=>(L(this.events[e])||(this.events[e]=[]),this.events[e].push(t),this)),e(this,"startSafetyTimer",(e,t)=>{this.player.debug.log(`Safety timer invoked from: ${t}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},e)}),e(this,"clearSafetyTimer",e=>{T(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${e}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=t,this.config=t.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((e,t)=>{this.on("loaded",e),this.on("error",t)}),this.load()}get enabled(){const{config:e}=this;return this.player.isHTML5&&this.player.isVideo&&e.enabled&&(!N(e.publisherId)||j(e.tagUrl))}get tagUrl(){const{config:e}=this;return j(e.tagUrl)?e.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${Ve({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:e.publisherId})}`}}function ot(e=0,t=0,i=255){return Math.min(Math.max(e,t),i)}const lt=e=>{const t=[];return e.split(/\r\n\r\n|\n\n|\r\r/).forEach(e=>{const i={};e.split(/\r\n|\n|\r/).forEach(e=>{if(C(i.startTime)){if(!N(e.trim())&&N(i.text)){const t=e.trim().split("#xywh=");[i.text]=t,t[1]&&([i.x,i.y,i.w,i.h]=t[1].split(","))}}else{const t=e.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);t&&(i.startTime=60*Number(t[1]||0)*60+60*Number(t[2])+Number(t[3])+Number(`0.${t[4]}`),i.endTime=60*Number(t[6]||0)*60+60*Number(t[7])+Number(t[8])+Number(`0.${t[9]}`))}}),i.text&&t.push(i)}),t},ct=(e,t)=>{const i={};return e>t.width/t.height?(i.width=t.width,i.height=1/e*t.width):(i.height=t.height,i.width=e*t.height),i};class ht{constructor(t){e(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),e(this,"getThumbnails",()=>new Promise(e=>{const{src:t}=this.player.config.previewThumbnails;if(N(t))throw new Error("Missing previewThumbnails.src config attribute");const i=()=>{this.thumbnails.sort((e,t)=>e.height-t.height),this.player.debug.log("Preview thumbnails",this.thumbnails),e()};if(P(t))t(e=>{this.thumbnails=e,i()});else{const e=(A(t)?[t]:t).map(e=>this.getThumbnail(e));Promise.all(e).then(i)}})),e(this,"getThumbnail",e=>new Promise(t=>{Oe(e).then(i=>{const s={frames:lt(i),height:null,urlPrefix:""};s.frames[0].text.startsWith("/")||s.frames[0].text.startsWith("http://")||s.frames[0].text.startsWith("https://")||(s.urlPrefix=e.substring(0,e.lastIndexOf("/")+1));const n=new Image;n.onload=()=>{s.height=n.naturalHeight,s.width=n.naturalWidth,this.thumbnails.push(s),t()},n.src=s.urlPrefix+s.frames[0].text})})),e(this,"startMove",e=>{if(this.loaded&&O(e)&&["touchmove","mousemove"].includes(e.type)&&this.player.media.duration){if("touchmove"===e.type)this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var t,i;const s=this.player.elements.progress.getBoundingClientRect(),n=100/s.width*(e.pageX-s.left);this.seekTime=this.player.media.duration*(n/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=e.pageX,this.elements.thumb.time.innerText=De(this.seekTime);const r=null===(t=this.player.config.markers)||void 0===t||null===(i=t.points)||void 0===i?void 0:i.find(({time:e})=>e===Math.round(this.seekTime));r&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${r.label}<br>`)}this.showImageAtCurrentTime()}}),e(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),e(this,"startScrubbing",e=>{(T(e.button)||!1===e.button||0===e.button)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),e(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):de.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),e(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),e(this,"render",()=>{this.elements.thumb.container=G("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=G("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const e=G("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=G("span",{},"00:00"),e.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(e),R(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=G("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),e(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),e(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const e=this.thumbnails[0].frames.findIndex(e=>this.seekTime>=e.startTime&&this.seekTime<=e.endTime),t=e>=0;let i=0;this.mouseDown||this.toggleThumbContainer(t),t&&(this.thumbnails.forEach((t,s)=>{this.loadedImages.includes(t.frames[e].text)&&(i=s)}),e!==this.showingThumb&&(this.showingThumb=e,this.loadImage(i)))}),e(this,"loadImage",(e=0)=>{const t=this.showingThumb,i=this.thumbnails[e],{urlPrefix:s}=i,n=i.frames[t],r=i.frames[t].text,a=s+r;if(this.currentImageElement&&this.currentImageElement.dataset.filename===r)this.showImage(this.currentImageElement,n,e,t,r,!1),this.currentImageElement.dataset.index=t,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const i=new Image;i.src=a,i.dataset.index=t,i.dataset.filename=r,this.showingThumbFilename=r,this.player.debug.log(`Loading image: ${a}`),i.onload=()=>this.showImage(i,n,e,t,r,!0),this.loadingImage=i,this.removeOldImages(i)}}),e(this,"showImage",(e,t,i,s,n,r=!0)=>{this.player.debug.log(`Showing thumb: ${n}. num: ${s}. qual: ${i}. newimg: ${r}`),this.setImageSizeAndOffset(e,t),r&&(this.currentImageContainer.appendChild(e),this.currentImageElement=e,this.loadedImages.includes(n)||this.loadedImages.push(n)),this.preloadNearby(s,!0).then(this.preloadNearby(s,!1)).then(this.getHigherQuality(i,e,t,n))}),e(this,"removeOldImages",e=>{Array.from(this.currentImageContainer.children).forEach(t=>{if("img"!==t.tagName.toLowerCase())return;const i=this.usingSprites?500:1e3;if(t.dataset.index!==e.dataset.index&&!t.dataset.deleting){t.dataset.deleting=!0;const{currentImageContainer:e}=this;setTimeout(()=>{e.removeChild(t),this.player.debug.log(`Removing thumb: ${t.dataset.filename}`)},i)}})}),e(this,"preloadNearby",(e,t=!0)=>new Promise(i=>{setTimeout(()=>{const s=this.thumbnails[0].frames[e].text;if(this.showingThumbFilename===s){let n;n=t?this.thumbnails[0].frames.slice(e):this.thumbnails[0].frames.slice(0,e).reverse();let r=!1;n.forEach(e=>{const t=e.text;if(t!==s&&!this.loadedImages.includes(t)){r=!0,this.player.debug.log(`Preloading thumb filename: ${t}`);const{urlPrefix:e}=this.thumbnails[0],s=e+t,n=new Image;n.src=s,n.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${t}`),this.loadedImages.includes(t)||this.loadedImages.push(t),i()}}}),r||i()}},300)})),e(this,"getHigherQuality",(e,t,i,s)=>{if(e<this.thumbnails.length-1){let n=t.naturalHeight;this.usingSprites&&(n=i.h),n<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===s&&(this.player.debug.log(`Showing higher quality thumb for: ${s}`),this.loadImage(e+1))},300)}}),e(this,"toggleThumbContainer",(e=!1,t=!1)=>{const i=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(i,e),!e&&t&&(this.showingThumb=null,this.showingThumbFilename=null)}),e(this,"toggleScrubbingContainer",(e=!1)=>{const t=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(t,e),e||(this.showingThumb=null,this.showingThumbFilename=null)}),e(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),e(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:e}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(e.clientHeight>20&&e.clientWidth<20){const t=Math.floor(e.clientHeight*this.thumbAspectRatio);e.style.width=`${t}px`}else if(e.clientHeight<20&&e.clientWidth>20){const t=Math.floor(e.clientWidth/this.thumbAspectRatio);e.style.height=`${t}px`}}else{const t=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);e.style.height=`${this.thumbContainerHeight}px`,e.style.width=`${t}px`}this.setThumbContainerPos()}),e(this,"setThumbContainerPos",()=>{const e=this.player.elements.progress.getBoundingClientRect(),t=this.player.elements.container.getBoundingClientRect(),{container:i}=this.elements.thumb,s=t.left-e.left+10,n=t.right-e.left-i.clientWidth-10,r=this.mousePosX-e.left-i.clientWidth/2,a=ot(r,s,n);i.style.left=`${a}px`,i.style.setProperty("--preview-arrow-offset",r-a+"px")}),e(this,"setScrubbingContainerSize",()=>{const{width:e,height:t}=ct(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${e}px`,this.elements.scrubbing.container.style.height=`${t}px`}),e(this,"setImageSizeAndOffset",(e,t)=>{if(!this.usingSprites)return;const i=this.thumbContainerHeight/t.h;e.style.height=e.naturalHeight*i+"px",e.style.width=e.naturalWidth*i+"px",e.style.left=`-${t.x*i}px`,e.style.top=`-${t.y*i}px`}),this.player=t,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:e}=ct(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return e}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(e){this.mouseDown?this.currentScrubbingImageElement=e:this.currentThumbnailImageElement=e}}const ut={insertElements(e,t){A(t)?Y(e,this.media,{src:t}):L(t)&&t.forEach(t=>{Y(e,this.media,t)})},change(e){q(e,"sources.length")?(Ee.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],X(this.media),this.media=null,R(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:t,type:i}=e,[{provider:s=$e.html5,src:n}]=t,r="html5"===s?i:"div",a="html5"===s?{}:{src:n};Object.assign(this,{provider:s,type:i,supported:oe.check(i,s,this.config.playsinline),media:G(r,a)}),this.elements.container.appendChild(this.media),M(e.autoplay)&&(this.config.autoplay=e.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),N(e.poster)||(this.poster=e.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),Ke.addStyleHook.call(this),this.isHTML5&&ut.insertElements.call(this,"source",t),this.config.title=e.title,rt.setup.call(this),this.isHTML5&&Object.keys(e).includes("tracks")&&ut.insertElements.call(this,"track",e.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Ke.build.call(this),this.isHTML5&&this.media.load(),N(e.previewThumbnails)||(Object.assign(this.config.previewThumbnails,e.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new ht(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class dt{constructor(t,i){if(e(this,"play",()=>P(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>ge(this.media.play())),this.media.play()):null),e(this,"pause",()=>this.playing&&P(this.media.pause)?this.media.pause():null),e(this,"togglePlay",e=>(M(e)?e:!this.playing)?this.play():this.pause()),e(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):P(this.media.stop)&&this.media.stop()}),e(this,"restart",()=>{this.currentTime=0}),e(this,"rewind",e=>{this.currentTime-=C(e)?e:this.config.seekTime}),e(this,"forward",e=>{this.currentTime+=C(e)?e:this.config.seekTime}),e(this,"increaseVolume",e=>{const t=this.media.muted?0:this.volume;this.volume=t+(C(e)?e:0)}),e(this,"decreaseVolume",e=>{this.increaseVolume(-e)}),e(this,"airplay",()=>{oe.airplay&&this.media.webkitShowPlaybackTargetPicker()}),e(this,"toggleControls",e=>{if(this.supported.ui&&!this.isAudio){const t=te(this.elements.container,this.config.classNames.hideControls),i=void 0===e?void 0:!e,s=ee(this.elements.container,this.config.classNames.hideControls,i);if(s&&L(this.config.controls)&&this.config.controls.includes("settings")&&!N(this.config.settings)&&je.toggleMenu.call(this,!1),s!==t){const e=s?"controlshidden":"controlsshown";pe.call(this,this.media,e)}return!s}return!1}),e(this,"on",(e,t)=>{he.call(this,this.elements.container,e,t)}),e(this,"once",(e,t)=>{de.call(this,this.elements.container,e,t)}),e(this,"off",(e,t)=>{ue(this.elements.container,e,t)}),e(this,"destroy",(e,t=!1)=>{if(!this.ready)return;const i=()=>{document.body.style.overflow="",this.embed=null,t?(Object.keys(this.elements).length&&(X(this.elements.buttons.play),X(this.elements.captions),X(this.elements.controls),X(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),P(e)&&e()):(fe.call(this),Ee.cancelRequests.call(this),Z(this.elements.original,this.elements.container),pe.call(this,this.elements.original,"destroyed",!0),P(e)&&e.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(Ke.toggleNativeControls.call(this,!0),i()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),null!==this.embed&&P(this.embed.destroy)&&this.embed.destroy(),i()):this.isVimeo&&(null!==this.embed&&this.embed.unload().then(i),setTimeout(i,200))}),e(this,"supports",e=>oe.mime.call(this,e)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=oe.touch,this.media=t,A(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||I(this.media)||L(this.media))&&(this.media=this.media[0]),this.config=$({},He,dt.defaults,i||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch(e){return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Ge(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",oe),T(this.media)||!R(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!oe.check().api)return void this.debug.error("Setup failed: no support");const s=this.media.cloneNode(!0);s.autoplay=!1,this.elements.original=s;const n=this.media.tagName.toLowerCase();let r=null,a=null;switch(n){case"div":if(r=this.media.querySelector("iframe"),R(r)){if(a=Ne(r.getAttribute("src")),this.provider=function(e){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(e)?$e.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(e)?$e.vimeo:null}(a.toString()),this.elements.container=this.media,this.media=r,this.elements.container.className="",a.search.length){const e=["1","true"];e.includes(a.searchParams.get("autoplay"))&&(this.config.autoplay=!0),e.includes(a.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=e.includes(a.searchParams.get("playsinline")),this.config.youtube.hl=a.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(N(this.provider)||!Object.values($e).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=Ue;break;case"video":case"audio":this.type=n,this.provider=$e.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=oe.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new Ze(this),this.storage=new Re(this),this.media.plyr=this,R(this.elements.container)||(this.elements.container=G("div"),U(this.media,this.elements.container)),Ke.migrateStyles.call(this),Ke.addStyleHook.call(this),rt.setup.call(this),this.config.debug&&he.call(this,this.elements.container,this.config.events.join(" "),e=>{this.debug.log(`event: ${e.type}`)}),this.fullscreen=new Ye(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&Ke.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new at(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>ge(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new ht(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===$e.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===$e.youtube}get isVimeo(){return this.provider===$e.vimeo}get isVideo(){return this.type===Ue}get isAudio(){return"audio"===this.type}get playing(){return Boolean(this.ready&&!this.paused&&!this.ended)}get paused(){return Boolean(this.media.paused)}get stopped(){return Boolean(this.paused&&0===this.currentTime)}get ended(){return Boolean(this.media.ended)}set currentTime(e){if(!this.duration)return;const t=C(e)&&e>0;this.media.currentTime=t?Math.min(e,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:e}=this.media;return C(e)?e:e&&e.length&&this.duration>0?e.end(0)/this.duration:0}get seeking(){return Boolean(this.media.seeking)}get duration(){const e=parseFloat(this.config.duration),t=(this.media||{}).duration,i=C(t)&&t!==1/0?t:0;return e||i}set volume(e){let t=e;A(t)&&(t=Number(t)),C(t)||(t=this.storage.get("volume")),C(t)||({volume:t}=this.config),t>1&&(t=1),t<0&&(t=0),this.config.volume=t,this.media.volume=t,!N(e)&&this.muted&&t>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(e){let t=e;M(t)||(t=this.storage.get("muted")),M(t)||(t=this.config.muted),this.config.muted=t,this.media.muted=t}get muted(){return Boolean(this.media.muted)}get hasAudio(){return!this.isHTML5||!!this.isAudio||Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length)}set speed(e){let t=null;C(e)&&(t=e),C(t)||(t=this.storage.get("speed")),C(t)||(t=this.config.speed.selected);const{minimumSpeed:i,maximumSpeed:s}=this;t=ot(t,i,s),this.config.speed.selected=t,setTimeout(()=>{this.media&&(this.media.playbackRate=t)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(e){const t=this.config.quality,i=this.options.quality;if(!i.length)return;let s=[!N(e)&&Number(e),this.storage.get("quality"),t.selected,t.default].find(C),n=!0;if(!i.includes(s)){const e=ve(i,s);this.debug.warn(`Unsupported quality option: ${s}, using ${e} instead`),s=e,n=!1}t.selected=s,this.media.quality=s,n&&this.storage.set({quality:s})}get quality(){return this.media.quality}set loop(e){const t=M(e)?e:this.config.loop.active;this.config.loop.active=t,this.media.loop=t}get loop(){return Boolean(this.media.loop)}set source(e){ut.change.call(this,e)}get source(){return this.media.currentSrc}get download(){const{download:e}=this.config.urls;return j(e)?e:this.source}set download(e){j(e)&&(this.config.urls.download=e,je.setDownloadUrl.call(this))}set poster(e){this.isVideo?Ke.setPoster.call(this,e,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const e=we(Se.call(this));return L(e)?e.join(":"):e}set ratio(e){this.isVideo?A(e)&&xe(e)?(this.config.ratio=we(e),ke.call(this)):this.debug.error(`Invalid aspect ratio specified (${e})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(e){this.config.autoplay=M(e)?e:this.config.autoplay}get autoplay(){return Boolean(this.config.autoplay)}toggleCaptions(e){ze.toggle.call(this,e,!1)}set currentTrack(e){ze.set.call(this,e,!1),ze.setup.call(this)}get currentTrack(){const{toggled:e,currentTrack:t}=this.captions;return e?t:-1}set language(e){ze.setLanguage.call(this,e,!1)}get language(){return(ze.getCurrentTrack.call(this)||{}).language}set pip(e){if(!oe.pip)return;const t=M(e)?e:!this.pip;P(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(t?qe:"inline"),P(this.media.requestPictureInPicture)&&(!this.pip&&t?this.media.requestPictureInPicture():this.pip&&!t&&document.exitPictureInPicture())}get pip(){return oe.pip?N(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===qe:null}setPreviewThumbnails(e){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,e),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new ht(this))}static supported(e,t){return oe.check(e,t)}static loadSprite(e,t){return Fe(e,t)}static setup(e,t={}){let i=null;return A(e)?i=Array.from(document.querySelectorAll(e)):I(e)?i=Array.from(e):L(e)&&(i=e.filter(R)),N(i)?null:i.map(e=>new dt(e,t))}}var pt;return dt.defaults=(pt=He,JSON.parse(JSON.stringify(pt))),dt}())}},t={};function i(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,i),r.exports}i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),(()=>{"use strict";function e(e){return"string"==typeof e||e instanceof String}function t(e){var t;return"object"==typeof e&&null!=e&&"Object"===(null==e||null==(t=e.constructor)?void 0:t.name)}function s(e,t){return Array.isArray(t)?s(e,(e,i)=>t.includes(i)):Object.entries(e).reduce((e,i)=>{let[s,n]=i;return t(n,s)&&(e[s]=n),e},{})}const n="NONE",r="LEFT",a="FORCE_LEFT",o="RIGHT",l="FORCE_RIGHT";function c(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function h(e,t){if(t===e)return!0;const i=Array.isArray(t),s=Array.isArray(e);let n;if(i&&s){if(t.length!=e.length)return!1;for(n=0;n<t.length;n++)if(!h(t[n],e[n]))return!1;return!0}if(i!=s)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){const i=t instanceof Date,s=e instanceof Date;if(i&&s)return t.getTime()==e.getTime();if(i!=s)return!1;const r=t instanceof RegExp,a=e instanceof RegExp;if(r&&a)return t.toString()==e.toString();if(r!=a)return!1;const o=Object.keys(t);for(n=0;n<o.length;n++)if(!Object.prototype.hasOwnProperty.call(e,o[n]))return!1;for(n=0;n<o.length;n++)if(!h(e[o[n]],t[o[n]]))return!1;return!0}return!(!t||!e||"function"!=typeof t||"function"!=typeof e)&&t.toString()===e.toString()}class u{constructor(e){for(Object.assign(this,e);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start;if(this.insertedCount)for(;this.value.slice(this.cursorPos)!==this.oldValue.slice(this.oldSelection.end);)this.value.length-this.cursorPos<this.oldValue.length-this.oldSelection.end?++this.oldSelection.end:++this.cursorPos}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?n:this.oldSelection.end!==this.cursorPos&&this.oldSelection.start!==this.cursorPos||this.oldSelection.end!==this.oldSelection.start?r:o}}function d(e,t){return new d.InputMask(e,t)}function p(t){if(null==t)throw new Error("mask property should be defined");return t instanceof RegExp?d.MaskedRegExp:e(t)?d.MaskedPattern:t===Date?d.MaskedDate:t===Number?d.MaskedNumber:Array.isArray(t)||t===Array?d.MaskedDynamic:d.Masked&&t.prototype instanceof d.Masked?t:d.Masked&&t instanceof d.Masked?t.constructor:t instanceof Function?d.MaskedFunction:(console.warn("Mask not found for mask",t),d.Masked)}function f(e){if(!e)throw new Error("Options in not defined");if(d.Masked){if(e.prototype instanceof d.Masked)return{mask:e};const{mask:i,...n}=e instanceof d.Masked?{mask:e}:t(e)&&e.mask instanceof d.Masked?e:{};if(i){const e=i.mask;return{...s(i,(e,t)=>!t.startsWith("_")),mask:i.constructor,_mask:e,...n}}}return t(e)?{...e}:{mask:e}}function m(e){if(d.Masked&&e instanceof d.Masked)return e;const t=f(e),i=p(t.mask);if(!i)throw new Error("Masked class is not found for provided mask "+t.mask+", appropriate module needs to be imported manually before creating mask.");return t.mask===i&&delete t.mask,t._mask&&(t.mask=t._mask,delete t._mask),new i(t)}d.createMask=m;class g{get selectionStart(){let e;try{e=this._unsafeSelectionStart}catch{}return null!=e?e:this.value.length}get selectionEnd(){let e;try{e=this._unsafeSelectionEnd}catch{}return null!=e?e:this.value.length}select(e,t){if(null!=e&&null!=t&&(e!==this.selectionStart||t!==this.selectionEnd))try{this._unsafeSelect(e,t)}catch{}}get isActive(){return!1}}d.MaskElement=g;class y extends g{constructor(e){super(),this.input=e,this._onKeydown=this._onKeydown.bind(this),this._onInput=this._onInput.bind(this),this._onBeforeinput=this._onBeforeinput.bind(this),this._onCompositionEnd=this._onCompositionEnd.bind(this)}get rootElement(){var e,t,i;return null!=(e=null==(t=(i=this.input).getRootNode)?void 0:t.call(i))?e:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(e){this.input.addEventListener("keydown",this._onKeydown),this.input.addEventListener("input",this._onInput),this.input.addEventListener("beforeinput",this._onBeforeinput),this.input.addEventListener("compositionend",this._onCompositionEnd),this.input.addEventListener("drop",e.drop),this.input.addEventListener("click",e.click),this.input.addEventListener("focus",e.focus),this.input.addEventListener("blur",e.commit),this._handlers=e}_onKeydown(e){return this._handlers.redo&&(90===e.keyCode&&e.shiftKey&&(e.metaKey||e.ctrlKey)||89===e.keyCode&&e.ctrlKey)?(e.preventDefault(),this._handlers.redo(e)):this._handlers.undo&&90===e.keyCode&&(e.metaKey||e.ctrlKey)?(e.preventDefault(),this._handlers.undo(e)):void(e.isComposing||this._handlers.selectionChange(e))}_onBeforeinput(e){return"historyUndo"===e.inputType&&this._handlers.undo?(e.preventDefault(),this._handlers.undo(e)):"historyRedo"===e.inputType&&this._handlers.redo?(e.preventDefault(),this._handlers.redo(e)):void 0}_onCompositionEnd(e){this._handlers.input(e)}_onInput(e){e.isComposing||this._handlers.input(e)}unbindEvents(){this.input.removeEventListener("keydown",this._onKeydown),this.input.removeEventListener("input",this._onInput),this.input.removeEventListener("beforeinput",this._onBeforeinput),this.input.removeEventListener("compositionend",this._onCompositionEnd),this.input.removeEventListener("drop",this._handlers.drop),this.input.removeEventListener("click",this._handlers.click),this.input.removeEventListener("focus",this._handlers.focus),this.input.removeEventListener("blur",this._handlers.commit),this._handlers={}}}d.HTMLMaskElement=y;class v extends y{constructor(e){super(e),this.input=e}get _unsafeSelectionStart(){return null!=this.input.selectionStart?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(e,t){this.input.setSelectionRange(e,t)}get value(){return this.input.value}set value(e){this.input.value=e}}d.HTMLMaskElement=y;class b extends y{get _unsafeSelectionStart(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),i=t&&t.anchorOffset,s=t&&t.focusOffset;return null==s||null==i||i<s?i:s}get _unsafeSelectionEnd(){const e=this.rootElement,t=e.getSelection&&e.getSelection(),i=t&&t.anchorOffset,s=t&&t.focusOffset;return null==s||null==i||i>s?i:s}_unsafeSelect(e,t){if(!this.rootElement.createRange)return;const i=this.rootElement.createRange();i.setStart(this.input.firstChild||this.input,e),i.setEnd(this.input.lastChild||this.input,t);const s=this.rootElement,n=s.getSelection&&s.getSelection();n&&(n.removeAllRanges(),n.addRange(i))}get value(){return this.input.textContent||""}set value(e){this.input.textContent=e}}d.HTMLContenteditableMaskElement=b;class _{constructor(){this.states=[],this.currentIndex=0}get currentState(){return this.states[this.currentIndex]}get isEmpty(){return 0===this.states.length}push(e){this.currentIndex<this.states.length-1&&(this.states.length=this.currentIndex+1),this.states.push(e),this.states.length>_.MAX_LENGTH&&this.states.shift(),this.currentIndex=this.states.length-1}go(e){return this.currentIndex=Math.min(Math.max(this.currentIndex+e,0),this.states.length-1),this.currentState}undo(){return this.go(-1)}redo(){return this.go(1)}clear(){this.states.length=0,this.currentIndex=0}}_.MAX_LENGTH=100,d.InputMask=class{constructor(e,t){this.el=e instanceof g?e:e.isContentEditable&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?new b(e):new v(e),this.masked=m(t),this._listeners={},this._value="",this._unmaskedValue="",this._rawInputValue="",this.history=new _,this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this._onUndo=this._onUndo.bind(this),this._onRedo=this._onRedo.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(e){var t;return null==e||(null==(t=this.masked)?void 0:t.maskEquals(e))}get mask(){return this.masked.mask}set mask(e){if(this.maskEquals(e))return;if(!(e instanceof d.Masked)&&this.masked.constructor===p(e))return void this.masked.updateOptions({mask:e});const t=e instanceof d.Masked?e:m({mask:e});t.unmaskedValue=this.masked.unmaskedValue,this.masked=t}get value(){return this._value}set value(e){this.value!==e&&(this.masked.value=e,this.updateControl("auto"))}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(e){this.unmaskedValue!==e&&(this.masked.unmaskedValue=e,this.updateControl("auto"))}get rawInputValue(){return this._rawInputValue}set rawInputValue(e){this.rawInputValue!==e&&(this.masked.rawInputValue=e,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(e){this.masked.typedValueEquals(e)||(this.masked.typedValue=e,this.updateControl("auto"))}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange,undo:this._onUndo,redo:this._onRedo})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(e,t){const i=this._listeners[e];i&&i.forEach(e=>e(t))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(e){this.el&&this.el.isActive&&(this.el.select(e,e),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value,this._unmaskedValue=this.masked.unmaskedValue,this._rawInputValue=this.masked.rawInputValue}updateControl(e){const t=this.masked.unmaskedValue,i=this.masked.value,s=this.masked.rawInputValue,n=this.displayValue,r=this.unmaskedValue!==t||this.value!==i||this._rawInputValue!==s;this._unmaskedValue=t,this._value=i,this._rawInputValue=s,this.el.value!==n&&(this.el.value=n),"auto"===e?this.alignCursor():null!=e&&(this.cursorPos=e),r&&this._fireChangeEvents(),this._historyChanging||!r&&!this.history.isEmpty||this.history.push({unmaskedValue:t,selection:{start:this.selectionStart,end:this.cursorPos}})}updateOptions(e){const{mask:t,...i}=e,s=!this.maskEquals(t),n=this.masked.optionsIsChanged(i);s&&(this.mask=t),n&&this.masked.updateOptions(i),(s||n)&&this.updateControl()}updateCursor(e){null!=e&&(this.cursorPos=e,this._delayUpdateCursor(e))}_delayUpdateCursor(e){this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,r))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this}off(e,t){if(!this._listeners[e])return this;if(!t)return delete this._listeners[e],this;const i=this._listeners[e].indexOf(t);return i>=0&&this._listeners[e].splice(i,1),this}_onInput(e){this._inputEvent=e,this._abortUpdateCursor();const t=new u({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),i=this.masked.rawInputValue,s=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection,{input:!0,raw:!0}).offset,r=i===this.masked.rawInputValue?t.removeDirection:n;let a=this.masked.nearestInputPos(t.startChangePos+s,r);r!==n&&(a=this.masked.nearestInputPos(a,n)),this.updateControl(a),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(e){e.preventDefault(),e.stopPropagation()}_onFocus(e){this.alignCursorFriendly()}_onClick(e){this.alignCursorFriendly()}_onUndo(){this._applyHistoryState(this.history.undo())}_onRedo(){this._applyHistoryState(this.history.redo())}_applyHistoryState(e){e&&(this._historyChanging=!0,this.unmaskedValue=e.unmaskedValue,this.el.select(e.selection.start,e.selection.end),this._saveSelection(),this._historyChanging=!1)}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}};class x{static normalize(e){return Array.isArray(e)?e:[e,new x]}constructor(e){Object.assign(this,{inserted:"",rawInserted:"",tailShift:0,skip:!1},e)}aggregate(e){return this.inserted+=e.inserted,this.rawInserted+=e.rawInserted,this.tailShift+=e.tailShift,this.skip=this.skip||e.skip,this}get offset(){return this.tailShift+this.inserted.length}get consumed(){return Boolean(this.rawInserted)||this.skip}equals(e){return this.inserted===e.inserted&&this.tailShift===e.tailShift&&this.rawInserted===e.rawInserted&&this.skip===e.skip}}d.ChangeDetails=x;class w{constructor(e,t,i){void 0===e&&(e=""),void 0===t&&(t=0),this.value=e,this.from=t,this.stop=i}toString(){return this.value}extend(e){this.value+=String(e)}appendTo(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(e){Object.assign(this,e)}unshift(e){if(!this.value.length||null!=e&&this.from>=e)return"";const t=this.value[0];return this.value=this.value.slice(1),t}shift(){if(!this.value.length)return"";const e=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),e}}class S{constructor(e){this._value="",this._update({...S.DEFAULTS,...e}),this._initialized=!0}updateOptions(e){this.optionsIsChanged(e)&&this.withValueRefresh(this._update.bind(this,e))}_update(e){Object.assign(this,e)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value}reset(){this._value=""}get value(){return this._value}set value(e){this.resolve(e,{input:!0})}resolve(e,t){void 0===t&&(t={input:!0}),this.reset(),this.append(e,t,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(e){this.resolve(e,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(e){this.format?this.value=this.format(e,this):this.unmaskedValue=String(e)}get rawInputValue(){return this.extractInput(0,this.displayValue.length,{raw:!0})}set rawInputValue(e){this.resolve(e,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(e,t){return e}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),Math.min(this.displayValue.length,t-e)}extractInput(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),this.displayValue.slice(e,t)}extractTail(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),new w(this.extractInput(e,t),e)}appendTail(t){return e(t)&&(t=new w(String(t))),t.appendTo(this)}_appendCharRaw(e,t){return e?(this._value+=e,new x({inserted:e,rawInserted:e})):new x}_appendChar(e,t,i){void 0===t&&(t={});const s=this.state;let n;if([e,n]=this.doPrepareChar(e,t),e&&(n=n.aggregate(this._appendCharRaw(e,t)),!n.rawInserted&&"pad"===this.autofix)){const i=this.state;this.state=s;let r=this.pad(t);const a=this._appendCharRaw(e,t);r=r.aggregate(a),a.rawInserted||r.equals(n)?n=r:this.state=i}if(n.inserted){let e,r=!1!==this.doValidate(t);if(r&&null!=i){const t=this.state;if(!0===this.overwrite){e=i.state;for(let e=0;e<n.rawInserted.length;++e)i.unshift(this.displayValue.length-n.tailShift)}let s=this.appendTail(i);if(r=s.rawInserted.length===i.toString().length,!(r&&s.inserted||"shift"!==this.overwrite)){this.state=t,e=i.state;for(let e=0;e<n.rawInserted.length;++e)i.shift();s=this.appendTail(i),r=s.rawInserted.length===i.toString().length}r&&s.inserted&&(this.state=t)}r||(n=new x,this.state=s,i&&e&&(i.state=e))}return n}_appendPlaceholder(){return new x}_appendEager(){return new x}append(t,i,s){if(!e(t))throw new Error("value should be string");const n=e(s)?new w(String(s)):s;let r;null!=i&&i.tail&&(i._beforeTailState=this.state),[t,r]=this.doPrepare(t,i);for(let e=0;e<t.length;++e){const s=this._appendChar(t[e],i,n);if(!s.rawInserted&&!this.doSkipInvalid(t[e],i,n))break;r.aggregate(s)}return(!0===this.eager||"append"===this.eager)&&null!=i&&i.input&&t&&r.aggregate(this._appendEager()),null!=n&&(r.tailShift+=this.appendTail(n).tailShift),r}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),this._value=this.displayValue.slice(0,e)+this.displayValue.slice(t),new x}withValueRefresh(e){if(this._refreshing||!this._initialized)return e();this._refreshing=!0;const t=this.rawInputValue,i=this.value,s=e();return this.rawInputValue=t,this.value&&this.value!==i&&0===i.indexOf(this.value)&&(this.append(i.slice(this.displayValue.length),{},""),this.doCommit()),delete this._refreshing,s}runIsolated(e){if(this._isolated||!this._initialized)return e(this);this._isolated=!0;const t=this.state,i=e(this);return this.state=t,delete this._isolated,i}doSkipInvalid(e,t,i){return Boolean(this.skipInvalid)}doPrepare(e,t){return void 0===t&&(t={}),x.normalize(this.prepare?this.prepare(e,this,t):e)}doPrepareChar(e,t){return void 0===t&&(t={}),x.normalize(this.prepareChar?this.prepareChar(e,this,t):e)}doValidate(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}doCommit(){this.commit&&this.commit(this.value,this)}splice(e,t,i,s,c){void 0===i&&(i=""),void 0===s&&(s=n),void 0===c&&(c={input:!0});const h=e+t,u=this.extractTail(h),d=!0===this.eager||"remove"===this.eager;let p;d&&(s=function(e){switch(e){case r:return a;case o:return l;default:return e}}(s),p=this.extractInput(0,h,{raw:!0}));let f=e;const m=new x;if(s!==n&&(f=this.nearestInputPos(e,t>1&&0!==e&&!d?n:s),m.tailShift=f-e),m.aggregate(this.remove(f)),d&&s!==n&&p===this.rawInputValue)if(s===a){let e;for(;p===this.rawInputValue&&(e=this.displayValue.length);)m.aggregate(new x({tailShift:-1})).aggregate(this.remove(e-1))}else s===l&&u.unshift();return m.aggregate(this.append(i,c,u))}maskEquals(e){return this.mask===e}optionsIsChanged(e){return!h(this,e)}typedValueEquals(e){const t=this.typedValue;return e===t||S.EMPTY_VALUES.includes(e)&&S.EMPTY_VALUES.includes(t)||!!this.format&&this.format(e,this)===this.format(this.typedValue,this)}pad(e){return new x}}S.DEFAULTS={skipInvalid:!0},S.EMPTY_VALUES=[void 0,null,""],d.Masked=S;class k{constructor(e,t){void 0===e&&(e=[]),void 0===t&&(t=0),this.chunks=e,this.from=t}toString(){return this.chunks.map(String).join("")}extend(t){if(!String(t))return;t=e(t)?new w(String(t)):t;const i=this.chunks[this.chunks.length-1],s=i&&(i.stop===t.stop||null==t.stop)&&t.from===i.from+i.toString().length;if(t instanceof w)s?i.extend(t.toString()):this.chunks.push(t);else if(t instanceof k){if(null==t.stop){let e;for(;t.chunks.length&&null==t.chunks[0].stop;)e=t.chunks.shift(),e.from+=t.from,this.extend(e)}t.toString()&&(t.stop=t.blockIndex,this.chunks.push(t))}}appendTo(e){if(!(e instanceof d.MaskedPattern))return new w(this.toString()).appendTo(e);const t=new x;for(let i=0;i<this.chunks.length;++i){const s=this.chunks[i],n=e._mapPosToBlock(e.displayValue.length),r=s.stop;let a;if(null!=r&&(!n||n.index<=r)&&((s instanceof k||e._stops.indexOf(r)>=0)&&t.aggregate(e._appendPlaceholder(r)),a=s instanceof k&&e._blocks[r]),a){const i=a.appendTail(s);t.aggregate(i);const n=s.toString().slice(i.rawInserted.length);n&&t.aggregate(e.append(n,{tail:!0}))}else t.aggregate(e.append(s.toString(),{tail:!0}))}return t}get state(){return{chunks:this.chunks.map(e=>e.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(e){const{chunks:t,...i}=e;Object.assign(this,i),this.chunks=t.map(e=>{const t="chunks"in e?new k:new w;return t.state=e,t})}unshift(e){if(!this.chunks.length||null!=e&&this.from>=e)return"";const t=null!=e?e-this.from:e;let i=0;for(;i<this.chunks.length;){const e=this.chunks[i],s=e.unshift(t);if(e.toString()){if(!s)break;++i}else this.chunks.splice(i,1);if(s)return s}return""}shift(){if(!this.chunks.length)return"";let e=this.chunks.length-1;for(;0<=e;){const t=this.chunks[e],i=t.shift();if(t.toString()){if(!i)break;--e}else this.chunks.splice(e,1);if(i)return i}return""}}class T{constructor(e,t){this.masked=e,this._log=[];const{offset:i,index:s}=e._mapPosToBlock(t)||(t<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=i,this.index=s,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(e){Object.assign(this,e)}pushState(){this._log.push(this.state)}popState(){const e=this._log.pop();return e&&(this.state=e),e}bindBlock(){this.block||(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.displayValue.length))}_pushLeft(e){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=(null==(t=this.block)?void 0:t.displayValue.length)||0){var t;if(e())return this.ok=!0}return this.ok=!1}_pushRight(e){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(e())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!this.block.isFixed&&this.block.value)return this.offset=this.block.nearestInputPos(this.offset,a),0!==this.offset||void 0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,r),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,r),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!this.block.isFixed&&this.block.value)return this.offset=this.block.nearestInputPos(this.offset,l),this.offset!==this.block.value.length||void 0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,n),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!(this.block.isFixed||this.block.isOptional&&!this.block.value))return this.offset=this.block.nearestInputPos(this.offset,n),!0})}}class E{constructor(e){Object.assign(this,e),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),this._value=this._value.slice(0,e)+this._value.slice(t),this._value||(this._isRawInput=!1),new x}nearestInputPos(e,t){void 0===t&&(t=n);const i=this._value.length;switch(t){case r:case a:return 0;default:return i}}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),this._isRawInput?t-e:0}extractInput(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),void 0===i&&(i={}),i.raw&&this._isRawInput&&this._value.slice(e,t)||""}get isComplete(){return!0}get isFilled(){return Boolean(this._value)}_appendChar(e,t){if(void 0===t&&(t={}),this.isFilled)return new x;const i=!0===this.eager||"append"===this.eager,s=this.char===e&&(this.isUnmasking||t.input||t.raw)&&(!t.raw||!i)&&!t.tail,n=new x({inserted:this.char,rawInserted:s?this.char:""});return this._value=this.char,this._isRawInput=s&&(t.raw||t.input),n}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){const e=new x;return this.isFilled||(this._value=e.inserted=this.char),e}extractTail(){return new w("")}appendTail(t){return e(t)&&(t=new w(String(t))),t.appendTo(this)}append(e,t,i){const s=this._appendChar(e[0],t);return null!=i&&(s.tailShift+=this.appendTail(i).tailShift),s}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value,this._isRawInput=Boolean(e._rawInputValue)}pad(e){return this._appendPlaceholder()}}class C{constructor(e){const{parent:t,isOptional:i,placeholderChar:s,displayChar:n,lazy:r,eager:a,...o}=e;this.masked=m(o),Object.assign(this,{parent:t,isOptional:i,placeholderChar:s,displayChar:n,lazy:r,eager:a})}reset(){this.isFilled=!1,this.masked.reset()}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),0===e&&t>=1?(this.isFilled=!1,this.masked.remove(e,t)):new x}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return Boolean(this.masked.value)||this.isOptional}_appendChar(e,t){if(void 0===t&&(t={}),this.isFilled)return new x;const i=this.masked.state;let s=this.masked._appendChar(e,this.currentMaskFlags(t));return s.inserted&&!1===this.doValidate(t)&&(s=new x,this.masked.state=i),s.inserted||this.isOptional||this.lazy||t.input||(s.inserted=this.placeholderChar),s.skip=!s.inserted&&!this.isOptional,this.isFilled=Boolean(s.inserted),s}append(e,t,i){return this.masked.append(e,this.currentMaskFlags(t),i)}_appendPlaceholder(){return this.isFilled||this.isOptional?new x:(this.isFilled=!0,new x({inserted:this.placeholderChar}))}_appendEager(){return new x}extractTail(e,t){return this.masked.extractTail(e,t)}appendTail(e){return this.masked.appendTail(e)}extractInput(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this.masked.extractInput(e,t,i)}nearestInputPos(e,t){void 0===t&&(t=n);const i=this.value.length,s=Math.min(Math.max(e,0),i);switch(t){case r:case a:return this.isComplete?s:0;case o:case l:return this.isComplete?s:i;default:return s}}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this.value.slice(e,t).length}doValidate(e){return this.masked.doValidate(this.currentMaskFlags(e))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(e)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(e){this.masked.state=e.masked,this.isFilled=e.isFilled}currentMaskFlags(e){var t;return{...e,_beforeTailState:(null==e||null==(t=e._beforeTailState)?void 0:t.masked)||(null==e?void 0:e._beforeTailState)}}pad(e){return new x}}C.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},d.MaskedRegExp=class extends S{updateOptions(e){super.updateOptions(e)}_update(e){const t=e.mask;t&&(e.validate=e=>e.search(t)>=0),super._update(e)}};class A extends S{constructor(e){super({...A.DEFAULTS,...e,definitions:Object.assign({},C.DEFAULT_DEFINITIONS,null==e?void 0:e.definitions)})}updateOptions(e){super.updateOptions(e)}_update(e){e.definitions=Object.assign({},this.definitions,e.definitions),super._update(e),this._rebuildMask()}_rebuildMask(){const e=this.definitions;this._blocks=[],this.exposeBlock=void 0,this._stops=[],this._maskedBlocks={};const t=this.mask;if(!t||!e)return;let i=!1,s=!1;for(let n=0;n<t.length;++n){if(this.blocks){const e=t.slice(n),i=Object.keys(this.blocks).filter(t=>0===e.indexOf(t));i.sort((e,t)=>t.length-e.length);const s=i[0];if(s){const{expose:e,repeat:t,...i}=f(this.blocks[s]),r={lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,autofix:this.autofix,...i,repeat:t,parent:this},a=null!=t?new d.RepeatBlock(r):m(r);a&&(this._blocks.push(a),e&&(this.exposeBlock=a),this._maskedBlocks[s]||(this._maskedBlocks[s]=[]),this._maskedBlocks[s].push(this._blocks.length-1)),n+=s.length-1;continue}}let r=t[n],a=r in e;if(r===A.STOP_CHAR){this._stops.push(this._blocks.length);continue}if("{"===r||"}"===r){i=!i;continue}if("["===r||"]"===r){s=!s;continue}if(r===A.ESCAPE_CHAR){if(++n,r=t[n],!r)break;a=!1}const o=a?new C({isOptional:s,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...f(e[r]),parent:this}):new E({char:r,eager:this.eager,isUnmasking:i});this._blocks.push(o)}}get state(){return{...super.state,_blocks:this._blocks.map(e=>e.state)}}set state(e){if(!e)return void this.reset();const{_blocks:t,...i}=e;this._blocks.forEach((e,i)=>e.state=t[i]),super.state=i}reset(){super.reset(),this._blocks.forEach(e=>e.reset())}get isComplete(){return this.exposeBlock?this.exposeBlock.isComplete:this._blocks.every(e=>e.isComplete)}get isFilled(){return this._blocks.every(e=>e.isFilled)}get isFixed(){return this._blocks.every(e=>e.isFixed)}get isOptional(){return this._blocks.every(e=>e.isOptional)}doCommit(){this._blocks.forEach(e=>e.doCommit()),super.doCommit()}get unmaskedValue(){return this.exposeBlock?this.exposeBlock.unmaskedValue:this._blocks.reduce((e,t)=>e+t.unmaskedValue,"")}set unmaskedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.unmaskedValue=e,this.appendTail(t),this.doCommit()}else super.unmaskedValue=e}get value(){return this.exposeBlock?this.exposeBlock.value:this._blocks.reduce((e,t)=>e+t.value,"")}set value(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.value=e,this.appendTail(t),this.doCommit()}else super.value=e}get typedValue(){return this.exposeBlock?this.exposeBlock.typedValue:super.typedValue}set typedValue(e){if(this.exposeBlock){const t=this.extractTail(this._blockStartPos(this._blocks.indexOf(this.exposeBlock))+this.exposeBlock.displayValue.length);this.exposeBlock.typedValue=e,this.appendTail(t),this.doCommit()}else super.typedValue=e}get displayValue(){return this._blocks.reduce((e,t)=>e+t.displayValue,"")}appendTail(e){return super.appendTail(e).aggregate(this._appendPlaceholder())}_appendEager(){var e;const t=new x;let i=null==(e=this._mapPosToBlock(this.displayValue.length))?void 0:e.index;if(null==i)return t;this._blocks[i].isFilled&&++i;for(let e=i;e<this._blocks.length;++e){const i=this._blocks[e]._appendEager();if(!i.inserted)break;t.aggregate(i)}return t}_appendCharRaw(e,t){void 0===t&&(t={});const i=this._mapPosToBlock(this.displayValue.length),s=new x;if(!i)return s;for(let r,a=i.index;r=this._blocks[a];++a){var n;const i=r._appendChar(e,{...t,_beforeTailState:null==(n=t._beforeTailState)||null==(n=n._blocks)?void 0:n[a]});if(s.aggregate(i),i.consumed)break}return s}extractTail(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);const i=new k;return e===t||this._forEachBlocksInRange(e,t,(e,t,s,n)=>{const r=e.extractTail(s,n);r.stop=this._findStopBefore(t),r.from=this._blockStartPos(t),r instanceof k&&(r.blockIndex=t),i.extend(r)}),i}extractInput(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),void 0===i&&(i={}),e===t)return"";let s="";return this._forEachBlocksInRange(e,t,(e,t,n,r)=>{s+=e.extractInput(n,r,i)}),s}_findStopBefore(e){let t;for(let i=0;i<this._stops.length;++i){const s=this._stops[i];if(!(s<=e))break;t=s}return t}_appendPlaceholder(e){const t=new x;if(this.lazy&&null==e)return t;const i=this._mapPosToBlock(this.displayValue.length);if(!i)return t;const s=i.index,n=null!=e?e:this._blocks.length;return this._blocks.slice(s,n).forEach(i=>{var s;i.lazy&&null==e||t.aggregate(i._appendPlaceholder(null==(s=i._blocks)?void 0:s.length))}),t}_mapPosToBlock(e){let t="";for(let i=0;i<this._blocks.length;++i){const s=this._blocks[i],n=t.length;if(t+=s.displayValue,e<=t.length)return{index:i,offset:e-n}}}_blockStartPos(e){return this._blocks.slice(0,e).reduce((e,t)=>e+t.displayValue.length,0)}_forEachBlocksInRange(e,t,i){void 0===t&&(t=this.displayValue.length);const s=this._mapPosToBlock(e);if(s){const e=this._mapPosToBlock(t),n=e&&s.index===e.index,r=s.offset,a=e&&n?e.offset:this._blocks[s.index].displayValue.length;if(i(this._blocks[s.index],s.index,r,a),e&&!n){for(let t=s.index+1;t<e.index;++t)i(this._blocks[t],t,0,this._blocks[t].displayValue.length);i(this._blocks[e.index],e.index,0,e.offset)}}}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);const i=super.remove(e,t);return this._forEachBlocksInRange(e,t,(e,t,s,n)=>{i.aggregate(e.remove(s,n))}),i}nearestInputPos(e,t){if(void 0===t&&(t=n),!this._blocks.length)return 0;const i=new T(this,e);if(t===n)return i.pushRightBeforeInput()?i.pos:(i.popState(),i.pushLeftBeforeInput()?i.pos:this.displayValue.length);if(t===r||t===a){if(t===r){if(i.pushRightBeforeFilled(),i.ok&&i.pos===e)return e;i.popState()}if(i.pushLeftBeforeInput(),i.pushLeftBeforeRequired(),i.pushLeftBeforeFilled(),t===r){if(i.pushRightBeforeInput(),i.pushRightBeforeRequired(),i.ok&&i.pos<=e)return i.pos;if(i.popState(),i.ok&&i.pos<=e)return i.pos;i.popState()}return i.ok?i.pos:t===a?0:(i.popState(),i.ok?i.pos:(i.popState(),i.ok?i.pos:0))}return t===o||t===l?(i.pushRightBeforeInput(),i.pushRightBeforeRequired(),i.pushRightBeforeFilled()?i.pos:t===l?this.displayValue.length:(i.popState(),i.ok?i.pos:(i.popState(),i.ok?i.pos:this.nearestInputPos(e,r)))):e}totalInputPositions(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);let i=0;return this._forEachBlocksInRange(e,t,(e,t,s,n)=>{i+=e.totalInputPositions(s,n)}),i}maskedBlock(e){return this.maskedBlocks(e)[0]}maskedBlocks(e){const t=this._maskedBlocks[e];return t?t.map(e=>this._blocks[e]):[]}pad(e){const t=new x;return this._forEachBlocksInRange(0,this.displayValue.length,i=>t.aggregate(i.pad(e))),t}}A.DEFAULTS={...S.DEFAULTS,lazy:!0,placeholderChar:"_"},A.STOP_CHAR="`",A.ESCAPE_CHAR="\\",A.InputDefinition=C,A.FixedDefinition=E,d.MaskedPattern=A;class M extends A{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){const{to:t=this.to||0,from:i=this.from||0,maxLength:s=this.maxLength||0,autofix:n=this.autofix,...r}=e;this.to=t,this.from=i,this.maxLength=Math.max(String(t).length,s),this.autofix=n;const a=String(this.from).padStart(this.maxLength,"0"),o=String(this.to).padStart(this.maxLength,"0");let l=0;for(;l<o.length&&o[l]===a[l];)++l;r.mask=o.slice(0,l).replace(/0/g,"\\0")+"0".repeat(this.maxLength-l),super._update(r)}get isComplete(){return super.isComplete&&Boolean(this.value)}boundaries(e){let t="",i="";const[,s,n]=e.match(/^(\D*)(\d*)(\D*)/)||[];return n&&(t="0".repeat(s.length)+n,i="9".repeat(s.length)+n),t=t.padEnd(this.maxLength,"0"),i=i.padEnd(this.maxLength,"9"),[t,i]}doPrepareChar(e,t){let i;return void 0===t&&(t={}),[e,i]=super.doPrepareChar(e.replace(/\D/g,""),t),e||(i.skip=!this.isComplete),[e,i]}_appendCharRaw(e,t){if(void 0===t&&(t={}),!this.autofix||this.value.length+1>this.maxLength)return super._appendCharRaw(e,t);const i=String(this.from).padStart(this.maxLength,"0"),s=String(this.to).padStart(this.maxLength,"0"),[n,r]=this.boundaries(this.value+e);return Number(r)<this.from?super._appendCharRaw(i[this.value.length],t):Number(n)>this.to?!t.tail&&"pad"===this.autofix&&this.value.length+1<this.maxLength?super._appendCharRaw(i[this.value.length],t).aggregate(this._appendCharRaw(e,t)):super._appendCharRaw(s[this.value.length],t):super._appendCharRaw(e,t)}doValidate(e){const t=this.value;if(-1===t.search(/[^0]/)&&t.length<=this._matchFrom)return!0;const[i,s]=this.boundaries(t);return this.from<=Number(s)&&Number(i)<=this.to&&super.doValidate(e)}pad(e){const t=new x;if(this.value.length===this.maxLength)return t;const i=this.value,s=this.maxLength-this.value.length;if(s){this.reset();for(let i=0;i<s;++i)t.aggregate(super._appendCharRaw("0",e));i.split("").forEach(e=>this._appendCharRaw(e))}return t}}d.MaskedRange=M;class P extends A{static extractPatternOptions(t){const{mask:i,pattern:s,...n}=t;return{...n,mask:e(i)?i:s}}constructor(e){super(P.extractPatternOptions({...P.DEFAULTS,...e}))}updateOptions(e){super.updateOptions(e)}_update(t){const{mask:i,pattern:s,blocks:n,...r}={...P.DEFAULTS,...t},a=Object.assign({},P.GET_DEFAULT_BLOCKS());t.min&&(a.Y.from=t.min.getFullYear()),t.max&&(a.Y.to=t.max.getFullYear()),t.min&&t.max&&a.Y.from===a.Y.to&&(a.m.from=t.min.getMonth()+1,a.m.to=t.max.getMonth()+1,a.m.from===a.m.to&&(a.d.from=t.min.getDate(),a.d.to=t.max.getDate())),Object.assign(a,this.blocks,n),super._update({...r,mask:e(i)?i:s,blocks:a})}doValidate(e){const t=this.date;return super.doValidate(e)&&(!this.isComplete||this.isDateExist(this.value)&&null!=t&&(null==this.min||this.min<=t)&&(null==this.max||t<=this.max))}isDateExist(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}get date(){return this.typedValue}set date(e){this.typedValue=e}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(e){super.typedValue=e}maskEquals(e){return e===Date||super.maskEquals(e)}optionsIsChanged(e){return super.optionsIsChanged(P.extractPatternOptions(e))}}P.GET_DEFAULT_BLOCKS=()=>({d:{mask:M,from:1,to:31,maxLength:2},m:{mask:M,from:1,to:12,maxLength:2},Y:{mask:M,from:1900,to:9999}}),P.DEFAULTS={...A.DEFAULTS,mask:Date,pattern:"d{.}`m{.}`Y",format:(e,t)=>e?[String(e.getDate()).padStart(2,"0"),String(e.getMonth()+1).padStart(2,"0"),e.getFullYear()].join("."):"",parse:(e,t)=>{const[i,s,n]=e.split(".").map(Number);return new Date(n,s-1,i)}},d.MaskedDate=P;class L extends S{constructor(e){super({...L.DEFAULTS,...e}),this.currentMask=void 0}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),"mask"in e&&(this.exposeMask=void 0,this.compiledMasks=Array.isArray(e.mask)?e.mask.map(e=>{const{expose:t,...i}=f(e),s=m({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...i});return t&&(this.exposeMask=s),s}):[])}_appendCharRaw(e,t){void 0===t&&(t={});const i=this._applyDispatch(e,t);return this.currentMask&&i.aggregate(this.currentMask._appendChar(e,this.currentMaskFlags(t))),i}_applyDispatch(e,t,i){void 0===e&&(e=""),void 0===t&&(t={}),void 0===i&&(i="");const s=t.tail&&null!=t._beforeTailState?t._beforeTailState._value:this.value,n=this.rawInputValue,r=t.tail&&null!=t._beforeTailState?t._beforeTailState._rawInputValue:n,a=n.slice(r.length),o=this.currentMask,l=new x,c=null==o?void 0:o.state;return this.currentMask=this.doDispatch(e,{...t},i),this.currentMask&&(this.currentMask!==o?(this.currentMask.reset(),r&&(this.currentMask.append(r,{raw:!0}),l.tailShift=this.currentMask.value.length-s.length),a&&(l.tailShift+=this.currentMask.append(a,{raw:!0,tail:!0}).tailShift)):c&&(this.currentMask.state=c)),l}_appendPlaceholder(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}_appendEager(){const e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendEager()),e}appendTail(e){const t=new x;return e&&t.aggregate(this._applyDispatch("",{},e)),t.aggregate(this.currentMask?this.currentMask.appendTail(e):super.appendTail(e))}currentMaskFlags(e){var t,i;return{...e,_beforeTailState:(null==(t=e._beforeTailState)?void 0:t.currentMaskRef)===this.currentMask&&(null==(i=e._beforeTailState)?void 0:i.currentMask)||e._beforeTailState}}doDispatch(e,t,i){return void 0===t&&(t={}),void 0===i&&(i=""),this.dispatch(e,this,t,i)}doValidate(e){return super.doValidate(e)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(e)))}doPrepare(e,t){void 0===t&&(t={});let[i,s]=super.doPrepare(e,t);if(this.currentMask){let e;[i,e]=super.doPrepare(i,this.currentMaskFlags(t)),s=s.aggregate(e)}return[i,s]}doPrepareChar(e,t){void 0===t&&(t={});let[i,s]=super.doPrepareChar(e,t);if(this.currentMask){let e;[i,e]=super.doPrepareChar(i,this.currentMaskFlags(t)),s=s.aggregate(e)}return[i,s]}reset(){var e;null==(e=this.currentMask)||e.reset(),this.compiledMasks.forEach(e=>e.reset())}get value(){return this.exposeMask?this.exposeMask.value:this.currentMask?this.currentMask.value:""}set value(e){this.exposeMask?(this.exposeMask.value=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.value=e}get unmaskedValue(){return this.exposeMask?this.exposeMask.unmaskedValue:this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(e){this.exposeMask?(this.exposeMask.unmaskedValue=e,this.currentMask=this.exposeMask,this._applyDispatch()):super.unmaskedValue=e}get typedValue(){return this.exposeMask?this.exposeMask.typedValue:this.currentMask?this.currentMask.typedValue:""}set typedValue(e){if(this.exposeMask)return this.exposeMask.typedValue=e,this.currentMask=this.exposeMask,void this._applyDispatch();let t=String(e);this.currentMask&&(this.currentMask.typedValue=e,t=this.currentMask.unmaskedValue),this.unmaskedValue=t}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var e;return Boolean(null==(e=this.currentMask)?void 0:e.isComplete)}get isFilled(){var e;return Boolean(null==(e=this.currentMask)?void 0:e.isFilled)}remove(e,t){const i=new x;return this.currentMask&&i.aggregate(this.currentMask.remove(e,t)).aggregate(this._applyDispatch()),i}get state(){var e;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(e=>e.state),currentMaskRef:this.currentMask,currentMask:null==(e=this.currentMask)?void 0:e.state}}set state(e){const{compiledMasks:t,currentMaskRef:i,currentMask:s,...n}=e;t&&this.compiledMasks.forEach((e,i)=>e.state=t[i]),null!=i&&(this.currentMask=i,this.currentMask.state=s),super.state=n}extractInput(e,t,i){return this.currentMask?this.currentMask.extractInput(e,t,i):""}extractTail(e,t){return this.currentMask?this.currentMask.extractTail(e,t):super.extractTail(e,t)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(e,t){return this.currentMask?this.currentMask.nearestInputPos(e,t):super.nearestInputPos(e,t)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(e){this._overwrite=e}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(e){this._eager=e}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(e){this._skipInvalid=e}get autofix(){return this.currentMask?this.currentMask.autofix:this._autofix}set autofix(e){this._autofix=e}maskEquals(e){return Array.isArray(e)?this.compiledMasks.every((t,i)=>{if(!e[i])return;const{mask:s,...n}=e[i];return h(t,n)&&t.maskEquals(s)}):super.maskEquals(e)}typedValueEquals(e){var t;return Boolean(null==(t=this.currentMask)?void 0:t.typedValueEquals(e))}}L.DEFAULTS={...S.DEFAULTS,dispatch:(e,t,i,s)=>{if(!t.compiledMasks.length)return;const n=t.rawInputValue,r=t.compiledMasks.map((r,o)=>{const l=t.currentMask===r,c=l?r.displayValue.length:r.nearestInputPos(r.displayValue.length,a);return r.rawInputValue!==n?(r.reset(),r.append(n,{raw:!0})):l||r.remove(c),r.append(e,t.currentMaskFlags(i)),r.appendTail(s),{index:o,weight:r.rawInputValue.length,totalInputPositions:r.totalInputPositions(0,Math.max(c,r.nearestInputPos(r.displayValue.length,a)))}});return r.sort((e,t)=>t.weight-e.weight||t.totalInputPositions-e.totalInputPositions),t.compiledMasks[r[0].index]}},d.MaskedDynamic=L;class I extends A{constructor(e){super({...I.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){const{enum:t,...i}=e;if(t){const e=t.map(e=>e.length),s=Math.min(...e),n=Math.max(...e)-s;i.mask="*".repeat(s),n&&(i.mask+="["+"*".repeat(n)+"]"),this.enum=t}super._update(i)}_appendCharRaw(e,t){void 0===t&&(t={});const i=Math.min(this.nearestInputPos(0,l),this.value.length),s=this.enum.filter(t=>this.matchValue(t,this.unmaskedValue+e,i));if(s.length){1===s.length&&this._forEachBlocksInRange(0,this.value.length,(e,i)=>{const n=s[0][i];i>=this.value.length||n===e.value||(e.reset(),e._appendChar(n,t))});const e=super._appendCharRaw(s[0][this.value.length],t);return 1===s.length&&s[0].slice(this.unmaskedValue.length).split("").forEach(t=>e.aggregate(super._appendCharRaw(t))),e}return new x({skip:!this.isComplete})}extractTail(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),new w("",e)}remove(e,t){if(void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),e===t)return new x;const i=Math.min(super.nearestInputPos(0,l),this.value.length);let s;for(s=e;s>=0;--s){const e=this.enum.filter(e=>this.matchValue(e,this.value.slice(i,s),i));if(e.length>1)break}const n=super.remove(s,t);return n.tailShift+=s-e,n}get isComplete(){return this.enum.indexOf(this.value)>=0}}var R;I.DEFAULTS={...A.DEFAULTS,matchValue:(e,t,i)=>e.indexOf(t,i)===i},d.MaskedEnum=I,d.MaskedFunction=class extends S{updateOptions(e){super.updateOptions(e)}_update(e){super._update({...e,validate:e.mask})}};class O extends S{constructor(e){super({...O.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),this._updateRegExps()}_updateRegExps(){const e="^"+(this.allowNegative?"[+|\\-]?":""),t=(this.scale?"("+c(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=new RegExp(e+"\\d*"+t),this._mapToRadixRegExp=new RegExp("["+this.mapToRadix.map(c).join("")+"]","g"),this._thousandsSeparatorRegExp=new RegExp(c(this.thousandsSeparator),"g")}_removeThousandsSeparators(e){return e.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(e){const t=e.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}doPrepareChar(e,t){void 0===t&&(t={});const[i,s]=super.doPrepareChar(this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(t.input&&t.raw||!t.input&&!t.raw)?e.replace(this._mapToRadixRegExp,this.radix):e),t);return e&&!i&&(s.skip=!0),!i||this.allowPositive||this.value||"-"===i||s.aggregate(this._appendChar("-")),[i,s]}_separatorsCount(e,t){void 0===t&&(t=!1);let i=0;for(let s=0;s<e;++s)this._value.indexOf(this.thousandsSeparator,s)===s&&(++i,t&&(e+=this.thousandsSeparator.length));return i}_separatorsCountFromSlice(e){return void 0===e&&(e=this._value),this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}extractInput(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t),this._removeThousandsSeparators(super.extractInput(e,t,i))}_appendCharRaw(e,t){void 0===t&&(t={});const i=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,s=this._separatorsCountFromSlice(i);this._value=this._removeThousandsSeparators(this.value);const n=this._value;this._value+=e;const r=this.number;let a,o=!isNaN(r),l=!1;if(o){let e;null!=this.min&&this.min<0&&this.number<this.min&&(e=this.min),null!=this.max&&this.max>0&&this.number>this.max&&(e=this.max),null!=e&&(this.autofix?(this._value=this.format(e,this).replace(O.UNMASKED_RADIX,this.radix),l||(l=n===this._value&&!t.tail)):o=!1),o&&(o=Boolean(this._value.match(this._numberRegExp)))}o?a=new x({inserted:this._value.slice(n.length),rawInserted:l?"":e,skip:l}):(this._value=n,a=new x),this._value=this._insertThousandsSeparators(this._value);const c=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,h=this._separatorsCountFromSlice(c);return a.tailShift+=(h-s)*this.thousandsSeparator.length,a}_findSeparatorAround(e){if(this.thousandsSeparator){const t=e-this.thousandsSeparator.length+1,i=this.value.indexOf(this.thousandsSeparator,t);if(i<=e)return i}return-1}_adjustRangeWithSeparators(e,t){const i=this._findSeparatorAround(e);i>=0&&(e=i);const s=this._findSeparatorAround(t);return s>=0&&(t=s+this.thousandsSeparator.length),[e,t]}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length),[e,t]=this._adjustRangeWithSeparators(e,t);const i=this.value.slice(0,e),s=this.value.slice(t),n=this._separatorsCount(i.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(i+s));const r=this._separatorsCountFromSlice(i);return new x({tailShift:(r-n)*this.thousandsSeparator.length})}nearestInputPos(e,t){if(!this.thousandsSeparator)return e;switch(t){case n:case r:case a:{const i=this._findSeparatorAround(e-1);if(i>=0){const s=i+this.thousandsSeparator.length;if(e<s||this.value.length<=s||t===a)return i}break}case o:case l:{const t=this._findSeparatorAround(e);if(t>=0)return t+this.thousandsSeparator.length}}return e}doCommit(){if(this.value){const e=this.number;let t=e;null!=this.min&&(t=Math.max(t,this.min)),null!=this.max&&(t=Math.min(t,this.max)),t!==e&&(this.unmaskedValue=this.format(t,this));let i=this.value;this.normalizeZeros&&(i=this._normalizeZeros(i)),this.padFractionalZeros&&this.scale>0&&(i=this._padFractionalZeros(i)),this._value=i}super.doCommit()}_normalizeZeros(e){const t=this._removeThousandsSeparators(e).split(this.radix);return t[0]=t[0].replace(/^(\D*)(0*)(\d*)/,(e,t,i,s)=>t+s),e.length&&!/\d$/.test(t[0])&&(t[0]=t[0]+"0"),t.length>1&&(t[1]=t[1].replace(/0*$/,""),t[1].length||(t.length=1)),this._insertThousandsSeparators(t.join(this.radix))}_padFractionalZeros(e){if(!e)return e;const t=e.split(this.radix);return t.length<2&&t.push(""),t[1]=t[1].padEnd(this.scale,"0"),t.join(this.radix)}doSkipInvalid(e,t,i){void 0===t&&(t={});const s=0===this.scale&&e!==this.thousandsSeparator&&(e===this.radix||e===O.UNMASKED_RADIX||this.mapToRadix.includes(e));return super.doSkipInvalid(e,t,i)&&!s}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,O.UNMASKED_RADIX)}set unmaskedValue(e){super.unmaskedValue=e}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(e){this.rawInputValue=this.format(e,this).replace(O.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(e){this.typedValue=e}get allowNegative(){return null!=this.min&&this.min<0||null!=this.max&&this.max<0}get allowPositive(){return null!=this.min&&this.min>0||null!=this.max&&this.max>0}typedValueEquals(e){return(super.typedValueEquals(e)||O.EMPTY_VALUES.includes(e)&&O.EMPTY_VALUES.includes(this.typedValue))&&!(0===e&&""===this.value)}}R=O,O.UNMASKED_RADIX=".",O.EMPTY_VALUES=[...S.EMPTY_VALUES,0],O.DEFAULTS={...S.DEFAULTS,mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[R.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:e=>e.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})},d.MaskedNumber=O;const F={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function B(e,t,i){void 0===t&&(t=F.MASKED),void 0===i&&(i=F.MASKED);const s=m(e);return e=>s.runIsolated(s=>(s[t]=e,s[i]))}d.PIPE_TYPE=F,d.createPipe=B,d.pipe=function(e,t,i,s){return B(t,i,s)(e)},d.RepeatBlock=class extends A{get repeatFrom(){var e;return null!=(e=Array.isArray(this.repeat)?this.repeat[0]:this.repeat===1/0?0:this.repeat)?e:0}get repeatTo(){var e;return null!=(e=Array.isArray(this.repeat)?this.repeat[1]:this.repeat)?e:1/0}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){var t,i,s;const{repeat:n,...r}=f(e);this._blockOpts=Object.assign({},this._blockOpts,r);const a=m(this._blockOpts);this.repeat=null!=(t=null!=(i=null!=n?n:a.repeat)?i:this.repeat)?t:1/0,super._update({mask:"m".repeat(Math.max(this.repeatTo===1/0&&(null==(s=this._blocks)?void 0:s.length)||0,this.repeatFrom)),blocks:{m:a},eager:a.eager,overwrite:a.overwrite,skipInvalid:a.skipInvalid,lazy:a.lazy,placeholderChar:a.placeholderChar,displayChar:a.displayChar})}_allocateBlock(e){return e<this._blocks.length?this._blocks[e]:this.repeatTo===1/0||this._blocks.length<this.repeatTo?(this._blocks.push(m(this._blockOpts)),this.mask+="m",this._blocks[this._blocks.length-1]):void 0}_appendCharRaw(e,t){void 0===t&&(t={});const i=new x;for(let o,l,c=null!=(s=null==(n=this._mapPosToBlock(this.displayValue.length))?void 0:n.index)?s:Math.max(this._blocks.length-1,0);o=null!=(r=this._blocks[c])?r:l=!l&&this._allocateBlock(c);++c){var s,n,r,a;const h=o._appendChar(e,{...t,_beforeTailState:null==(a=t._beforeTailState)||null==(a=a._blocks)?void 0:a[c]});if(h.skip&&l){this._blocks.pop(),this.mask=this.mask.slice(1);break}if(i.aggregate(h),h.consumed)break}return i}_trimEmptyTail(e,t){var i,s;void 0===e&&(e=0);const n=Math.max((null==(i=this._mapPosToBlock(e))?void 0:i.index)||0,this.repeatFrom,0);let r;null!=t&&(r=null==(s=this._mapPosToBlock(t))?void 0:s.index),null==r&&(r=this._blocks.length-1);let a=0;for(let e=r;n<=e&&!this._blocks[e].unmaskedValue;--e,++a);a&&(this._blocks.splice(r-a+1,a),this.mask=this.mask.slice(a))}reset(){super.reset(),this._trimEmptyTail()}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.displayValue.length);const i=super.remove(e,t);return this._trimEmptyTail(e,t),i}totalInputPositions(e,t){return void 0===e&&(e=0),null==t&&this.repeatTo===1/0?1/0:super.totalInputPositions(e,t)}get state(){return super.state}set state(e){this._blocks.length=e._blocks.length,this.mask=this.mask.slice(0,this._blocks.length),super.state=e}};try{globalThis.IMask=d}catch{}i(81);var D=Object.defineProperty,j=(e,t,i)=>(((e,t,i)=>{t in e?D(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i})(e,"symbol"!=typeof t?t+"":t,i),i);!function(){class e{}class t extends e{constructor(e){super(),j(this,"value"),this.value=e}}class i extends e{constructor(e){super(),j(this,"value"),this.value=e}}class s extends e{constructor(e){super(),j(this,"value"),this.value=e}}class n extends e{constructor(e,t="unrestricted"){super(),j(this,"type"),j(this,"value"),this.value=e,this.type=t}}class r extends e{constructor(e){super(),j(this,"value"),this.value=e}}class a extends e{}class o extends e{constructor(e){super(),j(this,"value"),this.value=e}}class l extends e{}class c extends e{constructor(e){super(),j(this,"value"),this.value=e}}class h extends e{constructor(e,t="integer"){super(),j(this,"value"),j(this,"type"),this.value=e,this.type=t}}class u extends e{constructor(e){super(),j(this,"value"),this.value=e}}class d extends e{constructor(e,t,i){super(),j(this,"value"),j(this,"type"),j(this,"unit"),this.value=e,this.type=t,this.unit=i}}class p extends e{}class f extends e{}class m extends e{}class g extends e{}class y extends e{}class v extends e{}class b extends e{}class _ extends e{}class x extends e{}class w extends e{}class S extends e{}class k extends e{}class T{constructor(e){j(this,"input"),j(this,"index",0),this.input=e}consume(){const e=this.input.codePointAt(this.index);return void 0!==e&&(this.index+=String.fromCodePoint(e).length),e}reconsume(e){void 0!==e&&(this.index-=String.fromCodePoint(e).length)}peek(){const e=[];let t=this.index;for(let i=0;i<3&&t<this.input.length;i++){const i=this.input.codePointAt(t);e.push(i),t+=String.fromCodePoint(i).length}return e}}function E(e){return 10===e}function C(e){return E(e)||8192===e||32===e}function A(e){return e>=48&&e<=57}function M(e){return A(e)||e>=65&&e<=70||e>=97&&e<=102}function P(e){return function(e){return function(e){return e>=65&&e<=90}(e)||function(e){return e>=97&&e<=122}(e)}(e)||function(e){return e>=128}(e)||95===e}function L(e){return P(e)||A(e)||45===e}function I(e){return e>=0&&e<=8||11===e||e>=14&&e<=31||127===e}function R(e,t){return 92===e&&!E(t)}function O(e,t,i){return 45===e?P(t)||45===t||R(t,i):!!P(e)||92===e&&R(e,t)}function F(e,t,i){return 43===e||45===e?A(t)||46===t&&A(i):A(46===e?t:e)}function B(e){const t=e.consume();if(M(t)){let i=[t];for(;M(...e.peek())&&i.length<5;)i.push(e.consume());C(...e.peek())&&e.consume();const s=parseInt(String.fromCodePoint(...i),16);return 0===s||s>1114111?65533:s}return void 0===t?65533:t}function D(e,t){const i=new r("");for(;;){const s=e.consume();if(s===t)return i;if(void 0===s)return i;if(10===s)return e.reconsume(s),new a;if(92===s){const t=e.peek()[0];void 0===t||(E(t)?e.consume():i.value+=String.fromCodePoint(B(e)))}else i.value+=String.fromCodePoint(s)}}function N(e){let t="";for(;;){const i=e.consume();if(L(i))t+=String.fromCodePoint(i);else{if(!R(...e.peek()))return e.reconsume(i),t;t+=String.fromCodePoint(B(e))}}}function V(e){let t=function(e){let t="integer",i="";for([43,45].includes(e.peek()[0])&&(i+=String.fromCodePoint(e.consume()));A(...e.peek());)i+=String.fromCodePoint(e.consume());if(46===e.peek()[0]&&A(e.peek()[1]))for(i+=String.fromCodePoint(e.consume(),e.consume()),t="number";A(...e.peek());)i+=String.fromCodePoint(e.consume());return[69,101].includes(e.peek()[0])&&([45,43].includes(e.peek()[1])&&A(e.peek()[2])?(i+=String.fromCodePoint(e.consume(),e.consume(),e.consume()),t="number"):A(e.peek()[1])&&(i+=String.fromCodePoint(e.consume(),e.consume()),t="number")),{value:parseFloat(i),type:t}}(e);return O(...e.peek())?new d(t.value,t.type,N(e)):37===e.peek()[0]?(e.consume(),new u(t.value)):new h(t.value,t.type)}function z(e){for(;;){const t=e.consume();if(41===t||void 0===t)return;R(...e.peek())&&B(e)}}function H(e){const s=N(e);if(s.match(/url/i)&&40===e.peek()[0]){for(e.consume();C(e.peek()[0])&&C(e.peek()[1]);)e.consume();return[34,39].includes(e.peek()[0])||C(e.peek()[0])&&[34,39].includes(e.peek()[1])?new i(s):function(e){const t=new o("");for(;C(...e.peek());)e.consume();for(;;){const i=e.consume();if(41===i)return t;if(void 0===i)return t;if(C(i)){for(;C(...e.peek());)e.consume();return 41===e.peek()[0]||void 0===e.peek()[0]?(e.consume(),t):(z(e),new l)}if([34,39,40].includes(i)||I(i))return z(e),new l;if(92===i){if(!R(...e.peek()))return z(e),new l;t.value+=B(e)}else t.value+=String.fromCodePoint(i)}}(e)}return 40===e.peek()[0]?(e.consume(),new i(s)):new t(s)}function q(e){const t=e.consume(),i=e.peek();if(C(t)){for(;C(...e.peek());)e.consume();return new p}if(34===t)return D(e,t);if(35===t){if(L(i[0])||R(...i)){const t=new n;return O(...i)&&(t.type="id"),t.value=N(e),t}return new c(String.fromCodePoint(t))}return 39===t?D(e,t):40===t?new x:41===t?new w:43===t?F(...i)?(e.reconsume(t),V(e)):new c(String.fromCodePoint(t)):44===t?new v:45===t?F(...e.peek())?(e.reconsume(t),V(e)):45===e.peek()[0]&&62===e.peek()[1]?(e.consume(),e.consume(),new m):O(...e.peek())?(e.reconsume(t),H(e)):new c(String.fromCodePoint(t)):46===t?F(...e.peek())?(e.reconsume(t),V(e)):new c(String.fromCodePoint(t)):58===t?new g:59===t?new y:60===t?33===i[0]&&45===i[1]&&45===i[2]?(e.consume(),e.consume(),e.consume(),new f):new c(String.fromCodePoint(t)):64===t?O(...i)?new s(N(e)):new c(String.fromCodePoint(t)):91===t?new b:92===t?R(...i)?(e.reconsume(t),H(e)):new c(String.fromCodePoint(t)):93===t?new _:123===t?new S:125===t?new k:A(t)?(e.reconsume(t),V(e)):P(t)?(e.reconsume(t),H(e)):void 0===t?void 0:new c(String.fromCodePoint(t))}const $=new Set(["px","deg","s","hz","dppx","number","fr"]);function U(e){return $.has(e.toLowerCase())}function W(e,t){if(["x","y"].includes(e))return e;if(!t)throw new Error("To determine the normalized axis the computedStyle of the source is required.");const i="horizontal-tb"==t.writingMode;if("block"===e)e=i?"y":"x";else{if("inline"!==e)throw new TypeError(`Invalid axis â€œ${e}â€`);e=i?"x":"y"}return e}function G(e){const t=[];let i=0;function s(){let t=0;const s=i;for(;i<e.length;){const s=e.slice(i,i+1);if(/\s/.test(s)&&0===t)break;if("("===s)t+=1;else if(")"===s&&(t-=1,0===t)){i++;break}i++}return e.slice(s,i)}function n(){for(;/\s/.test(e.slice(i,i+1));)i++}for(;i<e.length;){const r=e.slice(i,i+1);/\s/.test(r)?n():t.push(s())}return t}function Y(e,t){return e.reduce((e,i)=>(e.has(i[t])?e.get(i[t]).push(i):e.set(i[t],[i]),e),new Map)}function X(e,t){const i=[],s=[];for(const n of e)t(n)?i.push(n):s.push(n);return[i,s]}function K(e,t={}){function i(e){return Array.from(e).map(e=>K(e,t))}if(e instanceof CSSUnitValue){if("percent"===e.unit&&t.percentageReference){const i=e.value/100*t.percentageReference.value,s=t.percentageReference.unit;return new CSSUnitValue(i,s)}const i=e.toSum();if(i&&1===i.values.length&&(e=i.values[0]),e instanceof CSSUnitValue&&"em"===e.unit&&t.fontSize&&(e=new CSSUnitValue(e.value*t.fontSize.value,t.fontSize.unit)),e instanceof CSSKeywordValue){if("e"===e.value)return new CSSUnitValue(Math.E,"number");if("pi"===e.value)return new CSSUnitValue(Math.PI,"number")}return e}if(!e.operator)return e;switch(e.operator){case"sum":e=new CSSMathSum(...i(e.values));break;case"product":e=new CSSMathProduct(...i(e.values));break;case"negate":e=new CSSMathNegate(K(e.value,t));break;case"clamp":e=new CSSMathClamp(K(e.lower,t),K(e.value,t),K(e.upper,t));break;case"invert":e=new CSSMathInvert(K(e.value,t));break;case"min":e=new CSSMathMin(...i(e.values));break;case"max":e=new CSSMathMax(...i(e.values))}if(e instanceof CSSMathMin||e instanceof CSSMathMax){const t=Array.from(e.values);if(t.every(e=>e instanceof CSSUnitValue&&"percent"!==e.unit&&U(e.unit)&&e.unit===t[0].unit)){const i=Math[e.operator].apply(Math,t.map(({value:e})=>e));return new CSSUnitValue(i,t[0].unit)}}if(e instanceof CSSMathMin||e instanceof CSSMathMax){const t=Array.from(e.values),[i,s]=X(t,e=>e instanceof CSSUnitValue&&"percent"!==e.unit),n=Array.from(Y(i,"unit").values());if(n.some(e=>e.length>0)){const t=n.map(t=>{const i=Math[e.operator].apply(Math,t.map(({value:e})=>e));return new CSSUnitValue(i,t[0].unit)});e=e instanceof CSSMathMin?new CSSMathMin(...t,...s):new CSSMathMax(...t,...s)}return 1===t.length?t[0]:e}if(e instanceof CSSMathNegate)return e.value instanceof CSSUnitValue?new CSSUnitValue(0-e.value.value,e.value.unit):e.value instanceof CSSMathNegate?e.value.value:e;if(e instanceof CSSMathInvert)return e.value instanceof CSSMathInvert?e.value.value:e;if(e instanceof CSSMathSum){let t=function(e){const t=e.filter(e=>e instanceof CSSUnitValue);return[...e.filter(e=>!(e instanceof CSSUnitValue)),...Array.from(Y(t,"unit").entries()).map(([e,t])=>{const i=t.reduce((e,{value:t})=>e+t,0);return new CSSUnitValue(i,e)})]},i=[];for(const t of e.values)t instanceof CSSMathSum?i.push(...t.values):i.push(t);return i=t(i),1===i.length?i[0]:new CSSMathSum(...i)}if(e instanceof CSSMathProduct){let t=[];for(const i of e.values)i instanceof CSSMathProduct?t.push(...i.values):t.push(i);const[i,s]=X(t,e=>e instanceof CSSUnitValue&&"number"===e.unit);if(i.length>1){const e=i.reduce((e,{value:t})=>e*t,1);t=[new CSSUnitValue(e,"number"),...s]}if(2===t.length){let e,i;for(const s of t)s instanceof CSSUnitValue&&"number"===s.unit?e=s:s instanceof CSSMathSum&&[...s.values].every(e=>e instanceof CSSUnitValue)&&(i=s);if(e&&i)return new CSSMathSum(...[...i.values].map(t=>new CSSUnitValue(t.value*e.value,t.unit)))}if(t.every(e=>e instanceof CSSUnitValue&&U(e.unit)||e instanceof CSSMathInvert&&e.value instanceof CSSUnitValue&&U(e.value.unit))){const e=new CSSMathProduct(...t).toSum();if(e&&1===e.values.length)return e.values[0]}return new CSSMathProduct(...t)}return e}const Z=null,J=["percent","length","angle","time","frequency","resolution","flex"],Q={fontRelativeLengths:{units:new Set(["em","rem","ex","rex","cap","rcap","ch","rch","ic","ric","lh","rlh"])},viewportRelativeLengths:{units:new Set(["vw","lvw","svw","dvw","vh","lvh","svh","dvh","vi","lvi","svi","dvi","vb","lvb","svb","dvb","vmin","lvmin","svmin","dvmin","vmax","lvmax","svmax","dvmax"])},absoluteLengths:{units:new Set(["cm","mm","Q","in","pt","pc","px"]),compatible:!0,canonicalUnit:"px",ratios:{cm:96/2.54,mm:96/2.54/10,Q:96/2.54/40,in:96,pc:16,pt:96/72,px:1}},angle:{units:new Set(["deg","grad","rad","turn"]),compatible:!0,canonicalUnit:"deg",ratios:{deg:1,grad:.9,rad:180/Math.PI,turn:360}},time:{units:new Set(["s","ms"]),compatible:!0,canonicalUnit:"s",ratios:{s:1,ms:.001}},frequency:{units:new Set(["hz","khz"]),compatible:!0,canonicalUnit:"hz",ratios:{hz:1,khz:1e3}},resolution:{units:new Set(["dpi","dpcm","dppx"]),compatible:!0,canonicalUnit:"dppx",ratios:{dpi:1/96,dpcm:2.54/96,dppx:1}}},ee=new Map;for(const e of Object.values(Q))if(e.compatible)for(const t of e.units)ee.set(t,e);function te(e){return ee.get(e)}function ie(e,t){const i={...e};for(const e of Object.keys(t))i[e]?i[e]+=t[e]:i[e]=t[e];return i}function se(e){return"number"===e?{}:"percent"===e?{percent:1}:Q.absoluteLengths.units.has(e)||Q.fontRelativeLengths.units.has(e)||Q.viewportRelativeLengths.units.has(e)?{length:1}:Q.angle.units.has(e)?{angle:1}:Q.time.units.has(e)?{time:1}:Q.frequency.units.has(e)?{frequency:1}:Q.resolution.units.has(e)?{resolution:1}:"fr"===e?{flex:1}:Z}function ne(e){if(e instanceof CSSUnitValue){let{unit:t,value:i}=e;const s=te(e.unit);return s&&t!==s.canonicalUnit&&(i*=s.ratios[t],t=s.canonicalUnit),"number"===t?[[i,{}]]:[[i,{[t]:1}]]}if(e instanceof CSSMathInvert){if(!(e.value instanceof CSSUnitValue))throw new Error("Not implemented");const t=ne(e.value);if(t===Z)return Z;if(t.length>1)return Z;const i=t[0],s={};for(const[e,t]of Object.entries(i[1]))s[e]=-1*t;return t[0]=[1/i[0],s],t}if(e instanceof CSSMathProduct){let t=[[1,{}]];for(const i of e.values){const e=ne(i),s=[];if(e===Z)return Z;for(const i of t)for(const t of e)s.push([i[0]*t[0],ie(i[1],t[1])]);t=s}return t}throw new Error("Not implemented")}function re(e){const[t,i]=e,s=Object.entries(i);if(s.length>1)return Z;if(0===s.length)return new CSSUnitValue(t,"number");const n=s[0];return 1!==n[1]?Z:new CSSUnitValue(t,n[0])}function ae(e,...t){if(t&&t.length)throw new Error("Not implemented");const i=ne(e).map(e=>re(e));if(i.some(e=>e===Z))throw new TypeError("Type error");return new CSSMathSum(...i)}function oe(e,t){if(e.percentHint&&t.percentHint&&e.percentHint!==t.percentHint)return Z;const i={...e,percentHint:e.percentHint??t.percentHint};for(const e of J)t[e]&&(i[e]??(i[e]=0),i[e]+=t[e]);return i}class le{constructor(e,t){j(this,"name"),j(this,"values"),this.name=e,this.values=t}}class ce{constructor(e,t){j(this,"value"),j(this,"associatedToken"),this.value=e,this.associatedToken=t}}function he(e){const t=e.shift();return t instanceof S||t instanceof b||t instanceof x?function(e,t){let i;if(t instanceof S)i=k;else if(t instanceof x)i=w;else{if(!(t instanceof b))return;i=_}const s=new ce([],t);for(;;){const t=e.shift();if(t instanceof i)return s;if(void 0===t)return s;e.unshift(t),s.value.push(he(e))}}(e,t):t instanceof i?function(e,t){const i=new le(e.value,[]);for(;;){const e=t.shift();if(e instanceof w)return i;if(void 0===e)return i;t.unshift(e),i.values.push(he(t))}}(t,e):t}function ue(e){if(e instanceof x||e instanceof w)return 6;if(e instanceof c)switch(e.value){case"*":case"/":return 4;case"+":case"-":return 2}}function de(e){return e[e.length-1]}function pe(e,t,i){const s=["+","-"].includes(e.value)?"ADDITION":"MULTIPLICATION",n=t.type===s?t.values:[t],r=i.type===s?i.values:[i];return"-"===e.value?r[0]={type:"NEGATE",value:r[0]}:"/"===e.value&&(r[0]={type:"INVERT",value:r[0]}),{type:s,values:[...n,...r]}}function fe(e){if("ADDITION"===e.type)return new CSSMathSum(...e.values.map(e=>fe(e)));if("MULTIPLICATION"===e.type)return new CSSMathProduct(...e.values.map(e=>fe(e)));if("NEGATE"===e.type)return new CSSMathNegate(fe(e.value));if("INVERT"===e.type)return new CSSMathInvert(fe(e.value));if(e instanceof ce)return me(new le("calc",e.value));if(e instanceof t){if("e"===e.value)return new CSSUnitValue(Math.E,"number");if("pi"===e.value)return new CSSUnitValue(Math.PI,"number");throw new SyntaxError("Invalid math expression")}return ge(e)}function me(e){if("min"===e.name||"max"===e.name){const t=e.values.filter(e=>!(e instanceof p||e instanceof v)).map(e=>K(me(new le("calc",e))));return"min"===e.name?new CSSMathMin(...t):new CSSMathMax(...t)}if("calc"!==e.name)return null;const i=fe(function(e){const i=[],s=[];for(;e.length;){const n=e.shift();if(n instanceof h||n instanceof d||n instanceof u||n instanceof le||n instanceof ce||n instanceof t)s.push(n);else if(n instanceof c&&["*","/","+","-"].includes(n.value)){for(;i.length&&!(de(i)instanceof x)&&ue(de(i))>ue(n);){const e=i.pop(),t=s.pop(),n=s.pop();s.push(pe(e,n,t))}i.push(n)}else if(n instanceof x)i.push(n);else if(n instanceof w){if(!i.length)return null;for(;!(de(i)instanceof x);){const e=i.pop(),t=s.pop(),n=s.pop();s.push(pe(e,n,t))}if(!(de(i)instanceof x))return null;i.pop()}else if(!(n instanceof p))return null}for(;i.length;){if(de(i)instanceof x)return null;const e=i.pop(),t=s.pop(),n=s.pop();s.push(pe(e,n,t))}return s[0]}([...e.values]));let s;try{s=K(i)}catch(e){(new CSSStyleSheet).insertRule("error",0)}return s instanceof CSSUnitValue?new CSSMathSum(s):s}function ge(e){return e instanceof le&&["calc","min","max","clamp"].includes(e.name)?me(e):e instanceof h&&0===e.value&&!e.unit?new CSSUnitValue(0,"px"):e instanceof h?new CSSUnitValue(e.value,"number"):e instanceof u?new CSSUnitValue(e.value,"percent"):e instanceof d?new CSSUnitValue(e.value,e.unit):void 0}!function(){let e=new WeakMap;function t(e){const t=[];for(let s=0;s<e.length;s++)t[s]="number"==typeof(i=e[s])?new CSSUnitValue(i,"number"):i;var i;return t}class i{static parse(e){return e instanceof i?e:K(function(e){const t=function(e){const t=function(e){if(Array.isArray(e))return e;if("string"==typeof e)return function(e){const t=new T(e),i=[];for(;;){const e=q(t);if(void 0===e)return i;i.push(e)}}(e);throw new TypeError("Invalid input type "+typeof e)}(e);for(;t[0]instanceof p;)t.shift();if(void 0===t[0])return null;const i=he(t);for(;t[0]instanceof p;)t.shift();return void 0===t[0]?i:null}(e);return null===t&&(new CSSStyleSheet).insertRule("error",0),t instanceof h||t instanceof u||t instanceof d||t instanceof le||(new CSSStyleSheet).insertRule("error",0),t instanceof d&&null===se(t.unit)&&(new CSSStyleSheet).insertRule("error",0),ge(t)}(e),{})}}class s extends i{constructor(i,s,n,r){super(),e.set(this,{values:t(i),operator:s,name:n||s,delimiter:r||", "})}get operator(){return e.get(this).operator}get values(){return e.get(this).values}toString(){const t=e.get(this);return`${t.name}(${t.values.join(t.delimiter)})`}}const n={CSSNumericValue:i,CSSMathValue:s,CSSUnitValue:class extends i{constructor(t,i){super(),e.set(this,{value:t,unit:i})}get value(){return e.get(this).value}set value(t){e.get(this).value=t}get unit(){return e.get(this).unit}to(e){return function(e,t){if(se(t)===Z)throw new SyntaxError("The string did not match the expected pattern.");const i=ne(e);if(!i)throw new TypeError;if(i.length>1)throw new TypeError("Sum has more than one item");const s=function(e,t){const i=e.unit,s=e.value,n=te(i),r=te(t);return r&&n===r?new CSSUnitValue(s*r.ratios[i]/r.ratios[t],t):Z}(re(i[0]),t);if(s===Z)throw new TypeError;return s}(this,e)}toSum(...e){return ae(this,...e)}type(){return se(e.get(this).unit)}toString(){const t=e.get(this);return`${t.value}${function(e){switch(e){case"percent":return"%";case"number":return"";default:return e.toLowerCase()}}(t.unit)}`}},CSSKeywordValue:class{constructor(e){this.value=e}toString(){return this.value.toString()}},CSSMathSum:class extends s{constructor(e){super(arguments,"sum","calc"," + ")}},CSSMathProduct:class extends s{constructor(e){super(arguments,"product","calc"," * ")}toSum(...e){return ae(this,...e)}type(){return e.get(this).values.map(e=>e.type()).reduce(oe)}},CSSMathNegate:class extends s{constructor(e){super([arguments[0]],"negate","-")}get value(){return e.get(this).values[0]}type(){return this.value.type()}},CSSMathInvert:class extends s{constructor(e){super([1,arguments[0]],"invert","calc"," / ")}get value(){return e.get(this).values[1]}type(){return function(e){const t={};for(const i of J)t[i]=-1*e[i];return t}(e.get(this).values[1].type())}},CSSMathMax:class extends s{constructor(){super(arguments,"max")}},CSSMathMin:class extends s{constructor(){super(arguments,"min")}}};if(!window.CSS&&!Reflect.defineProperty(window,"CSS",{value:{}}))throw Error("Error installing CSSOM support");window.CSSUnitValue||["number","percent","em","ex","px","cm","mm","in","pt","pc","Q","vw","vh","vmin","vmax","rems","ch","deg","rad","grad","turn","ms","s","Hz","kHz","dppx","dpi","dpcm","fr"].forEach(e=>{if(!Reflect.defineProperty(CSS,e,{value:t=>new CSSUnitValue(t,e)}))throw Error(`Error installing CSS.${e}`)});for(let[e,t]of Object.entries(n))if(!(e in window)&&!Reflect.defineProperty(window,e,{value:t}))throw Error(`Error installing CSSOM support for ${e}`)}();const ye="block";let ve=new WeakMap,be=new WeakMap;const _e=["entry","exit","cover","contain","entry-crossing","exit-crossing"];function xe(e){return e===document.scrollingElement?document:e}function we(e){Te(e);let t=ve.get(e).animations;if(0===t.length)return;let i=e.currentTime;for(let e=0;e<t.length;e++)t[e].tickAnimation(i)}function Se(e,t){if(!e)return null;const i=be.get(e).sourceMeasurements,s=getComputedStyle(e);let n=i.scrollTop;return"x"===W(t,s)&&(n=Math.abs(i.scrollLeft)),n}function ke(e,t){const i=K(e,t);if(i instanceof CSSUnitValue){if("px"===i.unit)return i.value;throw TypeError("Unhandled unit type "+i.unit)}throw TypeError("Unsupported value type: "+typeof e)}function Te(e){if(!(e instanceof Ue))return void function(e){const t=ve.get(e);t.anonymousSource&&Pe(e,Fe(t.anonymousSource,t.anonymousTarget))}(e);const t=e.subject;t&&"none"!=getComputedStyle(t).display?Pe(e,Ve(t)):Pe(e,null)}function Ee(e){return["block","inline","x","y"].includes(e)}function Ce(e){const t=getComputedStyle(e);return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,clientWidth:e.clientWidth,clientHeight:e.clientHeight,writingMode:t.writingMode,direction:t.direction,scrollPaddingTop:t.scrollPaddingTop,scrollPaddingBottom:t.scrollPaddingBottom,scrollPaddingLeft:t.scrollPaddingLeft,scrollPaddingRight:t.scrollPaddingRight}}function Ae(e,t){if(!e||!t)return;let i=0,s=0,n=t;const r=e.offsetParent;for(;n&&n!=r;)s+=n.offsetLeft,i+=n.offsetTop,n=n.offsetParent;s-=e.offsetLeft+e.clientLeft,i-=e.offsetTop+e.clientTop;const a=getComputedStyle(t);return{top:i,left:s,offsetWidth:t.offsetWidth,offsetHeight:t.offsetHeight,fontSize:a.fontSize}}function Me(e){let t=be.get(e);t.sourceMeasurements=Ce(e);for(const i of t.timelineRefs){const t=i.deref();t instanceof Ue&&(ve.get(t).subjectMeasurements=Ae(e,t.subject))}t.updateScheduled||(setTimeout(()=>{for(const e of t.timelineRefs){const t=e.deref();t&&we(t)}t.updateScheduled=!1}),t.updateScheduled=!0)}function Pe(e,t){const i=ve.get(e),s=i.source;if(s!=t){if(s){const t=be.get(s);if(t){t.timelineRefs.delete(e);const i=Array.from(t.timelineRefs).filter(e=>void 0===e.deref());for(const e of i)t.timelineRefs.delete(e);0===t.timelineRefs.size&&(t.disconnect(),be.delete(s))}}if(i.source=t,t){let s=be.get(t);if(!s){s={timelineRefs:new Set,sourceMeasurements:Ce(t)},be.set(t,s);const e=new ResizeObserver(e=>{for(const t of e)Me(i.source)});e.observe(t);for(const i of t.children)e.observe(i);const n=new MutationObserver(e=>{for(const t of e)Me(t.target)});n.observe(t,{attributes:!0,attributeFilter:["style","class"]});const r=()=>{s.sourceMeasurements.scrollLeft=t.scrollLeft,s.sourceMeasurements.scrollTop=t.scrollTop;for(const e of s.timelineRefs){const t=e.deref();t&&we(t)}};xe(t).addEventListener("scroll",r),s.disconnect=()=>{e.disconnect(),n.disconnect(),xe(t).removeEventListener("scroll",r)}}s.timelineRefs.add(new WeakRef(e))}}}function Le(e,t){let i=ve.get(e).animations;for(let e=0;e<i.length;e++)i[e].animation==t&&i.splice(e,1)}function Ie(e,t,i){let s=ve.get(e).animations;for(let e=0;e<s.length;e++)if(s[e].animation==t)return;s.push({animation:t,tickAnimation:i}),queueMicrotask(()=>{we(e)})}class Re{constructor(e){if(ve.set(this,{source:null,axis:ye,anonymousSource:e?e.anonymousSource:null,anonymousTarget:e?e.anonymousTarget:null,subject:null,inset:null,animations:[],subjectMeasurements:null}),Pe(this,e&&void 0!==e.source?e.source:document.scrollingElement),e&&void 0!==e.axis&&e.axis!=ye){if(!Ee(e.axis))throw TypeError("Invalid axis");ve.get(this).axis=e.axis}we(this)}set source(e){Pe(this,e),we(this)}get source(){return ve.get(this).source}set axis(e){if(!Ee(e))throw TypeError("Invalid axis");ve.get(this).axis=e,we(this)}get axis(){return ve.get(this).axis}get duration(){return CSS.percent(100)}get phase(){const e=this.source;if(!e)return"inactive";let t=getComputedStyle(e);return"none"==t.display?"inactive":e==document.scrollingElement||"visible"!=t.overflow&&"clip"!=t.overflow?"active":"inactive"}get currentTime(){const e=null,t=this.source;if(!t||!t.isConnected)return e;if("inactive"==this.phase)return e;const i=getComputedStyle(t);if("inline"===i.display||"none"===i.display)return e;const s=this.axis,n=Se(t,s),r=function(e,t){const i=be.get(e).sourceMeasurements,s="horizontal-tb"==getComputedStyle(e).writingMode;return"block"===t?t=s?"y":"x":"inline"===t&&(t=s?"x":"y"),"y"===t?i.scrollHeight-i.clientHeight:"x"===t?i.scrollWidth-i.clientWidth:void 0}(t,s);return r>0?CSS.percent(100*n/r):CSS.percent(100)}get __polyfill(){return!0}}function Oe(e,t){let i=e.parentElement;for(;null!=i;){if(t(i))return i;i=i.parentElement}}function Fe(e,t){switch(e){case"root":return document.scrollingElement;case"nearest":return Ve(t);case"self":return t;default:throw new TypeError("Invalid ScrollTimeline Source Type.")}}function Be(e){switch(getComputedStyle(e).display){case"block":case"inline-block":case"list-item":case"table":case"table-caption":case"flow-root":case"flex":case"grid":return!0}return!1}function De(e){const t=getComputedStyle(e);return"none"!=t.transform||"none"!=t.perspective||"transform"==t.willChange||"perspective"==t.willChange||"none"!=t.filter||"filter"==t.willChange||"none"!=t.backdropFilter}function je(e){return"static"!=getComputedStyle(e).position||De(e)}function Ne(e){switch(getComputedStyle(e).position){case"static":case"relative":case"sticky":return Oe(e,Be);case"absolute":return Oe(e,je);case"fixed":return Oe(e,De)}}function Ve(e){if(e&&e.isConnected){for(;e=Ne(e);)switch(getComputedStyle(e)["overflow-x"]){case"auto":case"scroll":case"hidden":return e==document.body&&"visible"==getComputedStyle(document.scrollingElement).overflow?document.scrollingElement:e}return document.scrollingElement}}function ze(e,t){const i=ve.get(e),s=i.subjectMeasurements,n=be.get(i.source).sourceMeasurements;return"inactive"===e.phase?null:e instanceof Ue?He(t,n,s,i.axis,i.inset):null}function He(e,t,i,s,n){const r="rtl"==t.direction||"vertical-rl"==t.writingMode;let a,o,l={fontSize:i.fontSize};"x"===W(s,t)?(a=i.offsetWidth,o=i.left,l.scrollPadding=[t.scrollPaddingLeft,t.scrollPaddingRight],r&&(o+=t.scrollWidth-t.clientWidth,l.scrollPadding=[t.scrollPaddingRight,t.scrollPaddingLeft]),l.containerSize=t.clientWidth):(a=i.offsetHeight,o=i.top,l.scrollPadding=[t.scrollPaddingTop,t.scrollPaddingBottom],l.containerSize=t.clientHeight);const c=function(e,t){if(!e)return{start:0,end:0};const[i,s]=[e.start,e.end].map((e,i)=>"auto"===e?"auto"===t.scrollPadding[i]?0:parseFloat(t.scrollPadding[i]):ke(e,{percentageReference:CSS.px(t.containerSize),fontSize:CSS.px(parseFloat(t.fontSize))}));return{start:i,end:s}}(n,l),h=o-l.containerSize+c.end,u=o+a-c.start,d=h+a,p=u-a,f=Math.min(d,p),m=Math.max(d,p);let g,y;const v=a>l.containerSize-c.start-c.end;switch(e){case"cover":g=h,y=u;break;case"contain":g=f,y=m;break;case"entry":g=h,y=f;break;case"exit":g=m,y=u;break;case"entry-crossing":g=h,y=v?m:f;break;case"exit-crossing":g=v?f:m,y=u}return{start:g,end:y}}function qe(e,t){if(e instanceof Ue){const{rangeName:i,offset:s}=t;return $e(ze(e,i),s,ze(e,"cover"),e.subject)}if(e instanceof Re){const{axis:i,source:s}=e,{sourceMeasurements:n}=be.get(s);let r;return r="x"===W(i,n)?n.scrollWidth-n.clientWidth:n.scrollHeight-n.clientHeight,ke(t,{percentageReference:CSS.px(r)})/r}unsupportedTimeline(e)}function $e(e,t,i,s){if(!e||!i)return 0;let n=getComputedStyle(s);return(ke(t,{percentageReference:CSS.px(e.end-e.start),fontSize:CSS.px(parseFloat(n.fontSize))})+e.start-i.start)/(i.end-i.start)}let Ue=class extends Re{constructor(e){super(e);const t=ve.get(this);t.subject=e&&e.subject?e.subject:void 0,e&&e.inset&&(t.inset=function(e){if(!e)return{start:0,end:0};let t;if(t="string"==typeof e?G(e).map(t=>{if("auto"===t)return"auto";try{return CSSNumericValue.parse(t)}catch(t){throw TypeError(`Could not parse inset "${e}"`)}}):Array.isArray(e)?e:[e],0===t.length||t.length>2)throw TypeError("Invalid inset");for(const e of t){if("auto"===e)continue;const t=e.type();if(1!==t.length&&1!==t.percent)throw TypeError("Invalid inset")}return{start:t[0],end:t[1]??t[0]}}(e.inset)),t.subject&&(new ResizeObserver(()=>{Me(t.source)}).observe(t.subject),new MutationObserver(()=>{Me(t.source)}).observe(t.subject,{attributes:!0,attributeFilter:["class","style"]})),Te(this),t.subjectMeasurements=Ae(t.source,t.subject),we(this)}get source(){return Te(this),ve.get(this).source}set source(e){throw new Error("Cannot set the source of a view timeline")}get subject(){return ve.get(this).subject}get axis(){return ve.get(this).axis}get currentTime(){const e=null,t=Se(this.source,this.axis);if(t==e)return e;const i=ze(this,"cover");if(!i)return e;const s=(t-i.start)/(i.end-i.start);return CSS.percent(100*s)}get startOffset(){return CSS.px(ze(this,"cover").start)}get endOffset(){return CSS.px(ze(this,"cover").end)}};const We=document.getAnimations,Ge=window.Element.prototype.getAnimations,Ye=window.Element.prototype.animate,Xe=window.Animation;class Ke{constructor(){this.state="pending",this.nativeResolve=this.nativeReject=null,this.promise=new Promise((e,t)=>{this.nativeResolve=e,this.nativeReject=t})}resolve(e){this.state="resolved",this.nativeResolve(e)}reject(e){this.state="rejected",this.promise.catch(()=>{}),this.nativeReject(e)}}function Ze(e){e.readyPromise=new Ke,requestAnimationFrame(()=>{var t;null!==((null==(t=e.timeline)?void 0:t.currentTime)??null)&&(gt(e),"play"!==e.pendingTask||null===e.startTime&&null===e.holdTime?"pause"===e.pendingTask&&it(e):tt(e))})}function Je(){return new DOMException("The user aborted a request","AbortError")}function Qe(e,t){if(null===t)return t;if("number"!=typeof t)throw new DOMException(`Unexpected value: ${t}.  Cannot convert to CssNumberish`,"InvalidStateError");const i=e.rangeDuration??100,s=lt(e),n=s?i*t/s:0;return CSS.percent(n)}function et(e,t){if(e.timeline){if(null===t)return t;if("percent"===t.unit){const i=e.rangeDuration??100,s=lt(e);return t.value*s/i}throw new DOMException("CSSNumericValue must be a percentage for progress based animations.","NotSupportedError")}{if(null==t||"number"==typeof t)return t;const e=t.to("ms");if(e)return e.value;throw new DOMException("CSSNumericValue must be either a number or a time value for time based animations.","InvalidStateError")}}function tt(e){const t=et(e,e.timeline.currentTime);if(null!=e.holdTime)rt(e),0==e.animation.playbackRate?e.startTime=t:(e.startTime=t-e.holdTime/e.animation.playbackRate,e.holdTime=null);else if(null!==e.startTime&&null!==e.pendingPlaybackRate){const i=(t-e.startTime)*e.animation.playbackRate;rt(e);const s=e.animation.playbackRate;0==s?(e.holdTime=null,e.startTime=t):e.startTime=t-i/s}e.readyPromise&&"pending"==e.readyPromise.state&&e.readyPromise.resolve(e.proxy),ot(e,!1,!1),ct(e),e.pendingTask=null}function it(e){const t=et(e,e.timeline.currentTime);null!=e.startTime&&null==e.holdTime&&(e.holdTime=(t-e.startTime)*e.animation.playbackRate),rt(e),e.startTime=null,e.readyPromise.resolve(e.proxy),ot(e,!1,!1),ct(e),e.pendingTask=null}function st(e){if(!e.finishedPromise||"pending"!=e.finishedPromise.state)return;if("finished"!=e.proxy.playState)return;e.finishedPromise.resolve(e.proxy),e.animation.pause();const t=new CustomEvent("finish",{detail:{currentTime:e.proxy.currentTime,timelineTime:e.proxy.timeline.currentTime}});Object.defineProperty(t,"currentTime",{get:function(){return this.detail.currentTime}}),Object.defineProperty(t,"timelineTime",{get:function(){return this.detail.timelineTime}}),requestAnimationFrame(()=>{queueMicrotask(()=>{e.animation.dispatchEvent(t)})})}function nt(e){return null!==e.pendingPlaybackRate?e.pendingPlaybackRate:e.animation.playbackRate}function rt(e){null!==e.pendingPlaybackRate&&(e.animation.playbackRate=e.pendingPlaybackRate,e.pendingPlaybackRate=null)}function at(e){if(!e.timeline)return null;const t=et(e,e.timeline.currentTime);if(null===t)return null;if(null===e.startTime)return null;let i=(t-e.startTime)*e.animation.playbackRate;return-0==i&&(i=0),i}function ot(e,t,i){if(!e.timeline)return;let s=t?et(e,e.proxy.currentTime):at(e);if(s&&null!=e.startTime&&!e.proxy.pending){const i=nt(e),n=lt(e);let r=e.previousCurrentTime;i>0&&s>=n&&null!=e.previousCurrentTime?((null===r||r<n)&&(r=n),e.holdTime=t?s:r):i<0&&s<=0?((null==r||r>0)&&(r=0),e.holdTime=t?s:r):0!=i&&(t&&null!==e.holdTime&&(e.startTime=function(e,t){if(!e.timeline)return null;const i=et(e,e.timeline.currentTime);return null==i?null:i-t/e.animation.playbackRate}(e,e.holdTime)),e.holdTime=null)}ct(e),e.previousCurrentTime=et(e,e.proxy.currentTime),"finished"==e.proxy.playState?(e.finishedPromise||(e.finishedPromise=new Ke),"pending"==e.finishedPromise.state&&(i?st(e):Promise.resolve().then(()=>{st(e)}))):(e.finishedPromise&&"resolved"==e.finishedPromise.state&&(e.finishedPromise=new Ke),"paused"!=e.animation.playState&&e.animation.pause())}function lt(e){const t=function(e){const t=e.proxy.effect.getTiming();return e.normalizedTiming||t}(e),i=t.delay+t.endDelay+t.iterations*t.duration;return Math.max(0,i)}function ct(e){if(e.timeline)if(null!==e.startTime){const t=e.timeline.currentTime;if(null==t)return;ht(e,(et(e,t)-e.startTime)*e.animation.playbackRate)}else null!==e.holdTime&&ht(e,e.holdTime)}function ht(e,t){const i=e.timeline,s=e.animation.playbackRate,n=i.currentTime&&i.currentTime.value==(s<0?0:100)?s<0?.001:-.001:0;e.animation.currentTime=t+n}function ut(e,t){if(!e.timeline)return;const i="paused"==e.proxy.playState&&e.proxy.pending;let s=!1,n=et(e,e.proxy.currentTime);0==nt(e)&&null==n&&(e.holdTime=0),null==n&&(e.autoAlignStartTime=!0),("finished"===e.proxy.playState||i)&&(e.holdTime=null,e.startTime=null,e.autoAlignStartTime=!0),e.holdTime&&(e.startTime=null),e.pendingTask&&(e.pendingTask=null,s=!0),(null!==e.holdTime||e.autoAlignStartTime||i||null!==e.pendingPlaybackRate)&&(e.readyPromise&&!s&&(e.readyPromise=null),ct(e),e.readyPromise||Ze(e),e.pendingTask="play",Ie(e.timeline,e.animation,dt.bind(e.proxy)),ot(e,!1,!1))}function dt(e){const t=ft.get(this);if(!t)return;if(null==e)return void("paused"!==t.proxy.playState&&"idle"!=t.animation.playState&&t.animation.cancel());gt(t),t.pendingTask&&requestAnimationFrame(()=>{"play"!==t.pendingTask||null===t.startTime&&null===t.holdTime?"pause"===t.pendingTask&&it(t):tt(t)});const i=this.playState;if("running"==i||"finished"==i){const i=et(t,e);ht(t,(i-et(t,this.startTime))*this.playbackRate),ot(t,!1,!1)}}function pt(e){e.specifiedTiming=null}let ft=new WeakMap;window.addEventListener("pagehide",e=>{ft=new WeakMap},!1);let mt=new WeakMap;function gt(e){if(!e.autoAlignStartTime)return;if(!e.timeline||!e.timeline.currentTime)return;if("idle"===e.proxy.playState||"paused"===e.proxy.playState&&null!==e.holdTime)return;const t=e.rangeDuration;let i,s;try{i=CSS.percent(100*function(e){if(!e.animationRange)return 0;const t="normal"===e.animationRange.start?vt(e.timeline):e.animationRange.start;return qe(e.timeline,t)}(e))}catch(t){i=CSS.percent(0),e.animationRange.start="normal",console.warn("Exception when calculating start offset",t)}try{s=CSS.percent(100*(1-function(e){if(!e.animationRange)return 0;const t="normal"===e.animationRange.end?bt(e.timeline):e.animationRange.end;return 1-qe(e.timeline,t)}(e)))}catch(t){s=CSS.percent(100),e.animationRange.end="normal",console.warn("Exception when calculating end offset",t)}e.rangeDuration=s.value-i.value;const n=nt(e);e.startTime=et(e,n>=0?i:s),e.holdTime=null,e.rangeDuration!==t&&pt(e)}function yt(e){throw new Error("Unsupported timeline class")}function vt(e){return e instanceof ViewTimeline?{rangeName:"cover",offset:CSS.percent(0)}:e instanceof Re?CSS.percent(0):void yt()}function bt(e){return e instanceof ViewTimeline?{rangeName:"cover",offset:CSS.percent(100)}:e instanceof Re?CSS.percent(100):void yt()}function _t(e,t){if(!t)return{start:"normal",end:"normal"};const i={start:vt(e),end:bt(e)};if(e instanceof ViewTimeline){const e=G(t),s=[],n=[];if(e.forEach(e=>{if(_e.includes(e))s.push(e);else try{n.push(CSSNumericValue.parse(e))}catch(e){throw TypeError(`Could not parse range "${t}"`)}}),s.length>2||n.length>2||1==n.length)throw TypeError("Invalid time range or unsupported time range format.");return s.length&&(i.start.rangeName=s[0],i.end.rangeName=s.length>1?s[1]:s[0]),n.length>1&&(i.start.offset=n[0],i.end.offset=n[1]),i}if(e instanceof Re){const e=t.split(" ");if(2!=e.length)throw TypeError("Invalid time range or unsupported time range format.");return i.start=CSSNumericValue.parse(e[0]),i.end=CSSNumericValue.parse(e[1]),i}yt()}function xt(e,t,i){if(!t||"normal"===t)return"normal";if(e instanceof ViewTimeline){let e="cover",s="start"===i?CSS.percent(0):CSS.percent(100);if(t instanceof Object)void 0!==t.rangeName&&(e=t.rangeName),void 0!==t.offset&&(s=t.offset);else{const i=G(t);1===i.length?_e.includes(i[0])?e=i[0]:s=K(CSSNumericValue.parse(i[0]),{}):2===i.length&&(e=i[0],s=K(CSSNumericValue.parse(i[1]),{}))}if(!_e.includes(e))throw TypeError("Invalid range name");return{rangeName:e,offset:s}}if(e instanceof Re)return CSSNumericValue.parse(t);yt()}class wt{constructor(e,t,i={}){const s=t instanceof Re,n=e instanceof Xe?e:new Xe(e,s?void 0:t);mt.set(n,this),ft.set(this,{animation:n,timeline:s?t:void 0,playState:s?"idle":null,readyPromise:null,finishedPromise:null,startTime:null,holdTime:null,rangeDuration:null,previousCurrentTime:null,autoAlignStartTime:!1,pendingPlaybackRate:null,pendingTask:null,specifiedTiming:null,normalizedTiming:null,effect:null,animationRange:s?_t(t,i["animation-range"]):null,proxy:this})}get effect(){const e=ft.get(this);return e.timeline?(e.effect||(e.effect=function(e){const t=e.animation.effect,i=t.updateTiming,s={apply:function(i){t.getTiming();const s=i.apply(t);if(e.timeline){const t=e.duration??100;s.localTime=Qe(e,s.localTime),s.endTime=Qe(e,s.endTime),s.activeDuration=Qe(e,s.activeDuration);const i=lt(e),n=s.iterations?(i-s.delay-s.endDelay)/s.iterations:0;s.duration=i?CSS.percent(t*n/i):CSS.percent(0),void 0===e.timeline.currentTime&&(s.localTime=null)}return s}},n={apply:function(s,n){if(e.specifiedTiming)return e.specifiedTiming;e.specifiedTiming=s.apply(t);let r,a=Object.assign({},e.specifiedTiming);if(a.duration===1/0)throw TypeError("Effect duration cannot be Infinity when used with Scroll Timelines");return(null===a.duration||"auto"===a.duration||e.autoDurationEffect)&&e.timeline&&(e.autoDurationEffect=!0,a.delay=0,a.endDelay=0,r=a.iterations?1e5:0,a.duration=a.iterations?(r-a.delay-a.endDelay)/a.iterations:0,a.duration<0&&(a.duration=0,a.endDelay=r-a.delay),i.apply(t,[a])),e.normalizedTiming=a,e.specifiedTiming}},r={apply:function(i,s,n){if(n&&n.length){if(e.timeline&&n[0]){const t=n[0],i=t.duration;if(i===1/0)throw TypeError("Effect duration cannot be Infinity when used with Scroll Timelines");if(t.iterations===1/0)throw TypeError("Effect iterations cannot be Infinity when used with Scroll Timelines");void 0!==i&&"auto"!==i&&(e.autoDurationEffect=null)}e.specifiedTiming&&i.apply(t,[e.specifiedTiming]),i.apply(t,n),pt(e)}}},a=new Proxy(t,{get:function(e,i){const s=e[i];return"function"==typeof s?s.bind(t):s},set:function(e,t,i){return e[t]=i,!0}});return a.getComputedTiming=new Proxy(t.getComputedTiming,s),a.getTiming=new Proxy(t.getTiming,n),a.updateTiming=new Proxy(t.updateTiming,r),a}(e)),e.effect):e.animation.effect}set effect(e){const t=ft.get(this);t.animation.effect=e,t.effect=null,t.autoDurationEffect=null}get timeline(){const e=ft.get(this);return e.timeline||e.animation.timeline}set timeline(e){const t=ft.get(this),i=this.timeline;if(i==e)return;const s=this.playState,n=this.currentTime;let r,a=lt(t);r=null===n?null:0===a?0:et(t,n)/a;const o=i instanceof Re,l=e instanceof Re,c=this.pending;if(o&&Le(t.timeline,t.animation),l)return t.timeline=e,rt(t),t.autoAlignStartTime=!0,t.startTime=null,t.holdTime=null,"running"!==s&&"finished"!==s||(t.readyPromise&&"resolved"!==t.readyPromise.state||Ze(t),t.pendingTask="play",Ie(t.timeline,t.animation,dt.bind(this))),"paused"===s&&null!==r&&(t.holdTime=r*a),c&&(t.readyPromise&&"resolved"!=t.readyPromise.state||Ze(t),t.pendingTask="paused"==s?"pause":"play"),null!==t.startTime&&(t.holdTime=null),void ot(t,!1,!1);if(t.animation.timeline!=e)throw TypeError("Unsupported timeline: "+e);if(Le(t.timeline,t.animation),t.timeline=null,o)switch(null!==n&&(t.animation.currentTime=r*lt(t)),s){case"paused":t.animation.pause();break;case"running":case"finished":t.animation.play()}}get startTime(){const e=ft.get(this);return e.timeline?Qe(e,e.startTime):e.animation.startTime}set startTime(e){const t=ft.get(this);if(e=et(t,e),!t.timeline)return void(t.animation.startTime=e);t.autoAlignStartTime=!1,null==et(t,t.timeline.currentTime)&&null!=t.startTime&&(t.holdTime=null,ct(t));const i=et(t,this.currentTime);rt(t),t.startTime=e,null!==t.startTime&&0!=t.animation.playbackRate?t.holdTime=null:t.holdTime=i,t.pendingTask&&(t.pendingTask=null,t.readyPromise.resolve(this)),ot(t,!0,!1),ct(t)}get currentTime(){const e=ft.get(this);return e.timeline?null!=e.holdTime?Qe(e,e.holdTime):Qe(e,at(e)):e.animation.currentTime}set currentTime(e){const t=ft.get(this);t.timeline?(function(e,t){if(null==t&&null!==e.currentTime)throw new TypeError;t=et(e,t),e.autoAlignStartTime=!1,null!==e.holdTime||null===e.startTime||"inactive"===e.timeline.phase||0===e.animation.playbackRate?e.holdTime=t:e.startTime=et(e,e.timeline.currentTime)-t/e.animation.playbackRate,"inactive"===e.timeline.phase&&(e.startTime=null),e.previousCurrentTime=null}(t,e),"pause"==t.pendingTask&&(t.holdTime=et(t,e),rt(t),t.startTime=null,t.pendingTask=null,t.readyPromise.resolve(this)),ot(t,!0,!1)):t.animation.currentTime=e}get playbackRate(){return ft.get(this).animation.playbackRate}set playbackRate(e){const t=ft.get(this);if(!t.timeline)return void(t.animation.playbackRate=e);t.pendingPlaybackRate=null;const i=this.currentTime;t.animation.playbackRate=e,null!==i&&(this.currentTime=i)}get playState(){const e=ft.get(this);if(!e.timeline)return e.animation.playState;const t=et(e,this.currentTime);if(null===t&&null===e.startTime&&null==e.pendingTask)return"idle";if("pause"==e.pendingTask||null===e.startTime&&"play"!=e.pendingTask)return"paused";if(null!=t){if(e.animation.playbackRate>0&&t>=lt(e))return"finished";if(e.animation.playbackRate<0&&t<=0)return"finished"}return"running"}get rangeStart(){var e;return(null==(e=ft.get(this).animationRange)?void 0:e.start)??"normal"}set rangeStart(e){const t=ft.get(this);if(!t.timeline)return t.animation.rangeStart=e;t.timeline instanceof Re&&(t.animationRange.start=xt(t.timeline,e,"start"),gt(t),ct(t))}get rangeEnd(){var e;return(null==(e=ft.get(this).animationRange)?void 0:e.end)??"normal"}set rangeEnd(e){const t=ft.get(this);if(!t.timeline)return t.animation.rangeEnd=e;t.timeline instanceof Re&&(t.animationRange.end=xt(t.timeline,e,"end"),gt(t),ct(t))}get replaceState(){return ft.get(this).animation.pending}get pending(){const e=ft.get(this);return e.timeline?!!e.readyPromise&&"pending"==e.readyPromise.state:e.animation.pending}finish(){const e=ft.get(this);if(!e.timeline)return void e.animation.finish();const t=nt(e),i=lt(e);if(0==t)throw new DOMException("Cannot finish Animation with a playbackRate of 0.","InvalidStateError");if(t>0&&i==1/0)throw new DOMException("Cannot finish Animation with an infinite target effect end.","InvalidStateError");rt(e);const s=t<0?0:i;this.currentTime=Qe(e,s);const n=et(e,e.timeline.currentTime);null===e.startTime&&null!==n&&(e.startTime=n-s/e.animation.playbackRate),"pause"==e.pendingTask&&null!==e.startTime&&(e.holdTime=null,e.pendingTask=null,e.readyPromise.resolve(this)),"play"==e.pendingTask&&null!==e.startTime&&(e.pendingTask=null,e.readyPromise.resolve(this)),ot(e,!0,!0)}play(){const e=ft.get(this);e.timeline?ut(e):e.animation.play()}pause(){const e=ft.get(this);e.timeline?"paused"!=this.playState&&(null===e.animation.currentTime&&(e.autoAlignStartTime=!0),"play"==e.pendingTask?e.pendingTask=null:e.readyPromise=null,e.readyPromise||Ze(e),e.pendingTask="pause",Ie(e.timeline,e.animation,dt.bind(e.proxy))):e.animation.pause()}reverse(){const e=ft.get(this),t=nt(e),i=et(e,this.currentTime),s=lt(e)==1/0,n=0!=t&&(t<0||i>0||!s);if(!e.timeline||!n)return n&&(e.pendingPlaybackRate=-nt(e)),void e.animation.reverse();if("inactive"==e.timeline.phase)throw new DOMException("Cannot reverse an animation with no active timeline","InvalidStateError");this.updatePlaybackRate(-t),ut(e)}updatePlaybackRate(e){const t=ft.get(this);if(t.pendingPlaybackRate=e,!t.timeline)return void t.animation.updatePlaybackRate(e);const i=this.playState;if(!t.readyPromise||"pending"!=t.readyPromise.state)switch(i){case"idle":case"paused":rt(t);break;case"finished":const i=et(t,t.timeline.currentTime),s=null!==i?(i-t.startTime)*t.animation.playbackRate:null;t.startTime=0==e?i:null!=i&&null!=s?(i-s)/e:null,rt(t),ot(t,!1,!1),ct(t);break;default:ut(t)}}persist(){ft.get(this).animation.persist()}get id(){return ft.get(this).animation.id}set id(e){ft.get(this).animation.id=e}cancel(){const e=ft.get(this);e.timeline?("idle"!=this.playState&&(function(e){e.pendingTask&&(e.pendingTask=null,rt(e),e.readyPromise.reject(Je()),Ze(e),e.readyPromise.resolve(e.proxy))}(e),e.finishedPromise&&"pending"==e.finishedPromise.state&&e.finishedPromise.reject(Je()),e.finishedPromise=new Ke,e.animation.cancel()),e.startTime=null,e.holdTime=null,Le(e.timeline,e.animation)):e.animation.cancel()}get onfinish(){return ft.get(this).animation.onfinish}set onfinish(e){ft.get(this).animation.onfinish=e}get oncancel(){return ft.get(this).animation.oncancel}set oncancel(e){ft.get(this).animation.oncancel=e}get onremove(){return ft.get(this).animation.onremove}set onremove(e){ft.get(this).animation.onremove=e}get finished(){const e=ft.get(this);return e.timeline?(e.finishedPromise||(e.finishedPromise=new Ke),e.finishedPromise.promise):e.animation.finished}get ready(){const e=ft.get(this);return e.timeline?(e.readyPromise||(e.readyPromise=new Ke,e.readyPromise.resolve(this)),e.readyPromise.promise):e.animation.ready}addEventListener(e,t,i){ft.get(this).animation.addEventListener(e,t,i)}removeEventListener(e,t,i){ft.get(this).animation.removeEventListener(e,t,i)}dispatchEvent(e){ft.get(this).animation.dispatchEvent(e)}}function St(e,t){const i=t.timeline;i instanceof Re&&delete t.timeline;const s=Ye.apply(this,[e,t]),n=new wt(s,i);return i instanceof Re&&(s.pause(),ft.get(n).animationRange={start:xt(i,t.rangeStart,"start"),end:xt(i,t.rangeEnd,"end")},n.play()),n}function kt(e){for(let t=0;t<e.length;++t){let i=mt.get(e[t]);i&&(e[t]=i)}return e}function Tt(e){return kt(Ge.apply(this,[e]))}function Et(e){return kt(We.apply(this,[e]))}const Ct={IDENTIFIER:/[\w\\\@_-]+/g,WHITE_SPACE:/\s*/g,NUMBER:/^[0-9]+/,TIME:/^[0-9]+(s|ms)/,SCROLL_TIMELINE:/scroll-timeline\s*:([^;}]+)/,SCROLL_TIMELINE_NAME:/scroll-timeline-name\s*:([^;}]+)/,SCROLL_TIMELINE_AXIS:/scroll-timeline-axis\s*:([^;}]+)/,VIEW_TIMELINE:/view-timeline\s*:([^;}]+)/,VIEW_TIMELINE_NAME:/view-timeline-name\s*:([^;}]+)/,VIEW_TIMELINE_AXIS:/view-timeline-axis\s*:([^;}]+)/,VIEW_TIMELINE_INSET:/view-timeline-inset\s*:([^;}]+)/,ANIMATION_TIMELINE:/animation-timeline\s*:([^;}]+)/,ANIMATION_TIME_RANGE:/animation-range\s*:([^;}]+)/,ANIMATION_NAME:/animation-name\s*:([^;}]+)/,ANIMATION:/animation\s*:([^;}]+)/,ANONYMOUS_SCROLL_TIMELINE:/scroll\(([^)]*)\)/,ANONYMOUS_VIEW_TIMELINE:/view\(([^)]*)\)/},At=["block","inline","x","y"],Mt=["nearest","root","self"],Pt=new class{constructor(){this.cssRulesWithTimelineName=[],this.nextAnonymousTimelineNameIndex=0,this.anonymousScrollTimelineOptions=new Map,this.anonymousViewTimelineOptions=new Map,this.sourceSelectorToScrollTimeline=[],this.subjectSelectorToViewTimeline=[],this.keyframeNamesSelectors=new Map}transpileStyleSheet(e,t,i){const s={sheetSrc:e,index:0,name:i};for(;s.index<s.sheetSrc.length&&(this.eatWhitespace(s),!(s.index>=s.sheetSrc.length));){if(this.lookAhead("/*",s)){for(;this.lookAhead("/*",s);)this.eatComment(s),this.eatWhitespace(s);continue}const e=this.parseQualifiedRule(s);e&&(t?this.parseKeyframesAndSaveNameMapping(e,s):this.handleScrollTimelineProps(e,s))}return this.replaceUrlFunctions(s.sheetSrc,i)}replaceUrlFunctions(e,t){if(!t)return e;const i=new URL(t).origin,s=t.lastIndexOf("/")>i.length?t.substring(0,t.lastIndexOf("/")):i;return(e=e.replace(/url\((?:(['"])(?!https?:\/\/|data:|blob:|\/)|(?!['"]?(?:https?:\/\/|data:|blob:|\/)))(?:\.\/)?/gm,`url($1${s}/`)).replace(/url\((['"])?\//gm,`url($1${i}/`)}getAnimationTimelineOptions(e,t){for(let i=this.cssRulesWithTimelineName.length-1;i>=0;i--){const s=this.cssRulesWithTimelineName[i];try{if(t.matches(s.selector)&&(!s["animation-name"]||s["animation-name"]==e))return{"animation-timeline":s["animation-timeline"],"animation-range":s["animation-range"]}}catch{}}return null}getAnonymousScrollTimelineOptions(e,t){const i=this.anonymousScrollTimelineOptions.get(e);return i?{anonymousSource:i.source,anonymousTarget:t,source:Fe(i.source??"nearest",t),axis:i.axis?i.axis:"block"}:null}getScrollTimelineOptions(e,t){const i=this.getAnonymousScrollTimelineOptions(e,t);if(i)return i;for(let i=this.sourceSelectorToScrollTimeline.length-1;i>=0;i--){const s=this.sourceSelectorToScrollTimeline[i];if(s.name==e){const e=this.findPreviousSiblingOrAncestorMatchingSelector(t,s.selector);if(e)return{source:e,...s.axis?{axis:s.axis}:{}}}}return null}findPreviousSiblingOrAncestorMatchingSelector(e,t){let i=e;for(;i;){if(i.matches(t))return i;i=i.previousElementSibling||i.parentElement}return null}getAnonymousViewTimelineOptions(e,t){const i=this.anonymousViewTimelineOptions.get(e);return i?{subject:t,axis:i.axis?i.axis:"block",inset:i.inset?i.inset:"auto"}:null}getViewTimelineOptions(e,t){const i=this.getAnonymousViewTimelineOptions(e,t);if(i)return i;for(let i=this.subjectSelectorToViewTimeline.length-1;i>=0;i--){const s=this.subjectSelectorToViewTimeline[i];if(s.name==e){const e=this.findPreviousSiblingOrAncestorMatchingSelector(t,s.selector);if(e)return{subject:e,axis:s.axis,inset:s.inset}}}return null}handleScrollTimelineProps(e,t){if(e.selector.includes("@keyframes"))return;const i=e.block.contents.includes("animation-name:"),s=e.block.contents.includes("animation-timeline:"),n=e.block.contents.includes("animation:");if(this.saveSourceSelectorToScrollTimeline(e),this.saveSubjectSelectorToViewTimeline(e),!s&&!i&&!n)return;let r=[],a=[],o=!1;s&&(r=this.extractScrollTimelineNames(e.block.contents)),i&&(a=this.extractMatches(e.block.contents,Ct.ANIMATION_NAME)),s&&i||(n&&this.extractMatches(e.block.contents,Ct.ANIMATION).forEach(t=>{const i=this.extractAnimationName(t);i&&s&&a.push(i),s&&(this.hasDuration(t)||(this.hasAutoDuration(t)&&(e.block.contents=e.block.contents.replace("auto","    ")),e.block.contents=e.block.contents.replace(t," 1s "+t),o=!0))}),o&&this.replacePart(e.block.startIndex,e.block.endIndex,e.block.contents,t)),this.saveRelationInList(e,r,a)}saveSourceSelectorToScrollTimeline(e){const t=e.block.contents.includes("scroll-timeline:"),i=e.block.contents.includes("scroll-timeline-name:"),s=e.block.contents.includes("scroll-timeline-axis:");if(!t&&!i)return;let n=[];if(t){const t=this.extractMatches(e.block.contents,Ct.SCROLL_TIMELINE);for(const i of t){const t=this.split(i);let s={selector:e.selector,name:""};1==t.length?s.name=t[0]:2==t.length&&(At.includes(t[0])?(s.axis=t[0],s.name=t[1]):(s.axis=t[1],s.name=t[0])),n.push(s)}}if(i){const t=this.extractMatches(e.block.contents,Ct.SCROLL_TIMELINE_NAME);for(let i=0;i<t.length;i++)if(i<n.length)n[i].name=t[i];else{let s={selector:e.selector,name:t[i]};n.push(s)}}let r=[];if(s){const t=this.extractMatches(e.block.contents,Ct.SCROLL_TIMELINE_AXIS);if(r=t.filter(e=>At.includes(e)),r.length!=t.length)throw new Error("Invalid axis")}for(let e=0;e<n.length;e++)r.length&&(n[e].axis=r[e%n.length]);this.sourceSelectorToScrollTimeline.push(...n)}saveSubjectSelectorToViewTimeline(e){const t=e.block.contents.includes("view-timeline:"),i=e.block.contents.includes("view-timeline-name:"),s=e.block.contents.includes("view-timeline-axis:"),n=e.block.contents.includes("view-timeline-inset:");if(!t&&!i)return;let r=[];if(t){const t=this.extractMatches(e.block.contents,Ct.VIEW_TIMELINE);for(let i of t){const t=this.split(i);let s={selector:e.selector,name:"",inset:null};1==t.length?s.name=t[0]:2==t.length&&(At.includes(t[0])?(s.axis=t[0],s.name=t[1]):(s.axis=t[1],s.name=t[0])),r.push(s)}}if(i){const t=this.extractMatches(e.block.contents,Ct.VIEW_TIMELINE_NAME);for(let i=0;i<t.length;i++)if(i<r.length)r[i].name=t[i];else{let s={selector:e.selector,name:t[i],inset:null};r.push(s)}}let a=[],o=[];if(n&&(a=this.extractMatches(e.block.contents,Ct.VIEW_TIMELINE_INSET)),s){const t=this.extractMatches(e.block.contents,Ct.VIEW_TIMELINE_AXIS);if(o=t.filter(e=>At.includes(e)),o.length!=t.length)throw new Error("Invalid axis")}for(let e=0;e<r.length;e++)a.length&&(r[e].inset=a[e%r.length]),o.length&&(r[e].axis=o[e%r.length]);this.subjectSelectorToViewTimeline.push(...r)}hasDuration(e){return e.split(" ").filter(e=>{return t=e,Ct.TIME.exec(t);var t}).length>=1}hasAutoDuration(e){return e.split(" ").filter(e=>"auto"===e).length>=1}saveRelationInList(e,t,i){let s=[];e.block.contents.includes("animation-range:")&&(s=this.extractMatches(e.block.contents,Ct.ANIMATION_TIME_RANGE));const n=Math.max(t.length,i.length,s.length);for(let r=0;r<n;r++)this.cssRulesWithTimelineName.push({selector:e.selector,"animation-timeline":t[r%t.length],...i.length?{"animation-name":i[r%i.length]}:{},...s.length?{"animation-range":s[r%s.length]}:{}})}extractScrollTimelineNames(e){const t=Ct.ANIMATION_TIMELINE.exec(e)[1].trim(),i=[];return t.split(",").map(e=>e.trim()).forEach(e=>{if(function(e){return(e.startsWith("scroll")||e.startsWith("view"))&&e.includes("(")}(e)){const t=this.saveAnonymousTimelineName(e);i.push(t)}else i.push(e)}),i}saveAnonymousTimelineName(e){const t=":t"+this.nextAnonymousTimelineNameIndex++;return e.startsWith("scroll(")?this.anonymousScrollTimelineOptions.set(t,this.parseAnonymousScrollTimeline(e)):this.anonymousViewTimelineOptions.set(t,this.parseAnonymousViewTimeline(e)),t}parseAnonymousScrollTimeline(e){const t=Ct.ANONYMOUS_SCROLL_TIMELINE.exec(e);if(!t)return null;const i=t[1],s={};return i.split(" ").forEach(e=>{At.includes(e)?s.axis=e:Mt.includes(e)&&(s.source=e)}),s}parseAnonymousViewTimeline(e){const t=Ct.ANONYMOUS_VIEW_TIMELINE.exec(e);if(!t)return null;const i=t[1],s={};return i.split(" ").forEach(e=>{At.includes(e)?s.axis=e:s.inset=s.inset?`${s.inset} ${e}`:e}),s}extractAnimationName(e){return this.findMatchingEntryInContainer(e,this.keyframeNamesSelectors)}findMatchingEntryInContainer(e,t){const i=e.split(" ").filter(e=>t.has(e));return i?i[0]:null}parseIdentifier(e){Ct.IDENTIFIER.lastIndex=e.index;const t=Ct.IDENTIFIER.exec(e.sheetSrc);if(!t)throw this.parseError(e,"Expected an identifier");return e.index+=t[0].length,t[0]}parseKeyframesAndSaveNameMapping(e,t){if(e.selector.startsWith("@keyframes")){const i=this.replaceKeyframesAndGetMapping(e,t);e.selector.split(" ").forEach((e,t)=>{t>0&&this.keyframeNamesSelectors.set(e,i)})}}replaceKeyframesAndGetMapping(e,t){function i(e){return _e.some(t=>e.startsWith(t))}const s=e.block.contents,n=function(e){let t=0,i=-1,s=-1;const n=[];for(let r=0;r<e.length;r++)"{"==e[r]?t++:"}"==e[r]&&t--,1==t&&"{"!=e[r]&&"}"!=e[r]&&-1==i&&(i=r),2==t&&"{"==e[r]&&(s=r,n.push({start:i,end:s}),i=s=-1);return n}(s);if(0==n.length)return new Map;const r=new Map;let a=!1;const o=[];o.push(s.substring(0,n[0].start));for(let e=0;e<n.length;e++){const t=s.substring(n[e].start,n[e].end);let l=[];t.split(",").forEach(e=>{const t=e.split(" ").map(e=>e.trim()).filter(e=>""!=e).join(" "),s=r.size;r.set(s,t),l.push(`${s}%`),i(t)&&(a=!0)}),o.push(l.join(",")),e==n.length-1?o.push(s.substring(n[e].end)):o.push(s.substring(n[e].end,n[e+1].start))}return a?(e.block.contents=o.join(""),this.replacePart(e.block.startIndex,e.block.endIndex,e.block.contents,t),r):new Map}parseQualifiedRule(e){const t=e.index,i=this.parseSelector(e).trim();if(i)return{selector:i,block:this.eatBlock(e),startIndex:t,endIndex:e.index}}removeEnclosingDoubleQuotes(e){let t='"'==e[0]?1:0,i='"'==e[e.length-1]?e.length-1:e.length;return e.substring(t,i)}assertString(e,t){if(e.sheetSrc.substr(e.index,t.length)!=t)throw this.parseError(e,`Did not find expected sequence ${t}`);e.index+=t.length}replacePart(e,t,i,s){if(s.sheetSrc=s.sheetSrc.slice(0,e)+i+s.sheetSrc.slice(t),s.index>=t){const n=s.index-t;s.index=e+i.length+n}}eatComment(e){this.assertString(e,"/*"),this.eatUntil("*/",e,!0),this.assertString(e,"*/")}eatBlock(e){const t=e.index;this.assertString(e,"{");let i=1;for(;0!=i;)this.lookAhead("/*",e)?this.eatComment(e):("{"===e.sheetSrc[e.index]?i++:"}"===e.sheetSrc[e.index]&&i--,this.advance(e));const s=e.index;return{startIndex:t,endIndex:s,contents:e.sheetSrc.slice(t,s)}}advance(e){if(e.index++,e.index>e.sheetSrc.length)throw this.parseError(e,"Advanced beyond the end")}parseError(e,t){return Error(`(${e.name?e.name:"<anonymous file>"}): ${t}`)}eatUntil(e,t,i=!1){const s=t.index;for(;!this.lookAhead(e,t);)this.advance(t);return i&&(t.sheetSrc=t.sheetSrc.slice(0,s)+" ".repeat(t.index-s)+t.sheetSrc.slice(t.index)),t.sheetSrc.slice(s,t.index)}parseSelector(e){let t=e.index;if(this.eatUntil("{",e),t===e.index)throw Error("Empty selector");return e.sheetSrc.slice(t,e.index)}eatWhitespace(e){Ct.WHITE_SPACE.lastIndex=e.index;const t=Ct.WHITE_SPACE.exec(e.sheetSrc);t&&(e.index+=t[0].length)}lookAhead(e,t){return t.sheetSrc.substr(t.index,e.length)==e}peek(e){return e.sheetSrc[e.index]}extractMatches(e,t,i=","){return t.exec(e)[1].trim().split(i).map(e=>e.trim())}split(e){return e.split(" ").map(e=>e.trim()).filter(e=>""!=e)}};function Lt(e,t,i,s,n,r){const a=Ce(t),o=Ae(t,i);return $e(He(e,a,o,s,n),r,He("cover",a,o,s,n),i)}!function(){if(CSS.supports("animation-timeline: --works"))return!0;!function(){function e(e){if(0===e.innerHTML.trim().length||"aphrodite"in e.dataset)return;let t=Pt.transpileStyleSheet(e.innerHTML,!0);t=Pt.transpileStyleSheet(t,!1),e.innerHTML=t}function t(e){"text/css"!=e.type&&"stylesheet"!=e.rel||!e.href||new URL(e.href,document.baseURI).origin==location.origin&&fetch(e.getAttribute("href")).then(async t=>{const i=await t.text();let s=Pt.transpileStyleSheet(i,!0);if(s=Pt.transpileStyleSheet(i,!1,t.url),s!=i){const t=new Blob([s],{type:"text/css"}),i=URL.createObjectURL(t);e.setAttribute("href",i)}})}new MutationObserver(i=>{for(const s of i)for(const i of s.addedNodes)i instanceof HTMLStyleElement&&e(i),i instanceof HTMLLinkElement&&t(i)}).observe(document.documentElement,{childList:!0,subtree:!0}),document.querySelectorAll("style").forEach(t=>e(t)),document.querySelectorAll("link").forEach(e=>t(e))}();const e=CSS.supports;CSS.supports=t=>(t=t.replaceAll(/(animation-timeline|scroll-timeline(-(name|axis))?|view-timeline(-(name|axis|inset))?|timeline-scope)\s*:/g,"--supported-property:"),e(t)),window.addEventListener("animationstart",e=>{e.target.getAnimations().filter(t=>t.animationName===e.animationName).forEach(t=>{const i=function(e,t,i){const s=Pt.getAnimationTimelineOptions(t,i);if(!s)return null;const n=s["animation-timeline"];if(!n)return null;let r=Pt.getScrollTimelineOptions(n,i)||Pt.getViewTimelineOptions(n,i);return r?(r.subject&&function(e,t){const i=Ve(t.subject),s=t.axis||t.axis;function n(e,n){let r=null;for(const[a,o]of e)if(a==100*n.offset){if("from"==o)r=0;else if("to"==o)r=100;else{const e=o.split(" ");r=1==e.length?parseFloat(e[0]):100*Lt(e[0],i,t.subject,s,t.inset,CSS.percent(parseFloat(e[1])))}break}return r}const r=Pt.keyframeNamesSelectors.get(e.animationName);if(r&&r.size){const t=[];e.effect.getKeyframes().forEach(e=>{const i=n(r,e);null!==i&&i>=0&&i<=100&&(e.offset=i/100,t.push(e))});const i=t.sort((e,t)=>e.offset<t.offset?-1:e.affset>t.offset?1:0);e.effect.setKeyframes(i)}}(e,r),{timeline:r.source?new Re(r):new Ue(r),animOptions:s}):null}(t,t.animationName,e.target);if(i)if(!i.timeline||t instanceof wt)t.timeline=i.timeline;else{const e=new wt(t,i.timeline,i.animOptions);t.pause(),e.play()}})})}()?function(){if(void 0!==window.ViewTimeline)return!0;if(!Reflect.defineProperty(window,"ScrollTimeline",{value:Re}))throw Error("Error installing ScrollTimeline polyfill: could not attach ScrollTimeline to window");if(!Reflect.defineProperty(window,"ViewTimeline",{value:Ue}))throw Error("Error installing ViewTimeline polyfill: could not attach ViewTimeline to window");if(!Reflect.defineProperty(Element.prototype,"animate",{value:St}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's animate to DOM Element");if(!Reflect.defineProperty(window,"Animation",{value:wt}))throw Error("Error installing Animation constructor.");if(!Reflect.defineProperty(Element.prototype,"getAnimations",{value:Tt}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's getAnimations to DOM Element");if(!Reflect.defineProperty(document,"getAnimations",{value:Et}))throw Error("Error installing ScrollTimeline polyfill: could not attach WAAPI's getAnimations to document")}():console.debug("Polyfill skipped because browser supports Scroll Timeline.")}();const N=(e,t,i)=>{e.classList[i?"add":"remove"](t)},V=(e,t=document)=>{const i=t.querySelector(e);if(!i)throw new Error(`Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚ ${e} Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½ Ð² Ñ€Ð¾Ð´Ð¸Ñ‚ÐµÐ»Ðµ ${t}`);return i},z=(e,t,i)=>{const s=document.body;if("lock"==e)s.classList.add("lock"),i&&s.classList.add(`lock--${i}`),0==t&&s.classList.add("lock--clear");else if("unlock"==e){const e=[...s.classList].filter(e=>!e.includes("lock"));s.classList="",s.classList.add(...e)}};let H;(()=>{try{addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".js_get-height").forEach(e=>{e.style.height="auto";const t=e.closest(".js_height-goal")||e.closest(".content__block");t?t.style.setProperty("--targetHeight",e.clientHeight/16+"rem"):e.style.setProperty("--targetHeight",e.clientHeight/16+"rem"),e.style.height=""})})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ getBlockHeight:",e.message,e.stack)}})(),(()=>{try{const e=document.querySelectorAll(".js_tab");if(!e.length)throw new Error('Ð‘Ð»Ð¾ÐºÐ¸ Ñ‚Ð°Ð±Ð¾Ð² Ñ ÐºÐ»Ð°ÑÑÐ¾Ð¼ "js_tab" Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹.');for(let t of e){const e=t.querySelectorAll(".js_tab-link"),i=t.querySelector(".js_tab-content-container"),s=t.querySelectorAll(".js_tab-content");if(!e.length||!s.length)throw new Error("Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ Ñ‚Ð°Ð±Ð¾Ð² (js_tab-link Ð¸Ð»Ð¸ js_tab-content) Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹ Ð² Ð±Ð»Ð¾ÐºÐµ:",t);window.addEventListener("load",()=>{e.forEach((t,n)=>{s[n].classList.contains("active")&&i.style.setProperty("--max-height",`${s[n].scrollHeight}px`),s[n].style.setProperty("--max-height",`${s[n].scrollHeight}px`),t.addEventListener("click",()=>{i.style.setProperty("--max-height",`${s[n].scrollHeight}px`),t.classList.contains("active")||e.forEach((e,t)=>{N(e,"active",!1),N(s[t],"active",!1)}),t.classList.toggle("active"),s[n].classList.toggle("active")})})})}}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ initTabs:",e.message,e.stack)}})(),(()=>{try{const e=document.querySelectorAll(".js_slider");if(!e.length)throw new Error('Ð¡Ð»Ð°Ð¹Ð´ÐµÑ€Ñ‹ Ñ ÐºÐ»Ð°ÑÑÐ¾Ð¼ "js_slider" Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹.');e.forEach(e=>{N(e,"swiper",!0);const t=e.querySelectorAll(":scope > .js_slide");if(!t.length)throw new Error('Ð¡Ð»Ð°Ð¹Ð´Ñ‹ Ñ ÐºÐ»Ð°ÑÑÐ¾Ð¼ "js_slide" Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹ Ð´Ð»Ñ ÑÐ»Ð°Ð¹Ð´ÐµÑ€Ð°:',e);t.forEach(e=>N(e,"swiper-slide",!0));const i=document.createElement("div");N(i,"swiper-wrapper",!0),i.append(...t),e.insertAdjacentElement("afterBegin",i)})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ initSliders:",e.message,e.stack)}})(),(()=>{try{document.querySelectorAll("br").forEach(e=>{e.insertAdjacentHTML("afterend"," ")})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ Ð¿Ñ€Ð¾Ð±ÐµÐ»Ð¾Ð² Ð¿Ð¾ÑÐ»Ðµ <br>:",e.message,e.stack)}})(),(()=>{try{const e=document.querySelectorAll(".js_spoiler");if(!e.length)throw new Error('Ð‘Ð»Ð¾ÐºÐ¸ ÑÐ¿Ð¾Ð¹Ð»ÐµÑ€Ð¾Ð² Ñ ÐºÐ»Ð°ÑÑÐ¾Ð¼ "js_spoiler" Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹.');e.forEach(e=>{const t=e.querySelectorAll(".js_spoiler-item");if(!t.length)throw new Error('Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ ÑÐ¿Ð¾Ð¹Ð»ÐµÑ€Ð¾Ð² Ñ ÐºÐ»Ð°ÑÑÐ¾Ð¼ "js_spoiler-item" Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹ Ð² Ð±Ð»Ð¾ÐºÐµ:',e);t.forEach((i,s)=>{const n=V(".js_spoiler-title",i),r=V(".js_spoiler-content",i);if(!n||!r)throw new Error("Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ js_spoiler-title Ð¸Ð»Ð¸ js_spoiler-content Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹ Ð² ÑÐ¿Ð¾Ð¹Ð»ÐµÑ€Ðµ:",i);r.style.setProperty("--max-height",`${r.scrollHeight}px`),n.addEventListener("click",()=>{e.classList.contains("js_spoiler--single")&&t.forEach((e,t)=>{e.classList.contains("open")&&t!==s&&N(e,"open",!1)}),i.classList.toggle("open")})})})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ initSpoilers:",e.message,e.stack)}})(),(()=>{try{addEventListener("load",()=>{document.querySelectorAll(".js_scroll-to").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const i=e.getAttribute("href").substring(1),s=document.getElementById(i),n=document.querySelector("header"),r=s.getBoundingClientRect().top-n.offsetHeight;window.scrollBy({top:r,behavior:"smooth"})})})})}catch(e){console.log(e)}})(),(()=>{try{const e=document.querySelectorAll("[data-modal]"),t=document.querySelectorAll("dialog");if(!e.length||!t.length)throw new Error("ÐœÐ¾Ð´Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð¾ÐºÐ½Ð° Ð¸Ð»Ð¸ ÑÑÑ‹Ð»ÐºÐ¸ Ð´Ð»Ñ Ð¸Ñ… Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ñ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹.");e.forEach(e=>{e.addEventListener("click",()=>{try{const t=e.dataset.modal,i=V(`#${t}`);z("lock",!0,t),i.showModal(),window.location.hash=`#${t}`}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ð¸ Ð¼Ð¾Ð´Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ Ð¾ÐºÐ½Ð°:",e.message,e.stack)}})}),t.forEach(e=>{e.addEventListener("click",t=>{"DIALOG"===t.target.nodeName&&e.close()}),window.addEventListener("hashchange",()=>{try{window.location.hash!==`#${e.id}`&&e.open&&e.close()}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ñ Ñ…ÑÑˆÐ°:",e.message,e.stack)}}),e.addEventListener("close",()=>{try{z("unlock"),history.replaceState(null,document.title,location.pathname+location.search)}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ±Ñ€Ð¾ÑÐµ Ñ…ÑÑˆÐ°:",e.message,e.stack)}}),window.location.hash.includes(e.id)&&history.replaceState(null,document.title,location.pathname+location.search)})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ initModals:",e.message,e.stack)}})(),(()=>{try{const e=V(".js_article-link");V(".js_article-content").querySelectorAll("h2").forEach((t,i)=>{t.id=`target-${i}`,N(t,"js_article-target",!0);const s=e.cloneNode(!0),n=s.firstElementChild;n.setAttribute("href",`#target-${i}`),n.textContent=t.textContent,e.parentElement.appendChild(s)}),e.remove()}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¾Ð³Ð»Ð°Ð²Ð»ÐµÐ½Ð¸Ñ (initArticleLogic):",e.message,e.stack)}})(),(()=>{try{const e=document.querySelectorAll(".js_article-link"),t=document.querySelectorAll(".js_article-target");if(!e.length||!t.length)throw new Error('Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹ "js_article-link" Ð¸Ð»Ð¸ "js_article-target" Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹.');let i=!1;addEventListener("scroll",()=>{i||(i=!0,requestAnimationFrame(()=>{try{t.forEach((t,i)=>{const s=t.getBoundingClientRect().top;s>-200&&s<200&&(e.forEach(e=>N(e,"view",!1)),N(e[i],"view",!0))})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐµ Ð¿Ñ€Ð¾ÐºÑ€ÑƒÑ‚ÐºÐ¸:",e.message,e.stack)}finally{i=!1}}))})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ Ð¾Ð³Ð»Ð°Ð²Ð»ÐµÐ½Ð¸Ñ (initArticleLogic):",e.message,e.stack)}})(),(()=>{try{document.querySelectorAll(".js_notify:not(.open)").forEach(e=>{try{if(e.hasAttribute("data-popover-time")){let t;V(`[popovertarget="${e.id}"]`).addEventListener("click",()=>{clearTimeout(t),t=setTimeout(()=>{e.matches(":popover-open")&&e.hidePopover()},e.getAttribute("data-popover-time")?1e3*e.getAttribute("data-popover-time"):3e3)})}}catch(t){console.error(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ñ id="${e.id}":`,t.message,t.stack)}}),document.querySelectorAll(".js_notify.open").forEach(e=>{try{e.showPopover()}catch(t){console.error(`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚Ð¸Ð¸ ÑƒÐ²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ñ Ñ id="${e.id}":`,t.message,t.stack)}})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ initNotify:",e.message,e.stack)}})(),(()=>{try{const e=V("#cookie");if(localStorage.getItem("cookie-notify"))return void e.remove();V("button",e).addEventListener("click",()=>{try{localStorage.setItem("cookie-notify","1"),setTimeout(()=>{e.remove()},1e3)}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ð¸ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ cookie-notify:",e.message,e.stack)}})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ initCookie:",e.message,e.stack)}})(),(()=>{try{document.querySelectorAll("[data-copy]").forEach(e=>{e.addEventListener("click",t=>{try{const t=e.dataset.copy;if(!t)throw new Error("ÐÑ‚Ñ€Ð¸Ð±ÑƒÑ‚ data-copy Ð¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ð²ÑƒÐµÑ‚ Ð¸Ð»Ð¸ Ð¿ÑƒÑÑ‚.");navigator.clipboard.writeText(t).then(()=>console.log(`Ð¢ÐµÐºÑÑ‚ "${t}" ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½ Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¾Ð±Ð¼ÐµÐ½Ð°.`)).catch(e=>console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸ Ñ‚ÐµÐºÑÑ‚Ð° Ð² Ð±ÑƒÑ„ÐµÑ€:",e.message))}catch(e){t.preventDefault(),((e,t=3e3)=>{try{const i=V("#custom-notify");V(".js_notify-content",i).innerHTML=e,i.matches(":popover-open")||i.showPopover(),clearTimeout(H),H=setTimeout(()=>{i.matches(":popover-open")&&i.hidePopover()},t)}catch(e){console.custom('ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð²Ñ‹Ð·Ð¾Ð²Ðµ popover Ñ id "custom":',e.message,e.stack)}})("â›” ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ð¸ Ñ‚ÐµÐºÑÑ‚Ð° Ð² Ð±ÑƒÑ„ÐµÑ€ Ð¾Ð±Ð¼ÐµÐ½Ð°"),console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐµ ÐºÐ»Ð¸ÐºÐ° Ð´Ð»Ñ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ:",e.message,e.stack)}})})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ copyWithClick:",e.message,e.stack)}})(),(()=>{try{const e=document.body,t=navigator.userAgent||"";let i="system-unknown",s="browser-unknown";const n=()=>t.includes("Win")?"system-win":t.includes("iPhone")?"system-iphone":t.includes("Mac")?"system-mac":t.includes("X11")?"system-unix":t.includes("Linux")?"system-linux":"system-unknown",r=()=>t.includes("YaBrowser")?"browser-yandex":t.includes("Edg")?"browser-edge":t.includes("OPR")?"browser-opera":t.includes("Chrome")?"browser-chrome":t.includes("Firefox")?"browser-firefox":t.includes("MSIE")?"browser-explorer":t.includes("Safari")?"browser-safari":"browser-unknown";addEventListener("load",()=>{try{i=n(),s=r(),e.classList.add(i,s)}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð´Ð¾Ð±Ð°Ð²Ð»ÐµÐ½Ð¸Ð¸ ÐºÐ»Ð°ÑÑÐ¾Ð² Ð´Ð»Ñ ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹ Ð¸ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°:",e.message,e.stack)}})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ detectUserInfo:",e.message,e.stack)}})(),(()=>{try{const e=V("header").clientHeight;document.body.style.setProperty("--headerHeight",e/16+"rem")}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¸ Ð²Ñ‹ÑÐ¾Ñ‚Ñ‹ ÑˆÐ°Ð¿ÐºÐ¸:",e.message,e.stack)}})(),(()=>{try{const e=document.body,t=document.createElement("div");t.style.overflowY="scroll",t.style.width="50px",t.style.height="50px",t.style.position="absolute",t.style.top="-9999px",e.append(t);const i=t.offsetWidth-t.clientWidth;t.remove(),e.style.setProperty("--scrollbarWidth",`${i}px`)}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÐµÐ½Ð¸Ð¸ ÑˆÐ¸Ñ€Ð¸Ð½Ñ‹ Ð¿Ð¾Ð»Ð¾ÑÑ‹ Ð¿Ñ€Ð¾ÐºÑ€ÑƒÑ‚ÐºÐ¸:",e.message,e.stack)}})(),(()=>{try{const e=document.body;window.addEventListener("DOMContentLoaded",()=>N(e,"load-dom",!0)),window.addEventListener("load",()=>N(e,"load",!0))}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ detectPageLoad:",e.message,e.stack)}})(),(()=>{try{const e=document.body;window.addEventListener("load",()=>{window.scrollY>=100&&N(e,"scroll",!0)}),window.addEventListener("scroll",()=>{try{window.scrollY>=100?N(e,"scroll",!0):N(e,"scroll",!1)}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ñ‡Ð¸ÐºÐµ ÑÐ¾Ð±Ñ‹Ñ‚Ð¸Ñ scroll:",e.message,e.stack)}})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ detectPageScroll:",e.message,e.stack)}})(),(()=>{try{const e=document.querySelectorAll(".js_tooltip");if(0===e.length)throw new Error("ÐÐ° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ð¾ Ñ‚ÑƒÐ»Ñ‚Ð¸Ð¿Ð¾Ð²");e.forEach(e=>{const t=V(".js_tooltip-button",e),i=V(".js_tooltip-body",e);t.addEventListener("mouseover",()=>N(i,"show",!0)),t.addEventListener("mouseout",()=>N(i,"show",!1))})}catch(e){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ initTooltip:",e.message,e.stack)}})();var q=i(929);Array.from(document.querySelectorAll("[data-plyr]")).map(e=>new q(e,{controls:["play-large"]})).forEach((e,t)=>{document.getElementsByClassName("plyr__poster")[t].addEventListener("click",t=>{e.togglePlay(),t.stopPropagation()})});const $=(e,t=1e4)=>(e=parseFloat(e+"")||0,Math.round((e+Number.EPSILON)*t)/t),U=function(e){if(!(e&&e instanceof Element&&e.offsetParent))return!1;const t=e.scrollHeight>e.clientHeight,i=window.getComputedStyle(e).overflowY,s=-1!==i.indexOf("hidden"),n=-1!==i.indexOf("visible");return t&&!s&&!n},W=function(e,t=void 0){return!(!e||e===document.body||t&&e===t)&&(U(e)?e:W(e.parentElement,t))},G=function(e){var t=(new DOMParser).parseFromString(e,"text/html").body;if(t.childElementCount>1){for(var i=document.createElement("div");t.firstChild;)i.appendChild(t.firstChild);return i}return t.firstChild},Y=e=>`${e||""}`.split(" ").filter(e=>!!e),X=(e,t,i)=>{e&&Y(t).forEach(t=>{e.classList.toggle(t,i||!1)})};class K{constructor(e){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=e,this.pageX=e.pageX,this.pageY=e.pageY,this.clientX=e.clientX,this.clientY=e.clientY,this.id=self.Touch&&e instanceof Touch?e.identifier:-1,this.time=Date.now()}}const Z={passive:!1};class J{constructor(e,{start:t=()=>!0,move:i=()=>{},end:s=()=>{}}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=e,this.startCallback=t,this.moveCallback=i,this.endCallback=s;for(const e of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[e]=this[e].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,Z),this.element.addEventListener("touchstart",this.onTouchStart,Z),this.element.addEventListener("touchmove",this.onMove,Z),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(e){if(!e.buttons||0!==e.button)return;const t=new K(e);this.currentPointers.some(e=>e.id===t.id)||this.triggerPointerStart(t,e)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerStart(new K(t),e);window.addEventListener("blur",this.onWindowBlur)}onMove(e){const t=this.currentPointers.slice(),i="changedTouches"in e?Array.from(e.changedTouches||[]).map(e=>new K(e)):[new K(e)],s=[];for(const e of i){const t=this.currentPointers.findIndex(t=>t.id===e.id);t<0||(s.push(e),this.currentPointers[t]=e)}s.length&&this.moveCallback(e,this.currentPointers.slice(),t)}onPointerEnd(e){e.buttons>0&&0!==e.button||(this.triggerPointerEnd(e,new K(e)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(e){for(const t of Array.from(e.changedTouches||[]))this.triggerPointerEnd(e,new K(t))}triggerPointerStart(e,t){return!!this.startCallback(t,e,this.currentPointers.slice())&&(this.currentPointers.push(e),this.startPointers.push(e),!0)}triggerPointerEnd(e,t){const i=this.currentPointers.findIndex(e=>e.id===t.id);i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(e,t,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const e=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:e.clientX,clientY:e.clientY}),e,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,Z),this.element.removeEventListener("touchstart",this.onTouchStart,Z),this.element.removeEventListener("touchmove",this.onMove,Z),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function Q(e,t){return t?Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2)):0}function ee(e,t){return t?{clientX:(e.clientX+t.clientX)/2,clientY:(e.clientY+t.clientY)/2}:e}const te=e=>"object"==typeof e&&null!==e&&e.constructor===Object&&"[object Object]"===Object.prototype.toString.call(e),ie=(e,...t)=>{const i=t.length;for(let s=0;s<i;s++){const i=t[s]||{};Object.entries(i).forEach(([t,i])=>{const s=Array.isArray(i)?[]:{};e[t]||Object.assign(e,{[t]:s}),te(i)?Object.assign(e[t],ie(s,i)):Array.isArray(i)?Object.assign(e,{[t]:[...i]}):Object.assign(e,{[t]:i})})}return e},se=function(e,t){return e.split(".").reduce((e,t)=>"object"==typeof e?e[t]:void 0,t)};class ne{constructor(e={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(e);for(const e of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))e.startsWith("on")&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}setOptions(e){this.options=e?ie({},this.constructor.defaults,e):{};for(const[e,t]of Object.entries(this.option("on")||{}))this.on(e,t)}option(e,...t){let i=se(e,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...t)),i}optionFor(e,t,i,...s){let n=se(t,e);var r;"string"!=typeof(r=n)||isNaN(r)||isNaN(parseFloat(r))||(n=parseFloat(n)),"true"===n&&(n=!0),"false"===n&&(n=!1),n&&"function"==typeof n&&(n=n.call(this,this,e,...s));let a=se(t,this.options);return a&&"function"==typeof a?n=a.call(this,this,e,...s,n):void 0===n&&(n=a),void 0===n?i:n}cn(e){const t=this.options.classes;return t&&t[e]||""}localize(e,t=[]){e=String(e).replace(/\{\{(\w+).?(\w+)?\}\}/g,(e,t,i)=>{let s="";return i?s=this.option(`${t[0]+t.toLowerCase().substring(1)}.l10n.${i}`):t&&(s=this.option(`l10n.${t}`)),s||(s=e),s});for(let i=0;i<t.length;i++)e=e.split(t[i][0]).join(t[i][1]);return e.replace(/\{\{(.*?)\}\}/g,(e,t)=>t)}on(e,t){let i=[];"string"==typeof e?i=e.split(" "):Array.isArray(e)&&(i=e),this.events||(this.events=new Map),i.forEach(e=>{let i=this.events.get(e);i||(this.events.set(e,[]),i=[]),i.includes(t)||i.push(t),this.events.set(e,i)})}off(e,t){let i=[];"string"==typeof e?i=e.split(" "):Array.isArray(e)&&(i=e),i.forEach(e=>{const i=this.events.get(e);if(Array.isArray(i)){const e=i.indexOf(t);e>-1&&i.splice(e,1)}})}emit(e,...t){[...this.events.get(e)||[]].forEach(e=>e(this,...t)),"*"!==e&&this.emit("*",e,...t)}}Object.defineProperty(ne,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(ne,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class re extends ne{constructor(e={}){super(e),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(e={}){const t=new Map;for(const[i,s]of Object.entries(e)){const e=this.option(i),n=this.plugins[i];n||!1===e?n&&!1===e&&(n.detach(),delete this.plugins[i]):t.set(i,new s(this,e||{}))}for(const[e,i]of t)this.plugins[e]=i,i.attach()}detachPlugins(e){e=e||Object.keys(this.plugins);for(const t of e){const e=this.plugins[t];e&&e.detach(),delete this.plugins[t]}return this.emit("detachPlugins"),this}}var ae;!function(e){e[e.Init=0]="Init",e[e.Error=1]="Error",e[e.Ready=2]="Ready",e[e.Panning=3]="Panning",e[e.Mousemove=4]="Mousemove",e[e.Destroy=5]="Destroy"}(ae||(ae={}));const oe=["a","b","c","d","e","f"],le={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},ce={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:le},he='<circle cx="25" cy="25" r="20"></circle>',ue='<div class="f-spinner"><svg viewBox="0 0 50 50">'+he+he+"</svg></div>",de=e=>e&&null!==e&&e instanceof Element&&"nodeType"in e,pe=(e,t)=>{e&&Y(t).forEach(t=>{e.classList.remove(t)})},fe=(e,t)=>{e&&Y(t).forEach(t=>{e.classList.add(t)})},me={a:1,b:0,c:0,d:1,e:0,f:0},ge=1e4,ye="mousemove",ve="drag",be="content",_e="auto";let xe=null,we=null;class Se extends re{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return null===we&&(we=window.matchMedia("(hover: none)").matches),we}get isMobile(){return null===xe&&(xe=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),xe}get panMode(){return this.options.panMode!==ye||this.isTouchDevice?ve:ye}get panOnlyZoomed(){const e=this.options.panOnlyZoomed;return e===_e?this.isTouchDevice:e}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:e,b:t}=this.current;return Math.sqrt(e*e+t*t)||1}get targetScale(){const{a:e,b:t}=this.target;return Math.sqrt(e*e+t*t)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:e}=this;return e.fullWidth/e.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:e,contentRect:t}=this,i=Math.max(e.height/t.fitHeight,e.width/t.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const e=this.content;return!!(e&&e instanceof HTMLImageElement)&&!e.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const e of oe){const t="e"==e||"f"===e?1e-4:1e-5;if(Math.abs(this.target[e]-this.current[e])>t)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(e,t={},i={}){var s;if(super(t),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ae.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},me)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},me)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!e)throw new Error("Container Element Not Found");this.container=e,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},Se.Plugins),i)),this.emit("attachPlugins"),this.emit("init");const n=this.content;if(n.addEventListener("load",this.onLoad),n.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){e.classList.add(this.cn("isLoading"));const t=G(ue);!e.contains(n)||n.parentElement instanceof HTMLPictureElement?this.spinner=e.appendChild(t):this.spinner=(null===(s=n.parentElement)||void 0===s?void 0:s.insertBefore(t,n))||null}this.emit("beforeLoad")}else queueMicrotask(()=>{this.enable()})}initContent(){const{container:e}=this,t=this.cn(be);let i=this.option(be)||e.querySelector(`.${t}`);if(i||(i=e.querySelector("img,picture")||e.firstElementChild,i&&fe(i,t)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){const{spinner:e,container:t,state:i}=this;e&&(e.remove(),this.spinner=null),this.option("spinner")&&t.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===ae.Init?this.enable():this.updateMetrics()}onError(){this.state!==ae.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=ae.Error,this.emit("error"))}getNextScale(e){const{fullScale:t,targetScale:i,coverScale:s,maxScale:n,minScale:r}=this;let a=r;switch(e){case"toggleMax":a=i-r<.5*(n-r)?n:r;break;case"toggleCover":a=i-r<.5*(s-r)?s:r;break;case"toggleZoom":a=i-r<.5*(t-r)?t:r;break;case"iterateZoom":let e=[1,t,n].sort((e,t)=>e-t),o=e.findIndex(e=>e>i+1e-5);a=e[o]||1}return a}attachObserver(){var e;const t=()=>{const{container:e,containerRect:t}=this;return Math.abs(t.width-e.getBoundingClientRect().width)>.1||Math.abs(t.height-e.getBoundingClientRect().height)>.1};this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver(()=>{this.updateTimer||(t()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout(()=>{t()&&this.onResize(),this.updateTimer=null},500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))})),null===(e=this.resizeObserver)||void 0===e||e.observe(this.container)}detachObserver(){var e;null===(e=this.resizeObserver)||void 0===e||e.disconnect()}attachEvents(){const{container:e}=this;e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new J(e,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(ye,this.onMouseMove)}detachEvents(){var e;const{container:t}=this;t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("wheel",this.onWheel,{passive:!1}),null===(e=this.pointerTracker)||void 0===e||e.stop(),this.pointerTracker=null,document.removeEventListener(ye,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const e=this.friction,t=this.option("maxVelocity");for(const i of oe)e?(this.velocity[i]*=1-e,t&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],t),-1*t)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame(()=>this.animate()):this.stop("current")}setTargetForce(){for(const e of oe)"e"===e&&this.isBouncingX||"f"===e&&this.isBouncingY||(this.velocity[e]=(1/(1-this.friction)-1)*(this.target[e]-this.current[e]))}checkBounds(e=0,t=0){const{current:i}=this,s=i.e+e,n=i.f+t,r=this.getBounds(),{x:a,y:o}=r,l=a.min,c=a.max,h=o.min,u=o.max;let d=0,p=0;return l!==1/0&&s<l?d=l-s:c!==1/0&&s>c&&(d=c-s),h!==1/0&&n<h?p=h-n:u!==1/0&&n>u&&(p=u-n),Math.abs(d)<1e-4&&(d=0),Math.abs(p)<1e-4&&(p=0),Object.assign(Object.assign({},r),{xDiff:d,yDiff:p,inBounds:!d&&!p})}clampTargetBounds(){const{target:e}=this,{x:t,y:i}=this.getBounds();t.min!==1/0&&(e.e=Math.max(e.e,t.min)),t.max!==1/0&&(e.e=Math.min(e.e,t.max)),i.min!==1/0&&(e.f=Math.max(e.f,i.min)),i.max!==1/0&&(e.f=Math.min(e.f,i.max))}calculateContentDim(e=this.current){const{content:t,contentRect:i}=this,{fitWidth:s,fitHeight:n,fullWidth:r,fullHeight:a}=i;let o=r,l=a;if(this.option("zoom")||0!==this.angle){const i=!(t instanceof HTMLImageElement||"none"!==window.getComputedStyle(t).maxWidth&&"none"!==window.getComputedStyle(t).maxHeight),c=i?r:s,h=i?a:n,u=this.getMatrix(e),d=new DOMPoint(0,0).matrixTransform(u),p=new DOMPoint(0+c,0).matrixTransform(u),f=new DOMPoint(0+c,0+h).matrixTransform(u),m=new DOMPoint(0,0+h).matrixTransform(u),g=Math.abs(f.x-d.x),y=Math.abs(f.y-d.y),v=Math.abs(m.x-p.x),b=Math.abs(m.y-p.y);o=Math.max(g,v),l=Math.max(y,b)}return{contentWidth:o,contentHeight:l}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===ye||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:e}=this,{x:t,y:i,xDiff:s,yDiff:n}=this.checkBounds(),r=this.option("maxVelocity");let a=this.velocity.e,o=this.velocity.f;0!==s?(this.isBouncingX=!0,s*a<=0?a+=.14*s:(a=.14*s,t.min!==1/0&&(this.target.e=Math.max(e.e,t.min)),t.max!==1/0&&(this.target.e=Math.min(e.e,t.max))),r&&(a=Math.max(Math.min(a,r),-1*r))):this.isBouncingX=!1,0!==n?(this.isBouncingY=!0,n*o<=0?o+=.14*n:(o=.14*n,i.min!==1/0&&(this.target.f=Math.max(e.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(e.f,i.max))),r&&(o=Math.max(Math.min(o,r),-1*r))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=a),this.isBouncingY&&(this.velocity.f=o)}enable(){const{content:e}=this,t=new DOMMatrixReadOnly(window.getComputedStyle(e).transform);for(const e of oe)this.current[e]=this.target[e]=t[e];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=ae.Ready,this.emit("ready")}onClick(e){var t;"click"===e.type&&0===e.detail&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&(null===(t=this.pointerTracker)||void 0===t||t.clear(),this.trackingPoints=[],this.startDecelAnim());const i=e.target;if(!i||e.defaultPrevented)return;if(i.hasAttribute("disabled"))return e.preventDefault(),void e.stopPropagation();if((()=>{const e=window.getSelection();return e&&"Range"===e.type})()&&!i.closest("button"))return;const s=i.closest("[data-panzoom-action]"),n=i.closest("[data-panzoom-change]"),r=s||n,a=r&&de(r)?r.dataset:null;if(a){const t=a.panzoomChange,i=a.panzoomAction;if((t||i)&&e.preventDefault(),t){let i={};try{i=JSON.parse(t)}catch(e){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(i)}if(i)return void(this[i]&&this[i]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return e.preventDefault(),void e.stopPropagation();if(i.closest("[data-fancybox]"))return;const o=this.content.getBoundingClientRect(),l=this.dragStart;if(l.time&&!this.canZoomOut()&&(Math.abs(o.x-l.x)>2||Math.abs(o.y-l.y)>2))return;this.dragStart.time=0;const c=t=>{this.option("zoom",e)&&t&&"string"==typeof t&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(t)&&"function"==typeof this[t]&&(e.preventDefault(),this[t]({event:e}))},h=this.option("click",e),u=this.option("dblClick",e);u?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout(()=>{1===this.clicks?(this.emit("click",e),!e.defaultPrevented&&h&&c(h)):(this.emit("dblClick",e),e.defaultPrevented||c(u)),this.clicks=0,this.clickTimer=null},350))):(this.emit("click",e),!e.defaultPrevented&&h&&c(h))}addTrackingPoint(e){const t=this.trackingPoints.filter(e=>e.time>Date.now()-100);t.push(e),this.trackingPoints=t}onPointerDown(e,t,i){var s;if(!1===this.option("touch",e))return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const n=this.content.getBoundingClientRect();if(this.dragStart={x:n.x,y:n.y,top:n.top,left:n.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===ye&&this.targetScale>1)return e.preventDefault(),e.stopPropagation(),!1;const r=e.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(r.nodeName)||r.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;null===(s=window.getSelection())||void 0===s||s.removeAllRanges()}if("mousedown"===e.type)["A","BUTTON"].includes(r.nodeName)||e.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(t),this.emit("touchStart",e)),!0}onPointerMove(e,t,i){if(!1===this.option("touch",e))return;if(!this.isDragging)return;if(t.length<2&&this.panOnlyZoomed&&$(this.targetScale)<=$(this.minScale))return;if(this.emit("touchMove",e),e.defaultPrevented)return;this.addTrackingPoint(t[0]);const{content:s}=this,n=ee(i[0],i[1]),r=ee(t[0],t[1]);let a=0,o=0;if(t.length>1){const e=s.getBoundingClientRect();a=n.clientX-e.left-.5*e.width,o=n.clientY-e.top-.5*e.height}const l=Q(i[0],i[1]),c=Q(t[0],t[1]);let h=l?c/l:1,u=r.clientX-n.clientX,d=r.clientY-n.clientY;this.dragOffset.x+=u,this.dragOffset.y+=d,this.dragOffset.time=Date.now()-this.dragStart.time;let p=$(this.targetScale)===$(this.minScale)&&this.option("lockAxis");if(p&&!this.lockedAxis)if("xy"===p||"y"===p||"touchmove"===e.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void e.preventDefault();const t=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=t>45&&t<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,u=0,d=0}else this.lockedAxis=p;if(W(e.target,this.content)&&(p="x",this.dragOffset.y=0),p&&"xy"!==p&&this.lockedAxis!==p&&$(this.targetScale)===$(this.minScale))return;e.cancelable&&e.preventDefault(),this.container.classList.add(this.cn("isDragging"));const f=this.checkBounds(u,d);this.option("rubberband")?("x"!==this.isInfinite&&(f.xDiff>0&&u<0||f.xDiff<0&&u>0)&&(u*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*f.xDiff))),"y"!==this.isInfinite&&(f.yDiff>0&&d<0||f.yDiff<0&&d>0)&&(d*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*f.yDiff)))):(f.xDiff&&(u=0),f.yDiff&&(d=0));const m=this.targetScale,g=this.minScale,y=this.maxScale;m<.5*g&&(h=Math.max(h,g)),m>1.5*y&&(h=Math.min(h,y)),"y"===this.lockedAxis&&$(m)===$(g)&&(u=0),"x"===this.lockedAxis&&$(m)===$(g)&&(d=0),this.applyChange({originX:a,originY:o,panX:u,panY:d,scale:h,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(e,t,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(t),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),W(e.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",e),this.isDragging=!1,this.lockedAxis=!1,this.state!==ae.Destroy&&(e.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var e;const t=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const e of oe)this.velocity[e]=0;this.target.e=this.current.e,this.target.f=this.current.f,pe(this.container,"is-scaling"),pe(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:i}=this,s=i[0],n=i[i.length-1];let r=0,a=0,o=0;n&&s&&(r=n.clientX-s.clientX,a=n.clientY-s.clientY,o=n.time-s.time);const l=(null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1;1!==l&&(r*=l,a*=l);let c=0,h=0,u=0,d=0,p=this.option("decelFriction");const f=this.targetScale;if(o>0){u=Math.abs(r)>3?r/(o/30):0,d=Math.abs(a)>3?a/(o/30):0;const e=this.option("maxVelocity");e&&(u=Math.max(Math.min(u,e),-1*e),d=Math.max(Math.min(d,e),-1*e))}u&&(c=u/(1/(1-p)-1)),d&&(h=d/(1/(1-p)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&$(f)===this.minScale)&&(c=u=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&$(f)===this.minScale)&&(h=d=0);const m=this.dragOffset.x,g=this.dragOffset.y,y=this.option("dragMinThreshold")||0;Math.abs(m)<y&&Math.abs(g)<y&&(c=h=0,u=d=0),(this.option("zoom")&&(f<this.minScale-1e-5||f>this.maxScale+1e-5)||t&&!c&&!h)&&(p=.35),this.applyChange({panX:c,panY:h,friction:p}),this.emit("decel",u,d,m,g)}onWheel(e){var t=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e});const i=Math.max(-1,Math.min(1,t));if(this.emit("wheel",e,i),this.panMode===ye)return;if(e.defaultPrevented)return;const s=this.option("wheel");"pan"===s?(e.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-e.deltaX,panY:2*-e.deltaY,bounce:!1})):"zoom"===s&&!1!==this.option("zoom")&&this.zoomWithWheel(e)}onMouseMove(e){this.panWithMouse(e)}onKeydown(e){"Escape"===e.key&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:e,target:t,content:i,contentRect:s}=this,n=Object.assign({},me);for(const i of oe){const s="e"==i||"f"===i?ge:1e5;n[i]=$(e[i],s),Math.abs(t[i]-e[i])<("e"==i||"f"===i?.51:.001)&&(e[i]=t[i])}let{a:r,b:a,c:o,d:l,e:c,f:h}=n,u=`matrix(${r}, ${a}, ${o}, ${l}, ${c}, ${h})`,d=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(d=d.parentElement||d),d.style.transform===u)return;d.style.transform=u;const{contentWidth:p,contentHeight:f}=this.calculateContentDim();s.width=p,s.height=f,this.emit("afterTransform")}updateMetrics(e=!1){var t;if(!this||this.state===ae.Destroy)return;if(this.isContentLoading)return;const i=Math.max(1,(null===(t=window.visualViewport)||void 0===t?void 0:t.scale)||1),{container:s,content:n}=this,r=n instanceof HTMLImageElement,a=s.getBoundingClientRect(),o=getComputedStyle(this.container);let l=a.width*i,c=a.height*i;const h=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom),u=l-(parseFloat(o.paddingLeft)+parseFloat(o.paddingRight)),d=c-h;this.containerRect={width:l,height:c,innerWidth:u,innerHeight:d};const p=parseFloat(n.dataset.width||"")||(e=>{let t=0;return t=e instanceof HTMLImageElement?e.naturalWidth:e instanceof SVGElement?e.width.baseVal.value:Math.max(e.offsetWidth,e.scrollWidth),t||0})(n),f=parseFloat(n.dataset.height||"")||(e=>{let t=0;return t=e instanceof HTMLImageElement?e.naturalHeight:e instanceof SVGElement?e.height.baseVal.value:Math.max(e.offsetHeight,e.scrollHeight),t||0})(n);let m=this.option("width",p)||_e,g=this.option("height",f)||_e;const y=m===_e,v=g===_e;"number"!=typeof m&&(m=p),"number"!=typeof g&&(g=f),y&&(m=p*(g/f)),v&&(g=f/(p/m));let b=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;this.option("transformParent")&&(b=b.parentElement||b);const _=b.getAttribute("style")||"";b.style.setProperty("transform","none","important"),r&&(b.style.width="",b.style.height=""),b.offsetHeight;const x=n.getBoundingClientRect();let w=x.width*i,S=x.height*i,k=w,T=S;w=Math.min(w,m),S=Math.min(S,g),r?({width:w,height:S}=((e,t,i,s)=>{const n=i/e,r=s/t,a=Math.min(n,r);return{width:e*=a,height:t*=a}})(m,g,w,S)):(w=Math.min(w,m),S=Math.min(S,g));let E=.5*(T-S),C=.5*(k-w);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:x.top-a.top+E,bottom:a.bottom-x.bottom+E,left:x.left-a.left+C,right:a.right-x.right+C,fitWidth:w,fitHeight:S,width:w,height:S,fullWidth:m,fullHeight:g}),b.style.cssText=_,r&&(b.style.width=`${w}px`,b.style.height=`${S}px`),this.setTransform(),!0!==e&&this.emit("refresh"),this.ignoreBounds||($(this.targetScale)<$(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===ae.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:e,contentHeight:t}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:s}=this,{fitWidth:n,fitHeight:r}=this.contentRect;let a=0,o=0,l=0,c=0;const h=this.option("infinite");if(!0===h||s&&h===s)a=-1/0,l=1/0,o=-1/0,c=1/0;else{let{containerRect:s,contentRect:h}=this,u=$(n*i,ge),d=$(r*i,ge),{innerWidth:p,innerHeight:f}=s;if(s.width===u&&(p=s.width),s.width===d&&(f=s.height),e>p){l=.5*(e-p),a=-1*l;let t=.5*(h.right-h.left);a+=t,l+=t}if(n>p&&e<p&&(a-=.5*(n-p),l-=.5*(n-p)),t>f){c=.5*(t-f),o=-1*c;let e=.5*(h.bottom-h.top);o+=e,c+=e}r>f&&t<f&&(a-=.5*(r-f),l-=.5*(r-f))}return{x:{min:a,max:l},y:{min:o,max:c}}}getBounds(){const e=this.option("bounds");return e!==_e?e:this.calculateBounds()}updateControls(){const e=this,t=e.container,{panMode:i,contentRect:s,targetScale:n,minScale:r}=e;let a=r,o=e.option("click")||!1;o&&(a=e.getNextScale(o));let l=e.canZoomIn(),c=e.canZoomOut(),h=i===ve&&!!this.option("touch"),u=c&&h;if(h&&($(n)<$(r)&&!this.panOnlyZoomed&&(u=!0),($(s.width,1)>$(s.fitWidth,1)||$(s.height,1)>$(s.fitHeight,1))&&(u=!0)),$(s.width*n,1)<$(s.fitWidth,1)&&(u=!1),i===ye&&(u=!1),X(t,this.cn("isDraggable"),u),!this.option("zoom"))return;let d=l&&$(a)>$(n),p=!d&&!u&&c&&$(a)<$(n);X(t,this.cn("canZoomIn"),d),X(t,this.cn("canZoomOut"),p);for(const e of t.querySelectorAll("[data-panzoom-action]")){let t=!1,i=!1;switch(e.dataset.panzoomAction){case"zoomIn":l?t=!0:i=!0;break;case"zoomOut":c?t=!0:i=!0;break;case"toggleZoom":case"iterateZoom":l||c?t=!0:i=!0;const s=e.querySelector("g");s&&(s.style.display=l?"":"none")}t?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):i&&(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"))}}panTo({x:e=this.target.e,y:t=this.target.f,scale:i=this.targetScale,friction:s=this.option("friction"),angle:n=0,originX:r=0,originY:a=0,flipX:o=!1,flipY:l=!1,ignoreBounds:c=!1}){this.state!==ae.Destroy&&this.applyChange({panX:e-this.target.e,panY:t-this.target.f,scale:i/this.targetScale,angle:n,originX:r,originY:a,friction:s,flipX:o,flipY:l,ignoreBounds:c})}applyChange({panX:e=0,panY:t=0,scale:i=1,angle:s=0,originX:n=-this.current.e,originY:r=-this.current.f,friction:a=this.option("friction"),flipX:o=!1,flipY:l=!1,ignoreBounds:c=!1,bounce:h=this.option("bounce")}){const u=this.state;if(u===ae.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=a||0,this.ignoreBounds=c;const{current:d}=this,p=d.e,f=d.f,m=this.getMatrix(this.target);let g=(new DOMMatrix).translate(p,f).translate(n,r).translate(e,t);if(this.option("zoom")){if(!c){const e=this.targetScale,t=this.minScale,s=this.maxScale;e*i<t&&(i=t/e),e*i>s&&(i=s/e)}g=g.scale(i)}g=g.translate(-n,-r).translate(-p,-f).multiply(m),s&&(g=g.rotate(s)),o&&(g=g.scale(-1,1)),l&&(g=g.scale(1,-1));for(const e of oe)"e"!==e&&"f"!==e&&(g[e]>this.minScale+1e-5||g[e]<this.minScale-1e-5)?this.target[e]=g[e]:this.target[e]=$(g[e],ge);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===ye||!1===h)&&!c&&this.clampTargetBounds(),u===ae.Init?this.animate():this.isResting||(this.state=ae.Panning,this.requestTick())}stop(e=!1){if(this.state===ae.Init||this.state===ae.Destroy)return;const t=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const t of oe)this.velocity[t]=0,"current"===e?this.current[t]=this.target[t]:"target"===e&&(this.target[t]=this.current[t]);this.setTransform(),pe(this.container,"is-scaling"),pe(this.container,"is-animating"),this.isTicking=!1,this.state=ae.Ready,t&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),fe(this.container,"is-animating"),this.isScaling&&fe(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame(()=>this.animate()))}panWithMouse(e,t=this.option("mouseMoveFriction")){if(this.pmme=e,this.panMode!==ye||!e)return;if($(this.targetScale)<=$(this.minScale))return;this.emit("mouseMove",e);const{container:i,containerRect:s,contentRect:n}=this,r=s.width,a=s.height,o=i.getBoundingClientRect(),l=(e.clientX||0)-o.left,c=(e.clientY||0)-o.top;let{contentWidth:h,contentHeight:u}=this.calculateContentDim(this.target);const d=this.option("mouseMoveFactor");d>1&&(h!==r&&(h*=d),u!==a&&(u*=d));let p=.5*(h-r)-l/r*100/100*(h-r);p+=.5*(n.right-n.left);let f=.5*(u-a)-c/a*100/100*(u-a);f+=.5*(n.bottom-n.top),this.applyChange({panX:p-this.target.e,panY:f-this.target.f,friction:t})}zoomWithWheel(e){if(this.state===ae.Destroy||this.state===ae.Init)return;const t=Date.now();if(t-this.pwt<45)return void e.preventDefault();this.pwt=t;var i=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e});const s=Math.max(-1,Math.min(1,i)),{targetScale:n,maxScale:r,minScale:a}=this;let o=n*(100+45*s)/100;$(o)<$(a)&&$(n)<=$(a)?(this.cwd+=Math.abs(s),o=a):$(o)>$(r)&&$(n)>=$(r)?(this.cwd+=Math.abs(s),o=r):(this.cwd=0,o=Math.max(Math.min(o,r),a)),this.cwd>this.option("wheelLimit")||(e.preventDefault(),$(o)!==$(n)&&this.zoomTo(o,{event:e}))}canZoomIn(){return this.option("zoom")&&($(this.contentRect.width,1)<$(this.contentRect.fitWidth,1)||$(this.targetScale)<$(this.maxScale))}canZoomOut(){return this.option("zoom")&&$(this.targetScale)>$(this.minScale)}zoomIn(e=1.25,t){this.zoomTo(this.targetScale*e,t)}zoomOut(e=.8,t){this.zoomTo(this.targetScale*e,t)}zoomToFit(e){this.zoomTo("fit",e)}zoomToCover(e){this.zoomTo("cover",e)}zoomToFull(e){this.zoomTo("full",e)}zoomToMax(e){this.zoomTo("max",e)}toggleZoom(e){this.zoomTo(this.getNextScale("toggleZoom"),e)}toggleMax(e){this.zoomTo(this.getNextScale("toggleMax"),e)}toggleCover(e){this.zoomTo(this.getNextScale("toggleCover"),e)}iterateZoom(e){this.zoomTo("next",e)}zoomTo(e=1,{friction:t=_e,originX:i=_e,originY:s=_e,event:n}={}){if(this.isContentLoading||this.state===ae.Destroy)return;const{targetScale:r,fullScale:a,maxScale:o,coverScale:l}=this;if(this.stop(),this.panMode===ye&&(n=this.pmme||n),n||i===_e||s===_e){const e=this.content.getBoundingClientRect(),t=this.container.getBoundingClientRect(),r=n?n.clientX:t.left+.5*t.width,a=n?n.clientY:t.top+.5*t.height;i=r-e.left-.5*e.width,s=a-e.top-.5*e.height}let c=1;"number"==typeof e?c=e:"full"===e?c=a:"cover"===e?c=l:"max"===e?c=o:"fit"===e?c=1:"next"===e&&(c=this.getNextScale("iterateZoom")),c=c/r||1,t=t===_e?c>1?.15:.25:t,this.applyChange({scale:c,originX:i,originY:s,friction:t}),n&&this.panMode===ye&&this.panWithMouse(n,t)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.height-(t.top+.5*t.fitHeight)-i.f,scale:e.width/t.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:e,contentRect:t,target:i}=this;this.applyChange({panX:.5*e.width-(t.left+.5*t.fitWidth)-i.e,panY:.5*e.innerHeight-(t.top+.5*t.fitHeight)-i.f,scale:e.height/t.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:e}=this,t=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");e.classList.toggle(t);const s=e.classList.contains(t);s?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(s?"enterFS":"exitFS")}getMatrix(e=this.current){const{a:t,b:i,c:s,d:n,e:r,f:a}=e;return new DOMMatrix([t,i,s,n,r,a])}reset(e){if(this.state!==ae.Init&&this.state!==ae.Destroy){this.stop("current");for(const e of oe)this.target[e]=me[e];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===e?this.option("friction"):e,this.state=ae.Panning,this.requestTick())}}destroy(){this.stop(),this.state=ae.Destroy,this.detachEvents(),this.detachObserver();const{container:e,content:t}=this,i=this.option("classes")||{};for(const t of Object.values(i))e.classList.remove(t+"");t&&(t.removeEventListener("load",this.onLoad),t.removeEventListener("error",this.onError)),this.detachPlugins()}}Object.defineProperty(Se,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:ce}),Object.defineProperty(Se,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const ke=function(e,t){let i=!0;return(...s)=>{i&&(i=!1,e(...s),setTimeout(()=>{i=!0},t))}},Te=(e,t)=>{let i=[];return e.childNodes.forEach(e=>{e.nodeType!==Node.ELEMENT_NODE||t&&!e.matches(t)||i.push(e)}),i};var Ee;!function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Destroy=2]="Destroy"}(Ee||(Ee={}));const Ce=e=>{if("string"==typeof e||e instanceof HTMLElement)e={html:e};else{const t=e.thumb;void 0!==t&&("string"==typeof t&&(e.thumbSrc=t),t instanceof HTMLImageElement&&(e.thumbEl=t,e.thumbElSrc=t.src,e.thumbSrc=t.src),delete e.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},e)},Ae=(e={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},e);class Me extends ne{constructor(e,t){super(t),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:e})}attach(){}detach(){}}class Pe extends Me{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let e=this.list;if(!e){e=document.createElement("ul"),fe(e,this.cn("list")),e.setAttribute("role","tablist");const t=this.instance.container;t.appendChild(e),fe(t,this.cn("hasDots")),this.list=e}return e}refresh(){var e;const t=this.instance.pages.length,i=Math.min(2,this.option("minCount")),s=Math.max(2e3,this.option("maxCount")),n=this.option("dynamicFrom");if(t<i||t>s)return void this.cleanup();const r="number"==typeof n&&t>5&&t>=n,a=!this.list||this.isDynamic!==r||this.list.children.length!==t;a&&this.cleanup();const o=this.build();if(X(o,this.cn("isDynamic"),!!r),a)for(let e=0;e<t;e++)o.append(this.createItem(e));let l,c=0;for(const t of[...o.children]){const i=c===this.instance.page;i&&(l=t),X(t,this.cn("isCurrent"),i),null===(e=t.children[0])||void 0===e||e.setAttribute("aria-selected",i?"true":"false");for(const e of["isBeforePrev","isPrev","isNext","isAfterNext"])pe(t,this.cn(e));c++}if(l=l||o.firstChild,r&&l){const e=l.previousElementSibling,t=e&&e.previousElementSibling;fe(e,this.cn("isPrev")),fe(t,this.cn("isBeforePrev"));const i=l.nextElementSibling,s=i&&i.nextElementSibling;fe(i,this.cn("isNext")),fe(s,this.cn("isAfterNext"))}this.isDynamic=r}createItem(e=0){var t;const i=document.createElement("li");i.setAttribute("role","presentation");const s=G(this.instance.localize(this.option("dotTpl"),[["%d",e+1]]).replace(/\%i/g,e+""));return i.appendChild(s),null===(t=i.children[0])||void 0===t||t.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,pe(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(Pe,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2}});const Le="disabled",Ie="next",Re="prev";class Oe extends Me{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const e=this.instance,t=e.pages.length,i=e.page;if(t<2)return void this.cleanup();this.build();let s=this.prev,n=this.next;s&&n&&(s.removeAttribute(Le),n.removeAttribute(Le),e.isInfinite||(i<=0&&s.setAttribute(Le,""),i>=t-1&&n.setAttribute(Le,"")))}addBtn(e){var t;const i=this.instance,s=document.createElement("button");s.setAttribute("tabindex","0"),s.setAttribute("title",i.localize(`{{${e.toUpperCase()}}}`)),fe(s,this.cn("button")+" "+this.cn(e===Ie?"isNext":"isPrev"));const n=i.isRTL?e===Ie?Re:Ie:e;var r;return s.innerHTML=i.localize(this.option(`${n}Tpl`)),s.dataset[`carousel${r=e,r?r.match("^[a-z]")?r.charAt(0).toUpperCase()+r.substring(1):r:""}`]="true",null===(t=this.container)||void 0===t||t.appendChild(s),s}build(){const e=this.instance.container,t=this.cn("container");let{container:i,prev:s,next:n}=this;i||(i=e.querySelector("."+t),this.isDom=!!i),i||(i=document.createElement("div"),fe(i,t),e.appendChild(i)),this.container=i,n||(n=i.querySelector("[data-carousel-next]")),n||(n=this.addBtn(Ie)),this.next=n,s||(s=i.querySelector("[data-carousel-prev]")),s||(s=this.addBtn(Re)),this.prev=s}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(Oe,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class Fe extends Me{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(e){this.target=this.instance,this.nav=e,this.attachEvents()}addAsNavFor(e){this.nav=this.instance,this.target=e,this.attachEvents()}attachEvents(){const{nav:e,target:t}=this;e&&t&&(e.options.initialSlide=t.options.initialPage,e.state===Ee.Ready?this.onNavReady(e):e.on("ready",this.onNavReady),t.state===Ee.Ready?this.onTargetReady(t):t.on("ready",this.onTargetReady))}onNavReady(e){e.on("createSlide",this.onNavCreateSlide),e.on("Panzoom.click",this.onNavClick),e.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(e){e.on("change",this.onTargetChange),e.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(e,t,i){this.onNavTouch(e,e.panzoom,i)}onNavTouch(e,t,i){var s,n;if(Math.abs(t.dragOffset.x)>3||Math.abs(t.dragOffset.y)>3)return;const r=i.target,{nav:a,target:o}=this;if(!a||!o||!r)return;const l=r.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!l)return;const c=parseInt(l.dataset.index||"",10)||0,h=o.getPageForSlide(c),u=a.getPageForSlide(c);a.slideTo(u),o.slideTo(h,{friction:(null===(n=null===(s=this.nav)||void 0===s?void 0:s.plugins)||void 0===n?void 0:n.Sync.option("friction"))||0}),this.markSelectedSlide(c)}onNavCreateSlide(e,t){t.index===this.selectedIndex&&this.markSelectedSlide(t.index)}onTargetChange(){var e,t;const{target:i,nav:s}=this;if(!i||!s)return;if(s.state!==Ee.Ready||i.state!==Ee.Ready)return;const n=null===(t=null===(e=i.pages[i.page])||void 0===e?void 0:e.slides[0])||void 0===t?void 0:t.index,r=s.getPageForSlide(n);this.markSelectedSlide(n),s.slideTo(r,null===s.prevPage&&null===i.prevPage?{friction:0}:void 0)}markSelectedSlide(e){const t=this.nav;t&&t.state===Ee.Ready&&(this.selectedIndex=e,[...t.slides].map(t=>{t.el&&t.el.classList[t.index===e?"add":"remove"]("is-nav-selected")}))}attach(){const e=this;let t=e.options.target,i=e.options.nav;t?e.addAsNavFor(t):i&&e.addAsTargetFor(i)}detach(){const e=this,t=e.nav,i=e.target;t&&(t.off("ready",e.onNavReady),t.off("createSlide",e.onNavCreateSlide),t.off("Panzoom.click",e.onNavClick),t.off("Panzoom.touchEnd",e.onNavTouch)),e.nav=null,i&&(i.off("ready",e.onTargetReady),i.off("refresh",e.onTargetChange),i.off("change",e.onTargetChange)),e.target=null}}Object.defineProperty(Fe,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const Be={Navigation:Oe,Dots:Pe,Sync:Fe},De="animationend",je="isSelected",Ne="slide";class Ve extends re{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===Ee.Ready}get isInfinite(){let e=!1;const{contentDim:t,viewportDim:i,pages:s,slides:n}=this,r=n[0];return s.length>=2&&r&&t+r.dim>=i&&(e=this.option("infinite")),e}get isRTL(){return"rtl"===this.option("direction")}get isHorizontal(){return"x"===this.option("axis")}constructor(e,t={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ee.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),"string"==typeof e&&(e=document.querySelector(e)),!e||!de(e))throw new Error("No Element found");this.container=e,this.slideNext=ke(this.slideNext.bind(this),150),this.slidePrev=ke(this.slidePrev.bind(this),150),this.userOptions=t,this.userPlugins=i,queueMicrotask(()=>{this.processOptions()})}processOptions(){var e,t;const i=ie({},Ve.defaults,this.userOptions);let s="";const n=i.breakpoints;if(n&&te(n))for(const[e,t]of Object.entries(n))window.matchMedia(e).matches&&te(t)&&(s+=e,ie(i,t));s===this.bp&&this.state!==Ee.Init||(this.bp=s,this.state===Ee.Ready&&(i.initialSlide=(null===(t=null===(e=this.pages[this.page])||void 0===e?void 0:e.slides[0])||void 0===t?void 0:t.index)||0),this.state!==Ee.Init&&this.destroy(),super.setOptions(i),!1===this.option("enabled")?this.attachEvents():setTimeout(()=>{this.init()},0))}init(){this.state=Ee.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},Ve.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=Ee.Ready,this.emit("ready")}initLayout(){const{container:e}=this,t=this.option("classes");fe(e,this.cn("container")),X(e,t.isLTR,!this.isRTL),X(e,t.isRTL,this.isRTL),X(e,t.isVertical,!this.isHorizontal),X(e,t.isHorizontal,this.isHorizontal);let i=this.option("viewport")||e.querySelector(`.${t.viewport}`);i||(i=document.createElement("div"),fe(i,t.viewport),i.append(...Te(e,`.${t.slide}`)),e.prepend(i)),i.addEventListener("scroll",this.onScroll);let s=this.option("track")||e.querySelector(`.${t.track}`);s||(s=document.createElement("div"),fe(s,t.track),s.append(...Array.from(i.childNodes))),s.setAttribute("aria-live","polite"),i.contains(s)||i.prepend(s),this.viewport=i,this.track=s,this.emit("initLayout")}initSlides(){const{track:e}=this;if(!e)return;const t=[...this.slides],i=[];[...Te(e,`.${this.cn(Ne)}`)].forEach(e=>{if(de(e)){const t=Ce({el:e,isDom:!0,index:this.slides.length});i.push(t)}});for(let e of[...this.option("slides",[])||[],...t])i.push(Ce(e));this.slides=i;for(let e=0;e<this.slides.length;e++)this.slides[e].index=e;for(const e of i)this.emit("beforeInitSlide",e,e.index),this.emit("initSlide",e,e.index);this.emit("initSlides")}setInitialPage(){const e=this.option("initialSlide");this.page="number"==typeof e?this.getPageForSlide(e):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:e,pages:t,isHorizontal:i}=this;if(!e||!t.length)return;let s=this.page;t[s]||(this.page=s=0);const n=(t[s].pos||0)*(this.isRTL&&i?1:-1),r=i?`${n}px`:"0",a=i?"0":`${n}px`;e.style.transform=`translate3d(${r}, ${a}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const e=this.option("Panzoom")||{};this.panzoom=new Se(this.viewport,ie({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:e=>!(this.pages.length<2&&!e.options.infinite),bounds:()=>this.getBounds(),maxVelocity:e=>Math.abs(e.target[this.axis]-e.current[this.axis])<2*this.viewportDim?100:0},e)),this.panzoom.on("*",(e,t,...i)=>{this.emit(`Panzoom.${t}`,e,...i)}),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const e=this.container;e&&(e.addEventListener("click",this.onClick,{passive:!1,capture:!1}),e.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let e=[];const{contentDim:t,viewportDim:i}=this;let s=this.option("slidesPerPage");s=("auto"===s||t<=i)&&!1!==this.option("fill")?1/0:parseFloat(s+"");let n=0,r=0,a=0;for(const t of this.slides)(!e.length||r+t.dim-i>.05||a>=s)&&(e.push(Ae()),n=e.length-1,r=0,a=0),e[n].slides.push(t),r+=t.dim+t.gap,a++;return e}processPages(){const e=this.pages,{contentDim:t,viewportDim:i,isInfinite:s}=this,n=this.option("center"),r=this.option("fill"),a=r&&n&&t>i&&!s;if(e.forEach((e,s)=>{var r;e.index=s,e.pos=(null===(r=e.slides[0])||void 0===r?void 0:r.pos)||0,e.dim=0;for(const[t,i]of e.slides.entries())e.dim+=i.dim,t<e.slides.length-1&&(e.dim+=i.gap);a&&e.pos+.5*e.dim<.5*i?e.pos=0:a&&e.pos+.5*e.dim>=t-.5*i?e.pos=t-i:n&&(e.pos+=-.5*(i-e.dim))}),e.forEach(e=>{r&&!s&&t>i&&(e.pos=Math.max(e.pos,0),e.pos=Math.min(e.pos,t-i)),e.pos=$(e.pos,1e3),e.dim=$(e.dim,1e3),Math.abs(e.pos)<=.1&&(e.pos=0)}),s)return e;const o=[];let l;return e.forEach(e=>{const t=Object.assign({},e);l&&t.pos===l.pos?(l.dim+=t.dim,l.slides=[...l.slides,...t.slides]):(t.index=o.length,l=t,o.push(t))}),o}getPageFromIndex(e=0){const t=this.pages.length;let i;return e=parseInt((e||0).toString())||0,i=this.isInfinite?(e%t+t)%t:Math.max(Math.min(e,t-1),0),i}getSlideMetrics(e){var t,i;const s=this.isHorizontal?"width":"height";let n=0,r=0,a=e.el;const o=!(!a||a.parentNode);if(a?n=parseFloat(a.dataset[s]||"")||0:(a=document.createElement("div"),a.style.visibility="hidden",(this.track||document.body).prepend(a)),fe(a,this.cn(Ne)+" "+e.class+" "+e.customClass),n)a.style[s]=`${n}px`,a.style["width"===s?"height":"width"]="";else{o&&(this.track||document.body).prepend(a),n=a.getBoundingClientRect()[s]*Math.max(1,(null===(t=window.visualViewport)||void 0===t?void 0:t.scale)||1);let e=a[this.isHorizontal?"offsetWidth":"offsetHeight"];e-1>n&&(n=e)}const l=getComputedStyle(a);return"content-box"===l.boxSizing&&(this.isHorizontal?(n+=parseFloat(l.paddingLeft)||0,n+=parseFloat(l.paddingRight)||0):(n+=parseFloat(l.paddingTop)||0,n+=parseFloat(l.paddingBottom)||0)),r=parseFloat(l[this.isHorizontal?"marginRight":"marginBottom"])||0,o?null===(i=a.parentElement)||void 0===i||i.removeChild(a):e.el||a.remove(),{dim:$(n,1e3),gap:$(r,1e3)}}getBounds(){const{isInfinite:e,isRTL:t,isHorizontal:i,pages:s}=this;let n={min:0,max:0};if(e)n={min:-1/0,max:1/0};else if(s.length){const e=s[0].pos,r=s[s.length-1].pos;n=t&&i?{min:e,max:r}:{min:-1*r,max:-1*e}}return{x:i?n:{min:0,max:0},y:i?{min:0,max:0}:n}}repositionSlides(){let e,{isHorizontal:t,isRTL:i,isInfinite:s,viewport:n,viewportDim:r,contentDim:a,page:o,pages:l,slides:c,panzoom:h}=this,u=0,d=0,p=0,f=0;h?f=-1*h.current[this.axis]:l[o]&&(f=l[o].pos||0),e=t?i?"right":"left":"top",i&&t&&(f*=-1);for(const t of c){const i=t.el;i?("top"===e?(i.style.right="",i.style.left=""):i.style.top="",t.index!==u?i.style[e]=0===d?"":`${$(d,1e3)}px`:i.style[e]="",p+=t.dim+t.gap,u++):d+=t.dim+t.gap}if(s&&p&&n){let i=getComputedStyle(n),s="padding",o=t?"Right":"Bottom",l=parseFloat(i[s+(t?"Left":"Top")]);f-=l,r+=l,r+=parseFloat(i[s+o]);for(const t of c)t.el&&($(t.pos)<$(r)&&$(t.pos+t.dim+t.gap)<$(f)&&$(f)>$(a-r)&&(t.el.style[e]=`${$(d+p,1e3)}px`),$(t.pos+t.gap)>=$(a-r)&&$(t.pos)>$(f+r)&&$(f)<$(r)&&(t.el.style[e]=`-${$(p,1e3)}px`))}let m,g,y=[...this.inTransition];if(y.length>1&&(m=l[y[0]],g=l[y[1]]),m&&g){let t=0;for(const i of c)i.el?this.inTransition.has(i.index)&&m.slides.indexOf(i)<0&&(i.el.style[e]=`${$(t+(m.pos-g.pos),1e3)}px`):t+=i.dim+i.gap}}createSlideEl(e){const{track:t,slides:i}=this;if(!t||!e)return;if(e.el&&e.el.parentNode)return;const s=e.el||document.createElement("div");fe(s,this.cn(Ne)),fe(s,e.class),fe(s,e.customClass);const n=e.html;n&&(n instanceof HTMLElement?s.appendChild(n):s.innerHTML=e.html+"");const r=[];i.forEach((e,t)=>{e.el&&r.push(t)});const a=e.index;let o=null;r.length&&(o=i[r.reduce((e,t)=>Math.abs(t-a)<Math.abs(e-a)?t:e)]);const l=o&&o.el&&o.el.parentNode?o.index<e.index?o.el.nextSibling:o.el:null;t.insertBefore(s,t.contains(l)?l:null),e.el=s,this.emit("createSlide",e)}removeSlideEl(e,t=!1){const i=null==e?void 0:e.el;if(!i||!i.parentNode)return;const s=this.cn(je);if(i.classList.contains(s)&&(pe(i,s),this.emit("unselectSlide",e)),e.isDom&&!t)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",e);const n=new CustomEvent(De);i.dispatchEvent(n),e.el&&(e.el.remove(),e.el=null)}transitionTo(e=0,t=this.option("transition")){var i,s,n,r;if(!t)return!1;const a=this.page,{pages:o,panzoom:l}=this;e=parseInt((e||0).toString())||0;const c=this.getPageFromIndex(e);if(!l||!o[c]||o.length<2||Math.abs(((null===(s=null===(i=o[a])||void 0===i?void 0:i.slides[0])||void 0===s?void 0:s.dim)||0)-this.viewportDim)>1)return!1;let h=e>a?1:-1;this.isInfinite&&(0===a&&e===o.length-1&&(h=-1),a===o.length-1&&0===e&&(h=1));const u=o[c].pos*(this.isRTL?1:-1);if(a===c&&Math.abs(u-l.target[this.axis])<1)return!1;this.clearTransitions();const d=l.isResting;fe(this.container,this.cn("inTransition"));const p=(null===(n=o[a])||void 0===n?void 0:n.slides[0])||null,f=(null===(r=o[c])||void 0===r?void 0:r.slides[0])||null;this.inTransition.add(f.index),this.createSlideEl(f);let m=p.el,g=f.el;d||t===Ne||(t="fadeFast",m=null);const y=this.isRTL?"next":"prev",v=this.isRTL?"prev":"next";return m&&(this.inTransition.add(p.index),p.transition=t,m.addEventListener(De,this.onAnimationEnd),m.classList.add(`f-${t}Out`,`to-${h>0?v:y}`)),g&&(f.transition=t,g.addEventListener(De,this.onAnimationEnd),g.classList.add(`f-${t}In`,`from-${h>0?y:v}`)),l.current[this.axis]=u,l.target[this.axis]=u,l.requestTick(),this.onChange(c),!0}manageSlideVisiblity(){const e=new Set,t=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const s of this.slides)i.has(s)?e.add(s):t.add(s);for(const t of this.inTransition)e.add(this.slides[t]);for(const t of e)this.createSlideEl(t),this.lazyLoadSlide(t);for(const i of t)e.has(i)||this.removeSlideEl(i);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const e="aria-hidden";let t=this.cn(je);if(t)for(const i of this.slides){const s=i.el;s&&(s.dataset.index=`${i.index}`,s.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?s.removeAttribute(e):s.setAttribute(e,"true"):this.pages[this.page].slides.includes(i)?(s.classList.contains(t)||(fe(s,t),this.emit("selectSlide",i)),s.removeAttribute(e)):(s.classList.contains(t)&&(pe(s,t),this.emit("unselectSlide",i)),s.setAttribute(e,"true")))}}flipInfiniteTrack(){const{axis:e,isHorizontal:t,isInfinite:i,isRTL:s,viewportDim:n,contentDim:r}=this,a=this.panzoom;if(!a||!i)return;let o=a.current[e],l=a.target[e]-o,c=0,h=.5*n;s&&t?(o<-h&&(c=-1,o+=r),o>r-h&&(c=1,o-=r)):(o>h&&(c=1,o-=r),o<-r+h&&(c=-1,o+=r)),c&&(a.current[e]=o,a.target[e]=o+l)}lazyLoadImg(e,t){const i=this,s="f-fadeIn",n="is-preloading";let r=!1,a=null;const o=()=>{r||(r=!0,a&&(a.remove(),a=null),pe(t,n),t.complete&&(fe(t,s),setTimeout(()=>{pe(t,s)},350)),this.option("adaptiveHeight")&&e.el&&this.pages[this.page].slides.indexOf(e)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",e))};fe(t,n),t.src=t.dataset.lazySrcset||t.dataset.lazySrc||"",delete t.dataset.lazySrc,delete t.dataset.lazySrcset,t.addEventListener("error",()=>{o()}),t.addEventListener("load",()=>{o()}),setTimeout(()=>{const i=t.parentNode;i&&e.el&&(t.complete?o():r||(a=G(ue),i.insertBefore(a,t)))},300)}lazyLoadSlide(e){const t=e&&e.el;if(!t)return;const i=new Set;let s=Array.from(t.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));t.dataset.lazySrc&&s.push(t),s.map(e=>{e instanceof HTMLImageElement?i.add(e):e instanceof HTMLElement&&e.dataset.lazySrc&&(e.style.backgroundImage=`url('${e.dataset.lazySrc}')`,delete e.dataset.lazySrc)});for(const t of i)this.lazyLoadImg(e,t)}onAnimationEnd(e){var t;const i=e.target,s=i?parseInt(i.dataset.index||"",10)||0:-1,n=this.slides[s],r=e.animationName;if(!i||!n||!r)return;const a=!!this.inTransition.has(s)&&n.transition;a&&r.substring(0,a.length+2)===`f-${a}`&&this.inTransition.delete(s),this.inTransition.size||this.clearTransitions(),s===this.page&&(null===(t=this.panzoom)||void 0===t?void 0:t.isResting)&&this.emit("settle")}onDecel(e,t=0,i=0,s=0,n=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:r,isHorizontal:a,axis:o,pages:l}=this,c=l.length,h=Math.abs(Math.atan2(i,t)/(Math.PI/180));let u=0;if(u=h>45&&h<135?a?0:i:a?t:0,!c)return;let d=this.page,p=r&&a?1:-1;const f=e.current[o]*p;let{pageIndex:m}=this.getPageFromPosition(f);Math.abs(u)>5?(l[d].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(d=m),d=r&&a?u<0?d-1:d+1:u<0?d+1:d-1):d=0===s&&0===n?d:m,this.slideTo(d,{transition:!1,friction:e.option("decelFriction")})}onClick(e){const t=e.target,i=t&&de(t)?t.dataset:null;let s,n;i&&(void 0!==i.carouselPage?(n="slideTo",s=i.carouselPage):void 0!==i.carouselNext?n="slideNext":void 0!==i.carouselPrev&&(n="slidePrev")),n?(e.preventDefault(),e.stopPropagation(),t&&!t.hasAttribute("disabled")&&this[n](s)):this.emit("click",e)}onSlideTo(e){const t=e.detail||0;this.slideTo(this.getPageForSlide(t),{friction:0})}onChange(e,t=0){const i=this.page;this.prevPage=i,this.page=e,this.option("adaptiveHeight")&&this.setViewportHeight(),e!==i&&(this.markSelectedSlides(),this.emit("change",e,i,t))}onRefresh(){let e=this.contentDim,t=this.viewportDim;this.updateMetrics(),this.contentDim===e&&this.viewportDim===t||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var e;null===(e=this.viewport)||void 0===e||e.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(e){this.lp!==e.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=e.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(e=null,t=null){this.destroy(),this.state=Ee.Init,this.prevPage=null,this.userOptions=e||this.userOptions,this.userPlugins=t||this.userPlugins,this.processOptions()}slideTo(e=0,{friction:t=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===Ee.Destroy)return;e=parseInt((e||0).toString())||0;const s=this.getPageFromIndex(e),{axis:n,isHorizontal:r,isRTL:a,pages:o,panzoom:l}=this,c=o.length,h=a&&r?1:-1;if(!l||!c)return;if(this.page!==s){const t=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",t,e),t.defaultPrevented)return}if(this.transitionTo(e,i))return;let u=o[s].pos;if(this.isInfinite){const t=this.contentDim,i=l.target[n]*h;2===c?u+=t*Math.floor(parseFloat(e+"")/2):u=[u,u-t,u+t].reduce(function(e,t){return Math.abs(t-i)<Math.abs(e-i)?t:e})}u*=h,Math.abs(l.target[n]-u)<1||(l.panTo({x:r?u:0,y:r?0:u,friction:t}),this.onChange(s))}slideToClosest(e){if(this.panzoom){const{pageIndex:t}=this.getPageFromPosition();this.slideTo(t,e)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),pe(this.container,this.cn("inTransition"));const e=["to-prev","to-next","from-prev","from-next"];for(const t of this.slides){const i=t.el;if(i){i.removeEventListener(De,this.onAnimationEnd),i.classList.remove(...e);const s=t.transition;s&&i.classList.remove(`f-${s}Out`,`f-${s}In`)}}this.manageSlideVisiblity()}addSlide(e,t){var i,s,n,r;const a=this.panzoom,o=(null===(i=this.pages[this.page])||void 0===i?void 0:i.pos)||0,l=(null===(s=this.pages[this.page])||void 0===s?void 0:s.dim)||0,c=this.contentDim<this.viewportDim;let h=Array.isArray(t)?t:[t];const u=[];for(const e of h)u.push(Ce(e));this.slides.splice(e,0,...u);for(let e=0;e<this.slides.length;e++)this.slides[e].index=e;for(const e of u)this.emit("beforeInitSlide",e,e.index);if(this.page>=e&&(this.page+=u.length),this.updateMetrics(),a){const t=(null===(n=this.pages[this.page])||void 0===n?void 0:n.pos)||0,i=(null===(r=this.pages[this.page])||void 0===r?void 0:r.dim)||0,s=this.pages.length||1,h=this.isRTL?l-i:i-l,u=this.isRTL?o-t:t-o;c&&1===s?(e<=this.page&&(a.current[this.axis]-=h,a.target[this.axis]-=h),a.panTo({[this.isHorizontal?"x":"y"]:-1*t})):u&&e<=this.page&&(a.target[this.axis]-=u,a.current[this.axis]-=u,a.requestTick())}for(const e of u)this.emit("initSlide",e,e.index)}prependSlide(e){this.addSlide(0,e)}appendSlide(e){this.addSlide(this.slides.length,e)}removeSlide(e){const t=this.slides.length;e=(e%t+t)%t;const i=this.slides[e];if(i){this.removeSlideEl(i,!0),this.slides.splice(e,1);for(let e=0;e<this.slides.length;e++)this.slides[e].index=e;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){const{panzoom:e,viewport:t,track:i,slides:s,isHorizontal:n,isInfinite:r}=this;if(!i)return;const a=n?"width":"height",o=n?"offsetWidth":"offsetHeight";if(t){let e=Math.max(t[o],$(t.getBoundingClientRect()[a],1e3)),i=getComputedStyle(t),s="padding",r=n?"Right":"Bottom";e-=parseFloat(i[s+(n?"Left":"Top")])+parseFloat(i[s+r]),this.viewportDim=e}let l,c=0;for(const[e,t]of s.entries()){let i=0,n=0;!t.el&&l?(i=l.dim,n=l.gap):(({dim:i,gap:n}=this.getSlideMetrics(t)),l=t),i=$(i,1e3),n=$(n,1e3),t.dim=i,t.gap=n,t.pos=c,c+=i,(r||e<s.length-1)&&(c+=n)}c=$(c,1e3),this.contentDim=c,e&&(e.contentRect[a]=c,e.contentRect[n?"fullWidth":"fullHeight"]=c),this.pages=this.createPages(),this.pages=this.processPages(),this.state===Ee.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(e,t=!1,i=!1){void 0===e&&(e=this.page);const s=this,n=s.panzoom,r=s.contentDim,a=s.pages[e]||0;if(!a||!n)return e>this.page?-1:1;let o=-1*n.current.e,l=$((o-a.pos)/(1*a.dim),1e3),c=l,h=l;this.isInfinite&&!0!==i&&(c=$((o-a.pos+r)/(1*a.dim),1e3),h=$((o-a.pos-r)/(1*a.dim),1e3));let u=[l,c,h].reduce(function(e,t){return Math.abs(t)<Math.abs(e)?t:e});return t?u:u>1?1:u<-1?-1:u}setViewportHeight(){const{page:e,pages:t,viewport:i,isHorizontal:s}=this;if(!i||!t[e])return;let n=0;s&&this.track&&(this.track.style.height="auto",t[e].slides.forEach(e=>{e.el&&(n=Math.max(n,e.el.offsetHeight))})),i.style.height=n?`${n}px`:""}getPageForSlide(e){for(const t of this.pages)for(const i of t.slides)if(i.index===e)return t.index;return-1}getVisibleSlides(e=0){var t;const i=new Set;let{panzoom:s,contentDim:n,viewportDim:r,pages:a,page:o}=this;if(r){n=n+(null===(t=this.slides[this.slides.length-1])||void 0===t?void 0:t.gap)||0;let l=0;l=s&&s.state!==ae.Init&&s.state!==ae.Destroy?-1*s.current[this.axis]:a[o]&&a[o].pos||0,this.isInfinite&&(l-=Math.floor(l/n)*n),this.isRTL&&this.isHorizontal&&(l*=-1);const c=l-r*e,h=l+r*(e+1),u=this.isInfinite?[-1,0,1]:[0];for(const e of this.slides)for(const t of u){const s=e.pos+t*n,r=s+e.dim+e.gap;s<h&&r>c&&i.add(e)}}return i}getPageFromPosition(e){const{viewportDim:t,contentDim:i,slides:s,pages:n,panzoom:r}=this,a=n.length,o=s.length,l=s[0],c=s[o-1],h=this.option("center");let u=0,d=0,p=0,f=void 0===e?-1*((null==r?void 0:r.target[this.axis])||0):e;h&&(f+=.5*t),this.isInfinite?(f<l.pos-.5*c.gap&&(f-=i,p=-1),f>c.pos+c.dim+.5*c.gap&&(f-=i,p=1)):f=Math.max(l.pos||0,Math.min(f,c.pos));let m=c,g=s.find(e=>{const t=e.pos-.5*m.gap,i=e.pos+e.dim+.5*e.gap;return m=e,f>=t&&f<i});return g||(g=c),d=this.getPageForSlide(g.index),u=d+p*a,{page:u,pageIndex:d}}setPageFromPosition(){const{pageIndex:e}=this.getPageFromPosition();this.onChange(e)}destroy(){if([Ee.Destroy].includes(this.state))return;this.state=Ee.Destroy;const{container:e,viewport:t,track:i,slides:s,panzoom:n}=this,r=this.option("classes");e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),n&&(n.destroy(),this.panzoom=null),s&&s.forEach(e=>{this.removeSlideEl(e)}),this.detachPlugins(),t&&(t.removeEventListener("scroll",this.onScroll),t.offsetParent&&i&&i.offsetParent&&t.replaceWith(...i.childNodes));for(const[t,i]of Object.entries(r))"container"!==t&&i&&e.classList.remove(i);this.track=null,this.viewport=null,this.page=0,this.slides=[];const a=this.events.get("ready");this.events=new Map,a&&this.events.set("ready",a)}}Object.defineProperty(Ve,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:Se}),Object.defineProperty(Ve,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}}}),Object.defineProperty(Ve,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Be});const ze=function(e){if(!de(e))return 0;const t=window.scrollY,i=window.innerHeight,s=t+i,n=e.getBoundingClientRect(),r=n.y+t,a=n.height,o=r+a;if(t>o||s<r)return 0;if(t<r&&s>o)return 100;if(r<t&&o>s)return 100;let l=a;r<t&&(l-=t-r),o>s&&(l-=o-s);const c=l/i*100;return Math.round(c)},He=!("undefined"==typeof window||!window.document||!window.document.createElement);let qe;const $e=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),Ue=e=>{if(e&&He){void 0===qe&&document.createElement("div").focus({get preventScroll(){return qe=!0,!1}});try{if(qe)e.focus({preventScroll:!0});else{const t=window.scrollY||document.body.scrollTop,i=window.scrollX||document.body.scrollLeft;e.focus(),document.body.scrollTo({top:t,left:i,behavior:"auto"})}}catch(e){}}},We=()=>{const e=document;let t,i="",s="",n="";return e.fullscreenEnabled?(i="requestFullscreen",s="exitFullscreen",n="fullscreenElement"):e.webkitFullscreenEnabled&&(i="webkitRequestFullscreen",s="webkitExitFullscreen",n="webkitFullscreenElement"),i&&(t={request:function(t=e.documentElement){return"webkitRequestFullscreen"===i?t[i](Element.ALLOW_KEYBOARD_INPUT):t[i]()},exit:function(){return e[n]&&e[s]()},isFullscreen:function(){return e[n]}}),t},Ge={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},le),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">\n    <div class="fancybox__backdrop"></div>\n    <div class="fancybox__carousel"></div>\n    <div class="fancybox__footer"></div>\n  </div>'},trapFocus:!0,wheel:"zoom"};var Ye,Xe;!function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Closing=2]="Closing",e[e.CustomClosing=3]="CustomClosing",e[e.Destroy=4]="Destroy"}(Ye||(Ye={})),function(e){e[e.Loading=0]="Loading",e[e.Opening=1]="Opening",e[e.Ready=2]="Ready",e[e.Closing=3]="Closing"}(Xe||(Xe={}));let Ke="",Ze=!1,Je=!1,Qe=null;const et=()=>{let e="",t="";const i=pi.getInstance();if(i){const s=i.carousel,n=i.getSlide();if(s&&n){let r=n.slug||void 0,a=n.triggerEl||void 0;t=r||i.option("slug")||"",!t&&a&&a.dataset&&(t=a.dataset.fancybox||""),t&&"true"!==t&&(e="#"+t+(!r&&s.slides.length>1?"-"+(n.index+1):""))}}return{hash:e,slug:t,index:1}},tt=()=>{const e=new URL(document.URL).hash,t=e.slice(1).split("-"),i=t[t.length-1],s=i&&/^\+?\d+$/.test(i)&&parseInt(t.pop()||"1",10)||1;return{hash:e,slug:t.join("-"),index:s}},it=()=>{const{slug:e,index:t}=tt();if(!e)return;let i=document.querySelector(`[data-slug="${e}"]`);if(i&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),pi.getInstance())return;const s=document.querySelectorAll(`[data-fancybox="${e}"]`);s.length&&(i=s[t-1],i&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},st=()=>{if(!1===pi.defaults.Hash)return;const e=pi.getInstance();if(!1===(null==e?void 0:e.options.Hash))return;const{slug:t,index:i}=tt(),{slug:s}=et();e&&(t===s?e.jumpTo(i-1):(Ze=!0,e.close())),it()},nt=()=>{Qe&&clearTimeout(Qe),queueMicrotask(()=>{st()})},rt=()=>{window.addEventListener("hashchange",nt,!1),setTimeout(()=>{st()},500)};He&&(/complete|interactive|loaded/.test(document.readyState)?rt():document.addEventListener("DOMContentLoaded",rt));const at="is-zooming-in";class ot extends Me{onCreateSlide(e,t,i){const s=this.instance.optionFor(i,"src")||"";i.el&&"image"===i.type&&"string"==typeof s&&this.setImage(i,s)}onRemoveSlide(e,t,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(e,t,i,s){pe(this.instance.container,at);for(const e of t.slides){const t=e.panzoom;t&&e.index!==i&&t.reset(.35)}}onClose(){var e;const t=this.instance,i=t.container,s=t.getSlide();if(!i||!i.parentElement||!s)return;const{el:n,contentEl:r,panzoom:a,thumbElSrc:o}=s;if(!n||!o||!r||!a||a.isContentLoading||a.state===ae.Init||a.state===ae.Destroy)return;a.updateMetrics();let l=this.getZoomInfo(s);if(!l)return;this.instance.state=Ye.CustomClosing,i.classList.remove(at),i.classList.add("is-zooming-out"),r.style.backgroundImage=`url('${o}')`;const c=i.getBoundingClientRect();1===((null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1)&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${c.width}px`,height:`${c.height}px`,overflow:"hidden"});const{x:h,y:u,scale:d,opacity:p}=l;if(p){const e=((e,t)=>{const i=t-e;return t=>1+((t-e)/i*-1||0)})(a.scale,d);a.on("afterTransform",()=>{r.style.opacity=e(a.scale)+""})}a.on("endAnimation",()=>{t.destroy()}),a.target.a=d,a.target.b=0,a.target.c=0,a.target.d=d,a.panTo({x:h,y:u,scale:d,friction:p?.2:.33,ignoreBounds:!0}),a.isResting&&t.destroy()}setImage(e,t){const i=this.instance;e.src=t,this.process(e,t).then(t=>{const{contentEl:s,imageEl:n,thumbElSrc:r,el:a}=e;if(i.isClosing()||!s||!n)return;s.offsetHeight;const o=!!i.isOpeningSlide(e)&&this.getZoomInfo(e);if(this.option("protected")&&a){a.addEventListener("contextmenu",e=>{e.preventDefault()});const e=document.createElement("div");fe(e,"fancybox-protected"),s.appendChild(e)}if(r&&o){const n=t.contentRect,a=Math.max(n.fullWidth,n.fullHeight);let c=null;!o.opacity&&a>1200&&(c=document.createElement("img"),fe(c,"fancybox-ghost"),c.src=r,s.appendChild(c));const h=()=>{c&&(fe(c,"f-fadeFastOut"),setTimeout(()=>{c&&(c.remove(),c=null)},200))};(l=r,new Promise((e,t)=>{const i=new Image;i.onload=e,i.onerror=t,i.src=l})).then(()=>{i.hideLoading(e),e.state=Xe.Opening,this.instance.emit("reveal",e),this.zoomIn(e).then(()=>{h(),this.instance.done(e)},()=>{}),c&&setTimeout(()=>{h()},a>2500?800:200)},()=>{i.hideLoading(e),i.revealContent(e)})}else{const s=this.optionFor(e,"initialSize"),n=this.optionFor(e,"zoom"),r={event:i.prevMouseMoveEvent||i.options.event,friction:n?.12:0};let a=i.optionFor(e,"showClass")||void 0,o=!0;i.isOpeningSlide(e)&&("full"===s?t.zoomToFull(r):"cover"===s?t.zoomToCover(r):"max"===s?t.zoomToMax(r):o=!1,t.stop("current")),o&&a&&(a=t.isDragging?"f-fadeIn":""),i.hideLoading(e),i.revealContent(e,a)}var l},()=>{i.setError(e,"{{IMAGE_ERROR}}")})}process(e,t){return new Promise((i,s)=>{var n;const r=this.instance,a=e.el;r.clearContent(e),r.showLoading(e);let o=this.optionFor(e,"content");if("string"==typeof o&&(o=G(o)),!o||!de(o)){if(o=document.createElement("img"),o instanceof HTMLImageElement){let i="",s=e.caption;i="string"==typeof s&&s?s.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${e.index+1} of ${(null===(n=r.carousel)||void 0===n?void 0:n.pages.length)||1}`,o.src=t||"",o.alt=i,o.draggable=!1,e.srcset&&o.setAttribute("srcset",e.srcset),this.instance.isOpeningSlide(e)&&(o.fetchPriority="high")}e.sizes&&o.setAttribute("sizes",e.sizes)}fe(o,"fancybox-image"),e.imageEl=o,r.setContent(e,o,!1),e.panzoom=new Se(a,ie({transformParent:!0},this.option("Panzoom")||{},{content:o,width:(t,i)=>r.optionFor(e,"width","auto",i)||"auto",height:(t,i)=>r.optionFor(e,"height","auto",i)||"auto",wheel:()=>{const e=r.option("wheel");return("zoom"===e||"pan"==e)&&e},click:(t,i)=>{var s,n;if(r.isCompact||r.isClosing())return!1;if(e.index!==(null===(s=r.getSlide())||void 0===s?void 0:s.index))return!1;if(i){const e=i.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(e.nodeName))return!1}let a=!i||i.target&&(null===(n=e.contentEl)||void 0===n?void 0:n.contains(i.target));return r.option(a?"contentClick":"backdropClick")||!1},dblClick:()=>r.isCompact?"toggleZoom":r.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:e=>{i(e)},error:()=>{s()},destroy:()=>{s()}}}))})}zoomIn(e){return new Promise((t,i)=>{const s=this.instance,n=s.container,{panzoom:r,contentEl:a,el:o}=e;r&&r.updateMetrics();const l=this.getZoomInfo(e);if(!(l&&o&&a&&r&&n))return void i();const{x:c,y:h,scale:u,opacity:d}=l,p=()=>{e.state!==Xe.Closing&&(d&&(a.style.opacity=Math.max(Math.min(1,1-(1-r.scale)/(1-u)),0)+""),r.scale>=1&&r.scale>r.targetScale-.1&&t(r))},f=e=>{(e.scale<.99||e.scale>1.01)&&!e.isDragging||(pe(n,at),a.style.opacity="",e.off("endAnimation",f),e.off("touchStart",f),e.off("afterTransform",p),t(e))};r.on("endAnimation",f),r.on("touchStart",f),r.on("afterTransform",p),r.on(["error","destroy"],()=>{i()}),r.panTo({x:c,y:h,scale:u,friction:0,ignoreBounds:!0}),r.stop("current");const m={event:"mousemove"===r.panMode?s.prevMouseMoveEvent||s.options.event:void 0},g=this.optionFor(e,"initialSize");fe(n,at),s.hideLoading(e),"full"===g?r.zoomToFull(m):"cover"===g?r.zoomToCover(m):"max"===g?r.zoomToMax(m):r.reset(.172)})}getZoomInfo(e){const{el:t,imageEl:i,thumbEl:s,panzoom:n}=e,r=this.instance,a=r.container;if(!t||!i||!s||!n||ze(s)<3||!this.optionFor(e,"zoom")||!a||r.state===Ye.Destroy)return!1;if("0"===getComputedStyle(a).getPropertyValue("--f-images-zoom"))return!1;const o=window.visualViewport||null;if(1!==(o?o.scale:1))return!1;let{top:l,left:c,width:h,height:u}=s.getBoundingClientRect(),{top:d,left:p,fitWidth:f,fitHeight:m}=n.contentRect;if(!(h&&u&&f&&m))return!1;const g=n.container.getBoundingClientRect();p+=g.left,d+=g.top;const y=-1*(p+.5*f-(c+.5*h)),v=-1*(d+.5*m-(l+.5*u)),b=h/f;let _=this.option("zoomOpacity")||!1;return"auto"===_&&(_=Math.abs(h/u-f/m)>.1),{x:y,y:v,scale:b,opacity:_}}attach(){const e=this,t=e.instance;t.on("Carousel.change",e.onChange),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.removeSlide",e.onRemoveSlide),t.on("close",e.onClose)}detach(){const e=this,t=e.instance;t.off("Carousel.change",e.onChange),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.removeSlide",e.onRemoveSlide),t.off("close",e.onClose)}}Object.defineProperty(ot,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),"function"==typeof SuppressedError&&SuppressedError;const lt="html",ct="image",ht="map",ut="youtube",dt="vimeo",pt="html5video",ft=(e,t={})=>{const i=new URL(e),s=new URLSearchParams(i.search),n=new URLSearchParams;for(const[e,i]of[...s,...Object.entries(t)]){let t=i+"";if("t"===e){let e=t.match(/((\d*)m)?(\d*)s?/);e&&n.set("start",60*parseInt(e[2]||"0")+parseInt(e[3]||"0")+"")}else n.set(e,t)}let r=n+"",a=e.match(/#t=((.*)?\d+s)/);return a&&(r+=`#t=${a[1]}`),r},mt=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class gt extends Me{onBeforeInitSlide(e,t,i){this.processType(i)}onCreateSlide(e,t,i){this.setContent(i)}onClearContent(e,t){t.xhr&&(t.xhr.abort(),t.xhr=null);const i=t.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",t.iframeEl=null);const s=t.contentEl,n=t.placeholderEl;if("inline"===t.type&&s&&n)s.classList.remove("fancybox__content"),"none"!==getComputedStyle(s).getPropertyValue("display")&&(s.style.display="none"),setTimeout(()=>{n&&(s&&n.parentNode&&n.parentNode.insertBefore(s,n),n.remove())},0),t.contentEl=void 0,t.placeholderEl=void 0;else for(;t.el&&t.el.firstChild;)t.el.removeChild(t.el.firstChild)}onSelectSlide(e,t,i){i.state===Xe.Ready&&this.playVideo()}onUnselectSlide(e,t,i){var s,n;if(i.type===pt){try{null===(n=null===(s=i.el)||void 0===s?void 0:s.querySelector("video"))||void 0===n||n.pause()}catch(e){}return}let r;i.type===dt?r={method:"pause",value:"true"}:i.type===ut&&(r={event:"command",func:"pauseVideo"}),r&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(r),"*"),i.poller&&clearTimeout(i.poller)}onDone(e,t){e.isCurrentSlide(t)&&!e.isClosing()&&this.playVideo()}onRefresh(e,t){t.slides.forEach(e=>{e.el&&(this.resizeIframe(e),this.setAspectRatio(e))})}onMessage(e){try{let t=JSON.parse(e.data);if("https://player.vimeo.com"===e.origin){if("ready"===t.event)for(let t of Array.from(document.getElementsByClassName("fancybox__iframe")))t instanceof HTMLIFrameElement&&t.contentWindow===e.source&&(t.dataset.ready="true")}else if(e.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&"onReady"===t.event){const e=document.getElementById(t.id);e&&(e.dataset.ready="true")}}catch(e){}}loadAjaxContent(e){const t=this.instance.optionFor(e,"src")||"";this.instance.showLoading(e);const i=this.instance,s=new XMLHttpRequest;i.showLoading(e),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&i.state===Ye.Ready&&(i.hideLoading(e),200===s.status?i.setContent(e,s.responseText):i.setError(e,404===s.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const n=e.ajax||null;s.open(n?"POST":"GET",t+""),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(n),e.xhr=s}setInlineContent(e){let t=null;if(de(e.src))t=e.src;else if("string"==typeof e.src){const i=e.src.split("#",2).pop();t=i?document.getElementById(i):null}if(t){if("clone"===e.type||t.closest(".fancybox__slide")){t=t.cloneNode(!0);const i=t.dataset.animationName;i&&(t.classList.remove(i),delete t.dataset.animationName);let s=t.getAttribute("id");s=s?`${s}--clone`:`clone-${this.instance.id}-${e.index}`,t.setAttribute("id",s)}else if(t.parentNode){const i=document.createElement("div");i.classList.add("fancybox-placeholder"),t.parentNode.insertBefore(i,t),e.placeholderEl=i}this.instance.setContent(e,t)}else this.instance.setError(e,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(e){const{src:t,el:i}=e;if(!t||"string"!=typeof t||!i)return;i.classList.add("is-loading");const s=this.instance,n=document.createElement("iframe");n.className="fancybox__iframe",n.setAttribute("id",`fancybox__iframe_${s.id}_${e.index}`);for(const[t,i]of Object.entries(this.optionFor(e,"iframeAttr")||{}))n.setAttribute(t,i);n.onerror=()=>{s.setError(e,"{{IFRAME_ERROR}}")},e.iframeEl=n;const r=this.optionFor(e,"preload");if("iframe"!==e.type||!1===r)return n.setAttribute("src",e.src+""),s.setContent(e,n,!1),this.resizeIframe(e),void s.revealContent(e);s.showLoading(e),n.onload=()=>{if(!n.src.length)return;const t="true"!==n.dataset.ready;n.dataset.ready="true",this.resizeIframe(e),t?s.revealContent(e):s.hideLoading(e)},n.setAttribute("src",t),s.setContent(e,n,!1)}resizeIframe(e){const{type:t,iframeEl:i}=e;if(t===ut||t===dt)return;const s=null==i?void 0:i.parentElement;if(!i||!s)return;let n=e.autoSize;void 0===n&&(n=this.optionFor(e,"autoSize"));let r=e.width||0,a=e.height||0;r&&a&&(n=!1);const o=s&&s.style;if(!1!==e.preload&&!1!==n&&o)try{const e=window.getComputedStyle(s),t=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),n=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),l=i.contentWindow;if(l){const e=l.document,i=e.getElementsByTagName(lt)[0],s=e.body;o.width="",s.style.overflow="hidden",r=r||i.scrollWidth+t,o.width=`${r}px`,s.style.overflow="",o.flex="0 0 auto",o.height=`${s.scrollHeight}px`,a=i.scrollHeight+n}}catch(e){}if(r||a){const e={flex:"0 1 auto",width:"",height:""};r&&"auto"!==r&&(e.width=`${r}px`),a&&"auto"!==a&&(e.height=`${a}px`),Object.assign(o,e)}}playVideo(){const e=this.instance.getSlide();if(!e)return;const{el:t}=e;if(!t||!t.offsetParent)return;if(!this.optionFor(e,"videoAutoplay"))return;if(e.type===pt)try{const e=t.querySelector("video");if(e){const t=e.play();void 0!==t&&t.then(()=>{}).catch(t=>{e.muted=!0,e.play()})}}catch(e){}if(e.type!==ut&&e.type!==dt)return;const i=()=>{if(e.iframeEl&&e.iframeEl.contentWindow){let t;if("true"===e.iframeEl.dataset.ready)return t=e.type===ut?{event:"command",func:"playVideo"}:{method:"play",value:"true"},t&&e.iframeEl.contentWindow.postMessage(JSON.stringify(t),"*"),void(e.poller=void 0);e.type===ut&&(t={event:"listening",id:e.iframeEl.getAttribute("id")},e.iframeEl.contentWindow.postMessage(JSON.stringify(t),"*"))}e.poller=setTimeout(i,250)};i()}processType(e){if(e.html)return e.type=lt,e.src=e.html,void(e.html="");const t=this.instance.optionFor(e,"src","");if(!t||"string"!=typeof t)return;let i=e.type,s=null;if(s=t.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const n=this.optionFor(e,ut),{nocookie:r}=n,a=function(e,t){var i={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(i[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(e);n<s.length;n++)t.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(e,s[n])&&(i[s[n]]=e[s[n]])}return i}(n,["nocookie"]),o=`www.youtube${r?"-nocookie":""}.com`,l=ft(t,a),c=encodeURIComponent(s[2]);e.videoId=c,e.src=`https://${o}/embed/${c}?${l}`,e.thumbSrc=e.thumbSrc||`https://i.ytimg.com/vi/${c}/mqdefault.jpg`,i=ut}else if(s=t.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const n=ft(t,this.optionFor(e,dt)),r=encodeURIComponent(s[1]),a=s[4]||"";e.videoId=r,e.src=`https://player.vimeo.com/video/${r}?${a?`h=${a}${n?"&":""}`:""}${n}`,i=dt}if(!i&&e.triggerEl){const t=e.triggerEl.dataset.type;mt.includes(t)&&(i=t)}i||"string"==typeof t&&("#"===t.charAt(0)?i="inline":(s=t.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=pt,e.videoFormat=e.videoFormat||"video/"+("ogv"===s[1]?"ogg":s[1])):t.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=ct:t.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(s=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(e.src=`https://maps.google.${s[1]}/?ll=${(s[2]?s[2]+"&z="+Math.floor(parseFloat(s[3]))+(s[4]?s[4].replace(/^\//,"&"):""):s[4]+"").replace(/\?/,"&")}&output=${s[4]&&s[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=ht):(s=t.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(e.src=`https://maps.google.${s[1]}/maps?q=${s[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=ht),i=i||this.instance.option("defaultType"),e.type=i,i===ct&&(e.thumbSrc=e.thumbSrc||e.src)}setContent(e){const t=this.instance.optionFor(e,"src")||"";if(e&&e.type&&t){switch(e.type){case lt:this.instance.setContent(e,t);break;case pt:const i=this.option("videoTpl");i&&this.instance.setContent(e,i.replace(/\{\{src\}\}/gi,t+"").replace(/\{\{format\}\}/gi,this.optionFor(e,"videoFormat")||"").replace(/\{\{poster\}\}/gi,e.poster||e.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(e);break;case"ajax":this.loadAjaxContent(e);break;case"pdf":case ht:case ut:case dt:e.preload=!1;case"iframe":this.setIframeContent(e)}this.setAspectRatio(e)}}setAspectRatio(e){const t=e.contentEl;if(!(e.el&&t&&e.type&&[ut,dt,pt].includes(e.type)))return;let i,s=e.width||"auto",n=e.height||"auto";if("auto"===s||"auto"===n){i=this.optionFor(e,"videoRatio");const t=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=t&&t.length>2?parseFloat(t[1])/parseFloat(t[2]):parseFloat(i+"")}else s&&n&&(i=s/n);if(!i)return;t.style.aspectRatio="",t.style.width="",t.style.height="",t.offsetHeight;const r=t.getBoundingClientRect(),a=r.width||1,o=r.height||1;t.style.aspectRatio=i+"",i<a/o?(n="auto"===n?o:Math.min(o,n),t.style.width="auto",t.style.height=`${n}px`):(s="auto"===s?a:Math.min(a,s),t.style.width=`${s}px`,t.style.height="auto")}attach(){const e=this,t=e.instance;t.on("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.on("Carousel.createSlide",e.onCreateSlide),t.on("Carousel.selectSlide",e.onSelectSlide),t.on("Carousel.unselectSlide",e.onUnselectSlide),t.on("Carousel.Panzoom.refresh",e.onRefresh),t.on("done",e.onDone),t.on("clearContent",e.onClearContent),window.addEventListener("message",e.onMessage)}detach(){const e=this,t=e.instance;t.off("Carousel.beforeInitSlide",e.onBeforeInitSlide),t.off("Carousel.createSlide",e.onCreateSlide),t.off("Carousel.selectSlide",e.onSelectSlide),t.off("Carousel.unselectSlide",e.onUnselectSlide),t.off("Carousel.Panzoom.refresh",e.onRefresh),t.off("done",e.onDone),t.off("clearContent",e.onClearContent),window.removeEventListener("message",e.onMessage)}}Object.defineProperty(gt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}}});const yt="play",vt="pause",bt="ready";class _t extends Me{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:bt}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==bt}onReady(e){this.option("autoStart")&&(e.isInfinite||e.page<e.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){"visible"===document.visibilityState?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var e;this.inHover=!1,(null===(e=this.instance.panzoom)||void 0===e?void 0:e.isResting)&&this.resume()}onTimerEnd(){const e=this.instance;"play"===this.state&&(e.isInfinite||e.page!==e.pages.length-1?e.slideNext():e.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var e;if(!this.option("showProgress"))return null;this.removeProgressBar();const t=this.instance,i=(null===(e=t.pages[t.page])||void 0===e?void 0:e.slides)||[];let s=this.option("progressParentEl");if(s||(s=(1===i.length?i[0].el:null)||t.viewport),!s)return null;const n=document.createElement("div");return fe(n,"f-progress"),s.prepend(n),this.progressBar=n,n.offsetHeight,n}set(){const e=this,t=e.instance;if(t.pages.length<2)return;if(e.timer)return;const i=e.option("timeout");e.state=yt,fe(t.container,"has-autoplay");let s=e.createProgressBar();s&&(s.style.transitionDuration=`${i}ms`,s.style.transform="scaleX(1)"),e.timer=setTimeout(()=>{e.timer=null,e.inHover||e.onTimerEnd()},i),e.emit("set")}clear(){const e=this;e.timer&&(clearTimeout(e.timer),e.timer=null),e.removeProgressBar()}start(){const e=this;if(e.set(),e.state!==bt){if(e.option("pauseOnHover")){const t=e.instance.container;t.addEventListener("mouseenter",e.onMouseEnter,!1),t.addEventListener("mouseleave",e.onMouseLeave,!1)}document.addEventListener("visibilitychange",e.onVisibilityChange,!1),e.emit("start")}}stop(){const e=this,t=e.state,i=e.instance.container;e.clear(),e.state=bt,i.removeEventListener("mouseenter",e.onMouseEnter,!1),i.removeEventListener("mouseleave",e.onMouseLeave,!1),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),pe(i,"has-autoplay"),t!==bt&&e.emit("stop")}pause(){const e=this;e.state===yt&&(e.state=vt,e.clear(),e.emit(vt))}resume(){const e=this,t=e.instance;if(t.isInfinite||t.page!==t.pages.length-1)if(e.state!==yt){if(e.state===vt&&!e.inHover){const t=new Event("resume",{bubbles:!0,cancelable:!0});e.emit("resume",t),t.defaultPrevented||e.set()}}else e.set();else e.stop()}toggle(){this.state===yt||this.state===vt?this.stop():this.start()}attach(){const e=this,t=e.instance;t.on("ready",e.onReady),t.on("Panzoom.startAnimation",e.onChange),t.on("Panzoom.endAnimation",e.onSettle),t.on("Panzoom.touchMove",e.onChange)}detach(){const e=this,t=e.instance;t.off("ready",e.onReady),t.off("Panzoom.startAnimation",e.onChange),t.off("Panzoom.endAnimation",e.onSettle),t.off("Panzoom.touchMove",e.onChange),e.stop()}}Object.defineProperty(_t,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class xt extends Me{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(e){const t=e.carousel;if(!t)return;const i=e.container;i&&(t.options.Autoplay=ie({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{e.emit("startSlideshow")},set:t=>{var s;i.classList.add("has-slideshow"),(null===(s=e.getSlide())||void 0===s?void 0:s.state)!==Xe.Ready&&t.pause()},stop:()=>{i.classList.remove("has-slideshow"),e.isCompact||e.endIdle(),e.emit("endSlideshow")},resume:(t,i)=>{var s,n,r;!i||!i.cancelable||(null===(s=e.getSlide())||void 0===s?void 0:s.state)===Xe.Ready&&(null===(r=null===(n=e.carousel)||void 0===n?void 0:n.panzoom)||void 0===r?void 0:r.isResting)||i.preventDefault()}}}),t.attachPlugins({Autoplay:_t}),this.ref=t.plugins.Autoplay)}onReady(e){const t=e.carousel,i=this.ref;i&&t&&this.option("playOnStart")&&(t.isInfinite||t.page<t.pages.length-1)&&i.start()}onDone(e,t){const i=this.ref,s=e.carousel;if(!i||!s)return;const n=t.panzoom;n&&n.on("startAnimation",()=>{e.isCurrentSlide(t)&&i.stop()}),e.isCurrentSlide(t)&&i.resume()}onKeydown(e,t){var i;const s=this.ref;s&&t===this.option("key")&&"BUTTON"!==(null===(i=document.activeElement)||void 0===i?void 0:i.nodeName)&&s.toggle()}attach(){const e=this,t=e.instance;t.on("Carousel.init",e.onPrepare),t.on("Carousel.ready",e.onReady),t.on("done",e.onDone),t.on("keydown",e.onKeydown)}detach(){const e=this,t=e.instance;t.off("Carousel.init",e.onPrepare),t.off("Carousel.ready",e.onReady),t.off("done",e.onDone),t.off("keydown",e.onKeydown)}}Object.defineProperty(xt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:e=>{var t;return(null===(t=e.instance.container)||void 0===t?void 0:t.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||e.instance.container},timeout:3e3}});const wt={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var St;!function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Hidden=2]="Hidden"}(St||(St={}));const kt="isResting",Tt="thumbWidth",Et="thumbHeight",Ct="thumbClipWidth";let At=class extends Me{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:St.Init})}get isModern(){return"modern"===this.type}onInitSlide(e,t){const i=t.el?t.el.dataset:void 0;i&&(t.thumbSrc=i.thumbSrc||t.thumbSrc||"",t[Ct]=parseFloat(i[Ct]||"")||t[Ct]||0,t[Et]=parseFloat(i.thumbHeight||"")||t[Et]||0),this.addSlide(t)}onInitSlides(){this.build()}onChange(){var e;if(!this.isModern)return;const t=this.container,i=this.instance,s=i.panzoom,n=this.carousel,r=n?n.panzoom:null,a=i.page;if(s&&n&&r){if(s.isDragging){pe(t,this.cn(kt));let s=(null===(e=n.pages[a])||void 0===e?void 0:e.pos)||0;s+=i.getProgress(a)*(this[Ct]+this.thumbGap);let o=r.getBounds();-1*s>o.x.min&&-1*s<o.x.max&&r.panTo({x:-1*s,friction:.12})}else X(t,this.cn(kt),s.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const e of this.instance.slides||[])this.resizeModernSlide(e);this.shiftModern()}isDisabled(){const e=this.option("minCount")||0;if(e){const t=this.instance;let i=0;for(const e of t.slides||[])e.thumbSrc&&i++;if(i<e)return!0}const t=this.option("type");return["modern","classic"].indexOf(t)<0}getThumb(e){const t=this.option("thumbTpl")||"";return{html:this.instance.localize(t,[["%i",e.index],["%d",e.index+1],["%s",e.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(e){const t=this.carousel;t&&t.addSlide(e.index,this.getThumb(e))}getSlides(){const e=[];for(const t of this.instance.slides||[])e.push(this.getThumb(t));return e}resizeModernSlide(e){this.isModern&&(e[Tt]=e[Ct]&&e[Et]?Math.round(this[Et]*(e[Ct]/e[Et])):this[Tt])}updateProps(){const e=this.container;if(!e)return;const t=t=>parseFloat(getComputedStyle(e).getPropertyValue("--f-thumb-"+t))||0;this.thumbGap=t("gap"),this.thumbExtraGap=t("extra-gap"),this[Tt]=t("width")||40,this[Ct]=t("clip-width")||40,this[Et]=t("height")||40}build(){const e=this;if(e.state!==St.Init)return;if(e.isDisabled())return void e.emit("disabled");const t=e.instance,i=t.container,s=e.getSlides(),n=e.option("type");e.type=n;const r=e.option("parentEl"),a=e.cn("container"),o=e.cn("track");let l=null==r?void 0:r.querySelector("."+a);l||(l=document.createElement("div"),fe(l,a),r?r.appendChild(l):i.after(l)),fe(l,`is-${n}`),fe(i,e.cn("hasThumbs")),e.container=l,e.updateProps();let c=l.querySelector("."+o);c||(c=document.createElement("div"),fe(c,e.cn("track")),l.appendChild(c)),e.track=c;const h=ie({},{track:c,infinite:!1,center:!0,fill:"classic"===n,dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},e.option("Carousel")||{},{Sync:{target:t},slides:s}),u=new t.constructor(l,h);u.on("createSlide",(t,i)=>{e.setProps(i.index),e.emit("createSlide",i,i.el)}),u.on("ready",()=>{e.shiftModern(),e.emit("ready")}),u.on("refresh",()=>{e.shiftModern()}),u.on("Panzoom.click",(t,i,s)=>{e.onClick(s)}),e.carousel=u,e.state=St.Ready}onClick(e){e.preventDefault(),e.stopPropagation();const t=this.instance,{pages:i,page:s}=t,n=e=>{if(e){const t=e.closest("[data-carousel-index]");if(t)return[parseInt(t.dataset.carouselIndex||"",10)||0,t]}return[-1,void 0]},r=(e,t)=>{const i=document.elementFromPoint(e,t);return i?n(i):[-1,void 0]};let[a,o]=n(e.target);if(a>-1)return;const l=this[Ct],c=e.clientX,h=e.clientY;let[u,d]=r(c-l,h),[p,f]=r(c+l,h);d&&f?(a=Math.abs(c-d.getBoundingClientRect().right)<Math.abs(c-f.getBoundingClientRect().left)?u:p,a===s&&(a=a===u?p:u)):d?a=u:f&&(a=p),a>-1&&i[a]&&t.slideTo(a)}getShift(e){var t;const i=this,{instance:s}=i,n=i.carousel;if(!s||!n)return 0;const r=i[Tt],a=i[Ct],o=i.thumbGap,l=i.thumbExtraGap;if(!(null===(t=n.slides[e])||void 0===t?void 0:t.el))return 0;const c=.5*(r-a),h=s.pages.length-1;let u=s.getProgress(0),d=s.getProgress(h),p=s.getProgress(e,!1,!0),f=0,m=c+l+o;const g=u<0&&u>-1,y=d>0&&d<1;return 0===e?(f=m*Math.abs(u),y&&1===u&&(f-=m*Math.abs(d))):e===h?(f=m*Math.abs(d)*-1,g&&-1===d&&(f+=m*Math.abs(u))):g||y?(f=-1*m,f+=m*Math.abs(u),f+=m*(1-Math.abs(d))):f=m*p,f}setProps(e){var t;const i=this;if(!i.isModern)return;const{instance:s}=i,n=i.carousel;if(s&&n){const r=null===(t=n.slides[e])||void 0===t?void 0:t.el;if(r&&r.childNodes.length){let t=$(1-Math.abs(s.getProgress(e))),n=$(i.getShift(e));r.style.setProperty("--progress",t?t+"":""),r.style.setProperty("--shift",n+"")}}}shiftModern(){const e=this;if(!e.isModern)return;const{instance:t,track:i}=e,s=t.panzoom,n=e.carousel;if(!(t&&i&&s&&n))return;if(s.state===ae.Init||s.state===ae.Destroy)return;for(const i of t.slides)e.setProps(i.index);let r=(e[Ct]+e.thumbGap)*(n.slides.length||0);i.style.setProperty("--width",r+"")}cleanup(){const e=this;e.carousel&&e.carousel.destroy(),e.carousel=null,e.container&&e.container.remove(),e.container=null,e.track&&e.track.remove(),e.track=null,e.state=St.Init,pe(e.instance.container,e.cn("hasThumbs"))}attach(){const e=this,t=e.instance;t.on("initSlide",e.onInitSlide),t.state===Ee.Init?t.on("initSlides",e.onInitSlides):e.onInitSlides(),t.on(["change","Panzoom.afterTransform"],e.onChange),t.on("Panzoom.refresh",e.onRefresh)}detach(){const e=this,t=e.instance;t.off("initSlide",e.onInitSlide),t.off("initSlides",e.onInitSlides),t.off(["change","Panzoom.afterTransform"],e.onChange),t.off("Panzoom.refresh",e.onRefresh),e.cleanup()}};Object.defineProperty(At,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:wt});const Mt=Object.assign(Object.assign({},wt),{key:"t",showOnStart:!0,parentEl:null}),Pt="is-masked",Lt="aria-hidden";class It extends Me{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const e=this.ref;return e&&!e.isDisabled()}get isHidden(){return this.hidden}onClick(e,t){t.stopPropagation()}onCreateSlide(e,t){var i,s,n;const r=(null===(n=null===(s=null===(i=this.instance)||void 0===i?void 0:i.carousel)||void 0===s?void 0:s.slides[t.index])||void 0===n?void 0:n.type)||"",a=t.el;if(a&&r){let e=`for-${r}`;["video","youtube","vimeo","html5video"].includes(r)&&(e+=" for-video"),fe(a,e)}}onInit(){var e;const t=this,i=t.instance,s=i.carousel;if(t.ref||!s)return;const n=t.option("parentEl")||i.footer||i.container;if(!n)return;const r=ie({},t.options,{parentEl:n,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:e=>{const i=e.container;i&&this.hidden&&(t.refresh(),i.style.transition="none",t.hide(),i.offsetHeight,queueMicrotask(()=>{i.style.transition="",t.show()}))}}});r.Carousel=r.Carousel||{},r.Carousel.on=ie((null===(e=t.options.Carousel)||void 0===e?void 0:e.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),s.options.Thumbs=r,s.attachPlugins({Thumbs:At}),t.ref=s.plugins.Thumbs,t.option("showOnStart")||(t.ref.state=St.Hidden,t.hidden=!0)}onResize(){var e;const t=null===(e=this.ref)||void 0===e?void 0:e.container;t&&(t.style.maxHeight="")}onKeydown(e,t){const i=this.option("key");i&&i===t&&this.toggle()}toggle(){const e=this.ref;if(e&&!e.isDisabled())return e.state===St.Hidden?(e.state=St.Init,void e.build()):void(this.hidden?this.show():this.hide())}show(){const e=this.ref;if(!e||e.isDisabled())return;const t=e.container;t&&(this.refresh(),t.offsetHeight,t.removeAttribute(Lt),t.classList.remove(Pt),this.hidden=!1)}hide(){const e=this.ref,t=e&&e.container;t&&(this.refresh(),t.offsetHeight,t.classList.add(Pt),t.setAttribute(Lt,"true")),this.hidden=!0}refresh(){const e=this.ref;if(!e||!e.state)return;const t=e.container,i=(null==t?void 0:t.firstChild)||null;t&&i&&i.childNodes.length&&(t.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){const e=this,t=e.instance;t.state===Ye.Init?t.on("Carousel.init",e.onInit):e.onInit(),t.on("resize",e.onResize),t.on("keydown",e.onKeydown)}detach(){var e;const t=this,i=t.instance;i.off("Carousel.init",t.onInit),i.off("resize",t.onResize),i.off("keydown",t.onKeydown),null===(e=i.carousel)||void 0===e||e.detachPlugins(["Thumbs"]),t.ref=null}}Object.defineProperty(It,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Mt});const Rt={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var Ot;!function(e){e[e.Init=0]="Init",e[e.Ready=1]="Ready",e[e.Disabled=2]="Disabled"}(Ot||(Ot={}));const Ft={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},Bt="has-toolbar",Dt="fancybox__toolbar";class jt extends Me{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ot.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(e){var t;if(!e.carousel)return;let i=this.option("display"),s=this.option("absolute"),n=this.option("enabled");if("auto"===n){const e=this.instance.carousel;let t=0;if(e)for(const i of e.slides)(i.panzoom||"image"===i.type)&&t++;t||(n=!1)}n||(i=void 0);let r=0;const a={left:[],middle:[],right:[]};if(i)for(const e of["left","middle","right"])for(const s of i[e]){const i=this.createEl(s);i&&(null===(t=a[e])||void 0===t||t.push(i),r++)}let o=null;if(r&&(o=this.createContainer()),o){for(const[e,t]of Object.entries(a)){const i=document.createElement("div");fe(i,Dt+"__column is-"+e);for(const e of t)i.appendChild(e);"auto"!==s||"middle"!==e||t.length||(s=!0),o.appendChild(i)}!0===s&&fe(o,"is-absolute"),this.state=Ot.Ready,this.onRefresh()}else this.state=Ot.Disabled}onClick(e){var t,i;const s=this.instance,n=s.getSlide(),r=null==n?void 0:n.panzoom,a=e.target,o=a&&de(a)?a.dataset:null;if(!o)return;if(void 0!==o.fancyboxToggleThumbs)return e.preventDefault(),e.stopPropagation(),void(null===(t=s.plugins.Thumbs)||void 0===t||t.toggle());if(void 0!==o.fancyboxToggleFullscreen)return e.preventDefault(),e.stopPropagation(),void this.instance.toggleFullscreen();if(void 0!==o.fancyboxToggleSlideshow){e.preventDefault(),e.stopPropagation();const t=null===(i=s.carousel)||void 0===i?void 0:i.plugins.Autoplay;let n=t.isActive;return r&&"mousemove"===r.panMode&&!n&&r.reset(),void(n?t.stop():t.start())}const l=o.panzoomAction,c=o.panzoomChange;if((c||l)&&(e.preventDefault(),e.stopPropagation()),c){let t={};try{t=JSON.parse(c)}catch(e){}r&&r.applyChange(t)}else l&&r&&r[l]&&r[l]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const e=this.container;if(!e)return;const t=this.instance.getSlide();if(!t||t.state!==Xe.Ready)return;const i=t&&!t.error&&t.panzoom;for(const t of e.querySelectorAll("[data-panzoom-action]"))i?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));let s=i&&i.canZoomIn(),n=i&&i.canZoomOut();for(const t of e.querySelectorAll('[data-panzoom-action="zoomIn"]'))s?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of e.querySelectorAll('[data-panzoom-action="zoomOut"]'))n?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));for(const t of e.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){n||s?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"));const e=t.querySelector("g");e&&(e.style.display=s?"":"none")}}onDone(e,t){var i;null===(i=t.panzoom)||void 0===i||i.on("afterTransform",()=>{this.instance.isCurrentSlide(t)&&this.onRefresh()}),this.instance.isCurrentSlide(t)&&this.onRefresh()}createContainer(){const e=this.instance.container;if(!e)return null;const t=this.option("parentEl")||e;let i=t.querySelector("."+Dt);return i||(i=document.createElement("div"),fe(i,Dt),t.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),e&&fe(e,Bt),this.container=i,i}createEl(e){const t=this.instance,i=t.carousel;if(!i)return null;if("toggleFS"===e)return null;if("fullscreen"===e&&!We())return null;let s=null;const n=i.slides.length||0;let r=0,a=0;for(const e of i.slides)(e.panzoom||"image"===e.type)&&r++,("image"===e.type||e.downloadSrc)&&a++;if(n<2&&["infobar","prev","next"].includes(e))return s;if(void 0!==Rt[e]&&!r)return null;if("download"===e&&!a)return null;if("thumbs"===e){const e=t.plugins.Thumbs;if(!e||!e.isEnabled)return null}if("slideshow"===e&&(!i.plugins.Autoplay||n<2))return null;if(void 0!==Rt[e]){const t=Rt[e];s=document.createElement("button"),s.setAttribute("title",this.instance.localize(`{{${e.toUpperCase()}}}`)),fe(s,"f-button"),t.action&&(s.dataset.panzoomAction=t.action),t.change&&(s.dataset.panzoomChange=JSON.stringify(t.change)),s.appendChild(G(this.instance.localize(t.icon)))}else{const t=(this.option("items")||[])[e];t&&(s=G(this.instance.localize(t.tpl)),"function"==typeof t.click&&s.addEventListener("click",e=>{e.preventDefault(),e.stopPropagation(),"function"==typeof t.click&&t.click.call(this,this,e)}))}const o=null==s?void 0:s.querySelector("svg");if(o)for(const[e,t]of Object.entries(Ft))o.getAttribute(e)||o.setAttribute(e,String(t));return s}removeContainer(){const e=this.container;e&&e.remove(),this.container=null,this.state=Ot.Disabled;const t=this.instance.container;t&&pe(t,Bt)}attach(){const e=this,t=e.instance;t.on("Carousel.initSlides",e.onReady),t.on("done",e.onDone),t.on(["reveal","Carousel.change"],e.onChange),e.onReady(e.instance)}detach(){const e=this,t=e.instance;t.off("Carousel.initSlides",e.onReady),t.off("done",e.onDone),t.off(["reveal","Carousel.change"],e.onChange),e.removeContainer()}}Object.defineProperty(jt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null}});const Nt={Hash:class extends Me{onReady(){Ze=!1}onChange(e){Qe&&clearTimeout(Qe);const{hash:t}=et(),{hash:i}=tt(),s=e.isOpeningSlide(e.getSlide());s&&(Ke=i===t?"":i),t&&t!==i&&(Qe=setTimeout(()=>{try{if(e.state===Ye.Ready){let e="replaceState";s&&!Je&&(e="pushState",Je=!0),window.history[e]({},document.title,window.location.pathname+window.location.search+t)}}catch(e){}},300))}onClose(e){if(Qe&&clearTimeout(Qe),!Ze&&Je)return Je=!1,Ze=!1,void window.history.back();if(!Ze)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(Ke||""))}catch(e){}}attach(){const e=this.instance;e.on("ready",this.onReady),e.on(["Carousel.ready","Carousel.change"],this.onChange),e.on("close",this.onClose)}detach(){const e=this.instance;e.off("ready",this.onReady),e.off(["Carousel.ready","Carousel.change"],this.onChange),e.off("close",this.onClose)}static parseURL(){return tt()}static startFromUrl(){it()}static destroy(){window.removeEventListener("hashchange",nt,!1)}},Html:gt,Images:ot,Slideshow:xt,Thumbs:It,Toolbar:jt},Vt="with-fancybox",zt="hide-scrollbar",Ht="--fancybox-scrollbar-compensate",qt="--fancybox-body-margin",$t="aria-hidden",Ut="is-using-tab",Wt="is-animated",Gt="is-compact",Yt="is-loading",Xt="is-opening",Kt="has-caption",Zt="disabled",Jt="tabindex",Qt="download",ei="href",ti="src",ii=e=>"string"==typeof e,si=function(){var e=window.getSelection();return!!e&&"Range"===e.type};let ni,ri=null,ai=null,oi=0,li=0,ci=0,hi=0;const ui=new Map;let di=0;class pi extends re{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(e=[],t={},i={}){super(t),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Ye.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),ni||(ni=We()),this.id=t.id||++di,ui.set(this.id,this),this.userSlides=e,this.userPlugins=i,queueMicrotask(()=>{this.init()})}init(){if(this.state===Ye.Destroy)return;this.state=Ye.Init,this.attachPlugins(Object.assign(Object.assign({},pi.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),!0===this.option("hideScrollbar")&&(()=>{if(!He)return;const e=document,t=e.body,i=e.documentElement;if(t.classList.contains(zt))return;let s=window.innerWidth-i.getBoundingClientRect().width;const n=parseFloat(window.getComputedStyle(t).marginRight);s<0&&(s=0),i.style.setProperty(Ht,`${s}px`),n&&t.style.setProperty(qt,`${n}px`),t.classList.add(zt)})(),this.initLayout(),this.scale();const e=()=>{this.initCarousel(this.userSlides),this.state=Ye.Ready,this.attachEvents(),this.emit("ready"),setTimeout(()=>{this.container&&this.container.setAttribute($t,"false")},16)};this.option("Fullscreen.autoStart")&&ni&&!ni.isFullscreen()?ni.request().then(()=>{this.startedFs=!0,e()}).catch(()=>e()):e()}initLayout(){var e,t;const i=this.option("parentEl")||document.body,s=G(this.localize(this.option("tpl.main")||""));if(s){if(s.setAttribute("id",`fancybox-${this.id}`),s.setAttribute("aria-label",this.localize("{{MODAL}}")),s.classList.toggle(Gt,this.isCompact),fe(s,this.option("mainClass")||""),fe(s,Xt),this.container=s,this.footer=s.querySelector(".fancybox__footer"),i.appendChild(s),fe(document.documentElement,Vt),ri&&ai||(ri=document.createElement("span"),fe(ri,"fancybox-focus-guard"),ri.setAttribute(Jt,"0"),ri.setAttribute($t,"true"),ri.setAttribute("aria-label","Focus guard"),ai=ri.cloneNode(),null===(e=s.parentElement)||void 0===e||e.insertBefore(ri,s),null===(t=s.parentElement)||void 0===t||t.append(ai)),s.addEventListener("mousedown",e=>{oi=e.pageX,li=e.pageY,pe(s,Ut)}),this.option("closeExisting"))for(const e of ui.values())e.id!==this.id&&e.close();else this.option("animated")&&(fe(s,Wt),setTimeout(()=>{this.isClosing()||pe(s,Wt)},350));this.emit("initLayout")}}initCarousel(e){const t=this.container;if(!t)return;const i=t.querySelector(".fancybox__carousel");if(!i)return;const s=this.carousel=new Ve(i,ie({},{slides:e,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",(e,t,...i)=>{this.emit(`Carousel.${t}`,e,...i)}),s.on(["ready","change"],()=>{this.manageCaption()}),this.on("Carousel.removeSlide",(e,t,i)=>{this.clearContent(i),i.state=void 0}),s.on("Panzoom.touchStart",()=>{var e,t;this.isCompact||this.endIdle(),(null===(e=document.activeElement)||void 0===e?void 0:e.closest(".f-thumbs"))&&(null===(t=this.container)||void 0===t||t.focus())}),s.on("settle",()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()}),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",(e,t)=>{const i=this.getSlide();if(i&&U(i.el))return;const s=this.container;if(s){const e=Math.abs(t.current.f),i=e<1?"":Math.max(.5,Math.min(1,1-e/t.contentRect.fitHeight*1.5));s.style.setProperty("--fancybox-ts",i?"0s":""),s.style.setProperty("--fancybox-opacity",i+"")}}),s.on("Panzoom.touchEnd",(e,t,i)=>{var s;const n=this.getSlide();if(n&&U(n.el))return;if(t.isMobile&&document.activeElement&&-1!==["TEXTAREA","INPUT"].indexOf(null===(s=document.activeElement)||void 0===s?void 0:s.nodeName))return;const r=Math.abs(t.dragOffset.y);"y"===t.lockedAxis&&(r>=200||r>=50&&t.dragOffset.time<300)&&(i&&i.cancelable&&i.preventDefault(),this.close(i,"f-throwOut"+(t.current.f<0?"Up":"Down")))})),s.on("change",e=>{var t;let i=null===(t=this.getSlide())||void 0===t?void 0:t.triggerEl;if(i){const t=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:e.page});i.dispatchEvent(t)}}),s.on(["refresh","change"],e=>{const t=this.container;if(!t)return;for(const i of t.querySelectorAll("[data-fancybox-current-index]"))i.innerHTML=e.page+1;for(const i of t.querySelectorAll("[data-fancybox-count]"))i.innerHTML=e.pages.length;if(!e.isInfinite){for(const i of t.querySelectorAll("[data-fancybox-next]"))e.page<e.pages.length-1?(i.removeAttribute(Zt),i.removeAttribute(Jt)):(i.setAttribute(Zt,""),i.setAttribute(Jt,"-1"));for(const i of t.querySelectorAll("[data-fancybox-prev]"))e.page>0?(i.removeAttribute(Zt),i.removeAttribute(Jt)):(i.setAttribute(Zt,""),i.setAttribute(Jt,"-1"))}const i=this.getSlide();if(!i)return;let s=i.downloadSrc||"";s||"image"!==i.type||i.error||!ii(i[ti])||(s=i[ti]);for(const e of t.querySelectorAll("[data-fancybox-download]")){const t=i.downloadFilename;s?(e.removeAttribute(Zt),e.removeAttribute(Jt),e.setAttribute(ei,s),e.setAttribute(Qt,t||s),e.setAttribute("target","_blank")):(e.setAttribute(Zt,""),e.setAttribute(Jt,"-1"),e.removeAttribute(ei),e.removeAttribute(Qt))}}),this.emit("initCarousel")}attachEvents(){const e=this,t=e.container;if(!t)return;t.addEventListener("click",e.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",e.onVisibilityChange,!1),document.addEventListener("mousemove",e.onMousemove),e.option("trapFocus")&&document.addEventListener("focus",e.onFocus,!0),window.addEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.addEventListener("scroll",e.onResize),i.addEventListener("resize",e.onResize))}detachEvents(){const e=this,t=e.container;if(!t)return;document.removeEventListener("keydown",e.onKeydown,{passive:!1,capture:!0}),t.removeEventListener("wheel",e.onWheel,{passive:!1,capture:!1}),t.removeEventListener("click",e.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",e.onMousemove),window.removeEventListener("resize",e.onResize);const i=window.visualViewport;i&&(i.removeEventListener("resize",e.onResize),i.removeEventListener("scroll",e.onResize)),document.removeEventListener("visibilitychange",e.onVisibilityChange,!1),document.removeEventListener("focus",e.onFocus,!0)}scale(){const e=this.container;if(!e)return;const t=window.visualViewport,i=Math.max(1,(null==t?void 0:t.scale)||1);let s="",n="",r="";if(t&&i>1){let e=`${t.offsetLeft}px`,a=`${t.offsetTop}px`;s=t.width*i+"px",n=t.height*i+"px",r=`translate3d(${e}, ${a}, 0) scale(${1/i})`}e.style.transform=r,e.style.width=s,e.style.height=n}onClick(e){var t;const{container:i,isCompact:s}=this;if(!i||this.isClosing())return;!s&&this.option("idle")&&this.resetIdle();const n=e.composedPath()[0];if(n.closest(".fancybox-spinner")||n.closest("[data-fancybox-close]"))return e.preventDefault(),void this.close(e);if(n.closest("[data-fancybox-prev]"))return e.preventDefault(),void this.prev();if(n.closest("[data-fancybox-next]"))return e.preventDefault(),void this.next();if("click"===e.type&&0===e.detail)return;if(Math.abs(e.pageX-oi)>30||Math.abs(e.pageY-li)>30)return;const r=document.activeElement;if(si()&&r&&i.contains(r))return;if(s&&"image"===(null===(t=this.getSlide())||void 0===t?void 0:t.type))return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout(()=>{this.toggleIdle(),this.clickTimer=null},350));if(this.emit("click",e),e.defaultPrevented)return;let a=!1;if(n.closest(".fancybox__content")){if(r){if(r.closest("[contenteditable]"))return;n.matches($e)||r.blur()}if(si())return;a=this.option("contentClick")}else n.closest(".fancybox__carousel")&&!n.matches($e)&&(a=this.option("backdropClick"));"close"===a?(e.preventDefault(),this.close(e)):"next"===a?(e.preventDefault(),this.next()):"prev"===a&&(e.preventDefault(),this.prev())}onWheel(e){const t=e.target;let i=this.option("wheel",e);t.closest(".fancybox__thumbs")&&(i="slide");const s="slide"===i,n=[-e.deltaX||0,-e.deltaY||0,-e.detail||0].reduce(function(e,t){return Math.abs(t)>Math.abs(e)?t:e}),r=Math.max(-1,Math.min(1,n)),a=Date.now();this.pwt&&a-this.pwt<300?s&&e.preventDefault():(this.pwt=a,this.emit("wheel",e,r),e.defaultPrevented||("close"===i?(e.preventDefault(),this.close(e)):"slide"===i&&(W(t)||(e.preventDefault(),this[r>0?"prev":"next"]()))))}onScroll(){window.scrollTo(ci,hi)}onKeydown(e){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const t=e.key,i=this.option("keyboard");if(!i)return;const s=e.composedPath()[0],n=document.activeElement&&document.activeElement.classList,r=n&&n.contains("f-button")||s.dataset.carouselPage||s.dataset.carouselIndex;if("Escape"!==t&&!r&&de(s)&&(s.isContentEditable||-1!==["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(s.nodeName)))return;if("Tab"===e.key?fe(this.container,Ut):pe(this.container,Ut),e.ctrlKey||e.altKey||e.shiftKey)return;this.emit("keydown",t,e);const a=i[t];a&&"function"==typeof this[a]&&(e.preventDefault(),this[a]())}onResize(){const e=this.container;if(!e)return;const t=this.isCompact;e.classList.toggle(Gt,t),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(e){this.isTopmost()&&this.checkFocus(e)}onMousemove(e){this.prevMouseMoveEvent=e,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){"visible"===document.visibilityState?this.checkFocus():this.endIdle()}manageCloseBtn(e){const t=this.optionFor(e,"closeButton")||!1;if("auto"===t){const e=this.plugins.Toolbar;if(e&&e.state===Ot.Ready)return}if(!t)return;if(!e.contentEl||e.closeBtnEl)return;const i=this.option("tpl.closeButton");if(i){const t=G(this.localize(i));e.closeBtnEl=e.contentEl.appendChild(t),e.el&&fe(e.el,"has-close-btn")}}manageCaption(e=void 0){var t,i;const s="fancybox__caption",n=this.container;if(!n)return;pe(n,Kt);const r=this.isCompact||this.option("commonCaption"),a=!r;if(this.caption&&this.stop(this.caption),a&&this.caption&&(this.caption.remove(),this.caption=null),r&&!this.caption)for(const e of(null===(t=this.carousel)||void 0===t?void 0:t.slides)||[])e.captionEl&&(e.captionEl.remove(),e.captionEl=void 0,pe(e.el,Kt),null===(i=e.el)||void 0===i||i.removeAttribute("aria-labelledby"));if(e||(e=this.getSlide()),!e||r&&!this.isCurrentSlide(e))return;const o=e.el;let l=this.optionFor(e,"caption","");if(!l)return void(r&&this.caption&&this.animate(this.caption,"f-fadeOut",()=>{this.caption&&(this.caption.innerHTML="")}));let c=null;if(a){if(c=e.captionEl||null,o&&!c){const t=s+`_${this.id}_${e.index}`;c=document.createElement("div"),fe(c,s),c.setAttribute("id",t),e.captionEl=o.appendChild(c),fe(o,Kt),o.setAttribute("aria-labelledby",t)}}else c=this.caption,c||(c=n.querySelector("."+s)),c||(c=document.createElement("div"),c.dataset.fancyboxCaption="",fe(c,s),(this.footer||n).prepend(c)),fe(n,Kt),this.caption=c;c&&(c.innerHTML="",ii(l)||"number"==typeof l?c.innerHTML=l+"":l instanceof HTMLElement&&c.appendChild(l))}checkFocus(e){this.focus(e)}focus(e){var t;if(this.ignoreFocusChange)return;const i=document.activeElement||null,s=(null==e?void 0:e.target)||null,n=this.container,r=null===(t=this.carousel)||void 0===t?void 0:t.viewport;if(!n||!r)return;if(!e&&i&&n.contains(i))return;const a=this.getSlide(),o=a&&a.state===Xe.Ready?a.el:null;if(!o||o.contains(i)||n===i)return;e&&e.cancelable&&e.preventDefault(),this.ignoreFocusChange=!0;const l=Array.from(n.querySelectorAll($e));let c=[],h=null;for(let e of l){const t=!e.offsetParent||!!e.closest('[aria-hidden="true"]'),i=o&&o.contains(e),s=!r.contains(e);if(e===n||(i||s)&&!t){c.push(e);const t=e.dataset.origTabindex;void 0!==t&&t&&(e.tabIndex=parseFloat(t)),e.removeAttribute("data-orig-tabindex"),!e.hasAttribute("autoFocus")&&h||(h=e)}else{const t=void 0===e.dataset.origTabindex?e.getAttribute("tabindex")||"":e.dataset.origTabindex;t&&(e.dataset.origTabindex=t),e.tabIndex=-1}}let u=null;e?(!s||c.indexOf(s)<0)&&(u=h||n,c.length&&(i===ai?u=c[0]:this.lastFocus!==n&&i!==ri||(u=c[c.length-1]))):u=a&&"image"===a.type?n:h||n,u&&Ue(u),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const e=this.carousel;e&&e.pages.length>1&&e.slideNext()}prev(){const e=this.carousel;e&&e.pages.length>1&&e.slidePrev()}jumpTo(...e){this.carousel&&this.carousel.slideTo(...e)}isTopmost(){var e;return(null===(e=pi.getInstance())||void 0===e?void 0:e.id)==this.id}animate(e=null,t="",i){if(!e||!t)return void(i&&i());this.stop(e);const s=n=>{n.target===e&&e.dataset.animationName&&(e.removeEventListener("animationend",s),delete e.dataset.animationName,i&&i(),pe(e,t))};e.dataset.animationName=t,e.addEventListener("animationend",s),fe(e,t)}stop(e){e&&e.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:e}))}setContent(e,t="",i=!0){if(this.isClosing())return;const s=e.el;if(!s)return;let n=null;if(de(t)?n=t:(n=G(t+""),de(n)||(n=document.createElement("div"),n.innerHTML=t+"")),["img","picture","iframe","video","audio"].includes(n.nodeName.toLowerCase())){const e=document.createElement("div");e.appendChild(n),n=e}de(n)&&e.filter&&!e.error&&(n=n.querySelector(e.filter)),n&&de(n)?(fe(n,"fancybox__content"),e.id&&n.setAttribute("id",e.id),s.classList.add(`has-${e.error?"error":e.type||"unknown"}`),s.prepend(n),"none"===n.style.display&&(n.style.display=""),"none"===getComputedStyle(n).getPropertyValue("display")&&(n.style.display=e.display||this.option("defaultDisplay")||"flex"),e.contentEl=n,i&&this.revealContent(e),this.manageCloseBtn(e),this.manageCaption(e)):this.setError(e,"{{ELEMENT_NOT_FOUND}}")}revealContent(e,t){const i=e.el,s=e.contentEl;i&&s&&(this.emit("reveal",e),this.hideLoading(e),e.state=Xe.Opening,(t=this.isOpeningSlide(e)?void 0===t?this.optionFor(e,"showClass"):t:"f-fadeIn")?this.animate(s,t,()=>{this.done(e)}):this.done(e))}done(e){this.isClosing()||(e.state=Xe.Ready,this.emit("done",e),fe(e.el,"is-done"),this.isCurrentSlide(e)&&this.option("autoFocus")&&queueMicrotask(()=>{var t;null===(t=e.panzoom)||void 0===t||t.updateControls(),this.option("autoFocus")&&this.focus()}),this.isOpeningSlide(e)&&(pe(this.container,Xt),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(e){const t=this.getSlide();return!(!e||!t)&&t.index===e.index}isOpeningSlide(e){var t,i;return null===(null===(t=this.carousel)||void 0===t?void 0:t.prevPage)&&e&&e.index===(null===(i=this.getSlide())||void 0===i?void 0:i.index)}showLoading(e){e.state=Xe.Loading;const t=e.el;t&&(fe(t,Yt),this.emit("loading",e),e.spinnerEl||setTimeout(()=>{if(!this.isClosing()&&!e.spinnerEl&&e.state===Xe.Loading){let i=G(ue);fe(i,"fancybox-spinner"),e.spinnerEl=i,t.prepend(i),this.animate(i,"f-fadeIn")}},250))}hideLoading(e){const t=e.el;if(!t)return;const i=e.spinnerEl;this.isClosing()?null==i||i.remove():(pe(t,Yt),i&&this.animate(i,"f-fadeOut",()=>{i.remove()}),e.state===Xe.Loading&&(this.emit("loaded",e),e.state=Xe.Ready))}setError(e,t){if(this.isClosing())return;const i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,e),i.defaultPrevented)return;e.error=t,this.hideLoading(e),this.clearContent(e);const s=document.createElement("div");s.classList.add("fancybox-error"),s.innerHTML=this.localize(t||"<p>{{ERROR}}</p>"),this.setContent(e,s)}clearContent(e){if(void 0===e.state)return;this.emit("clearContent",e),e.contentEl&&(e.contentEl.remove(),e.contentEl=void 0);const t=e.el;t&&(pe(t,"has-error"),pe(t,"has-unknown"),pe(t,`has-${e.type||"unknown"}`)),e.closeBtnEl&&e.closeBtnEl.remove(),e.closeBtnEl=void 0,e.captionEl&&e.captionEl.remove(),e.captionEl=void 0,e.spinnerEl&&e.spinnerEl.remove(),e.spinnerEl=void 0}getSlide(){var e;const t=this.carousel;return(null===(e=null==t?void 0:t.pages[null==t?void 0:t.page])||void 0===e?void 0:e.slides[0])||void 0}close(e,t){if(this.isClosing())return;const i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,e),i.defaultPrevented)return;e&&e.cancelable&&(e.preventDefault(),e.stopPropagation());const s=()=>{this.proceedClose(e,t)};this.startedFs&&ni&&ni.isFullscreen()?Promise.resolve(ni.exit()).then(()=>s()):s()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(e=!1){const t=()=>{this.clearIdle(),this.idle=!0,fe(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(e)t();else{const e=this.option("idle");e&&(this.idleTimer=setTimeout(t,e))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,pe(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){ni&&(ni.isFullscreen()?ni.exit():ni.request().then(()=>{this.startedFs=!0}))}isClosing(){return[Ye.Closing,Ye.CustomClosing,Ye.Destroy].includes(this.state)}proceedClose(e,t){var i,s;this.state=Ye.Closing,this.clearIdle(),this.detachEvents();const n=this.container,r=this.carousel,a=this.getSlide(),o=a&&this.option("placeFocusBack")?a.triggerEl||this.option("triggerEl"):null;if(o&&(ze(o)?Ue(o):o.focus()),n&&(pe(n,Xt),fe(n,"is-closing"),n.setAttribute($t,"true"),this.option("animated")&&fe(n,Wt),n.style.pointerEvents="none"),r){r.clearTransitions(),null===(i=r.panzoom)||void 0===i||i.destroy(),null===(s=r.plugins.Navigation)||void 0===s||s.detach();for(const e of r.slides){e.state=Xe.Closing,this.hideLoading(e);const t=e.contentEl;t&&this.stop(t);const i=null==e?void 0:e.panzoom;i&&(i.stop(),i.detachEvents(),i.detachObserver()),this.isCurrentSlide(e)||r.emit("removeSlide",e)}}ci=window.scrollX,hi=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",e),this.state!==Ye.CustomClosing?(void 0===t&&a&&(t=this.optionFor(a,"hideClass")),t&&a?(this.animate(a.contentEl,t,()=>{r&&r.emit("removeSlide",a)}),setTimeout(()=>{this.destroy()},500)):this.destroy()):setTimeout(()=>{this.destroy()},500)}destroy(){var e;if(this.state===Ye.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=Ye.Destroy,null===(e=this.carousel)||void 0===e||e.destroy();const t=this.container;t&&t.remove(),ui.delete(this.id);const i=pi.getInstance();i?i.focus():(ri&&(ri.remove(),ri=null),ai&&(ai.remove(),ai=null),pe(document.documentElement,Vt),(()=>{if(!He)return;const e=document,t=e.body;t.classList.remove(zt),t.style.setProperty(qt,""),e.documentElement.style.setProperty(Ht,"")})(),this.emit("destroy"))}static bind(e,t,i){if(!He)return;let s,n="",r={};if(void 0===e?s=document.body:ii(e)?(s=document.body,n=e,"object"==typeof t&&(r=t||{})):(s=e,ii(t)&&(n=t),"object"==typeof i&&(r=i||{})),!s||!de(s))return;n=n||"[data-fancybox]";const a=pi.openers.get(s)||new Map;a.set(n,r),pi.openers.set(s,a),1===a.size&&s.addEventListener("click",pi.fromEvent)}static unbind(e,t){let i,s="";if(ii(e)?(i=document.body,s=e):(i=e,ii(t)&&(s=t)),!i)return;const n=pi.openers.get(i);n&&s&&n.delete(s),s&&n||(pi.openers.delete(i),i.removeEventListener("click",pi.fromEvent))}static destroy(){let e;for(;e=pi.getInstance();)e.destroy();for(const e of pi.openers.keys())e.removeEventListener("click",pi.fromEvent);pi.openers=new Map}static fromEvent(e){if(e.defaultPrevented)return;if(e.button&&0!==e.button)return;if(e.ctrlKey||e.metaKey||e.shiftKey)return;let t=e.composedPath()[0];const i=t.closest("[data-fancybox-trigger]");if(i){const e=i.dataset.fancyboxTrigger||"",s=document.querySelectorAll(`[data-fancybox="${e}"]`),n=parseInt(i.dataset.fancyboxIndex||"",10)||0;t=s[n]||t}if(!(t&&t instanceof Element))return;let s,n,r,a;if([...pi.openers].reverse().find(([e,i])=>!(!e.contains(t)||![...i].reverse().find(([i,o])=>{let l=t.closest(i);return!!l&&(s=e,n=i,r=l,a=o,!0)}))),!s||!n||!r)return;a=a||{},e.preventDefault(),t=r;let o=[],l=ie({},Ge,a);l.event=e,l.triggerEl=t,l.delegate=i;const c=l.groupAll,h=l.groupAttr,u=h&&t?t.getAttribute(`${h}`):"";if((!t||u||c)&&(o=[].slice.call(s.querySelectorAll(n))),t&&!c&&(o=u?o.filter(e=>e.getAttribute(`${h}`)===u):[t]),!o.length)return;const d=pi.getInstance();return d&&d.options.triggerEl&&o.indexOf(d.options.triggerEl)>-1?void 0:(t&&(l.startIndex=o.indexOf(t)),pi.fromNodes(o,l))}static fromSelector(e,t,i){let s=null,n="",r={};if(ii(e)?(s=document.body,n=e,"object"==typeof t&&(r=t||{})):e instanceof HTMLElement&&ii(t)&&(s=e,n=t,"object"==typeof i&&(r=i||{})),!s||!n)return!1;const a=pi.openers.get(s);return!!a&&(r=ie({},a.get(n)||{},r),!!r&&pi.fromNodes(Array.from(s.querySelectorAll(n)),r))}static fromNodes(e,t){t=ie({},Ge,t||{});const i=[];for(const s of e){const e=s.dataset||{},n=e[ti]||s.getAttribute(ei)||s.getAttribute("currentSrc")||s.getAttribute(ti)||void 0;let r;const a=t.delegate;let o;a&&i.length===t.startIndex&&(r=a instanceof HTMLImageElement?a:a.querySelector("img:not([aria-hidden])")),r||(r=s instanceof HTMLImageElement?s:s.querySelector("img:not([aria-hidden])")),r&&(o=r.currentSrc||r[ti]||void 0,!o&&r.dataset&&(o=r.dataset.lazySrc||r.dataset[ti]||void 0));const l={src:n,triggerEl:s,thumbEl:r,thumbElSrc:o,thumbSrc:o};for(const t in e){let i=e[t]+"";i="false"!==i&&("true"===i||i),l[t]=i}i.push(l)}return new pi(i,t)}static getInstance(e){return e?ui.get(e):Array.from(ui.values()).reverse().find(e=>!e.isClosing()&&e)||null}static getSlide(){var e;return(null===(e=pi.getInstance())||void 0===e?void 0:e.getSlide())||null}static show(e=[],t={}){return new pi(e,t)}static next(){const e=pi.getInstance();e&&e.next()}static prev(){const e=pi.getInstance();e&&e.prev()}static close(e=!0,...t){if(e)for(const e of ui.values())e.close(...t);else{const e=pi.getInstance();e&&e.close(...t)}}}function fi(e){return null!==e&&"object"==typeof e&&"constructor"in e&&e.constructor===Object}function mi(e,t){void 0===e&&(e={}),void 0===t&&(t={});const i=["__proto__","constructor","prototype"];Object.keys(t).filter(e=>i.indexOf(e)<0).forEach(i=>{void 0===e[i]?e[i]=t[i]:fi(t[i])&&fi(e[i])&&Object.keys(t[i]).length>0&&mi(e[i],t[i])})}Object.defineProperty(pi,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(pi,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Ge}),Object.defineProperty(pi,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:Nt}),Object.defineProperty(pi,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),pi.bind("[data-fancybox=certificates]",{hideScrollbar:!1,Toolbar:{display:{left:[],middle:[],right:["close"]}}});const gi={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector:()=>null,querySelectorAll:()=>[],getElementById:()=>null,createEvent:()=>({initEvent(){}}),createElement:()=>({children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName:()=>[]}),createElementNS:()=>({}),importNode:()=>null,location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function yi(){const e="undefined"!=typeof document?document:{};return mi(e,gi),e}const vi={document:gi,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle:()=>({getPropertyValue:()=>""}),Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia:()=>({}),requestAnimationFrame:e=>"undefined"==typeof setTimeout?(e(),null):setTimeout(e,0),cancelAnimationFrame(e){"undefined"!=typeof setTimeout&&clearTimeout(e)}};function bi(){const e="undefined"!=typeof window?window:{};return mi(e,vi),e}function _i(e){return void 0===e&&(e=""),e.trim().split(" ").filter(e=>!!e.trim())}function xi(e,t){return void 0===t&&(t=0),setTimeout(e,t)}function wi(){return Date.now()}function Si(e){return"object"==typeof e&&null!==e&&e.constructor&&"Object"===Object.prototype.toString.call(e).slice(8,-1)}function ki(e){return"undefined"!=typeof window&&void 0!==window.HTMLElement?e instanceof HTMLElement:e&&(1===e.nodeType||11===e.nodeType)}function Ti(){const e=Object(arguments.length<=0?void 0:arguments[0]),t=["__proto__","constructor","prototype"];for(let i=1;i<arguments.length;i+=1){const s=i<0||arguments.length<=i?void 0:arguments[i];if(null!=s&&!ki(s)){const i=Object.keys(Object(s)).filter(e=>t.indexOf(e)<0);for(let t=0,n=i.length;t<n;t+=1){const n=i[t],r=Object.getOwnPropertyDescriptor(s,n);void 0!==r&&r.enumerable&&(Si(e[n])&&Si(s[n])?s[n].__swiper__?e[n]=s[n]:Ti(e[n],s[n]):!Si(e[n])&&Si(s[n])?(e[n]={},s[n].__swiper__?e[n]=s[n]:Ti(e[n],s[n])):e[n]=s[n])}}}return e}function Ei(e,t,i){e.style.setProperty(t,i)}function Ci(e){let{swiper:t,targetPosition:i,side:s}=e;const n=bi(),r=-t.translate;let a,o=null;const l=t.params.speed;t.wrapperEl.style.scrollSnapType="none",n.cancelAnimationFrame(t.cssModeFrameID);const c=i>r?"next":"prev",h=(e,t)=>"next"===c&&e>=t||"prev"===c&&e<=t,u=()=>{a=(new Date).getTime(),null===o&&(o=a);const e=Math.max(Math.min((a-o)/l,1),0),c=.5-Math.cos(e*Math.PI)/2;let d=r+c*(i-r);if(h(d,i)&&(d=i),t.wrapperEl.scrollTo({[s]:d}),h(d,i))return t.wrapperEl.style.overflow="hidden",t.wrapperEl.style.scrollSnapType="",setTimeout(()=>{t.wrapperEl.style.overflow="",t.wrapperEl.scrollTo({[s]:d})}),void n.cancelAnimationFrame(t.cssModeFrameID);t.cssModeFrameID=n.requestAnimationFrame(u)};u()}function Ai(e){return e.querySelector(".swiper-slide-transform")||e.shadowRoot&&e.shadowRoot.querySelector(".swiper-slide-transform")||e}function Mi(e,t){void 0===t&&(t="");const i=bi(),s=[...e.children];return i.HTMLSlotElement&&e instanceof HTMLSlotElement&&s.push(...e.assignedElements()),t?s.filter(e=>e.matches(t)):s}function Pi(e){try{return void console.warn(e)}catch(e){}}function Li(e,t){void 0===t&&(t=[]);const i=document.createElement(e);return i.classList.add(...Array.isArray(t)?t:_i(t)),i}function Ii(e,t){return bi().getComputedStyle(e,null).getPropertyValue(t)}function Ri(e){let t,i=e;if(i){for(t=0;null!==(i=i.previousSibling);)1===i.nodeType&&(t+=1);return t}}function Oi(e,t){const i=[];let s=e.parentElement;for(;s;)t?s.matches(t)&&i.push(s):i.push(s),s=s.parentElement;return i}function Fi(e,t,i){const s=bi();return i?e["width"===t?"offsetWidth":"offsetHeight"]+parseFloat(s.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-right":"margin-top"))+parseFloat(s.getComputedStyle(e,null).getPropertyValue("width"===t?"margin-left":"margin-bottom")):e.offsetWidth}function Bi(e){return(Array.isArray(e)?e:[e]).filter(e=>!!e)}function Di(e,t){void 0===t&&(t=""),"undefined"!=typeof trustedTypes?e.innerHTML=trustedTypes.createPolicy("html",{createHTML:e=>e}).createHTML(t):e.innerHTML=t}let ji,Ni,Vi;function zi(){return ji||(ji=function(){const e=bi(),t=yi();return{smoothScroll:t.documentElement&&t.documentElement.style&&"scrollBehavior"in t.documentElement.style,touch:!!("ontouchstart"in e||e.DocumentTouch&&t instanceof e.DocumentTouch)}}()),ji}function Hi(e){return void 0===e&&(e={}),Ni||(Ni=function(e){let{userAgent:t}=void 0===e?{}:e;const i=zi(),s=bi(),n=s.navigator.platform,r=t||s.navigator.userAgent,a={ios:!1,android:!1},o=s.screen.width,l=s.screen.height,c=r.match(/(Android);?[\s\/]+([\d.]+)?/);let h=r.match(/(iPad).*OS\s([\d_]+)/);const u=r.match(/(iPod)(.*OS\s([\d_]+))?/),d=!h&&r.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p="Win32"===n;let f="MacIntel"===n;return!h&&f&&i.touch&&["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"].indexOf(`${o}x${l}`)>=0&&(h=r.match(/(Version)\/([\d.]+)/),h||(h=[0,1,"13_0_0"]),f=!1),c&&!p&&(a.os="android",a.android=!0),(h||d||u)&&(a.os="ios",a.ios=!0),a}(e)),Ni}function qi(){return Vi||(Vi=function(){const e=bi(),t=Hi();let i=!1;function s(){const t=e.navigator.userAgent.toLowerCase();return t.indexOf("safari")>=0&&t.indexOf("chrome")<0&&t.indexOf("android")<0}if(s()){const t=String(e.navigator.userAgent);if(t.includes("Version/")){const[e,s]=t.split("Version/")[1].split(" ")[0].split(".").map(e=>Number(e));i=e<16||16===e&&s<2}}const n=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e.navigator.userAgent),r=s();return{isSafari:i||r,needPerspectiveFix:i,need3dFix:r||n&&t.ios,isWebView:n}}()),Vi}var $i={on(e,t,i){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!=typeof t)return s;const n=i?"unshift":"push";return e.split(" ").forEach(e=>{s.eventsListeners[e]||(s.eventsListeners[e]=[]),s.eventsListeners[e][n](t)}),s},once(e,t,i){const s=this;if(!s.eventsListeners||s.destroyed)return s;if("function"!=typeof t)return s;function n(){s.off(e,n),n.__emitterProxy&&delete n.__emitterProxy;for(var i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];t.apply(s,r)}return n.__emitterProxy=t,s.on(e,n,i)},onAny(e,t){const i=this;if(!i.eventsListeners||i.destroyed)return i;if("function"!=typeof e)return i;const s=t?"unshift":"push";return i.eventsAnyListeners.indexOf(e)<0&&i.eventsAnyListeners[s](e),i},offAny(e){const t=this;if(!t.eventsListeners||t.destroyed)return t;if(!t.eventsAnyListeners)return t;const i=t.eventsAnyListeners.indexOf(e);return i>=0&&t.eventsAnyListeners.splice(i,1),t},off(e,t){const i=this;return!i.eventsListeners||i.destroyed?i:i.eventsListeners?(e.split(" ").forEach(e=>{void 0===t?i.eventsListeners[e]=[]:i.eventsListeners[e]&&i.eventsListeners[e].forEach((s,n)=>{(s===t||s.__emitterProxy&&s.__emitterProxy===t)&&i.eventsListeners[e].splice(n,1)})}),i):i},emit(){const e=this;if(!e.eventsListeners||e.destroyed)return e;if(!e.eventsListeners)return e;let t,i,s;for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return"string"==typeof r[0]||Array.isArray(r[0])?(t=r[0],i=r.slice(1,r.length),s=e):(t=r[0].events,i=r[0].data,s=r[0].context||e),i.unshift(s),(Array.isArray(t)?t:t.split(" ")).forEach(t=>{e.eventsAnyListeners&&e.eventsAnyListeners.length&&e.eventsAnyListeners.forEach(e=>{e.apply(s,[t,...i])}),e.eventsListeners&&e.eventsListeners[t]&&e.eventsListeners[t].forEach(e=>{e.apply(s,i)})}),e}};const Ui=(e,t,i)=>{t&&!e.classList.contains(i)?e.classList.add(i):!t&&e.classList.contains(i)&&e.classList.remove(i)},Wi=(e,t,i)=>{t&&!e.classList.contains(i)?e.classList.add(i):!t&&e.classList.contains(i)&&e.classList.remove(i)},Gi=(e,t)=>{if(!e||e.destroyed||!e.params)return;const i=t.closest(e.isElement?"swiper-slide":`.${e.params.slideClass}`);if(i){let t=i.querySelector(`.${e.params.lazyPreloaderClass}`);!t&&e.isElement&&(i.shadowRoot?t=i.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{i.shadowRoot&&(t=i.shadowRoot.querySelector(`.${e.params.lazyPreloaderClass}`),t&&t.remove())})),t&&t.remove()}},Yi=(e,t)=>{if(!e.slides[t])return;const i=e.slides[t].querySelector('[loading="lazy"]');i&&i.removeAttribute("loading")},Xi=e=>{if(!e||e.destroyed||!e.params)return;let t=e.params.lazyPreloadPrevNext;const i=e.slides.length;if(!i||!t||t<0)return;t=Math.min(t,i);const s="auto"===e.params.slidesPerView?e.slidesPerViewDynamic():Math.ceil(e.params.slidesPerView),n=e.activeIndex;if(e.params.grid&&e.params.grid.rows>1){const i=n,r=[i-t];return r.push(...Array.from({length:t}).map((e,t)=>i+s+t)),void e.slides.forEach((t,i)=>{r.includes(t.column)&&Yi(e,i)})}const r=n+s-1;if(e.params.rewind||e.params.loop)for(let s=n-t;s<=r+t;s+=1){const t=(s%i+i)%i;(t<n||t>r)&&Yi(e,t)}else for(let s=Math.max(n-t,0);s<=Math.min(r+t,i-1);s+=1)s!==n&&(s>r||s<n)&&Yi(e,s)};var Ki={updateSize:function(){const e=this;let t,i;const s=e.el;t=void 0!==e.params.width&&null!==e.params.width?e.params.width:s.clientWidth,i=void 0!==e.params.height&&null!==e.params.height?e.params.height:s.clientHeight,0===t&&e.isHorizontal()||0===i&&e.isVertical()||(t=t-parseInt(Ii(s,"padding-left")||0,10)-parseInt(Ii(s,"padding-right")||0,10),i=i-parseInt(Ii(s,"padding-top")||0,10)-parseInt(Ii(s,"padding-bottom")||0,10),Number.isNaN(t)&&(t=0),Number.isNaN(i)&&(i=0),Object.assign(e,{width:t,height:i,size:e.isHorizontal()?t:i}))},updateSlides:function(){const e=this;function t(t,i){return parseFloat(t.getPropertyValue(e.getDirectionLabel(i))||0)}const i=e.params,{wrapperEl:s,slidesEl:n,size:r,rtlTranslate:a,wrongRTL:o}=e,l=e.virtual&&i.virtual.enabled,c=l?e.virtual.slides.length:e.slides.length,h=Mi(n,`.${e.params.slideClass}, swiper-slide`),u=l?e.virtual.slides.length:h.length;let d=[];const p=[],f=[];let m=i.slidesOffsetBefore;"function"==typeof m&&(m=i.slidesOffsetBefore.call(e));let g=i.slidesOffsetAfter;"function"==typeof g&&(g=i.slidesOffsetAfter.call(e));const y=e.snapGrid.length,v=e.slidesGrid.length;let b=i.spaceBetween,_=-m,x=0,w=0;if(void 0===r)return;"string"==typeof b&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*r:"string"==typeof b&&(b=parseFloat(b)),e.virtualSize=-b,h.forEach(e=>{a?e.style.marginLeft="":e.style.marginRight="",e.style.marginBottom="",e.style.marginTop=""}),i.centeredSlides&&i.cssMode&&(Ei(s,"--swiper-centered-offset-before",""),Ei(s,"--swiper-centered-offset-after",""));const S=i.grid&&i.grid.rows>1&&e.grid;let k;S?e.grid.initSlides(h):e.grid&&e.grid.unsetSlides();const T="auto"===i.slidesPerView&&i.breakpoints&&Object.keys(i.breakpoints).filter(e=>void 0!==i.breakpoints[e].slidesPerView).length>0;for(let s=0;s<u;s+=1){let n;if(k=0,h[s]&&(n=h[s]),S&&e.grid.updateSlide(s,n,h),!h[s]||"none"!==Ii(n,"display")){if("auto"===i.slidesPerView){T&&(h[s].style[e.getDirectionLabel("width")]="");const r=getComputedStyle(n),a=n.style.transform,o=n.style.webkitTransform;if(a&&(n.style.transform="none"),o&&(n.style.webkitTransform="none"),i.roundLengths)k=e.isHorizontal()?Fi(n,"width",!0):Fi(n,"height",!0);else{const e=t(r,"width"),i=t(r,"padding-left"),s=t(r,"padding-right"),a=t(r,"margin-left"),o=t(r,"margin-right"),l=r.getPropertyValue("box-sizing");if(l&&"border-box"===l)k=e+a+o;else{const{clientWidth:t,offsetWidth:r}=n;k=e+i+s+a+o+(r-t)}}a&&(n.style.transform=a),o&&(n.style.webkitTransform=o),i.roundLengths&&(k=Math.floor(k))}else k=(r-(i.slidesPerView-1)*b)/i.slidesPerView,i.roundLengths&&(k=Math.floor(k)),h[s]&&(h[s].style[e.getDirectionLabel("width")]=`${k}px`);h[s]&&(h[s].swiperSlideSize=k),f.push(k),i.centeredSlides?(_=_+k/2+x/2+b,0===x&&0!==s&&(_=_-r/2-b),0===s&&(_=_-r/2-b),Math.abs(_)<.001&&(_=0),i.roundLengths&&(_=Math.floor(_)),w%i.slidesPerGroup===0&&d.push(_),p.push(_)):(i.roundLengths&&(_=Math.floor(_)),(w-Math.min(e.params.slidesPerGroupSkip,w))%e.params.slidesPerGroup===0&&d.push(_),p.push(_),_=_+k+b),e.virtualSize+=k+b,x=k,w+=1}}if(e.virtualSize=Math.max(e.virtualSize,r)+g,a&&o&&("slide"===i.effect||"coverflow"===i.effect)&&(s.style.width=`${e.virtualSize+b}px`),i.setWrapperSize&&(s.style[e.getDirectionLabel("width")]=`${e.virtualSize+b}px`),S&&e.grid.updateWrapperSize(k,d),!i.centeredSlides){const t=[];for(let s=0;s<d.length;s+=1){let n=d[s];i.roundLengths&&(n=Math.floor(n)),d[s]<=e.virtualSize-r&&t.push(n)}d=t,Math.floor(e.virtualSize-r)-Math.floor(d[d.length-1])>1&&d.push(e.virtualSize-r)}if(l&&i.loop){const t=f[0]+b;if(i.slidesPerGroup>1){const s=Math.ceil((e.virtual.slidesBefore+e.virtual.slidesAfter)/i.slidesPerGroup),n=t*i.slidesPerGroup;for(let e=0;e<s;e+=1)d.push(d[d.length-1]+n)}for(let s=0;s<e.virtual.slidesBefore+e.virtual.slidesAfter;s+=1)1===i.slidesPerGroup&&d.push(d[d.length-1]+t),p.push(p[p.length-1]+t),e.virtualSize+=t}if(0===d.length&&(d=[0]),0!==b){const t=e.isHorizontal()&&a?"marginLeft":e.getDirectionLabel("marginRight");h.filter((e,t)=>!(i.cssMode&&!i.loop)||t!==h.length-1).forEach(e=>{e.style[t]=`${b}px`})}if(i.centeredSlides&&i.centeredSlidesBounds){let e=0;f.forEach(t=>{e+=t+(b||0)}),e-=b;const t=e>r?e-r:0;d=d.map(e=>e<=0?-m:e>t?t+g:e)}if(i.centerInsufficientSlides){let e=0;f.forEach(t=>{e+=t+(b||0)}),e-=b;const t=(i.slidesOffsetBefore||0)+(i.slidesOffsetAfter||0);if(e+t<r){const i=(r-e-t)/2;d.forEach((e,t)=>{d[t]=e-i}),p.forEach((e,t)=>{p[t]=e+i})}}if(Object.assign(e,{slides:h,snapGrid:d,slidesGrid:p,slidesSizesGrid:f}),i.centeredSlides&&i.cssMode&&!i.centeredSlidesBounds){Ei(s,"--swiper-centered-offset-before",-d[0]+"px"),Ei(s,"--swiper-centered-offset-after",e.size/2-f[f.length-1]/2+"px");const t=-e.snapGrid[0],i=-e.slidesGrid[0];e.snapGrid=e.snapGrid.map(e=>e+t),e.slidesGrid=e.slidesGrid.map(e=>e+i)}if(u!==c&&e.emit("slidesLengthChange"),d.length!==y&&(e.params.watchOverflow&&e.checkOverflow(),e.emit("snapGridLengthChange")),p.length!==v&&e.emit("slidesGridLengthChange"),i.watchSlidesProgress&&e.updateSlidesOffset(),e.emit("slidesUpdated"),!(l||i.cssMode||"slide"!==i.effect&&"fade"!==i.effect)){const t=`${i.containerModifierClass}backface-hidden`,s=e.el.classList.contains(t);u<=i.maxBackfaceHiddenSlides?s||e.el.classList.add(t):s&&e.el.classList.remove(t)}},updateAutoHeight:function(e){const t=this,i=[],s=t.virtual&&t.params.virtual.enabled;let n,r=0;"number"==typeof e?t.setTransition(e):!0===e&&t.setTransition(t.params.speed);const a=e=>s?t.slides[t.getSlideIndexByData(e)]:t.slides[e];if("auto"!==t.params.slidesPerView&&t.params.slidesPerView>1)if(t.params.centeredSlides)(t.visibleSlides||[]).forEach(e=>{i.push(e)});else for(n=0;n<Math.ceil(t.params.slidesPerView);n+=1){const e=t.activeIndex+n;if(e>t.slides.length&&!s)break;i.push(a(e))}else i.push(a(t.activeIndex));for(n=0;n<i.length;n+=1)if(void 0!==i[n]){const e=i[n].offsetHeight;r=e>r?e:r}(r||0===r)&&(t.wrapperEl.style.height=`${r}px`)},updateSlidesOffset:function(){const e=this,t=e.slides,i=e.isElement?e.isHorizontal()?e.wrapperEl.offsetLeft:e.wrapperEl.offsetTop:0;for(let s=0;s<t.length;s+=1)t[s].swiperSlideOffset=(e.isHorizontal()?t[s].offsetLeft:t[s].offsetTop)-i-e.cssOverflowAdjustment()},updateSlidesProgress:function(e){void 0===e&&(e=this&&this.translate||0);const t=this,i=t.params,{slides:s,rtlTranslate:n,snapGrid:r}=t;if(0===s.length)return;void 0===s[0].swiperSlideOffset&&t.updateSlidesOffset();let a=-e;n&&(a=e),t.visibleSlidesIndexes=[],t.visibleSlides=[];let o=i.spaceBetween;"string"==typeof o&&o.indexOf("%")>=0?o=parseFloat(o.replace("%",""))/100*t.size:"string"==typeof o&&(o=parseFloat(o));for(let e=0;e<s.length;e+=1){const l=s[e];let c=l.swiperSlideOffset;i.cssMode&&i.centeredSlides&&(c-=s[0].swiperSlideOffset);const h=(a+(i.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+o),u=(a-r[0]+(i.centeredSlides?t.minTranslate():0)-c)/(l.swiperSlideSize+o),d=-(a-c),p=d+t.slidesSizesGrid[e],f=d>=0&&d<=t.size-t.slidesSizesGrid[e],m=d>=0&&d<t.size-1||p>1&&p<=t.size||d<=0&&p>=t.size;m&&(t.visibleSlides.push(l),t.visibleSlidesIndexes.push(e)),Ui(l,m,i.slideVisibleClass),Ui(l,f,i.slideFullyVisibleClass),l.progress=n?-h:h,l.originalProgress=n?-u:u}},updateProgress:function(e){const t=this;if(void 0===e){const i=t.rtlTranslate?-1:1;e=t&&t.translate&&t.translate*i||0}const i=t.params,s=t.maxTranslate()-t.minTranslate();let{progress:n,isBeginning:r,isEnd:a,progressLoop:o}=t;const l=r,c=a;if(0===s)n=0,r=!0,a=!0;else{n=(e-t.minTranslate())/s;const i=Math.abs(e-t.minTranslate())<1,o=Math.abs(e-t.maxTranslate())<1;r=i||n<=0,a=o||n>=1,i&&(n=0),o&&(n=1)}if(i.loop){const i=t.getSlideIndexByData(0),s=t.getSlideIndexByData(t.slides.length-1),n=t.slidesGrid[i],r=t.slidesGrid[s],a=t.slidesGrid[t.slidesGrid.length-1],l=Math.abs(e);o=l>=n?(l-n)/a:(l+a-r)/a,o>1&&(o-=1)}Object.assign(t,{progress:n,progressLoop:o,isBeginning:r,isEnd:a}),(i.watchSlidesProgress||i.centeredSlides&&i.autoHeight)&&t.updateSlidesProgress(e),r&&!l&&t.emit("reachBeginning toEdge"),a&&!c&&t.emit("reachEnd toEdge"),(l&&!r||c&&!a)&&t.emit("fromEdge"),t.emit("progress",n)},updateSlidesClasses:function(){const e=this,{slides:t,params:i,slidesEl:s,activeIndex:n}=e,r=e.virtual&&i.virtual.enabled,a=e.grid&&i.grid&&i.grid.rows>1,o=e=>Mi(s,`.${i.slideClass}${e}, swiper-slide${e}`)[0];let l,c,h;if(r)if(i.loop){let t=n-e.virtual.slidesBefore;t<0&&(t=e.virtual.slides.length+t),t>=e.virtual.slides.length&&(t-=e.virtual.slides.length),l=o(`[data-swiper-slide-index="${t}"]`)}else l=o(`[data-swiper-slide-index="${n}"]`);else a?(l=t.find(e=>e.column===n),h=t.find(e=>e.column===n+1),c=t.find(e=>e.column===n-1)):l=t[n];l&&(a||(h=function(e,t){const i=[];for(;e.nextElementSibling;){const s=e.nextElementSibling;t?s.matches(t)&&i.push(s):i.push(s),e=s}return i}(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&!h&&(h=t[0]),c=function(e,t){const i=[];for(;e.previousElementSibling;){const s=e.previousElementSibling;t?s.matches(t)&&i.push(s):i.push(s),e=s}return i}(l,`.${i.slideClass}, swiper-slide`)[0],i.loop&&0===!c&&(c=t[t.length-1]))),t.forEach(e=>{Wi(e,e===l,i.slideActiveClass),Wi(e,e===h,i.slideNextClass),Wi(e,e===c,i.slidePrevClass)}),e.emitSlidesClasses()},updateActiveIndex:function(e){const t=this,i=t.rtlTranslate?t.translate:-t.translate,{snapGrid:s,params:n,activeIndex:r,realIndex:a,snapIndex:o}=t;let l,c=e;const h=e=>{let i=e-t.virtual.slidesBefore;return i<0&&(i=t.virtual.slides.length+i),i>=t.virtual.slides.length&&(i-=t.virtual.slides.length),i};if(void 0===c&&(c=function(e){const{slidesGrid:t,params:i}=e,s=e.rtlTranslate?e.translate:-e.translate;let n;for(let e=0;e<t.length;e+=1)void 0!==t[e+1]?s>=t[e]&&s<t[e+1]-(t[e+1]-t[e])/2?n=e:s>=t[e]&&s<t[e+1]&&(n=e+1):s>=t[e]&&(n=e);return i.normalizeSlideIndex&&(n<0||void 0===n)&&(n=0),n}(t)),s.indexOf(i)>=0)l=s.indexOf(i);else{const e=Math.min(n.slidesPerGroupSkip,c);l=e+Math.floor((c-e)/n.slidesPerGroup)}if(l>=s.length&&(l=s.length-1),c===r&&!t.params.loop)return void(l!==o&&(t.snapIndex=l,t.emit("snapIndexChange")));if(c===r&&t.params.loop&&t.virtual&&t.params.virtual.enabled)return void(t.realIndex=h(c));const u=t.grid&&n.grid&&n.grid.rows>1;let d;if(t.virtual&&n.virtual.enabled&&n.loop)d=h(c);else if(u){const e=t.slides.find(e=>e.column===c);let i=parseInt(e.getAttribute("data-swiper-slide-index"),10);Number.isNaN(i)&&(i=Math.max(t.slides.indexOf(e),0)),d=Math.floor(i/n.grid.rows)}else if(t.slides[c]){const e=t.slides[c].getAttribute("data-swiper-slide-index");d=e?parseInt(e,10):c}else d=c;Object.assign(t,{previousSnapIndex:o,snapIndex:l,previousRealIndex:a,realIndex:d,previousIndex:r,activeIndex:c}),t.initialized&&Xi(t),t.emit("activeIndexChange"),t.emit("snapIndexChange"),(t.initialized||t.params.runCallbacksOnInit)&&(a!==d&&t.emit("realIndexChange"),t.emit("slideChange"))},updateClickedSlide:function(e,t){const i=this,s=i.params;let n=e.closest(`.${s.slideClass}, swiper-slide`);!n&&i.isElement&&t&&t.length>1&&t.includes(e)&&[...t.slice(t.indexOf(e)+1,t.length)].forEach(e=>{!n&&e.matches&&e.matches(`.${s.slideClass}, swiper-slide`)&&(n=e)});let r,a=!1;if(n)for(let e=0;e<i.slides.length;e+=1)if(i.slides[e]===n){a=!0,r=e;break}if(!n||!a)return i.clickedSlide=void 0,void(i.clickedIndex=void 0);i.clickedSlide=n,i.virtual&&i.params.virtual.enabled?i.clickedIndex=parseInt(n.getAttribute("data-swiper-slide-index"),10):i.clickedIndex=r,s.slideToClickedSlide&&void 0!==i.clickedIndex&&i.clickedIndex!==i.activeIndex&&i.slideToClickedSlide()}},Zi={getTranslate:function(e){void 0===e&&(e=this.isHorizontal()?"x":"y");const{params:t,rtlTranslate:i,translate:s,wrapperEl:n}=this;if(t.virtualTranslate)return i?-s:s;if(t.cssMode)return s;let r=function(e,t){void 0===t&&(t="x");const i=bi();let s,n,r;const a=function(e){const t=bi();let i;return t.getComputedStyle&&(i=t.getComputedStyle(e,null)),!i&&e.currentStyle&&(i=e.currentStyle),i||(i=e.style),i}(e);return i.WebKitCSSMatrix?(n=a.transform||a.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(e=>e.replace(",",".")).join(", ")),r=new i.WebKitCSSMatrix("none"===n?"":n)):(r=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),s=r.toString().split(",")),"x"===t&&(n=i.WebKitCSSMatrix?r.m41:16===s.length?parseFloat(s[12]):parseFloat(s[4])),"y"===t&&(n=i.WebKitCSSMatrix?r.m42:16===s.length?parseFloat(s[13]):parseFloat(s[5])),n||0}(n,e);return r+=this.cssOverflowAdjustment(),i&&(r=-r),r||0},setTranslate:function(e,t){const i=this,{rtlTranslate:s,params:n,wrapperEl:r,progress:a}=i;let o,l=0,c=0;i.isHorizontal()?l=s?-e:e:c=e,n.roundLengths&&(l=Math.floor(l),c=Math.floor(c)),i.previousTranslate=i.translate,i.translate=i.isHorizontal()?l:c,n.cssMode?r[i.isHorizontal()?"scrollLeft":"scrollTop"]=i.isHorizontal()?-l:-c:n.virtualTranslate||(i.isHorizontal()?l-=i.cssOverflowAdjustment():c-=i.cssOverflowAdjustment(),r.style.transform=`translate3d(${l}px, ${c}px, 0px)`);const h=i.maxTranslate()-i.minTranslate();o=0===h?0:(e-i.minTranslate())/h,o!==a&&i.updateProgress(e),i.emit("setTranslate",i.translate,t)},minTranslate:function(){return-this.snapGrid[0]},maxTranslate:function(){return-this.snapGrid[this.snapGrid.length-1]},translateTo:function(e,t,i,s,n){void 0===e&&(e=0),void 0===t&&(t=this.params.speed),void 0===i&&(i=!0),void 0===s&&(s=!0);const r=this,{params:a,wrapperEl:o}=r;if(r.animating&&a.preventInteractionOnTransition)return!1;const l=r.minTranslate(),c=r.maxTranslate();let h;if(h=s&&e>l?l:s&&e<c?c:e,r.updateProgress(h),a.cssMode){const e=r.isHorizontal();if(0===t)o[e?"scrollLeft":"scrollTop"]=-h;else{if(!r.support.smoothScroll)return Ci({swiper:r,targetPosition:-h,side:e?"left":"top"}),!0;o.scrollTo({[e?"left":"top"]:-h,behavior:"smooth"})}return!0}return 0===t?(r.setTransition(0),r.setTranslate(h),i&&(r.emit("beforeTransitionStart",t,n),r.emit("transitionEnd"))):(r.setTransition(t),r.setTranslate(h),i&&(r.emit("beforeTransitionStart",t,n),r.emit("transitionStart")),r.animating||(r.animating=!0,r.onTranslateToWrapperTransitionEnd||(r.onTranslateToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onTranslateToWrapperTransitionEnd),r.onTranslateToWrapperTransitionEnd=null,delete r.onTranslateToWrapperTransitionEnd,r.animating=!1,i&&r.emit("transitionEnd"))}),r.wrapperEl.addEventListener("transitionend",r.onTranslateToWrapperTransitionEnd))),!0}};function Ji(e){let{swiper:t,runCallbacks:i,direction:s,step:n}=e;const{activeIndex:r,previousIndex:a}=t;let o=s;o||(o=r>a?"next":r<a?"prev":"reset"),t.emit(`transition${n}`),i&&"reset"===o?t.emit(`slideResetTransition${n}`):i&&r!==a&&(t.emit(`slideChangeTransition${n}`),"next"===o?t.emit(`slideNextTransition${n}`):t.emit(`slidePrevTransition${n}`))}var Qi={slideTo:function(e,t,i,s,n){void 0===e&&(e=0),void 0===i&&(i=!0),"string"==typeof e&&(e=parseInt(e,10));const r=this;let a=e;a<0&&(a=0);const{params:o,snapGrid:l,slidesGrid:c,previousIndex:h,activeIndex:u,rtlTranslate:d,wrapperEl:p,enabled:f}=r;if(!f&&!s&&!n||r.destroyed||r.animating&&o.preventInteractionOnTransition)return!1;void 0===t&&(t=r.params.speed);const m=Math.min(r.params.slidesPerGroupSkip,a);let g=m+Math.floor((a-m)/r.params.slidesPerGroup);g>=l.length&&(g=l.length-1);const y=-l[g];if(o.normalizeSlideIndex)for(let e=0;e<c.length;e+=1){const t=-Math.floor(100*y),i=Math.floor(100*c[e]),s=Math.floor(100*c[e+1]);void 0!==c[e+1]?t>=i&&t<s-(s-i)/2?a=e:t>=i&&t<s&&(a=e+1):t>=i&&(a=e)}if(r.initialized&&a!==u){if(!r.allowSlideNext&&(d?y>r.translate&&y>r.minTranslate():y<r.translate&&y<r.minTranslate()))return!1;if(!r.allowSlidePrev&&y>r.translate&&y>r.maxTranslate()&&(u||0)!==a)return!1}let v;a!==(h||0)&&i&&r.emit("beforeSlideChangeStart"),r.updateProgress(y),v=a>u?"next":a<u?"prev":"reset";const b=r.virtual&&r.params.virtual.enabled;if((!b||!n)&&(d&&-y===r.translate||!d&&y===r.translate))return r.updateActiveIndex(a),o.autoHeight&&r.updateAutoHeight(),r.updateSlidesClasses(),"slide"!==o.effect&&r.setTranslate(y),"reset"!==v&&(r.transitionStart(i,v),r.transitionEnd(i,v)),!1;if(o.cssMode){const e=r.isHorizontal(),i=d?y:-y;if(0===t)b&&(r.wrapperEl.style.scrollSnapType="none",r._immediateVirtual=!0),b&&!r._cssModeVirtualInitialSet&&r.params.initialSlide>0?(r._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[e?"scrollLeft":"scrollTop"]=i})):p[e?"scrollLeft":"scrollTop"]=i,b&&requestAnimationFrame(()=>{r.wrapperEl.style.scrollSnapType="",r._immediateVirtual=!1});else{if(!r.support.smoothScroll)return Ci({swiper:r,targetPosition:i,side:e?"left":"top"}),!0;p.scrollTo({[e?"left":"top"]:i,behavior:"smooth"})}return!0}const _=qi().isSafari;return b&&!n&&_&&r.isElement&&r.virtual.update(!1,!1,a),r.setTransition(t),r.setTranslate(y),r.updateActiveIndex(a),r.updateSlidesClasses(),r.emit("beforeTransitionStart",t,s),r.transitionStart(i,v),0===t?r.transitionEnd(i,v):r.animating||(r.animating=!0,r.onSlideToWrapperTransitionEnd||(r.onSlideToWrapperTransitionEnd=function(e){r&&!r.destroyed&&e.target===this&&(r.wrapperEl.removeEventListener("transitionend",r.onSlideToWrapperTransitionEnd),r.onSlideToWrapperTransitionEnd=null,delete r.onSlideToWrapperTransitionEnd,r.transitionEnd(i,v))}),r.wrapperEl.addEventListener("transitionend",r.onSlideToWrapperTransitionEnd)),!0},slideToLoop:function(e,t,i,s){void 0===e&&(e=0),void 0===i&&(i=!0),"string"==typeof e&&(e=parseInt(e,10));const n=this;if(n.destroyed)return;void 0===t&&(t=n.params.speed);const r=n.grid&&n.params.grid&&n.params.grid.rows>1;let a=e;if(n.params.loop)if(n.virtual&&n.params.virtual.enabled)a+=n.virtual.slidesBefore;else{let e;if(r){const t=a*n.params.grid.rows;e=n.slides.find(e=>1*e.getAttribute("data-swiper-slide-index")===t).column}else e=n.getSlideIndexByData(a);const t=r?Math.ceil(n.slides.length/n.params.grid.rows):n.slides.length,{centeredSlides:i}=n.params;let o=n.params.slidesPerView;"auto"===o?o=n.slidesPerViewDynamic():(o=Math.ceil(parseFloat(n.params.slidesPerView,10)),i&&o%2==0&&(o+=1));let l=t-e<o;if(i&&(l=l||e<Math.ceil(o/2)),s&&i&&"auto"!==n.params.slidesPerView&&!r&&(l=!1),l){const s=i?e<n.activeIndex?"prev":"next":e-n.activeIndex-1<n.params.slidesPerView?"next":"prev";n.loopFix({direction:s,slideTo:!0,activeSlideIndex:"next"===s?e+1:e-t+1,slideRealIndex:"next"===s?n.realIndex:void 0})}if(r){const e=a*n.params.grid.rows;a=n.slides.find(t=>1*t.getAttribute("data-swiper-slide-index")===e).column}else a=n.getSlideIndexByData(a)}return requestAnimationFrame(()=>{n.slideTo(a,t,i,s)}),n},slideNext:function(e,t,i){void 0===t&&(t=!0);const s=this,{enabled:n,params:r,animating:a}=s;if(!n||s.destroyed)return s;void 0===e&&(e=s.params.speed);let o=r.slidesPerGroup;"auto"===r.slidesPerView&&1===r.slidesPerGroup&&r.slidesPerGroupAuto&&(o=Math.max(s.slidesPerViewDynamic("current",!0),1));const l=s.activeIndex<r.slidesPerGroupSkip?1:o,c=s.virtual&&r.virtual.enabled;if(r.loop){if(a&&!c&&r.loopPreventsSliding)return!1;if(s.loopFix({direction:"next"}),s._clientLeft=s.wrapperEl.clientLeft,s.activeIndex===s.slides.length-1&&r.cssMode)return requestAnimationFrame(()=>{s.slideTo(s.activeIndex+l,e,t,i)}),!0}return r.rewind&&s.isEnd?s.slideTo(0,e,t,i):s.slideTo(s.activeIndex+l,e,t,i)},slidePrev:function(e,t,i){void 0===t&&(t=!0);const s=this,{params:n,snapGrid:r,slidesGrid:a,rtlTranslate:o,enabled:l,animating:c}=s;if(!l||s.destroyed)return s;void 0===e&&(e=s.params.speed);const h=s.virtual&&n.virtual.enabled;if(n.loop){if(c&&!h&&n.loopPreventsSliding)return!1;s.loopFix({direction:"prev"}),s._clientLeft=s.wrapperEl.clientLeft}function u(e){return e<0?-Math.floor(Math.abs(e)):Math.floor(e)}const d=u(o?s.translate:-s.translate),p=r.map(e=>u(e)),f=n.freeMode&&n.freeMode.enabled;let m=r[p.indexOf(d)-1];if(void 0===m&&(n.cssMode||f)){let e;r.forEach((t,i)=>{d>=t&&(e=i)}),void 0!==e&&(m=f?r[e]:r[e>0?e-1:e])}let g=0;if(void 0!==m&&(g=a.indexOf(m),g<0&&(g=s.activeIndex-1),"auto"===n.slidesPerView&&1===n.slidesPerGroup&&n.slidesPerGroupAuto&&(g=g-s.slidesPerViewDynamic("previous",!0)+1,g=Math.max(g,0))),n.rewind&&s.isBeginning){const n=s.params.virtual&&s.params.virtual.enabled&&s.virtual?s.virtual.slides.length-1:s.slides.length-1;return s.slideTo(n,e,t,i)}return n.loop&&0===s.activeIndex&&n.cssMode?(requestAnimationFrame(()=>{s.slideTo(g,e,t,i)}),!0):s.slideTo(g,e,t,i)},slideReset:function(e,t,i){void 0===t&&(t=!0);const s=this;if(!s.destroyed)return void 0===e&&(e=s.params.speed),s.slideTo(s.activeIndex,e,t,i)},slideToClosest:function(e,t,i,s){void 0===t&&(t=!0),void 0===s&&(s=.5);const n=this;if(n.destroyed)return;void 0===e&&(e=n.params.speed);let r=n.activeIndex;const a=Math.min(n.params.slidesPerGroupSkip,r),o=a+Math.floor((r-a)/n.params.slidesPerGroup),l=n.rtlTranslate?n.translate:-n.translate;if(l>=n.snapGrid[o]){const e=n.snapGrid[o];l-e>(n.snapGrid[o+1]-e)*s&&(r+=n.params.slidesPerGroup)}else{const e=n.snapGrid[o-1];l-e<=(n.snapGrid[o]-e)*s&&(r-=n.params.slidesPerGroup)}return r=Math.max(r,0),r=Math.min(r,n.slidesGrid.length-1),n.slideTo(r,e,t,i)},slideToClickedSlide:function(){const e=this;if(e.destroyed)return;const{params:t,slidesEl:i}=e,s="auto"===t.slidesPerView?e.slidesPerViewDynamic():t.slidesPerView;let n,r=e.getSlideIndexWhenGrid(e.clickedIndex);const a=e.isElement?"swiper-slide":`.${t.slideClass}`,o=e.grid&&e.params.grid&&e.params.grid.rows>1;if(t.loop){if(e.animating)return;n=parseInt(e.clickedSlide.getAttribute("data-swiper-slide-index"),10),t.centeredSlides?e.slideToLoop(n):r>(o?(e.slides.length-s)/2-(e.params.grid.rows-1):e.slides.length-s)?(e.loopFix(),r=e.getSlideIndex(Mi(i,`${a}[data-swiper-slide-index="${n}"]`)[0]),xi(()=>{e.slideTo(r)})):e.slideTo(r)}else e.slideTo(r)}},es={loopCreate:function(e,t){const i=this,{params:s,slidesEl:n}=i;if(!s.loop||i.virtual&&i.params.virtual.enabled)return;const r=()=>{Mi(n,`.${s.slideClass}, swiper-slide`).forEach((e,t)=>{e.setAttribute("data-swiper-slide-index",t)})},a=i.grid&&s.grid&&s.grid.rows>1;s.loopAddBlankSlides&&(s.slidesPerGroup>1||a)&&(()=>{const e=Mi(n,`.${s.slideBlankClass}`);e.forEach(e=>{e.remove()}),e.length>0&&(i.recalcSlides(),i.updateSlides())})();const o=s.slidesPerGroup*(a?s.grid.rows:1),l=i.slides.length%o!==0,c=a&&i.slides.length%s.grid.rows!==0,h=e=>{for(let t=0;t<e;t+=1){const e=i.isElement?Li("swiper-slide",[s.slideBlankClass]):Li("div",[s.slideClass,s.slideBlankClass]);i.slidesEl.append(e)}};l?(s.loopAddBlankSlides?(h(o-i.slides.length%o),i.recalcSlides(),i.updateSlides()):Pi("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),r()):c?(s.loopAddBlankSlides?(h(s.grid.rows-i.slides.length%s.grid.rows),i.recalcSlides(),i.updateSlides()):Pi("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)"),r()):r(),i.loopFix({slideRealIndex:e,direction:s.centeredSlides?void 0:"next",initial:t})},loopFix:function(e){let{slideRealIndex:t,slideTo:i=!0,direction:s,setTranslate:n,activeSlideIndex:r,initial:a,byController:o,byMousewheel:l}=void 0===e?{}:e;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:h,allowSlidePrev:u,allowSlideNext:d,slidesEl:p,params:f}=c,{centeredSlides:m,initialSlide:g}=f;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&f.virtual.enabled)return i&&(f.centeredSlides||0!==c.snapIndex?f.centeredSlides&&c.snapIndex<f.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0):c.slideTo(c.virtual.slides.length,0,!1,!0)),c.allowSlidePrev=u,c.allowSlideNext=d,void c.emit("loopFix");let y=f.slidesPerView;"auto"===y?y=c.slidesPerViewDynamic():(y=Math.ceil(parseFloat(f.slidesPerView,10)),m&&y%2==0&&(y+=1));const v=f.slidesPerGroupAuto?y:f.slidesPerGroup;let b=m?Math.max(v,Math.ceil(y/2)):v;b%v!==0&&(b+=v-b%v),b+=f.loopAdditionalSlides,c.loopedSlides=b;const _=c.grid&&f.grid&&f.grid.rows>1;h.length<y+b||"cards"===c.params.effect&&h.length<y+2*b?Pi("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):_&&"row"===f.grid.fill&&Pi("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const x=[],w=[],S=_?Math.ceil(h.length/f.grid.rows):h.length,k=a&&S-g<y&&!m;let T=k?g:c.activeIndex;void 0===r?r=c.getSlideIndex(h.find(e=>e.classList.contains(f.slideActiveClass))):T=r;const E="next"===s||!s,C="prev"===s||!s;let A=0,M=0;const P=(_?h[r].column:r)+(m&&void 0===n?-y/2+.5:0);if(P<b){A=Math.max(b-P,v);for(let e=0;e<b-P;e+=1){const t=e-Math.floor(e/S)*S;if(_){const e=S-t-1;for(let t=h.length-1;t>=0;t-=1)h[t].column===e&&x.push(t)}else x.push(S-t-1)}}else if(P+y>S-b){M=Math.max(P-(S-2*b),v),k&&(M=Math.max(M,y-S+g+1));for(let e=0;e<M;e+=1){const t=e-Math.floor(e/S)*S;_?h.forEach((e,i)=>{e.column===t&&w.push(i)}):w.push(t)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),"cards"===c.params.effect&&h.length<y+2*b&&(w.includes(r)&&w.splice(w.indexOf(r),1),x.includes(r)&&x.splice(x.indexOf(r),1)),C&&x.forEach(e=>{h[e].swiperLoopMoveDOM=!0,p.prepend(h[e]),h[e].swiperLoopMoveDOM=!1}),E&&w.forEach(e=>{h[e].swiperLoopMoveDOM=!0,p.append(h[e]),h[e].swiperLoopMoveDOM=!1}),c.recalcSlides(),"auto"===f.slidesPerView?c.updateSlides():_&&(x.length>0&&C||w.length>0&&E)&&c.slides.forEach((e,t)=>{c.grid.updateSlide(t,e,c.slides)}),f.watchSlidesProgress&&c.updateSlidesOffset(),i)if(x.length>0&&C){if(void 0===t){const e=c.slidesGrid[T],t=c.slidesGrid[T+A]-e;l?c.setTranslate(c.translate-t):(c.slideTo(T+Math.ceil(A),0,!1,!0),n&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else if(n){const e=_?x.length/f.grid.rows:x.length;c.slideTo(c.activeIndex+e,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(w.length>0&&E)if(void 0===t){const e=c.slidesGrid[T],t=c.slidesGrid[T-M]-e;l?c.setTranslate(c.translate-t):(c.slideTo(T-M,0,!1,!0),n&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-t,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-t))}else{const e=_?w.length/f.grid.rows:w.length;c.slideTo(c.activeIndex-e,0,!1,!0)}if(c.allowSlidePrev=u,c.allowSlideNext=d,c.controller&&c.controller.control&&!o){const e={slideRealIndex:t,direction:s,setTranslate:n,activeSlideIndex:r,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(t=>{!t.destroyed&&t.params.loop&&t.loopFix({...e,slideTo:t.params.slidesPerView===f.slidesPerView&&i})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...e,slideTo:c.controller.control.params.slidesPerView===f.slidesPerView&&i})}c.emit("loopFix")},loopDestroy:function(){const e=this,{params:t,slidesEl:i}=e;if(!t.loop||!i||e.virtual&&e.params.virtual.enabled)return;e.recalcSlides();const s=[];e.slides.forEach(e=>{const t=void 0===e.swiperSlideIndex?1*e.getAttribute("data-swiper-slide-index"):e.swiperSlideIndex;s[t]=e}),e.slides.forEach(e=>{e.removeAttribute("data-swiper-slide-index")}),s.forEach(e=>{i.append(e)}),e.recalcSlides(),e.slideTo(e.realIndex,0)}};function ts(e,t,i){const s=bi(),{params:n}=e,r=n.edgeSwipeDetection,a=n.edgeSwipeThreshold;return!r||!(i<=a||i>=s.innerWidth-a)||"prevent"===r&&(t.preventDefault(),!0)}function is(e){const t=this,i=yi();let s=e;s.originalEvent&&(s=s.originalEvent);const n=t.touchEventsData;if("pointerdown"===s.type){if(null!==n.pointerId&&n.pointerId!==s.pointerId)return;n.pointerId=s.pointerId}else"touchstart"===s.type&&1===s.targetTouches.length&&(n.touchId=s.targetTouches[0].identifier);if("touchstart"===s.type)return void ts(t,s,s.targetTouches[0].pageX);const{params:r,touches:a,enabled:o}=t;if(!o)return;if(!r.simulateTouch&&"mouse"===s.pointerType)return;if(t.animating&&r.preventInteractionOnTransition)return;!t.animating&&r.cssMode&&r.loop&&t.loopFix();let l=s.target;if("wrapper"===r.touchEventsTarget&&!function(e,t){const i=bi();let s=t.contains(e);return!s&&i.HTMLSlotElement&&t instanceof HTMLSlotElement&&(s=[...t.assignedElements()].includes(e),s||(s=function(e,t){const i=[t];for(;i.length>0;){const t=i.shift();if(e===t)return!0;i.push(...t.children,...t.shadowRoot?t.shadowRoot.children:[],...t.assignedElements?t.assignedElements():[])}}(e,t))),s}(l,t.wrapperEl))return;if("which"in s&&3===s.which)return;if("button"in s&&s.button>0)return;if(n.isTouched&&n.isMoved)return;const c=!!r.noSwipingClass&&""!==r.noSwipingClass,h=s.composedPath?s.composedPath():s.path;c&&s.target&&s.target.shadowRoot&&h&&(l=h[0]);const u=r.noSwipingSelector?r.noSwipingSelector:`.${r.noSwipingClass}`,d=!(!s.target||!s.target.shadowRoot);if(r.noSwiping&&(d?function(e,t){return void 0===t&&(t=this),function t(i){if(!i||i===yi()||i===bi())return null;i.assignedSlot&&(i=i.assignedSlot);const s=i.closest(e);return s||i.getRootNode?s||t(i.getRootNode().host):null}(t)}(u,l):l.closest(u)))return void(t.allowClick=!0);if(r.swipeHandler&&!l.closest(r.swipeHandler))return;a.currentX=s.pageX,a.currentY=s.pageY;const p=a.currentX,f=a.currentY;if(!ts(t,s,p))return;Object.assign(n,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),a.startX=p,a.startY=f,n.touchStartTime=wi(),t.allowClick=!0,t.updateSize(),t.swipeDirection=void 0,r.threshold>0&&(n.allowThresholdMove=!1);let m=!0;l.matches(n.focusableElements)&&(m=!1,"SELECT"===l.nodeName&&(n.isTouched=!1)),i.activeElement&&i.activeElement.matches(n.focusableElements)&&i.activeElement!==l&&("mouse"===s.pointerType||"mouse"!==s.pointerType&&!l.matches(n.focusableElements))&&i.activeElement.blur();const g=m&&t.allowTouchMove&&r.touchStartPreventDefault;!r.touchStartForcePreventDefault&&!g||l.isContentEditable||s.preventDefault(),r.freeMode&&r.freeMode.enabled&&t.freeMode&&t.animating&&!r.cssMode&&t.freeMode.onTouchStart(),t.emit("touchStart",s)}function ss(e){const t=yi(),i=this,s=i.touchEventsData,{params:n,touches:r,rtlTranslate:a,enabled:o}=i;if(!o)return;if(!n.simulateTouch&&"mouse"===e.pointerType)return;let l,c=e;if(c.originalEvent&&(c=c.originalEvent),"pointermove"===c.type){if(null!==s.touchId)return;if(c.pointerId!==s.pointerId)return}if("touchmove"===c.type){if(l=[...c.changedTouches].find(e=>e.identifier===s.touchId),!l||l.identifier!==s.touchId)return}else l=c;if(!s.isTouched)return void(s.startMoving&&s.isScrolling&&i.emit("touchMoveOpposite",c));const h=l.pageX,u=l.pageY;if(c.preventedByNestedSwiper)return r.startX=h,void(r.startY=u);if(!i.allowTouchMove)return c.target.matches(s.focusableElements)||(i.allowClick=!1),void(s.isTouched&&(Object.assign(r,{startX:h,startY:u,currentX:h,currentY:u}),s.touchStartTime=wi()));if(n.touchReleaseOnEdges&&!n.loop)if(i.isVertical()){if(u<r.startY&&i.translate<=i.maxTranslate()||u>r.startY&&i.translate>=i.minTranslate())return s.isTouched=!1,void(s.isMoved=!1)}else{if(a&&(h>r.startX&&-i.translate<=i.maxTranslate()||h<r.startX&&-i.translate>=i.minTranslate()))return;if(!a&&(h<r.startX&&i.translate<=i.maxTranslate()||h>r.startX&&i.translate>=i.minTranslate()))return}if(t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==c.target&&"mouse"!==c.pointerType&&t.activeElement.blur(),t.activeElement&&c.target===t.activeElement&&c.target.matches(s.focusableElements))return s.isMoved=!0,void(i.allowClick=!1);s.allowTouchCallbacks&&i.emit("touchMove",c),r.previousX=r.currentX,r.previousY=r.currentY,r.currentX=h,r.currentY=u;const d=r.currentX-r.startX,p=r.currentY-r.startY;if(i.params.threshold&&Math.sqrt(d**2+p**2)<i.params.threshold)return;if(void 0===s.isScrolling){let e;i.isHorizontal()&&r.currentY===r.startY||i.isVertical()&&r.currentX===r.startX?s.isScrolling=!1:d*d+p*p>=25&&(e=180*Math.atan2(Math.abs(p),Math.abs(d))/Math.PI,s.isScrolling=i.isHorizontal()?e>n.touchAngle:90-e>n.touchAngle)}if(s.isScrolling&&i.emit("touchMoveOpposite",c),void 0===s.startMoving&&(r.currentX===r.startX&&r.currentY===r.startY||(s.startMoving=!0)),s.isScrolling||"touchmove"===c.type&&s.preventTouchMoveFromPointerMove)return void(s.isTouched=!1);if(!s.startMoving)return;i.allowClick=!1,!n.cssMode&&c.cancelable&&c.preventDefault(),n.touchMoveStopPropagation&&!n.nested&&c.stopPropagation();let f=i.isHorizontal()?d:p,m=i.isHorizontal()?r.currentX-r.previousX:r.currentY-r.previousY;n.oneWayMovement&&(f=Math.abs(f)*(a?1:-1),m=Math.abs(m)*(a?1:-1)),r.diff=f,f*=n.touchRatio,a&&(f=-f,m=-m);const g=i.touchesDirection;i.swipeDirection=f>0?"prev":"next",i.touchesDirection=m>0?"prev":"next";const y=i.params.loop&&!n.cssMode,v="next"===i.touchesDirection&&i.allowSlideNext||"prev"===i.touchesDirection&&i.allowSlidePrev;if(!s.isMoved){if(y&&v&&i.loopFix({direction:i.swipeDirection}),s.startTranslate=i.getTranslate(),i.setTransition(0),i.animating){const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});i.wrapperEl.dispatchEvent(e)}s.allowMomentumBounce=!1,!n.grabCursor||!0!==i.allowSlideNext&&!0!==i.allowSlidePrev||i.setGrabCursor(!0),i.emit("sliderFirstMove",c)}if((new Date).getTime(),!1!==n._loopSwapReset&&s.isMoved&&s.allowThresholdMove&&g!==i.touchesDirection&&y&&v&&Math.abs(f)>=1)return Object.assign(r,{startX:h,startY:u,currentX:h,currentY:u,startTranslate:s.currentTranslate}),s.loopSwapReset=!0,void(s.startTranslate=s.currentTranslate);i.emit("sliderMove",c),s.isMoved=!0,s.currentTranslate=f+s.startTranslate;let b=!0,_=n.resistanceRatio;if(n.touchReleaseOnEdges&&(_=0),f>0?(y&&v&&s.allowThresholdMove&&s.currentTranslate>(n.centeredSlides?i.minTranslate()-i.slidesSizesGrid[i.activeIndex+1]-("auto"!==n.slidesPerView&&i.slides.length-n.slidesPerView>=2?i.slidesSizesGrid[i.activeIndex+1]+i.params.spaceBetween:0)-i.params.spaceBetween:i.minTranslate())&&i.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),s.currentTranslate>i.minTranslate()&&(b=!1,n.resistance&&(s.currentTranslate=i.minTranslate()-1+(-i.minTranslate()+s.startTranslate+f)**_))):f<0&&(y&&v&&s.allowThresholdMove&&s.currentTranslate<(n.centeredSlides?i.maxTranslate()+i.slidesSizesGrid[i.slidesSizesGrid.length-1]+i.params.spaceBetween+("auto"!==n.slidesPerView&&i.slides.length-n.slidesPerView>=2?i.slidesSizesGrid[i.slidesSizesGrid.length-1]+i.params.spaceBetween:0):i.maxTranslate())&&i.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:i.slides.length-("auto"===n.slidesPerView?i.slidesPerViewDynamic():Math.ceil(parseFloat(n.slidesPerView,10)))}),s.currentTranslate<i.maxTranslate()&&(b=!1,n.resistance&&(s.currentTranslate=i.maxTranslate()+1-(i.maxTranslate()-s.startTranslate-f)**_))),b&&(c.preventedByNestedSwiper=!0),!i.allowSlideNext&&"next"===i.swipeDirection&&s.currentTranslate<s.startTranslate&&(s.currentTranslate=s.startTranslate),!i.allowSlidePrev&&"prev"===i.swipeDirection&&s.currentTranslate>s.startTranslate&&(s.currentTranslate=s.startTranslate),i.allowSlidePrev||i.allowSlideNext||(s.currentTranslate=s.startTranslate),n.threshold>0){if(!(Math.abs(f)>n.threshold||s.allowThresholdMove))return void(s.currentTranslate=s.startTranslate);if(!s.allowThresholdMove)return s.allowThresholdMove=!0,r.startX=r.currentX,r.startY=r.currentY,s.currentTranslate=s.startTranslate,void(r.diff=i.isHorizontal()?r.currentX-r.startX:r.currentY-r.startY)}n.followFinger&&!n.cssMode&&((n.freeMode&&n.freeMode.enabled&&i.freeMode||n.watchSlidesProgress)&&(i.updateActiveIndex(),i.updateSlidesClasses()),n.freeMode&&n.freeMode.enabled&&i.freeMode&&i.freeMode.onTouchMove(),i.updateProgress(s.currentTranslate),i.setTranslate(s.currentTranslate))}function ns(e){const t=this,i=t.touchEventsData;let s,n=e;if(n.originalEvent&&(n=n.originalEvent),"touchend"===n.type||"touchcancel"===n.type){if(s=[...n.changedTouches].find(e=>e.identifier===i.touchId),!s||s.identifier!==i.touchId)return}else{if(null!==i.touchId)return;if(n.pointerId!==i.pointerId)return;s=n}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(n.type)&&(!["pointercancel","contextmenu"].includes(n.type)||!t.browser.isSafari&&!t.browser.isWebView))return;i.pointerId=null,i.touchId=null;const{params:r,touches:a,rtlTranslate:o,slidesGrid:l,enabled:c}=t;if(!c)return;if(!r.simulateTouch&&"mouse"===n.pointerType)return;if(i.allowTouchCallbacks&&t.emit("touchEnd",n),i.allowTouchCallbacks=!1,!i.isTouched)return i.isMoved&&r.grabCursor&&t.setGrabCursor(!1),i.isMoved=!1,void(i.startMoving=!1);r.grabCursor&&i.isMoved&&i.isTouched&&(!0===t.allowSlideNext||!0===t.allowSlidePrev)&&t.setGrabCursor(!1);const h=wi(),u=h-i.touchStartTime;if(t.allowClick){const e=n.path||n.composedPath&&n.composedPath();t.updateClickedSlide(e&&e[0]||n.target,e),t.emit("tap click",n),u<300&&h-i.lastClickTime<300&&t.emit("doubleTap doubleClick",n)}if(i.lastClickTime=wi(),xi(()=>{t.destroyed||(t.allowClick=!0)}),!i.isTouched||!i.isMoved||!t.swipeDirection||0===a.diff&&!i.loopSwapReset||i.currentTranslate===i.startTranslate&&!i.loopSwapReset)return i.isTouched=!1,i.isMoved=!1,void(i.startMoving=!1);let d;if(i.isTouched=!1,i.isMoved=!1,i.startMoving=!1,d=r.followFinger?o?t.translate:-t.translate:-i.currentTranslate,r.cssMode)return;if(r.freeMode&&r.freeMode.enabled)return void t.freeMode.onTouchEnd({currentPos:d});const p=d>=-t.maxTranslate()&&!t.params.loop;let f=0,m=t.slidesSizesGrid[0];for(let e=0;e<l.length;e+=e<r.slidesPerGroupSkip?1:r.slidesPerGroup){const t=e<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;void 0!==l[e+t]?(p||d>=l[e]&&d<l[e+t])&&(f=e,m=l[e+t]-l[e]):(p||d>=l[e])&&(f=e,m=l[l.length-1]-l[l.length-2])}let g=null,y=null;r.rewind&&(t.isBeginning?y=r.virtual&&r.virtual.enabled&&t.virtual?t.virtual.slides.length-1:t.slides.length-1:t.isEnd&&(g=0));const v=(d-l[f])/m,b=f<r.slidesPerGroupSkip-1?1:r.slidesPerGroup;if(u>r.longSwipesMs){if(!r.longSwipes)return void t.slideTo(t.activeIndex);"next"===t.swipeDirection&&(v>=r.longSwipesRatio?t.slideTo(r.rewind&&t.isEnd?g:f+b):t.slideTo(f)),"prev"===t.swipeDirection&&(v>1-r.longSwipesRatio?t.slideTo(f+b):null!==y&&v<0&&Math.abs(v)>r.longSwipesRatio?t.slideTo(y):t.slideTo(f))}else{if(!r.shortSwipes)return void t.slideTo(t.activeIndex);!t.navigation||n.target!==t.navigation.nextEl&&n.target!==t.navigation.prevEl?("next"===t.swipeDirection&&t.slideTo(null!==g?g:f+b),"prev"===t.swipeDirection&&t.slideTo(null!==y?y:f)):n.target===t.navigation.nextEl?t.slideTo(f+b):t.slideTo(f)}}function rs(){const e=this,{params:t,el:i}=e;if(i&&0===i.offsetWidth)return;t.breakpoints&&e.setBreakpoint();const{allowSlideNext:s,allowSlidePrev:n,snapGrid:r}=e,a=e.virtual&&e.params.virtual.enabled;e.allowSlideNext=!0,e.allowSlidePrev=!0,e.updateSize(),e.updateSlides(),e.updateSlidesClasses();const o=a&&t.loop;!("auto"===t.slidesPerView||t.slidesPerView>1)||!e.isEnd||e.isBeginning||e.params.centeredSlides||o?e.params.loop&&!a?e.slideToLoop(e.realIndex,0,!1,!0):e.slideTo(e.activeIndex,0,!1,!0):e.slideTo(e.slides.length-1,0,!1,!0),e.autoplay&&e.autoplay.running&&e.autoplay.paused&&(clearTimeout(e.autoplay.resizeTimeout),e.autoplay.resizeTimeout=setTimeout(()=>{e.autoplay&&e.autoplay.running&&e.autoplay.paused&&e.autoplay.resume()},500)),e.allowSlidePrev=n,e.allowSlideNext=s,e.params.watchOverflow&&r!==e.snapGrid&&e.checkOverflow()}function as(e){const t=this;t.enabled&&(t.allowClick||(t.params.preventClicks&&e.preventDefault(),t.params.preventClicksPropagation&&t.animating&&(e.stopPropagation(),e.stopImmediatePropagation())))}function os(){const e=this,{wrapperEl:t,rtlTranslate:i,enabled:s}=e;if(!s)return;let n;e.previousTranslate=e.translate,e.isHorizontal()?e.translate=-t.scrollLeft:e.translate=-t.scrollTop,0===e.translate&&(e.translate=0),e.updateActiveIndex(),e.updateSlidesClasses();const r=e.maxTranslate()-e.minTranslate();n=0===r?0:(e.translate-e.minTranslate())/r,n!==e.progress&&e.updateProgress(i?-e.translate:e.translate),e.emit("setTranslate",e.translate,!1)}function ls(e){const t=this;Gi(t,e.target),t.params.cssMode||"auto"!==t.params.slidesPerView&&!t.params.autoHeight||t.update()}function cs(){const e=this;e.documentTouchHandlerProceeded||(e.documentTouchHandlerProceeded=!0,e.params.touchReleaseOnEdges&&(e.el.style.touchAction="auto"))}const hs=(e,t)=>{const i=yi(),{params:s,el:n,wrapperEl:r,device:a}=e,o=!!s.nested,l="on"===t?"addEventListener":"removeEventListener",c=t;n&&"string"!=typeof n&&(i[l]("touchstart",e.onDocumentTouchStart,{passive:!1,capture:o}),n[l]("touchstart",e.onTouchStart,{passive:!1}),n[l]("pointerdown",e.onTouchStart,{passive:!1}),i[l]("touchmove",e.onTouchMove,{passive:!1,capture:o}),i[l]("pointermove",e.onTouchMove,{passive:!1,capture:o}),i[l]("touchend",e.onTouchEnd,{passive:!0}),i[l]("pointerup",e.onTouchEnd,{passive:!0}),i[l]("pointercancel",e.onTouchEnd,{passive:!0}),i[l]("touchcancel",e.onTouchEnd,{passive:!0}),i[l]("pointerout",e.onTouchEnd,{passive:!0}),i[l]("pointerleave",e.onTouchEnd,{passive:!0}),i[l]("contextmenu",e.onTouchEnd,{passive:!0}),(s.preventClicks||s.preventClicksPropagation)&&n[l]("click",e.onClick,!0),s.cssMode&&r[l]("scroll",e.onScroll),s.updateOnWindowResize?e[c](a.ios||a.android?"resize orientationchange observerUpdate":"resize observerUpdate",rs,!0):e[c]("observerUpdate",rs,!0),n[l]("load",e.onLoad,{capture:!0}))},us=(e,t)=>e.grid&&t.grid&&t.grid.rows>1;var ds={setBreakpoint:function(){const e=this,{realIndex:t,initialized:i,params:s,el:n}=e,r=s.breakpoints;if(!r||r&&0===Object.keys(r).length)return;const a=yi(),o="window"!==s.breakpointsBase&&s.breakpointsBase?"container":s.breakpointsBase,l=["window","container"].includes(s.breakpointsBase)||!s.breakpointsBase?e.el:a.querySelector(s.breakpointsBase),c=e.getBreakpoint(r,o,l);if(!c||e.currentBreakpoint===c)return;const h=(c in r?r[c]:void 0)||e.originalParams,u=us(e,s),d=us(e,h),p=e.params.grabCursor,f=h.grabCursor,m=s.enabled;u&&!d?(n.classList.remove(`${s.containerModifierClass}grid`,`${s.containerModifierClass}grid-column`),e.emitContainerClasses()):!u&&d&&(n.classList.add(`${s.containerModifierClass}grid`),(h.grid.fill&&"column"===h.grid.fill||!h.grid.fill&&"column"===s.grid.fill)&&n.classList.add(`${s.containerModifierClass}grid-column`),e.emitContainerClasses()),p&&!f?e.unsetGrabCursor():!p&&f&&e.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(t=>{if(void 0===h[t])return;const i=s[t]&&s[t].enabled,n=h[t]&&h[t].enabled;i&&!n&&e[t].disable(),!i&&n&&e[t].enable()});const g=h.direction&&h.direction!==s.direction,y=s.loop&&(h.slidesPerView!==s.slidesPerView||g),v=s.loop;g&&i&&e.changeDirection(),Ti(e.params,h);const b=e.params.enabled,_=e.params.loop;Object.assign(e,{allowTouchMove:e.params.allowTouchMove,allowSlideNext:e.params.allowSlideNext,allowSlidePrev:e.params.allowSlidePrev}),m&&!b?e.disable():!m&&b&&e.enable(),e.currentBreakpoint=c,e.emit("_beforeBreakpoint",h),i&&(y?(e.loopDestroy(),e.loopCreate(t),e.updateSlides()):!v&&_?(e.loopCreate(t),e.updateSlides()):v&&!_&&e.loopDestroy()),e.emit("breakpoint",h)},getBreakpoint:function(e,t,i){if(void 0===t&&(t="window"),!e||"container"===t&&!i)return;let s=!1;const n=bi(),r="window"===t?n.innerHeight:i.clientHeight,a=Object.keys(e).map(e=>{if("string"==typeof e&&0===e.indexOf("@")){const t=parseFloat(e.substr(1));return{value:r*t,point:e}}return{value:e,point:e}});a.sort((e,t)=>parseInt(e.value,10)-parseInt(t.value,10));for(let e=0;e<a.length;e+=1){const{point:r,value:o}=a[e];"window"===t?n.matchMedia(`(min-width: ${o}px)`).matches&&(s=r):o<=i.clientWidth&&(s=r)}return s||"max"}},ps={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function fs(e,t){return function(i){void 0===i&&(i={});const s=Object.keys(i)[0],n=i[s];"object"==typeof n&&null!==n?(!0===e[s]&&(e[s]={enabled:!0}),"navigation"===s&&e[s]&&e[s].enabled&&!e[s].prevEl&&!e[s].nextEl&&(e[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&e[s]&&e[s].enabled&&!e[s].el&&(e[s].auto=!0),s in e&&"enabled"in n?("object"!=typeof e[s]||"enabled"in e[s]||(e[s].enabled=!0),e[s]||(e[s]={enabled:!1}),Ti(t,i)):Ti(t,i)):Ti(t,i)}}const ms={eventsEmitter:$i,update:Ki,translate:Zi,transition:{setTransition:function(e,t){const i=this;i.params.cssMode||(i.wrapperEl.style.transitionDuration=`${e}ms`,i.wrapperEl.style.transitionDelay=0===e?"0ms":""),i.emit("setTransition",e,t)},transitionStart:function(e,t){void 0===e&&(e=!0);const i=this,{params:s}=i;s.cssMode||(s.autoHeight&&i.updateAutoHeight(),Ji({swiper:i,runCallbacks:e,direction:t,step:"Start"}))},transitionEnd:function(e,t){void 0===e&&(e=!0);const i=this,{params:s}=i;i.animating=!1,s.cssMode||(i.setTransition(0),Ji({swiper:i,runCallbacks:e,direction:t,step:"End"}))}},slide:Qi,loop:es,grabCursor:{setGrabCursor:function(e){const t=this;if(!t.params.simulateTouch||t.params.watchOverflow&&t.isLocked||t.params.cssMode)return;const i="container"===t.params.touchEventsTarget?t.el:t.wrapperEl;t.isElement&&(t.__preventObserver__=!0),i.style.cursor="move",i.style.cursor=e?"grabbing":"grab",t.isElement&&requestAnimationFrame(()=>{t.__preventObserver__=!1})},unsetGrabCursor:function(){const e=this;e.params.watchOverflow&&e.isLocked||e.params.cssMode||(e.isElement&&(e.__preventObserver__=!0),e["container"===e.params.touchEventsTarget?"el":"wrapperEl"].style.cursor="",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1}))}},events:{attachEvents:function(){const e=this,{params:t}=e;e.onTouchStart=is.bind(e),e.onTouchMove=ss.bind(e),e.onTouchEnd=ns.bind(e),e.onDocumentTouchStart=cs.bind(e),t.cssMode&&(e.onScroll=os.bind(e)),e.onClick=as.bind(e),e.onLoad=ls.bind(e),hs(e,"on")},detachEvents:function(){hs(this,"off")}},breakpoints:ds,checkOverflow:{checkOverflow:function(){const e=this,{isLocked:t,params:i}=e,{slidesOffsetBefore:s}=i;if(s){const t=e.slides.length-1,i=e.slidesGrid[t]+e.slidesSizesGrid[t]+2*s;e.isLocked=e.size>i}else e.isLocked=1===e.snapGrid.length;!0===i.allowSlideNext&&(e.allowSlideNext=!e.isLocked),!0===i.allowSlidePrev&&(e.allowSlidePrev=!e.isLocked),t&&t!==e.isLocked&&(e.isEnd=!1),t!==e.isLocked&&e.emit(e.isLocked?"lock":"unlock")}},classes:{addClasses:function(){const e=this,{classNames:t,params:i,rtl:s,el:n,device:r}=e,a=function(e,t){const i=[];return e.forEach(e=>{"object"==typeof e?Object.keys(e).forEach(s=>{e[s]&&i.push(t+s)}):"string"==typeof e&&i.push(t+e)}),i}(["initialized",i.direction,{"free-mode":e.params.freeMode&&i.freeMode.enabled},{autoheight:i.autoHeight},{rtl:s},{grid:i.grid&&i.grid.rows>1},{"grid-column":i.grid&&i.grid.rows>1&&"column"===i.grid.fill},{android:r.android},{ios:r.ios},{"css-mode":i.cssMode},{centered:i.cssMode&&i.centeredSlides},{"watch-progress":i.watchSlidesProgress}],i.containerModifierClass);t.push(...a),n.classList.add(...t),e.emitContainerClasses()},removeClasses:function(){const{el:e,classNames:t}=this;e&&"string"!=typeof e&&(e.classList.remove(...t),this.emitContainerClasses())}}},gs={};class ys{constructor(){let e,t;for(var i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];1===s.length&&s[0].constructor&&"Object"===Object.prototype.toString.call(s[0]).slice(8,-1)?t=s[0]:[e,t]=s,t||(t={}),t=Ti({},t),e&&!t.el&&(t.el=e);const r=yi();if(t.el&&"string"==typeof t.el&&r.querySelectorAll(t.el).length>1){const e=[];return r.querySelectorAll(t.el).forEach(i=>{const s=Ti({},t,{el:i});e.push(new ys(s))}),e}const a=this;a.__swiper__=!0,a.support=zi(),a.device=Hi({userAgent:t.userAgent}),a.browser=qi(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const o={};a.modules.forEach(e=>{e({params:t,swiper:a,extendParams:fs(t,o),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const l=Ti({},ps,o);return a.params=Ti({},l,gs,t),a.originalParams=Ti({},a.params),a.passedParams=Ti({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(e=>{a.on(e,a.params.on[e])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal:()=>"horizontal"===a.params.direction,isVertical:()=>"vertical"===a.params.direction,activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:i}=this,s=Ri(Mi(t,`.${i.slideClass}, swiper-slide`)[0]);return Ri(e)-s}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>1*t.getAttribute("data-swiper-slide-index")===e))}getSlideIndexWhenGrid(e){return this.grid&&this.params.grid&&this.params.grid.rows>1&&("column"===this.params.grid.fill?e=Math.floor(e/this.params.grid.rows):"row"===this.params.grid.fill&&(e%=Math.ceil(this.slides.length/this.params.grid.rows))),e}recalcSlides(){const{slidesEl:e,params:t}=this;this.slides=Mi(e,`.${t.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const i=this;e=Math.min(Math.max(e,0),1);const s=i.minTranslate(),n=(i.maxTranslate()-s)*e+s;i.translateTo(n,void 0===t?0:t),i.updateActiveIndex(),i.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(t=>0===t.indexOf("swiper")||0===t.indexOf(e.params.containerModifierClass));e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(e=>0===e.indexOf("swiper-slide")||0===e.indexOf(t.params.slideClass)).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(i=>{const s=e.getSlideClasses(i);t.push({slideEl:i,classNames:s}),e.emit("_slideClass",i,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){void 0===e&&(e="current"),void 0===t&&(t=!1);const{params:i,slides:s,slidesGrid:n,slidesSizesGrid:r,size:a,activeIndex:o}=this;let l=1;if("number"==typeof i.slidesPerView)return i.slidesPerView;if(i.centeredSlides){let e,t=s[o]?Math.ceil(s[o].swiperSlideSize):0;for(let i=o+1;i<s.length;i+=1)s[i]&&!e&&(t+=Math.ceil(s[i].swiperSlideSize),l+=1,t>a&&(e=!0));for(let i=o-1;i>=0;i-=1)s[i]&&!e&&(t+=s[i].swiperSlideSize,l+=1,t>a&&(e=!0))}else if("current"===e)for(let e=o+1;e<s.length;e+=1)(t?n[e]+r[e]-n[o]<a:n[e]-n[o]<a)&&(l+=1);else for(let e=o-1;e>=0;e-=1)n[o]-n[e]<a&&(l+=1);return l}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:i}=e;function s(){const t=e.rtlTranslate?-1*e.translate:e.translate,i=Math.min(Math.max(t,e.maxTranslate()),e.minTranslate());e.setTranslate(i),e.updateActiveIndex(),e.updateSlidesClasses()}let n;if(i.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(t=>{t.complete&&Gi(e,t)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses(),i.freeMode&&i.freeMode.enabled&&!i.cssMode)s(),i.autoHeight&&e.updateAutoHeight();else{if(("auto"===i.slidesPerView||i.slidesPerView>1)&&e.isEnd&&!i.centeredSlides){const t=e.virtual&&i.virtual.enabled?e.virtual.slides:e.slides;n=e.slideTo(t.length-1,0,!1,!0)}else n=e.slideTo(e.activeIndex,0,!1,!0);n||s()}i.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){void 0===t&&(t=!0);const i=this,s=i.params.direction;return e||(e="horizontal"===s?"vertical":"horizontal"),e===s||"horizontal"!==e&&"vertical"!==e||(i.el.classList.remove(`${i.params.containerModifierClass}${s}`),i.el.classList.add(`${i.params.containerModifierClass}${e}`),i.emitContainerClasses(),i.params.direction=e,i.slides.forEach(t=>{"vertical"===e?t.style.width="":t.style.height=""}),i.emit("changeDirection"),t&&i.update()),i}changeLanguageDirection(e){const t=this;t.rtl&&"rtl"===e||!t.rtl&&"ltr"===e||(t.rtl="rtl"===e,t.rtlTranslate="horizontal"===t.params.direction&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let i=e||t.params.el;if("string"==typeof i&&(i=document.querySelector(i)),!i)return!1;i.swiper=t,i.parentNode&&i.parentNode.host&&i.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let n=i&&i.shadowRoot&&i.shadowRoot.querySelector?i.shadowRoot.querySelector(s()):Mi(i,s())[0];return!n&&t.params.createElements&&(n=Li("div",t.params.wrapperClass),i.append(n),Mi(i,`.${t.params.slideClass}`).forEach(e=>{n.append(e)})),Object.assign(t,{el:i,wrapperEl:n,slidesEl:t.isElement&&!i.parentNode.host.slideSlots?i.parentNode.host:n,hostEl:t.isElement?i.parentNode.host:i,mounted:!0,rtl:"rtl"===i.dir.toLowerCase()||"rtl"===Ii(i,"direction"),rtlTranslate:"horizontal"===t.params.direction&&("rtl"===i.dir.toLowerCase()||"rtl"===Ii(i,"direction")),wrongRTL:"-webkit-box"===Ii(n,"display")}),!0}init(e){const t=this;if(t.initialized)return t;if(!1===t.mount(e))return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const i=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&i.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),i.forEach(e=>{e.complete?Gi(t,e):e.addEventListener("load",e=>{Gi(t,e.target)})}),Xi(t),t.initialized=!0,Xi(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){void 0===e&&(e=!0),void 0===t&&(t=!0);const i=this,{params:s,el:n,wrapperEl:r,slides:a}=i;return void 0===i.params||i.destroyed||(i.emit("beforeDestroy"),i.initialized=!1,i.detachEvents(),s.loop&&i.loopDestroy(),t&&(i.removeClasses(),n&&"string"!=typeof n&&n.removeAttribute("style"),r&&r.removeAttribute("style"),a&&a.length&&a.forEach(e=>{e.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),e.removeAttribute("style"),e.removeAttribute("data-swiper-slide-index")})),i.emit("destroy"),Object.keys(i.eventsListeners).forEach(e=>{i.off(e)}),!1!==e&&(i.el&&"string"!=typeof i.el&&(i.el.swiper=null),function(e){const t=e;Object.keys(t).forEach(e=>{try{t[e]=null}catch(e){}try{delete t[e]}catch(e){}})}(i)),i.destroyed=!0),null}static extendDefaults(e){Ti(gs,e)}static get extendedDefaults(){return gs}static get defaults(){return ps}static installModule(e){ys.prototype.__modules__||(ys.prototype.__modules__=[]);const t=ys.prototype.__modules__;"function"==typeof e&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(e=>ys.installModule(e)),ys):(ys.installModule(e),ys)}}function vs(e,t,i,s){return e.params.createElements&&Object.keys(s).forEach(n=>{if(!i[n]&&!0===i.auto){let r=Mi(e.el,`.${s[n]}`)[0];r||(r=Li("div",s[n]),r.className=s[n],e.el.append(r)),i[n]=r,t[n]=r}}),i}function bs(e){let{swiper:t,extendParams:i,on:s,emit:n}=e;function r(e){let i;return e&&"string"==typeof e&&t.isElement&&(i=t.el.querySelector(e)||t.hostEl.querySelector(e),i)?i:(e&&("string"==typeof e&&(i=[...document.querySelectorAll(e)]),t.params.uniqueNavElements&&"string"==typeof e&&i&&i.length>1&&1===t.el.querySelectorAll(e).length?i=t.el.querySelector(e):i&&1===i.length&&(i=i[0])),e&&!i?e:i)}function a(e,i){const s=t.params.navigation;(e=Bi(e)).forEach(e=>{e&&(e.classList[i?"add":"remove"](...s.disabledClass.split(" ")),"BUTTON"===e.tagName&&(e.disabled=i),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](s.lockClass))})}function o(){const{nextEl:e,prevEl:i}=t.navigation;if(t.params.loop)return a(i,!1),void a(e,!1);a(i,t.isBeginning&&!t.params.rewind),a(e,t.isEnd&&!t.params.rewind)}function l(e){e.preventDefault(),(!t.isBeginning||t.params.loop||t.params.rewind)&&(t.slidePrev(),n("navigationPrev"))}function c(e){e.preventDefault(),(!t.isEnd||t.params.loop||t.params.rewind)&&(t.slideNext(),n("navigationNext"))}function h(){const e=t.params.navigation;if(t.params.navigation=vs(t,t.originalParams.navigation,t.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!e.nextEl&&!e.prevEl)return;let i=r(e.nextEl),s=r(e.prevEl);Object.assign(t.navigation,{nextEl:i,prevEl:s}),i=Bi(i),s=Bi(s);const n=(i,s)=>{i&&i.addEventListener("click","next"===s?c:l),!t.enabled&&i&&i.classList.add(...e.lockClass.split(" "))};i.forEach(e=>n(e,"next")),s.forEach(e=>n(e,"prev"))}function u(){let{nextEl:e,prevEl:i}=t.navigation;e=Bi(e),i=Bi(i);const s=(e,i)=>{e.removeEventListener("click","next"===i?c:l),e.classList.remove(...t.params.navigation.disabledClass.split(" "))};e.forEach(e=>s(e,"next")),i.forEach(e=>s(e,"prev"))}i({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),t.navigation={nextEl:null,prevEl:null},s("init",()=>{!1===t.params.navigation.enabled?d():(h(),o())}),s("toEdge fromEdge lock unlock",()=>{o()}),s("destroy",()=>{u()}),s("enable disable",()=>{let{nextEl:e,prevEl:i}=t.navigation;e=Bi(e),i=Bi(i),t.enabled?o():[...e,...i].filter(e=>!!e).forEach(e=>e.classList.add(t.params.navigation.lockClass))}),s("click",(e,i)=>{let{nextEl:s,prevEl:r}=t.navigation;s=Bi(s),r=Bi(r);const a=i.target;let o=r.includes(a)||s.includes(a);if(t.isElement&&!o){const e=i.path||i.composedPath&&i.composedPath();e&&(o=e.find(e=>s.includes(e)||r.includes(e)))}if(t.params.navigation.hideOnClick&&!o){if(t.pagination&&t.params.pagination&&t.params.pagination.clickable&&(t.pagination.el===a||t.pagination.el.contains(a)))return;let e;s.length?e=s[0].classList.contains(t.params.navigation.hiddenClass):r.length&&(e=r[0].classList.contains(t.params.navigation.hiddenClass)),n(!0===e?"navigationShow":"navigationHide"),[...s,...r].filter(e=>!!e).forEach(e=>e.classList.toggle(t.params.navigation.hiddenClass))}});const d=()=>{t.el.classList.add(...t.params.navigation.navigationDisabledClass.split(" ")),u()};Object.assign(t.navigation,{enable:()=>{t.el.classList.remove(...t.params.navigation.navigationDisabledClass.split(" ")),h(),o()},disable:d,update:o,init:h,destroy:u})}function _s(e){return void 0===e&&(e=""),`.${e.trim().replace(/([\.:!+\/()[\]])/g,"\\$1").replace(/ /g,".")}`}function xs(e){let{swiper:t,extendParams:i,on:s,emit:n}=e;const r="swiper-pagination";let a;i({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:e=>e,formatFractionTotal:e=>e,bulletClass:`${r}-bullet`,bulletActiveClass:`${r}-bullet-active`,modifierClass:`${r}-`,currentClass:`${r}-current`,totalClass:`${r}-total`,hiddenClass:`${r}-hidden`,progressbarFillClass:`${r}-progressbar-fill`,progressbarOppositeClass:`${r}-progressbar-opposite`,clickableClass:`${r}-clickable`,lockClass:`${r}-lock`,horizontalClass:`${r}-horizontal`,verticalClass:`${r}-vertical`,paginationDisabledClass:`${r}-disabled`}}),t.pagination={el:null,bullets:[]};let o=0;function l(){return!t.params.pagination.el||!t.pagination.el||Array.isArray(t.pagination.el)&&0===t.pagination.el.length}function c(e,i){const{bulletActiveClass:s}=t.params.pagination;e&&(e=e[("prev"===i?"previous":"next")+"ElementSibling"])&&(e.classList.add(`${s}-${i}`),(e=e[("prev"===i?"previous":"next")+"ElementSibling"])&&e.classList.add(`${s}-${i}-${i}`))}function h(e){const i=e.target.closest(_s(t.params.pagination.bulletClass));if(!i)return;e.preventDefault();const s=Ri(i)*t.params.slidesPerGroup;if(t.params.loop){if(t.realIndex===s)return;const e=(n=t.realIndex,r=s,(r%=a=t.slides.length)===1+(n%=a)?"next":r===n-1?"previous":void 0);"next"===e?t.slideNext():"previous"===e?t.slidePrev():t.slideToLoop(s)}else t.slideTo(s);var n,r,a}function u(){const e=t.rtl,i=t.params.pagination;if(l())return;let s,r,h=t.pagination.el;h=Bi(h);const u=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.slides.length,d=t.params.loop?Math.ceil(u/t.params.slidesPerGroup):t.snapGrid.length;if(t.params.loop?(r=t.previousRealIndex||0,s=t.params.slidesPerGroup>1?Math.floor(t.realIndex/t.params.slidesPerGroup):t.realIndex):void 0!==t.snapIndex?(s=t.snapIndex,r=t.previousSnapIndex):(r=t.previousIndex||0,s=t.activeIndex||0),"bullets"===i.type&&t.pagination.bullets&&t.pagination.bullets.length>0){const n=t.pagination.bullets;let l,u,d;if(i.dynamicBullets&&(a=Fi(n[0],t.isHorizontal()?"width":"height",!0),h.forEach(e=>{e.style[t.isHorizontal()?"width":"height"]=a*(i.dynamicMainBullets+4)+"px"}),i.dynamicMainBullets>1&&void 0!==r&&(o+=s-(r||0),o>i.dynamicMainBullets-1?o=i.dynamicMainBullets-1:o<0&&(o=0)),l=Math.max(s-o,0),u=l+(Math.min(n.length,i.dynamicMainBullets)-1),d=(u+l)/2),n.forEach(e=>{const t=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(e=>`${i.bulletActiveClass}${e}`)].map(e=>"string"==typeof e&&e.includes(" ")?e.split(" "):e).flat();e.classList.remove(...t)}),h.length>1)n.forEach(e=>{const n=Ri(e);n===s?e.classList.add(...i.bulletActiveClass.split(" ")):t.isElement&&e.setAttribute("part","bullet"),i.dynamicBullets&&(n>=l&&n<=u&&e.classList.add(...`${i.bulletActiveClass}-main`.split(" ")),n===l&&c(e,"prev"),n===u&&c(e,"next"))});else{const e=n[s];if(e&&e.classList.add(...i.bulletActiveClass.split(" ")),t.isElement&&n.forEach((e,t)=>{e.setAttribute("part",t===s?"bullet-active":"bullet")}),i.dynamicBullets){const e=n[l],t=n[u];for(let e=l;e<=u;e+=1)n[e]&&n[e].classList.add(...`${i.bulletActiveClass}-main`.split(" "));c(e,"prev"),c(t,"next")}}if(i.dynamicBullets){const s=Math.min(n.length,i.dynamicMainBullets+4),r=(a*s-a)/2-d*a,o=e?"right":"left";n.forEach(e=>{e.style[t.isHorizontal()?o:"top"]=`${r}px`})}}h.forEach((e,r)=>{if("fraction"===i.type&&(e.querySelectorAll(_s(i.currentClass)).forEach(e=>{e.textContent=i.formatFractionCurrent(s+1)}),e.querySelectorAll(_s(i.totalClass)).forEach(e=>{e.textContent=i.formatFractionTotal(d)})),"progressbar"===i.type){let n;n=i.progressbarOpposite?t.isHorizontal()?"vertical":"horizontal":t.isHorizontal()?"horizontal":"vertical";const r=(s+1)/d;let a=1,o=1;"horizontal"===n?a=r:o=r,e.querySelectorAll(_s(i.progressbarFillClass)).forEach(e=>{e.style.transform=`translate3d(0,0,0) scaleX(${a}) scaleY(${o})`,e.style.transitionDuration=`${t.params.speed}ms`})}"custom"===i.type&&i.renderCustom?(Di(e,i.renderCustom(t,s+1,d)),0===r&&n("paginationRender",e)):(0===r&&n("paginationRender",e),n("paginationUpdate",e)),t.params.watchOverflow&&t.enabled&&e.classList[t.isLocked?"add":"remove"](i.lockClass)})}function d(){const e=t.params.pagination;if(l())return;const i=t.virtual&&t.params.virtual.enabled?t.virtual.slides.length:t.grid&&t.params.grid.rows>1?t.slides.length/Math.ceil(t.params.grid.rows):t.slides.length;let s=t.pagination.el;s=Bi(s);let r="";if("bullets"===e.type){let s=t.params.loop?Math.ceil(i/t.params.slidesPerGroup):t.snapGrid.length;t.params.freeMode&&t.params.freeMode.enabled&&s>i&&(s=i);for(let i=0;i<s;i+=1)e.renderBullet?r+=e.renderBullet.call(t,i,e.bulletClass):r+=`<${e.bulletElement} ${t.isElement?'part="bullet"':""} class="${e.bulletClass}"></${e.bulletElement}>`}"fraction"===e.type&&(r=e.renderFraction?e.renderFraction.call(t,e.currentClass,e.totalClass):`<span class="${e.currentClass}"></span> / <span class="${e.totalClass}"></span>`),"progressbar"===e.type&&(r=e.renderProgressbar?e.renderProgressbar.call(t,e.progressbarFillClass):`<span class="${e.progressbarFillClass}"></span>`),t.pagination.bullets=[],s.forEach(i=>{"custom"!==e.type&&Di(i,r||""),"bullets"===e.type&&t.pagination.bullets.push(...i.querySelectorAll(_s(e.bulletClass)))}),"custom"!==e.type&&n("paginationRender",s[0])}function p(){t.params.pagination=vs(t,t.originalParams.pagination,t.params.pagination,{el:"swiper-pagination"});const e=t.params.pagination;if(!e.el)return;let i;"string"==typeof e.el&&t.isElement&&(i=t.el.querySelector(e.el)),i||"string"!=typeof e.el||(i=[...document.querySelectorAll(e.el)]),i||(i=e.el),i&&0!==i.length&&(t.params.uniqueNavElements&&"string"==typeof e.el&&Array.isArray(i)&&i.length>1&&(i=[...t.el.querySelectorAll(e.el)],i.length>1&&(i=i.find(e=>Oi(e,".swiper")[0]===t.el))),Array.isArray(i)&&1===i.length&&(i=i[0]),Object.assign(t.pagination,{el:i}),i=Bi(i),i.forEach(i=>{"bullets"===e.type&&e.clickable&&i.classList.add(...(e.clickableClass||"").split(" ")),i.classList.add(e.modifierClass+e.type),i.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass),"bullets"===e.type&&e.dynamicBullets&&(i.classList.add(`${e.modifierClass}${e.type}-dynamic`),o=0,e.dynamicMainBullets<1&&(e.dynamicMainBullets=1)),"progressbar"===e.type&&e.progressbarOpposite&&i.classList.add(e.progressbarOppositeClass),e.clickable&&i.addEventListener("click",h),t.enabled||i.classList.add(e.lockClass)}))}function f(){const e=t.params.pagination;if(l())return;let i=t.pagination.el;i&&(i=Bi(i),i.forEach(i=>{i.classList.remove(e.hiddenClass),i.classList.remove(e.modifierClass+e.type),i.classList.remove(t.isHorizontal()?e.horizontalClass:e.verticalClass),e.clickable&&(i.classList.remove(...(e.clickableClass||"").split(" ")),i.removeEventListener("click",h))})),t.pagination.bullets&&t.pagination.bullets.forEach(t=>t.classList.remove(...e.bulletActiveClass.split(" ")))}s("changeDirection",()=>{if(!t.pagination||!t.pagination.el)return;const e=t.params.pagination;let{el:i}=t.pagination;i=Bi(i),i.forEach(i=>{i.classList.remove(e.horizontalClass,e.verticalClass),i.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)})}),s("init",()=>{!1===t.params.pagination.enabled?m():(p(),d(),u())}),s("activeIndexChange",()=>{void 0===t.snapIndex&&u()}),s("snapIndexChange",()=>{u()}),s("snapGridLengthChange",()=>{d(),u()}),s("destroy",()=>{f()}),s("enable disable",()=>{let{el:e}=t.pagination;e&&(e=Bi(e),e.forEach(e=>e.classList[t.enabled?"remove":"add"](t.params.pagination.lockClass)))}),s("lock unlock",()=>{u()}),s("click",(e,i)=>{const s=i.target,r=Bi(t.pagination.el);if(t.params.pagination.el&&t.params.pagination.hideOnClick&&r&&r.length>0&&!s.classList.contains(t.params.pagination.bulletClass)){if(t.navigation&&(t.navigation.nextEl&&s===t.navigation.nextEl||t.navigation.prevEl&&s===t.navigation.prevEl))return;const e=r[0].classList.contains(t.params.pagination.hiddenClass);n(!0===e?"paginationShow":"paginationHide"),r.forEach(e=>e.classList.toggle(t.params.pagination.hiddenClass))}});const m=()=>{t.el.classList.add(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=Bi(e),e.forEach(e=>e.classList.add(t.params.pagination.paginationDisabledClass))),f()};Object.assign(t.pagination,{enable:()=>{t.el.classList.remove(t.params.pagination.paginationDisabledClass);let{el:e}=t.pagination;e&&(e=Bi(e),e.forEach(e=>e.classList.remove(t.params.pagination.paginationDisabledClass))),p(),d(),u()},disable:m,render:d,update:u,init:p,destroy:f})}function ws(e){let t,i,{swiper:s,extendParams:n,on:r,emit:a,params:o}=e;s.autoplay={running:!1,paused:!1,timeLeft:0},n({autoplay:{enabled:!1,delay:3e3,waitForTransition:!0,disableOnInteraction:!1,stopOnLastSlide:!1,reverseDirection:!1,pauseOnMouseEnter:!1}});let l,c,h,u,d,p,f,m,g=o&&o.autoplay?o.autoplay.delay:3e3,y=o&&o.autoplay?o.autoplay.delay:3e3,v=(new Date).getTime();function b(e){s&&!s.destroyed&&s.wrapperEl&&e.target===s.wrapperEl&&(s.wrapperEl.removeEventListener("transitionend",b),m||e.detail&&e.detail.bySwiperTouchMove||T())}const _=()=>{if(s.destroyed||!s.autoplay.running)return;s.autoplay.paused?c=!0:c&&(y=l,c=!1);const e=s.autoplay.paused?l:v+y-(new Date).getTime();s.autoplay.timeLeft=e,a("autoplayTimeLeft",e,e/g),i=requestAnimationFrame(()=>{_()})},x=e=>{if(s.destroyed||!s.autoplay.running)return;cancelAnimationFrame(i),_();let n=void 0===e?s.params.autoplay.delay:e;g=s.params.autoplay.delay,y=s.params.autoplay.delay;const r=(()=>{let e;if(e=s.virtual&&s.params.virtual.enabled?s.slides.find(e=>e.classList.contains("swiper-slide-active")):s.slides[s.activeIndex],e)return parseInt(e.getAttribute("data-swiper-autoplay"),10)})();!Number.isNaN(r)&&r>0&&void 0===e&&(n=r,g=r,y=r),l=n;const o=s.params.speed,c=()=>{s&&!s.destroyed&&(s.params.autoplay.reverseDirection?!s.isBeginning||s.params.loop||s.params.rewind?(s.slidePrev(o,!0,!0),a("autoplay")):s.params.autoplay.stopOnLastSlide||(s.slideTo(s.slides.length-1,o,!0,!0),a("autoplay")):!s.isEnd||s.params.loop||s.params.rewind?(s.slideNext(o,!0,!0),a("autoplay")):s.params.autoplay.stopOnLastSlide||(s.slideTo(0,o,!0,!0),a("autoplay")),s.params.cssMode&&(v=(new Date).getTime(),requestAnimationFrame(()=>{x()})))};return n>0?(clearTimeout(t),t=setTimeout(()=>{c()},n)):requestAnimationFrame(()=>{c()}),n},w=()=>{v=(new Date).getTime(),s.autoplay.running=!0,x(),a("autoplayStart")},S=()=>{s.autoplay.running=!1,clearTimeout(t),cancelAnimationFrame(i),a("autoplayStop")},k=(e,i)=>{if(s.destroyed||!s.autoplay.running)return;clearTimeout(t),e||(f=!0);const n=()=>{a("autoplayPause"),s.params.autoplay.waitForTransition?s.wrapperEl.addEventListener("transitionend",b):T()};if(s.autoplay.paused=!0,i)return p&&(l=s.params.autoplay.delay),p=!1,void n();const r=l||s.params.autoplay.delay;l=r-((new Date).getTime()-v),s.isEnd&&l<0&&!s.params.loop||(l<0&&(l=0),n())},T=()=>{s.isEnd&&l<0&&!s.params.loop||s.destroyed||!s.autoplay.running||(v=(new Date).getTime(),f?(f=!1,x(l)):x(),s.autoplay.paused=!1,a("autoplayResume"))},E=()=>{if(s.destroyed||!s.autoplay.running)return;const e=yi();"hidden"===e.visibilityState&&(f=!0,k(!0)),"visible"===e.visibilityState&&T()},C=e=>{"mouse"===e.pointerType&&(f=!0,m=!0,s.animating||s.autoplay.paused||k(!0))},A=e=>{"mouse"===e.pointerType&&(m=!1,s.autoplay.paused&&T())};r("init",()=>{s.params.autoplay.enabled&&(s.params.autoplay.pauseOnMouseEnter&&(s.el.addEventListener("pointerenter",C),s.el.addEventListener("pointerleave",A)),yi().addEventListener("visibilitychange",E),w())}),r("destroy",()=>{s.el&&"string"!=typeof s.el&&(s.el.removeEventListener("pointerenter",C),s.el.removeEventListener("pointerleave",A)),yi().removeEventListener("visibilitychange",E),s.autoplay.running&&S()}),r("_freeModeStaticRelease",()=>{(u||f)&&T()}),r("_freeModeNoMomentumRelease",()=>{s.params.autoplay.disableOnInteraction?S():k(!0,!0)}),r("beforeTransitionStart",(e,t,i)=>{!s.destroyed&&s.autoplay.running&&(i||!s.params.autoplay.disableOnInteraction?k(!0,!0):S())}),r("sliderFirstMove",()=>{!s.destroyed&&s.autoplay.running&&(s.params.autoplay.disableOnInteraction?S():(h=!0,u=!1,f=!1,d=setTimeout(()=>{f=!0,u=!0,k(!0)},200)))}),r("touchEnd",()=>{if(!s.destroyed&&s.autoplay.running&&h){if(clearTimeout(d),clearTimeout(t),s.params.autoplay.disableOnInteraction)return u=!1,void(h=!1);u&&s.params.cssMode&&T(),u=!1,h=!1}}),r("slideChange",()=>{!s.destroyed&&s.autoplay.running&&(p=!0)}),Object.assign(s.autoplay,{start:w,stop:S,pause:k,resume:T})}function Ss(e,t){const i=Ai(t);return i!==t&&(i.style.backfaceVisibility="hidden",i.style["-webkit-backface-visibility"]="hidden"),i}function ks(e,t){const i=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting?e.autoplay.start():e.autoplay.stop()})},{root:null,threshold:.1});return i.observe(t),i}Object.keys(ms).forEach(e=>{Object.keys(ms[e]).forEach(t=>{ys.prototype[t]=ms[e][t]})}),ys.use([function(e){let{swiper:t,on:i,emit:s}=e;const n=bi();let r=null,a=null;const o=()=>{t&&!t.destroyed&&t.initialized&&(s("beforeResize"),s("resize"))},l=()=>{t&&!t.destroyed&&t.initialized&&s("orientationchange")};i("init",()=>{t.params.resizeObserver&&void 0!==n.ResizeObserver?t&&!t.destroyed&&t.initialized&&(r=new ResizeObserver(e=>{a=n.requestAnimationFrame(()=>{const{width:i,height:s}=t;let n=i,r=s;e.forEach(e=>{let{contentBoxSize:i,contentRect:s,target:a}=e;a&&a!==t.el||(n=s?s.width:(i[0]||i).inlineSize,r=s?s.height:(i[0]||i).blockSize)}),n===i&&r===s||o()})}),r.observe(t.el)):(n.addEventListener("resize",o),n.addEventListener("orientationchange",l))}),i("destroy",()=>{a&&n.cancelAnimationFrame(a),r&&r.unobserve&&t.el&&(r.unobserve(t.el),r=null),n.removeEventListener("resize",o),n.removeEventListener("orientationchange",l)})},function(e){let{swiper:t,extendParams:i,on:s,emit:n}=e;const r=[],a=bi(),o=function(e,i){void 0===i&&(i={});const s=new(a.MutationObserver||a.WebkitMutationObserver)(e=>{if(t.__preventObserver__)return;if(1===e.length)return void n("observerUpdate",e[0]);const i=function(){n("observerUpdate",e[0])};a.requestAnimationFrame?a.requestAnimationFrame(i):a.setTimeout(i,0)});s.observe(e,{attributes:void 0===i.attributes||i.attributes,childList:t.isElement||(void 0===i.childList||i).childList,characterData:void 0===i.characterData||i.characterData}),r.push(s)};i({observer:!1,observeParents:!1,observeSlideChildren:!1}),s("init",()=>{if(t.params.observer){if(t.params.observeParents){const e=Oi(t.hostEl);for(let t=0;t<e.length;t+=1)o(e[t])}o(t.hostEl,{childList:t.params.observeSlideChildren}),o(t.wrapperEl,{attributes:!1})}}),s("destroy",()=>{r.forEach(e=>{e.disconnect()}),r.splice(0,r.length)})}]);try{const $o=new ys('[data-swiper-id="example"]',{modules:[bs,xs,ws,function(e){let{swiper:t,extendParams:i,on:s,emit:n}=e;const r=yi();let a,o,l,c,h=!1,u=null,d=null;function p(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:e,rtlTranslate:i}=t,{dragEl:s,el:n}=e,r=t.params.scrollbar,a=t.params.loop?t.progressLoop:t.progress;let c=o,h=(l-o)*a;i?(h=-h,h>0?(c=o-h,h=0):-h+o>l&&(c=l+h)):h<0?(c=o+h,h=0):h+o>l&&(c=l-h),t.isHorizontal()?(s.style.transform=`translate3d(${h}px, 0, 0)`,s.style.width=`${c}px`):(s.style.transform=`translate3d(0px, ${h}px, 0)`,s.style.height=`${c}px`),r.hide&&(clearTimeout(u),n.style.opacity=1,u=setTimeout(()=>{n.style.opacity=0,n.style.transitionDuration="400ms"},1e3))}function f(){if(!t.params.scrollbar.el||!t.scrollbar.el)return;const{scrollbar:e}=t,{dragEl:i,el:s}=e;i.style.width="",i.style.height="",l=t.isHorizontal()?s.offsetWidth:s.offsetHeight,c=t.size/(t.virtualSize+t.params.slidesOffsetBefore-(t.params.centeredSlides?t.snapGrid[0]:0)),o="auto"===t.params.scrollbar.dragSize?l*c:parseInt(t.params.scrollbar.dragSize,10),t.isHorizontal()?i.style.width=`${o}px`:i.style.height=`${o}px`,s.style.display=c>=1?"none":"",t.params.scrollbar.hide&&(s.style.opacity=0),t.params.watchOverflow&&t.enabled&&e.el.classList[t.isLocked?"add":"remove"](t.params.scrollbar.lockClass)}function m(e){return t.isHorizontal()?e.clientX:e.clientY}function g(e){const{scrollbar:i,rtlTranslate:s}=t,{el:n}=i;let r;r=(m(e)-function(e){const t=bi(),i=yi(),s=e.getBoundingClientRect(),n=i.body,r=e.clientTop||n.clientTop||0,a=e.clientLeft||n.clientLeft||0,o=e===t?t.scrollY:e.scrollTop,l=e===t?t.scrollX:e.scrollLeft;return{top:s.top+o-r,left:s.left+l-a}}(n)[t.isHorizontal()?"left":"top"]-(null!==a?a:o/2))/(l-o),r=Math.max(Math.min(r,1),0),s&&(r=1-r);const c=t.minTranslate()+(t.maxTranslate()-t.minTranslate())*r;t.updateProgress(c),t.setTranslate(c),t.updateActiveIndex(),t.updateSlidesClasses()}function y(e){const i=t.params.scrollbar,{scrollbar:s,wrapperEl:r}=t,{el:o,dragEl:l}=s;h=!0,a=e.target===l?m(e)-e.target.getBoundingClientRect()[t.isHorizontal()?"left":"top"]:null,e.preventDefault(),e.stopPropagation(),r.style.transitionDuration="100ms",l.style.transitionDuration="100ms",g(e),clearTimeout(d),o.style.transitionDuration="0ms",i.hide&&(o.style.opacity=1),t.params.cssMode&&(t.wrapperEl.style["scroll-snap-type"]="none"),n("scrollbarDragStart",e)}function v(e){const{scrollbar:i,wrapperEl:s}=t,{el:r,dragEl:a}=i;h&&(e.preventDefault&&e.cancelable?e.preventDefault():e.returnValue=!1,g(e),s.style.transitionDuration="0ms",r.style.transitionDuration="0ms",a.style.transitionDuration="0ms",n("scrollbarDragMove",e))}function b(e){const i=t.params.scrollbar,{scrollbar:s,wrapperEl:r}=t,{el:a}=s;h&&(h=!1,t.params.cssMode&&(t.wrapperEl.style["scroll-snap-type"]="",r.style.transitionDuration=""),i.hide&&(clearTimeout(d),d=xi(()=>{a.style.opacity=0,a.style.transitionDuration="400ms"},1e3)),n("scrollbarDragEnd",e),i.snapOnRelease&&t.slideToClosest())}function _(e){const{scrollbar:i,params:s}=t,n=i.el;if(!n)return;const a=n,o=!!s.passiveListeners&&{passive:!1,capture:!1},l=!!s.passiveListeners&&{passive:!0,capture:!1};if(!a)return;const c="on"===e?"addEventListener":"removeEventListener";a[c]("pointerdown",y,o),r[c]("pointermove",v,o),r[c]("pointerup",b,l)}function x(){const{scrollbar:e,el:i}=t;t.params.scrollbar=vs(t,t.originalParams.scrollbar,t.params.scrollbar,{el:"swiper-scrollbar"});const s=t.params.scrollbar;if(!s.el)return;let n,a;if("string"==typeof s.el&&t.isElement&&(n=t.el.querySelector(s.el)),n||"string"!=typeof s.el)n||(n=s.el);else if(n=r.querySelectorAll(s.el),!n.length)return;t.params.uniqueNavElements&&"string"==typeof s.el&&n.length>1&&1===i.querySelectorAll(s.el).length&&(n=i.querySelector(s.el)),n.length>0&&(n=n[0]),n.classList.add(t.isHorizontal()?s.horizontalClass:s.verticalClass),n&&(a=n.querySelector(_s(t.params.scrollbar.dragClass)),a||(a=Li("div",t.params.scrollbar.dragClass),n.append(a))),Object.assign(e,{el:n,dragEl:a}),s.draggable&&t.params.scrollbar.el&&t.scrollbar.el&&_("on"),n&&n.classList[t.enabled?"remove":"add"](..._i(t.params.scrollbar.lockClass))}function w(){const e=t.params.scrollbar,i=t.scrollbar.el;i&&i.classList.remove(..._i(t.isHorizontal()?e.horizontalClass:e.verticalClass)),t.params.scrollbar.el&&t.scrollbar.el&&_("off")}i({scrollbar:{el:null,dragSize:"auto",hide:!1,draggable:!1,snapOnRelease:!0,lockClass:"swiper-scrollbar-lock",dragClass:"swiper-scrollbar-drag",scrollbarDisabledClass:"swiper-scrollbar-disabled",horizontalClass:"swiper-scrollbar-horizontal",verticalClass:"swiper-scrollbar-vertical"}}),t.scrollbar={el:null,dragEl:null},s("changeDirection",()=>{if(!t.scrollbar||!t.scrollbar.el)return;const e=t.params.scrollbar;let{el:i}=t.scrollbar;i=Bi(i),i.forEach(i=>{i.classList.remove(e.horizontalClass,e.verticalClass),i.classList.add(t.isHorizontal()?e.horizontalClass:e.verticalClass)})}),s("init",()=>{!1===t.params.scrollbar.enabled?S():(x(),f(),p())}),s("update resize observerUpdate lock unlock changeDirection",()=>{f()}),s("setTranslate",()=>{p()}),s("setTransition",(e,i)=>{!function(e){t.params.scrollbar.el&&t.scrollbar.el&&(t.scrollbar.dragEl.style.transitionDuration=`${e}ms`)}(i)}),s("enable disable",()=>{const{el:e}=t.scrollbar;e&&e.classList[t.enabled?"remove":"add"](..._i(t.params.scrollbar.lockClass))}),s("destroy",()=>{w()});const S=()=>{t.el.classList.add(..._i(t.params.scrollbar.scrollbarDisabledClass)),t.scrollbar.el&&t.scrollbar.el.classList.add(..._i(t.params.scrollbar.scrollbarDisabledClass)),w()};Object.assign(t.scrollbar,{enable:()=>{t.el.classList.remove(..._i(t.params.scrollbar.scrollbarDisabledClass)),t.scrollbar.el&&t.scrollbar.el.classList.remove(..._i(t.params.scrollbar.scrollbarDisabledClass)),x(),f(),p()},disable:S,updateSize:f,setTranslate:p,init:x,destroy:w})},function(e){let{swiper:t,extendParams:i,on:s,emit:n}=e;const r=bi();let a;i({mousewheel:{enabled:!1,releaseOnEdges:!1,invert:!1,forceToAxis:!1,sensitivity:1,eventsTarget:"container",thresholdDelta:null,thresholdTime:null,noMousewheelClass:"swiper-no-mousewheel"}}),t.mousewheel={enabled:!1};let o,l=wi();const c=[];function h(){t.enabled&&(t.mouseEntered=!0)}function u(){t.enabled&&(t.mouseEntered=!1)}function d(e){return!(t.params.mousewheel.thresholdDelta&&e.delta<t.params.mousewheel.thresholdDelta||t.params.mousewheel.thresholdTime&&wi()-l<t.params.mousewheel.thresholdTime||!(e.delta>=6&&wi()-l<60)&&(e.direction<0?t.isEnd&&!t.params.loop||t.animating||(t.slideNext(),n("scroll",e.raw)):t.isBeginning&&!t.params.loop||t.animating||(t.slidePrev(),n("scroll",e.raw)),l=(new r.Date).getTime(),1))}function p(e){let i=e,s=!0;if(!t.enabled)return;if(e.target.closest(`.${t.params.mousewheel.noMousewheelClass}`))return;const r=t.params.mousewheel;t.params.cssMode&&i.preventDefault();let l=t.el;"container"!==t.params.mousewheel.eventsTarget&&(l=document.querySelector(t.params.mousewheel.eventsTarget));const h=l&&l.contains(i.target);if(!t.mouseEntered&&!h&&!r.releaseOnEdges)return!0;i.originalEvent&&(i=i.originalEvent);let u=0;const p=t.rtlTranslate?-1:1,f=function(e){let t=0,i=0,s=0,n=0;return"detail"in e&&(i=e.detail),"wheelDelta"in e&&(i=-e.wheelDelta/120),"wheelDeltaY"in e&&(i=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(t=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(t=i,i=0),s=10*t,n=10*i,"deltaY"in e&&(n=e.deltaY),"deltaX"in e&&(s=e.deltaX),e.shiftKey&&!s&&(s=n,n=0),(s||n)&&e.deltaMode&&(1===e.deltaMode?(s*=40,n*=40):(s*=800,n*=800)),s&&!t&&(t=s<1?-1:1),n&&!i&&(i=n<1?-1:1),{spinX:t,spinY:i,pixelX:s,pixelY:n}}(i);if(r.forceToAxis)if(t.isHorizontal()){if(!(Math.abs(f.pixelX)>Math.abs(f.pixelY)))return!0;u=-f.pixelX*p}else{if(!(Math.abs(f.pixelY)>Math.abs(f.pixelX)))return!0;u=-f.pixelY}else u=Math.abs(f.pixelX)>Math.abs(f.pixelY)?-f.pixelX*p:-f.pixelY;if(0===u)return!0;r.invert&&(u=-u);let m=t.getTranslate()+u*r.sensitivity;if(m>=t.minTranslate()&&(m=t.minTranslate()),m<=t.maxTranslate()&&(m=t.maxTranslate()),s=!!t.params.loop||!(m===t.minTranslate()||m===t.maxTranslate()),s&&t.params.nested&&i.stopPropagation(),t.params.freeMode&&t.params.freeMode.enabled){const e={time:wi(),delta:Math.abs(u),direction:Math.sign(u)},s=o&&e.time<o.time+500&&e.delta<=o.delta&&e.direction===o.direction;if(!s){o=void 0;let l=t.getTranslate()+u*r.sensitivity;const h=t.isBeginning,d=t.isEnd;if(l>=t.minTranslate()&&(l=t.minTranslate()),l<=t.maxTranslate()&&(l=t.maxTranslate()),t.setTransition(0),t.setTranslate(l),t.updateProgress(),t.updateActiveIndex(),t.updateSlidesClasses(),(!h&&t.isBeginning||!d&&t.isEnd)&&t.updateSlidesClasses(),t.params.loop&&t.loopFix({direction:e.direction<0?"next":"prev",byMousewheel:!0}),t.params.freeMode.sticky){clearTimeout(a),a=void 0,c.length>=15&&c.shift();const i=c.length?c[c.length-1]:void 0,s=c[0];if(c.push(e),i&&(e.delta>i.delta||e.direction!==i.direction))c.splice(0);else if(c.length>=15&&e.time-s.time<500&&s.delta-e.delta>=1&&e.delta<=6){const i=u>0?.8:.2;o=e,c.splice(0),a=xi(()=>{!t.destroyed&&t.params&&t.slideToClosest(t.params.speed,!0,void 0,i)},0)}a||(a=xi(()=>{!t.destroyed&&t.params&&(o=e,c.splice(0),t.slideToClosest(t.params.speed,!0,void 0,.5))},500))}if(s||n("scroll",i),t.params.autoplay&&t.params.autoplay.disableOnInteraction&&t.autoplay.stop(),r.releaseOnEdges&&(l===t.minTranslate()||l===t.maxTranslate()))return!0}}else{const i={time:wi(),delta:Math.abs(u),direction:Math.sign(u),raw:e};c.length>=2&&c.shift();const s=c.length?c[c.length-1]:void 0;if(c.push(i),s?(i.direction!==s.direction||i.delta>s.delta||i.time>s.time+150)&&d(i):d(i),function(e){const i=t.params.mousewheel;if(e.direction<0){if(t.isEnd&&!t.params.loop&&i.releaseOnEdges)return!0}else if(t.isBeginning&&!t.params.loop&&i.releaseOnEdges)return!0;return!1}(i))return!0}return i.preventDefault?i.preventDefault():i.returnValue=!1,!1}function f(e){let i=t.el;"container"!==t.params.mousewheel.eventsTarget&&(i=document.querySelector(t.params.mousewheel.eventsTarget)),i[e]("mouseenter",h),i[e]("mouseleave",u),i[e]("wheel",p)}function m(){return t.params.cssMode?(t.wrapperEl.removeEventListener("wheel",p),!0):!t.mousewheel.enabled&&(f("addEventListener"),t.mousewheel.enabled=!0,!0)}function g(){return t.params.cssMode?(t.wrapperEl.addEventListener(event,p),!0):!!t.mousewheel.enabled&&(f("removeEventListener"),t.mousewheel.enabled=!1,!0)}s("init",()=>{!t.params.mousewheel.enabled&&t.params.cssMode&&g(),t.params.mousewheel.enabled&&m()}),s("destroy",()=>{t.params.cssMode&&m(),t.mousewheel.enabled&&g()}),Object.assign(t.mousewheel,{enable:m,disable:g})},function(e){let{swiper:t,extendParams:i,on:s}=e;i({fadeEffect:{crossFade:!1}}),function(e){const{effect:t,swiper:i,on:s,setTranslate:n,setTransition:r,overwriteParams:a,perspective:o,recreateShadows:l,getEffectParams:c}=e;let h;s("beforeInit",()=>{if(i.params.effect!==t)return;i.classNames.push(`${i.params.containerModifierClass}${t}`),o&&o()&&i.classNames.push(`${i.params.containerModifierClass}3d`);const e=a?a():{};Object.assign(i.params,e),Object.assign(i.originalParams,e)}),s("setTranslate _virtualUpdated",()=>{i.params.effect===t&&n()}),s("setTransition",(e,s)=>{i.params.effect===t&&r(s)}),s("transitionEnd",()=>{if(i.params.effect===t&&l){if(!c||!c().slideShadows)return;i.slides.forEach(e=>{e.querySelectorAll(".swiper-slide-shadow-top, .swiper-slide-shadow-right, .swiper-slide-shadow-bottom, .swiper-slide-shadow-left").forEach(e=>e.remove())}),l()}}),s("virtualUpdate",()=>{i.params.effect===t&&(i.slides.length||(h=!0),requestAnimationFrame(()=>{h&&i.slides&&i.slides.length&&(n(),h=!1)}))})}({effect:"fade",swiper:t,on:s,setTranslate:()=>{const{slides:e}=t;t.params.fadeEffect;for(let i=0;i<e.length;i+=1){const e=t.slides[i];let s=-e.swiperSlideOffset;t.params.virtualTranslate||(s-=t.translate);let n=0;t.isHorizontal()||(n=s,s=0);const r=t.params.fadeEffect.crossFade?Math.max(1-Math.abs(e.progress),0):1+Math.min(Math.max(e.progress,-1),0),a=Ss(0,e);a.style.opacity=r,a.style.transform=`translate3d(${s}px, ${n}px, 0px)`}},setTransition:e=>{const i=t.slides.map(e=>Ai(e));i.forEach(t=>{t.style.transitionDuration=`${e}ms`}),function(e){let{swiper:t,duration:i,transformElements:s,allSlides:n}=e;const{activeIndex:r}=t;if(t.params.virtualTranslate&&0!==i){let e,i=!1;e=n?s:s.filter(e=>{const i=e.classList.contains("swiper-slide-transform")?(e=>e.parentElement?e.parentElement:t.slides.find(t=>t.shadowRoot&&t.shadowRoot===e.parentNode))(e):e;return t.getSlideIndex(i)===r}),e.forEach(e=>{!function(e,t){t&&e.addEventListener("transitionend",function i(s){s.target===e&&(t.call(e,s),e.removeEventListener("transitionend",i))})}(e,()=>{if(i)return;if(!t||t.destroyed)return;i=!0,t.animating=!1;const e=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0});t.wrapperEl.dispatchEvent(e)})})}}({swiper:t,duration:e,transformElements:i,allSlides:!0})},overwriteParams:()=>({slidesPerView:1,slidesPerGroup:1,watchSlidesProgress:!0,spaceBetween:0,virtualTranslate:!t.params.cssMode})})}],slidesPerView:3,speed:800,spaceBetween:32,slideToClickedSlide:!0,mousewheel:{forceToAxis:!0},freeMode:{enabled:!0,sticky:!0},breakpoints:{600:{}},autoplay:{delay:3e3},navigation:{prevEl:'.content__block:has([data-swiper-id="example"]) .slider-navigation__link--prev',nextEl:'.content__block:has([data-swiper-id="example"]) .slider-navigation__link--next',disabledClass:"disable",hiddenClass:"hidden"},pagination:{el:'.content__block:has([data-swiper-id="example"]) .slider-pagination',clickable:!0,clickableClass:"clickable",bulletClass:"slider-pagination__bullet",bulletActiveClass:"active",lockClass:"disable"},renderFraction:function(e,t){return e+"/"+t},scrollbar:{el:'.content__block:has([data-swiper-id="example"]) .slider-scrollbar',dragClass:"slider-scrollbar__drag"},slideActiveClass:"current-slide"});$o.on("slideChange",function(){const e=$o.activeIndex,t=document.querySelectorAll('.content__block:has([data-swiper-id="example"]) .slider-pagination-custom__bullet');t.forEach(function(e){e.classList.remove("active")}),t[e].classList.add("active")})}catch(Uo){console.log(Uo)}try{const Wo=document.querySelector('[data-swiper-id="main-promo-slider"]');ks(new ys(Wo,{modules:[ws],slidesPerView:"auto",speed:800,spaceBetween:16,grabCursor:!0,mousewheel:{forceToAxis:!0},autoplay:{delay:6e3,pauseOnMouseEnter:!0},slideActiveClass:"current-slide",breakpoints:{540:{spaceBetween:32}}}),Wo)}catch(Go){console.log(Go)}try{const Yo=document.querySelector('[data-swiper-id="partners-slider"]');ks(new ys(Yo,{modules:[ws],slidesPerView:"auto",spaceBetween:16,allowTouchMove:!1,simulateTouch:!1,waitForTransition:!1,loop:!0,speed:8e3,autoplay:{delay:0,disableOnInteraction:!1,pauseOnMouseEnter:!1},slideActiveClass:"current-slide"}),Yo)}catch(Xo){console.log(Xo)}try{const Ko=document.querySelector('[data-swiper-id="clients-slider"]');ks(new ys(Ko,{modules:[ws],slidesPerView:"auto",spaceBetween:16,allowTouchMove:!1,simulateTouch:!1,waitForTransition:!1,loop:!0,speed:8e3,autoplay:{delay:0,disableOnInteraction:!1,pauseOnMouseEnter:!1},slideActiveClass:"current-slide"}),Ko)}catch(Zo){console.log(Zo)}try{const Jo=document.querySelector('[data-swiper-id="about-teams-slider"]');ks(new ys(Jo,{modules:[ws,bs,xs],slidesPerView:"auto",speed:800,spaceBetween:16,grabCursor:!0,mousewheel:{forceToAxis:!0},autoplay:{delay:6e3,pauseOnMouseEnter:!0},slideActiveClass:"current-slide",breakpoints:{540:{spaceBetween:32}},navigation:{prevEl:'.content__block:has([data-swiper-id="about-teams-slider"]) .about-teams__nav-button--prev',nextEl:'.content__block:has([data-swiper-id="about-teams-slider"]) .about-teams__nav-button--next',disabledClass:"disable",hiddenClass:"hidden"},pagination:{el:'.content__block:has([data-swiper-id="about-teams-slider"]) .about-teams__pagination',type:"fraction",currentClass:"about-teams__pagination-current",totalClass:"about-teams__pagination-total",renderFraction:function(e,t){return`\n\t\t\t\t\t<span class="${e}"></span>\n\t\t\t\t\t<span class="about-teams__pagination-separator">/</span>\n\t\t\t\t\t<span class="${t}"></span>`}}}),Jo)}catch(Qo){console.log(Qo)}try{const el=document.querySelector('[data-swiper-id="staff-slider"]');new ys(el,{modules:[ws,bs,xs],slidesPerView:"auto",speed:800,spaceBetween:16,mousewheel:{forceToAxis:!0},slideActiveClass:"current-slide",navigation:{prevEl:'.content__block:has([data-swiper-id="staff-slider"]) .staff__button--prev',nextEl:'.content__block:has([data-swiper-id="staff-slider"]) .staff__button--next',disabledClass:"disable",hiddenClass:"hidden"},pagination:{el:'.content__block:has([data-swiper-id="staff-slider"]) .staff__pagination',type:"fraction",currentClass:"staff__pagination-current",totalClass:"staff__pagination-total",renderFraction:function(e,t){return`\n\t\t\t\t\t<span class="${e}"></span>\n\t\t\t\t\t<span class="staff__pagination-separator">/</span>\n\t\t\t\t\t<span class="${t}"></span>`}}}),el.querySelectorAll(".js_slide").forEach(e=>{e.addEventListener("click",e=>{e.currentTarget.classList.toggle("active")})})}catch(tl){console.log(tl)}try{const il=document.querySelector('[data-swiper-id="certificates-slider"]');new ys(il,{modules:[ws,bs,xs],slidesPerView:"auto",speed:800,mousewheel:{forceToAxis:!0},slideActiveClass:"current-slide",navigation:{prevEl:'.content__block:has([data-swiper-id="certificates-slider"]) .certificates__button--prev',nextEl:'.content__block:has([data-swiper-id="certificates-slider"]) .certificates__button--next',disabledClass:"disable",hiddenClass:"hidden"},pagination:{el:'.content__block:has([data-swiper-id="certificates-slider"]) .certificates__pagination',type:"fraction",currentClass:"certificates__pagination-current",totalClass:"certificates__pagination-total",renderFraction:function(e,t){return`\n\t\t\t\t\t<span class="${e}"></span>\n\t\t\t\t\t<span class="certificates__pagination-separator">/</span>\n\t\t\t\t\t<span class="${t}"></span>`}}})}catch(sl){console.log(sl)}try{const nl=V(".header__language"),rl=nl.querySelector(".header__language-current");window.matchMedia("(pointer: fine)").matches||rl.addEventListener("click",()=>{nl.classList.toggle("active")}),window.addEventListener("scroll",()=>{window.scrollY>10&&nl.classList.contains("active")&&nl.classList.remove("active")})}catch(al){console.log("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ language-switcher:",al)}try{class ol{constructor(){this.items=document.querySelectorAll(".liquid-item"),this.items.length&&(this.currentHoverItem=null,this.isTransitioning=!1,this.transitionTimeout=null,this.init())}init(){this.items.forEach((e,t)=>{e.addEventListener("mouseenter",e=>this.handleMouseEnter(e,t)),e.addEventListener("mouseleave",e=>this.handleMouseLeave(e,t))})}handleMouseEnter(e,t){this.transitionTimeout&&(clearTimeout(this.transitionTimeout),this.transitionTimeout=null);const i=e.currentTarget.querySelector(".liquid-fill");if(!i)return;const s=null!==this.currentHoverItem&&1===Math.abs(this.currentHoverItem-t);this.clearAllAnimationClasses(i),s?"from-prev"==(this.currentHoverItem<t?"from-prev":"from-next")?i.classList.add("seamless-from-prev"):i.classList.add("seamless-from-next"):"top"===this.getEnterDirection(t)?i.classList.add("from-top"):i.classList.add("from-bottom"),this.currentHoverItem=t}handleMouseLeave(e,t){const i=e.currentTarget,s=i.querySelector(".liquid-fill");if(!s)return;const n=this.getExitDirection(e,t),r=this.getNextHoverIndex(e,t,n),a=null!==r&&1===Math.abs(r-t);s.classList.remove("from-top","from-bottom","seamless-from-prev","seamless-from-next"),a?("to-next"==(r>t?"to-next":"to-prev")?s.classList.add("seamless-to-next"):s.classList.add("seamless-to-prev"),i.classList.add("transitioning"),this.transitionTimeout=setTimeout(()=>{i.classList.remove("transitioning")},400)):("top"===n?s.classList.add("exit-top"):s.classList.add("exit-bottom"),this.transitionTimeout=setTimeout(()=>{this.clearAllAnimationClasses(s),s.style.transform="scaleY(0)"},500)),a||(this.currentHoverItem=null)}getEnterDirection(e){return null===this.currentHoverItem||this.currentHoverItem<e?"top":"bottom"}getExitDirection(e,t){const i=e.currentTarget.getBoundingClientRect();return e.clientY<i.top+i.height/2?"top":"bottom"}getNextHoverIndex(e,t,i){return"top"===i&&t>0?t-1:"bottom"===i&&t<this.items.length-1?t+1:null}clearAllAnimationClasses(e){["from-top","from-bottom","exit-top","exit-bottom","seamless-to-next","seamless-to-prev","seamless-from-prev","seamless-from-next"].forEach(t=>{e.classList.remove(t)})}}new ol}catch(ll){console.log("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ LiquidFill:",ll)}var Ts=i(73),Es=Object.defineProperty,Cs=Object.defineProperties,As=Object.getOwnPropertyDescriptors,Ms=Object.getOwnPropertySymbols,Ps=Object.prototype.hasOwnProperty,Ls=Object.prototype.propertyIsEnumerable,Is=(e,t,i)=>t in e?Es(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,Rs=(e,t)=>{for(var i in t||(t={}))Ps.call(t,i)&&Is(e,i,t[i]);if(Ms)for(var i of Ms(t))Ls.call(t,i)&&Is(e,i,t[i]);return e},Os=(e,t)=>Cs(e,As(t)),Fs=(e,t)=>{for(var i in t)Es(e,i,{get:t[i],enumerable:!0})},Bs=(e,t,i)=>(Is(e,"symbol"!=typeof t?t+"":t,i),i),Ds=(e,t,i)=>{if(!t.has(e))throw TypeError("Cannot "+i)},js=(e,t,i)=>(Ds(e,t,"read from private field"),i?i.call(e):t.get(e)),Ns=(e,t,i)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,i)},Vs={Image:null,isHeadless:!1,shim:function(e,t){return e.tagName=e.nodeName=t||"canvas",e.nodeType=1,e.getAttribute=function(e){return this[e]},e.setAttribute=function(e,t){return this[e]=t,this},e},polyfill:function(e,t){return Vs.shim(e),void 0!==t&&(Vs.Image=t),Vs.isHeadless=!0,e}},zs={};Fs(zs,{Curve:()=>pn,getAnchorsFromArcData:()=>wn,getComponentOnCubicBezier:()=>fn,getControlPoints:()=>_n,getCurveBoundingBox:()=>yn,getCurveFromPoints:()=>bn,getCurveLength:()=>gn,getReflection:()=>xn,integrate:()=>vn,subdivide:()=>mn});var Hs,qs,$s={};Fs($s,{HALF_PI:()=>Ws,NumArray:()=>en,TWO_PI:()=>Us,decomposeMatrix:()=>Gs,getComputedMatrix:()=>Xs,getPoT:()=>Js,lerp:()=>Ks,mod:()=>Qs,setMatrix:()=>Ys,toFixed:()=>sn}),"undefined"!=typeof window?Hs=window:void 0!==i.g?Hs=i.g:"undefined"!=typeof self&&(Hs=self);var Us=2*Math.PI,Ws=.5*Math.PI;function Gs(e,t,i,s,n,r){let a;return arguments.length<=1?(a=e.a,t=e.b,i=e.c,s=e.d,n=e.e,r=e.f):a=e,{translateX:n,translateY:r,scaleX:Math.sqrt(a*a+t*t),scaleY:Math.sqrt(i*i+s*s),rotation:180*Math.atan2(t,a)/Math.PI}}function Ys(e){qs=e}function Xs(e,t){t=t&&t.identity()||new qs;let i=e;const s=[];for(;i&&i._matrix;)s.push(i._matrix),i=i.parent;s.reverse();for(let e=0;e<s.length;e++){const i=s[e].elements;t.multiply(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9])}return t}function Ks(e,t,i){return i*(t-e)+e}var Zs=[2,4,8,16,32,64,128,256,512,1024,2048,4096];function Js(e){let t=0;for(;Zs[t]&&Zs[t]<e;)t++;return Zs[t]}function Qs(e,t){for(;e<0;)e+=t;return e%t}var en=Hs.Float32Array||Array,tn=Math.floor;function sn(e){return tn(1e6*e)/1e6}var nn={move:"M",line:"L",curve:"C",arc:"A",close:"Z"},rn=class{constructor(){Bs(this,"_events",{}),Bs(this,"_bound",!1)}addEventListener(e,t){return(this._events[e]||(this._events[e]=[])).push(t),this._bound=!0,this}on(){return this.addEventListener.apply(this,arguments)}bind(){return this.addEventListener.apply(this,arguments)}removeEventListener(e,t){if(!this._events)return this;if(!e&&!t)return this._events={},this._bound=!1,this;const i=e?[e]:Object.keys(this._events);for(let s=0,n=i.length;s<n;s++){e=i[s];let n=this._events[e];if(n){let i=[];if(t)for(let e=0,s=n.length;e<s;e++){let s=n[e];s=s.handler?s.handler:s,t!==s&&i.push(s)}this._events[e]=i}}return this}off(){return this.removeEventListener.apply(this,arguments)}unbind(){return this.removeEventListener.apply(this,arguments)}dispatchEvent(e){if(!this._events)return this;const t=Array.prototype.slice.call(arguments,1),i=this._events[e];if(i)for(let e=0;e<i.length;e++)i[e].call(this,...t);return this}trigger(){return this.dispatchEvent.apply(this,arguments)}listen(e,t,i){const s=this;function n(){i.apply(s,arguments)}return e&&(n.obj=e,n.name=t,n.handler=i,e.on(t,n)),s}ignore(e,t,i){return e.off(t,i),this}};Bs(rn,"Types",{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"}),Bs(rn,"Methods",["addEventListener","on","removeEventListener","off","unbind","dispatchEvent","trigger","listen","ignore"]);var an={x:{enumerable:!0,get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this._bound&&this.dispatchEvent(rn.Types.change))}},y:{enumerable:!0,get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this._bound&&this.dispatchEvent(rn.Types.change))}}},on=class extends rn{constructor(e=0,t=0){super(),Bs(this,"_x",0),Bs(this,"_y",0);for(let e in an)Object.defineProperty(this,e,an[e]);this.x=e,this.y=t}static add(e,t){return new on(e.x+t.x,e.y+t.y)}static sub(e,t){return new on(e.x-t.x,e.y-t.y)}static subtract(e,t){return on.sub(e,t)}static ratioBetween(e,t){return(e.x*t.x+e.y*t.y)/(e.length()*t.length())}static angleBetween(e,t){if(arguments.length>=4){const e=arguments[0]-arguments[2],t=arguments[1]-arguments[3];return Math.atan2(t,e)}const i=e.x-t.x,s=e.y-t.y;return Math.atan2(s,i)}static distanceBetween(e,t){return Math.sqrt(on.distanceBetweenSquared(e,t))}static distanceBetweenSquared(e,t){const i=e.x-t.x,s=e.y-t.y;return i*i+s*s}set(e,t){return this.x=e,this.y=t,this}copy(e){return this.x=e.x,this.y=e.y,this}clear(){return this.x=0,this.y=0,this}clone(){return new on(this.x,this.y)}add(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x+=e,this.y+=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x+=e.x,this.y+=e.y):(this.x+=e,this.y+=t)),this}addSelf(e){return this.add.apply(this,arguments)}sub(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x-=e,this.y-=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x-=e.x,this.y-=e.y):(this.x-=e,this.y-=t)),this}subtract(){return this.sub.apply(this,arguments)}subSelf(e){return this.sub.apply(this,arguments)}subtractSelf(e){return this.sub.apply(this,arguments)}multiply(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x*=e,this.y*=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x*=e.x,this.y*=e.y):(this.x*=e,this.y*=t)),this}multiplySelf(e){return this.multiply.apply(this,arguments)}multiplyScalar(e){return this.multiply(e)}divide(e,t){return arguments.length<=0||(arguments.length<=1?"number"==typeof e?(this.x/=e,this.y/=e):e&&"number"==typeof e.x&&"number"==typeof e.y&&(this.x/=e.x,this.y/=e.y):(this.x/=e,this.y/=t),isNaN(this.x)&&(this.x=0),isNaN(this.y)&&(this.y=0)),this}divideSelf(e){return this.divide.apply(this,arguments)}divideScalar(e){return this.divide(e)}negate(){return this.multiply(-1)}dot(e){return this.x*e.x+this.y*e.y}length(){return Math.sqrt(this.lengthSquared())}lengthSquared(){return this.x*this.x+this.y*this.y}normalize(){return this.divideScalar(this.length())}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}setLength(e){return this.normalize().multiplyScalar(e)}equals(e,t){return t=void 0===t?1e-4:t,this.distanceTo(e)<t}lerp(e,t){const i=(e.x-this.x)*t+this.x,s=(e.y-this.y)*t+this.y;return this.set(i,s)}isZero(e){return e=void 0===e?1e-4:e,this.length()<e}toString(){return this.x+", "+this.y}toObject(){return{x:sn(this.x),y:sn(this.y)}}rotate(e){const t=this.x,i=this.y,s=Math.cos(e),n=Math.sin(e);return this.x=t*s-i*n,this.y=t*n+i*s,this}},ln=on;Bs(ln,"zero",new on),Bs(ln,"left",new on(-1,0)),Bs(ln,"right",new on(1,0)),Bs(ln,"up",new on(0,-1)),Bs(ln,"down",new on(0,1));var cn=class extends ln{constructor(e=0,t=0,i=0,s=0,n=0,r=0,a=nn.move){super(e,t),Bs(this,"controls",{left:new ln,right:new ln}),Bs(this,"_command",nn.move),Bs(this,"_relative",!0),Bs(this,"_rx",0),Bs(this,"_ry",0),Bs(this,"_xAxisRotation",0),Bs(this,"_largeArcFlag",0),Bs(this,"_sweepFlag",1);for(let e in hn)Object.defineProperty(this,e,hn[e]);this.command=a,this.relative=!0;const o=cn.makeBroadcast(this);this.controls.left.set(i,s).addEventListener(rn.Types.change,o),this.controls.right.set(n,r).addEventListener(rn.Types.change,o)}static makeBroadcast(e){return function(){e._bound&&e.dispatchEvent(rn.Types.change)}}static fromObject(e){return(new cn).copy(e)}copy(e){return this.x=e.x,this.y=e.y,"string"==typeof e.command&&(this.command=e.command),e.controls&&(e.controls.left&&this.controls.left.copy(e.controls.left),e.controls.right&&this.controls.right.copy(e.controls.right)),"boolean"==typeof e.relative&&(this.relative=e.relative),"number"==typeof e.rx&&(this.rx=e.rx),"number"==typeof e.ry&&(this.ry=e.ry),"number"==typeof e.xAxisRotation&&(this.xAxisRotation=e.xAxisRotation),"number"==typeof e.largeArcFlag&&(this.largeArcFlag=e.largeArcFlag),"number"==typeof e.sweepFlag&&(this.sweepFlag=e.sweepFlag),this}clone(){return(new cn).copy(this)}toObject(){return{x:sn(this.x),y:sn(this.y),command:this.command,relative:this.relative,controls:{left:this.controls.left.toObject(),right:this.controls.right.toObject()},rx:sn(this.rx),ry:sn(this.ry),xAxisRotation:sn(this.xAxisRotation),largeArcFlag:sn(this.largeArcFlag),sweepFlag:sn(this.sweepFlag)}}toString(){return JSON.stringify(this.toObject())}},hn={command:{enumerable:!0,get:function(){return this._command},set:function(e){this._command!==e&&(this._command=e,this._bound&&this.dispatchEvent(rn.Types.change))}},relative:{enumerable:!0,get:function(){return this._relative},set:function(e){this._relative!==!!e&&(this._relative=!!e,this._bound&&this.dispatchEvent(rn.Types.change))}},rx:{enumerable:!0,get:function(){return this._rx},set:function(e){this._rx!==e&&(this._rx=e,this._bound&&this.dispatchEvent(rn.Types.change))}},ry:{enumerable:!0,get:function(){return this._ry},set:function(e){this._ry!==e&&(this._ry=e,this._bound&&this.dispatchEvent(rn.Types.change))}},xAxisRotation:{enumerable:!0,get:function(){return this._xAxisRotation},set:function(e){this._xAxisRotation!==e&&(this._xAxisRotation=e,this._bound&&this.dispatchEvent(rn.Types.change))}},largeArcFlag:{enumerable:!0,get:function(){return this._largeArcFlag},set:function(e){this._largeArcFlag!==e&&(this._largeArcFlag=e,this._bound&&this.dispatchEvent(rn.Types.change))}},sweepFlag:{get:function(){return this._sweepFlag},set:function(e){this._sweepFlag!==e&&(this._sweepFlag=e,this._bound&&this.dispatchEvent(rn.Types.change))}}},un=0,dn={NextFrameId:null,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.8.19",PublishDate:"2025-06-27T18:00:39.187Z",Identifier:"two-",Resolution:12,AutoCalculateImportedMatrices:!0,Instances:[],uniqueId:function(){return un++}},pn={CollinearityEpsilon:Math.pow(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:Number.EPSILON},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]};function fn(e,t,i,s,n){const r=1-e;return r*r*r*t+3*r*r*e*i+3*r*e*e*s+e*e*e*n}function mn(e,t,i,s,n,r,a,o,l){const c=(l=l||pn.RecursionLimit)+1;if(Math.abs(e-a)<.001&&Math.abs(t-o)<.001)return[new cn(a,o)];const h=[];for(let l=0;l<c;l++){const u=l/c,d=fn(u,e,i,n,a),p=fn(u,t,s,r,o);h.push(new cn(d,p))}return h}function gn(e,t,i,s,n,r,a,o,l){if(e===i&&t===s&&n===a&&r===o){const i=a-e,s=o-t;return Math.sqrt(i*i+s*s)}const c=9*(i-n)+3*(a-e),h=6*(e+n)-12*i,u=3*(i-e),d=9*(s-r)+3*(o-t),p=6*(t+r)-12*s,f=3*(s-t);return vn(function(e){const t=(c*e+h)*e+u,i=(d*e+p)*e+f;return Math.sqrt(t*t+i*i)},0,1,l||pn.RecursionLimit)}function yn(e,t,i,s,n,r,a,o){const l=[],c=[[],[]];let h,u,d,p,f,m,g,y;for(let c=0;c<2;++c)if(0==c?(u=6*e-12*i+6*n,h=-3*e+9*i-9*n+3*a,d=3*i-3*e):(u=6*t-12*s+6*r,h=-3*t+9*s-9*r+3*o,d=3*s-3*t),Math.abs(h)<1e-12){if(Math.abs(u)<1e-12)continue;p=-d/u,0<p&&p<1&&l.push(p)}else g=u*u-4*d*h,y=Math.sqrt(g),g<0||(f=(-u+y)/(2*h),0<f&&f<1&&l.push(f),m=(-u-y)/(2*h),0<m&&m<1&&l.push(m));let v,b=l.length,_=b;for(;b--;)p=l[b],v=1-p,c[0][b]=v*v*v*e+3*v*v*p*i+3*v*p*p*n+p*p*p*a,c[1][b]=v*v*v*t+3*v*v*p*s+3*v*p*p*r+p*p*p*o;return c[0][_]=e,c[1][_]=t,c[0][_+1]=a,c[1][_+1]=o,c[0].length=c[1].length=_+2,{min:{x:Math.min.apply(0,c[0]),y:Math.min.apply(0,c[1])},max:{x:Math.max.apply(0,c[0]),y:Math.max.apply(0,c[1])}}}function vn(e,t,i,s){let n=pn.abscissas[s-2],r=pn.weights[s-2],a=.5*(i-t),o=a+t,l=0,c=s+1>>1,h=1&s?r[l++]*e(o):0;for(;l<c;){const t=a*n[l];h+=r[l++]*(e(o+t)+e(o-t))}return a*h}function bn(e,t){const i=e.length,s=i-1;for(let n=0;n<i;n++){const r=e[n],a=t?Qs(n-1,i):Math.max(n-1,0),o=t?Qs(n+1,i):Math.min(n+1,s),l=r;_n(e[a],l,e[o]),l.command=0===n?nn.move:nn.curve}}function _n(e,t,i){const s=ln.angleBetween(e,t),n=ln.angleBetween(i,t);let r=ln.distanceBetween(e,t),a=ln.distanceBetween(i,t),o=(s+n)/2;return r<1e-4||a<1e-4?("boolean"!=typeof t.relative||t.relative||(t.controls.left.copy(t),t.controls.right.copy(t)),t):(r*=.33,a*=.33,n<s?o+=Ws:o-=Ws,t.controls.left.x=Math.cos(o)*r,t.controls.left.y=Math.sin(o)*r,o-=Math.PI,t.controls.right.x=Math.cos(o)*a,t.controls.right.y=Math.sin(o)*a,"boolean"!=typeof t.relative||t.relative||(t.controls.left.x+=t.x,t.controls.left.y+=t.y,t.controls.right.x+=t.x,t.controls.right.y+=t.y),t)}function xn(e,t,i){return new ln(2*e.x-(t.x+e.x)-(i?e.x:0),2*e.y-(t.y+e.y)-(i?e.y:0))}function wn(e,t,i,s,n,r,a){const o=dn.Resolution,l=[];for(let e=0;e<o;e++){let t=(e+1)/o;a&&(t=1-t);const c=t*r+n,h=i*Math.cos(c),u=s*Math.sin(c),d=new cn(h,u);d.command=nn.line,l.push(d)}}var Sn=Array.prototype.slice,kn={isNaN:function(e){return"number"==typeof e&&e!==+e},isElement:function(e){return!(!e||1!==e.nodeType)},isObject:function(e){const t=typeof e;return"function"===t||"object"===t&&!!e},isFunction:function(e){return"function"==typeof e},extend:function(e){const t=Sn.call(arguments,1);for(let i=0;i<t.length;i++){const s=t[i];for(let t in s)e[t]=s[t]}return e},defaults:function(e){const t=Sn.call(arguments,1);for(let i=0;i<t.length;i++){const s=t[i];for(let t in s)void 0===e[t]&&(e[t]=s[t])}return e},each:function(e,t,i){const s=i||this,n=!function(e){if(null==e)return!1;const t=e.length;return"number"==typeof t&&t>=0&&t<4294967296}(e)&&Object.keys(e),r=(n||e).length;for(let i=0;i<r;i++){const r=n?n[i]:i;t.call(s,e[r],r,e)}return e},performance:Hs.performance&&Hs.performance.now?Hs.performance:Date},Tn={hasEventListeners:"function"==typeof Hs.addEventListener,bind:function(e,t,i,s){return this.hasEventListeners?e.addEventListener(t,i,!!s):e.attachEvent("on"+t,i),Tn},unbind:function(e,t,i,s){return Tn.hasEventListeners?e.removeEventListeners(t,i,!!s):e.detachEvent("on"+t,i),Tn},getRequestAnimationFrame:function(){const e=["ms","moz","webkit","o"];let t=0,i=Hs.requestAnimationFrame;if(!i){for(let t=0;t<e.length;t++)i=Hs[e[t]+"RequestAnimationFrame"]||i;i=i||function(e,i){const s=(new Date).getTime(),n=Math.max(0,16-(s-t)),r=Hs.setTimeout(function(){e(s+n)},n);return t=s+n,r}}return i}},En=Hs.document?Hs.document.createElement("div"):{};En.id="help-two-load",Object.defineProperty(Tn,"temp",{enumerable:!0,get:function(){return kn.isElement(En)&&!Hs.document.head.contains(En)&&(En.style.display="none",Hs.document.head.appendChild(En)),En}});var Cn=class extends Error{constructor(e){super(),Bs(this,"name","Two.js"),Bs(this,"message"),this.message=e}},An=Hs.devicePixelRatio||1;function Mn(e){return An/function(e){return e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1}(e)}var Pn,Ln=class{constructor(){Bs(this,"map",{})}add(e,t){return this.map[e]=t,this}remove(e){return delete this.map[e],this}get(e){return this.map[e]}contains(e){return e in this.map}},In=class extends Array{constructor(){super(),Ns(this,Pn,new rn),arguments[0]&&Array.isArray(arguments[0])?arguments[0].length>0&&this.push.apply(this,arguments[0]):arguments.length>0&&this.push.apply(this,arguments)}get _events(){return js(this,Pn)}set _events(e){var t,i;i=e,Ds(this,t=Pn,"write to private field"),t.set(this,i)}get _bound(){return js(this,Pn)._bound}set _bound(e){js(this,Pn)._bound=e}addEventListener(){return js(this,Pn).addEventListener.apply(this,arguments)}on(){return js(this,Pn).on.apply(this,arguments)}bind(){return js(this,Pn).bind.apply(this,arguments)}removeEventListener(){return js(this,Pn).removeEventListener.apply(this,arguments)}off(){return js(this,Pn).off.apply(this,arguments)}unbind(){return js(this,Pn).unbind.apply(this,arguments)}dispatchEvent(){return js(this,Pn).dispatchEvent.apply(this,arguments)}trigger(){return js(this,Pn).trigger.apply(this,arguments)}listen(){return js(this,Pn).listen.apply(this,arguments)}ignore(){return js(this,Pn).ignore.apply(this,arguments)}pop(){const e=super.pop.apply(this,arguments);return this.trigger(rn.Types.remove,[e]),e}shift(){const e=super.shift.apply(this,arguments);return this.trigger(rn.Types.remove,[e]),e}push(){const e=super.push.apply(this,arguments);return this.trigger(rn.Types.insert,arguments),e}unshift(){const e=super.unshift.apply(this,arguments);return this.trigger(rn.Types.insert,arguments),e}splice(){const e=super.splice.apply(this,arguments);if(this.trigger(rn.Types.remove,e),arguments.length>2){const e=this.slice(arguments[0],arguments[0]+arguments.length-2);this.trigger(rn.Types.insert,e),this.trigger(rn.Types.order)}return e}sort(){return super.sort.apply(this,arguments),this.trigger(rn.Types.order),this}reverse(){return super.reverse.apply(this,arguments),this.trigger(rn.Types.order),this}indexOf(){return super.indexOf.apply(this,arguments)}map(e,t){const i=[];for(let s=0;s<this.length;s++){const n=this[s];let r;r=t?e.call(t,n,s):e(n,s),i.push(r)}return i}};Pn=new WeakMap;var Rn=class extends rn{constructor(){super(),Bs(this,"_flagId",!1),Bs(this,"_flagClassName",!1),Bs(this,"_renderer",{}),Bs(this,"_id",dn.Identifier+dn.uniqueId()),Bs(this,"_className",""),Bs(this,"classList",[]);for(let e in Bn)Object.defineProperty(this,e,Bn[e])}static fromObject(e){const t=(new Rn).copy(e);return"id"in e&&(t.id=e.id),t}flagReset(){return this._flagId=this._flagClassName=!1,this}copy(e){return this.renderer.type=e.renderer.type,this.className=e.className,this}toObject(){return{renderer:{type:this.renderer.type},id:this.id,className:this.className}}},On=Rn;Bs(On,"Properties",["renderer","id","className"]);var Fn,Bn={renderer:{enumerable:!1,get:function(){return this._renderer}},id:{enumerable:!0,get:function(){return this._id},set:function(e){const t=this._id;e!==this._id&&(this._id=e,this._flagId=!0,this.parent&&(delete this.parent.children.ids[t],this.parent.children.ids[this._id]=this))}},className:{enumerable:!0,get:function(){return this._className},set:function(e){this._className!==e&&(this._flagClassName=!0,this.classList=e.split(/\s+?/),this._className=e)}}},Dn={video:/\.(mp4|webm|ogg)$/i,image:/\.(jpe?g|png|gif|tiff|webp)$/i,effect:/texture|gradient/i};Hs.document&&(Fn=document.createElement("a"));var jn=class extends On{constructor(e,t){super(),Bs(this,"_flagSrc",!1),Bs(this,"_flagImage",!1),Bs(this,"_flagVideo",!1),Bs(this,"_flagLoaded",!1),Bs(this,"_flagRepeat",!1),Bs(this,"_flagOffset",!1),Bs(this,"_flagScale",!1),Bs(this,"_src",""),Bs(this,"_image",null),Bs(this,"_loaded",!1),Bs(this,"_repeat","no-repeat"),Bs(this,"_scale",1),Bs(this,"_offset",null);for(let e in Vn)Object.defineProperty(this,e,Vn[e]);if(this._renderer.type="texture",this._renderer.flagOffset=zn.bind(this),this._renderer.flagScale=Hn.bind(this),this.loaded=!1,this.repeat="no-repeat",this.offset=new ln,"function"==typeof t){const e=function(){this.unbind(rn.Types.load,e),"function"==typeof t&&t()}.bind(this);this.bind(rn.Types.load,e)}if("string"==typeof e)this.src=e;else if("object"==typeof e){const t=Object.prototype.toString.call(e);"[object HTMLImageElement]"!==t&&"[object HTMLCanvasElement]"!==t&&"[object HTMLVideoElement]"!==t&&"[object Image]"!==t||(this.image=e)}this._update()}fromObject(e){const t=(new jn).copy(e);return"id"in e&&(t.id=e.id),t}static getAbsoluteURL(e){return Fn?(Fn.href=e,Fn.href):e}static loadHeadlessBuffer(e,t){e.image.onload=t,e.image.src=e.src}static getTag(e){return e&&e.nodeName&&e.nodeName.toLowerCase()||"img"}static getImage(e){const t=jn.getAbsoluteURL(e);if(jn.ImageRegistry.contains(t))return jn.ImageRegistry.get(t);let i;return Vs.Image?(i=new Vs.Image,Vs.shim(i,"img")):Hs.document?i=Dn.video.test(t)?document.createElement("video"):document.createElement("img"):console.warn("Two.js: no prototypical image defined for Two.Texture"),i.crossOrigin="anonymous",i.referrerPolicy="no-referrer",i}static load(e,t){let i=e.image,s=jn.getTag(i);e._flagImage&&(/canvas/i.test(s)?jn.Register.canvas(e,t):(e._src=!Vs.isHeadless&&i.getAttribute("two-src")||i.src,jn.Register[s](e,t))),e._flagSrc&&(i||(i=jn.getImage(e.src),e.image=i),s=jn.getTag(i),jn.Register[s](e,t))}clone(){const e=new jn(this.src);return e.repeat=this.repeat,e.offset.copy(this.offset),e.scale=this.scale,e}copy(e){return this.src=e.src,this.repeat=e.repeat,this.offset="number"==typeof e.offset||e.offset instanceof ln?e.offset:(new ln).copy(e.offset),this.scale="number"==typeof e.scale||e.scale instanceof ln?e.scale:(new ln).copy(e.scale),this}toObject(){const e=super.toObject.call(this);return e.renderer.type="texture",e.src=this.src,e.repeat=this.repeat,e.offset=this.offset.toObject(),e.scale="number"==typeof this.scale?this.scale:this.scale.toObject(),e}_update(){return(this._flagSrc||this._flagImage)&&(this.trigger(rn.Types.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,jn.load(this,function(){this.loaded=!0,this.trigger(rn.Types.change).trigger(rn.Types.load)}.bind(this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this}flagReset(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagRepeat=this._flagVideo=this._flagScale=this._flagOffset=!1,super.flagReset.call(this),this}dispose(){if("elem"in this._renderer){const e=this._renderer.elem;e.parentNode.removeChild(e)}return"effect"in this._renderer&&(this._renderer.effect=null),this}},Nn=jn;Bs(Nn,"Properties",["src","loaded","repeat","scale","offset","image"]),Bs(Nn,"RegularExpressions",Dn),Bs(Nn,"ImageRegistry",new Ln),Bs(Nn,"Register",{canvas:function(e,t){e._src="#"+e.id,jn.ImageRegistry.add(e.src,e.image),"function"==typeof t&&t()},img:function(e,t){const i=e.image,s=function(e){!Vs.isHeadless&&i.removeEventListener&&"function"==typeof i.removeEventListener&&(i.removeEventListener("load",s,!1),i.removeEventListener("error",n,!1)),"function"==typeof t&&t()},n=function(t){throw Vs.isHeadless||"function"!=typeof i.removeEventListener||(i.removeEventListener("load",s,!1),i.removeEventListener("error",n,!1)),new Cn("unable to load "+e.src)};"number"==typeof i.width&&i.width>0&&"number"==typeof i.height&&i.height>0?s():Vs.isHeadless||"function"!=typeof i.addEventListener||(i.addEventListener("load",s,!1),i.addEventListener("error",n,!1)),e._src=jn.getAbsoluteURL(e._src),!Vs.isHeadless&&i&&i.getAttribute("two-src")||(Vs.isHeadless||i.setAttribute("two-src",e.src),jn.ImageRegistry.add(e.src,i),Vs.isHeadless?jn.loadHeadlessBuffer(e,s):e.image.src=e.src)},video:function(e,t){if(Vs.isHeadless)throw new Cn("video textures are not implemented in headless environments.");const i=function(n){e.image.removeEventListener("canplaythrough",i,!1),e.image.removeEventListener("error",s,!1),e.image.width=e.image.videoWidth,e.image.height=e.image.videoHeight,"function"==typeof t&&t()},s=function(t){throw e.image.removeEventListener("canplaythrough",i,!1),e.image.removeEventListener("error",s,!1),new Cn("unable to load "+e.src)};e._src=jn.getAbsoluteURL(e._src),e.image.getAttribute("two-src")||(e.image.setAttribute("two-src",e.src),jn.ImageRegistry.add(e.src,e.image)),e.image.readyState>=4?i():(e.image.addEventListener("canplaythrough",i,!1),e.image.addEventListener("error",s,!1),e.image.src=e.src,e.image.load())}});var Vn={src:{enumerable:!0,get:function(){return this._src},set:function(e){this._src=e,this._flagSrc=!0}},loaded:{enumerable:!0,get:function(){return this._loaded},set:function(e){this._loaded=e,this._flagLoaded=!0}},repeat:{enumerable:!0,get:function(){return this._repeat},set:function(e){this._repeat=e,this._flagRepeat=!0}},image:{enumerable:!0,get:function(){return this._image},set:function(e){let t;t="canvas"===Nn.getTag(e)?"#"+e.id:e.src,Nn.ImageRegistry.contains(t)?this._image=Nn.ImageRegistry.get(e.src):this._image=e,this._flagImage=!0}},offset:{enumerable:!0,get:function(){return this._offset},set:function(e){this._offset&&this._offset.unbind(rn.Types.change,this._renderer.flagOffset),this._offset=e,this._offset.bind(rn.Types.change,this._renderer.flagOffset),this._flagOffset=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof ln&&this._scale.unbind(rn.Types.change,this._renderer.flagScale),this._scale=e,this._scale instanceof ln&&this._scale.bind(rn.Types.change,this._renderer.flagScale),this._flagScale=!0}}};function zn(){this._flagOffset=!0}function Hn(){this._flagScale=!0}var qn=class extends On{constructor(e,t,i){super(),Bs(this,"_flagOffset",!0),Bs(this,"_flagOpacity",!0),Bs(this,"_flagColor",!0),Bs(this,"_offset",0),Bs(this,"_opacity",1),Bs(this,"_color","#fff");for(let e in Un)Object.defineProperty(this,e,Un[e]);this._renderer.type="stop",this.offset="number"==typeof e?e:qn.Index<=0?0:1,this.opacity="number"==typeof i?i:1,this.color="string"==typeof t?t:qn.Index<=0?"#fff":"#000",qn.Index=(qn.Index+1)%2}static fromObject(e){const t=(new qn).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<qn.Properties.length;t++){const i=qn.Properties[t];i in e&&(this[i]=e[i])}return this}clone(e){const t=new qn;return kn.each(qn.Properties,function(e){t[e]=this[e]},this),e&&e.stops&&e.stops.push(t),t}toObject(){const e=super.toObject.call(this);return e.renderer.type="stop",kn.each(qn.Properties,t=>{e[t]=this[t]},this),e}flagReset(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,super.flagReset.call(this),this}},$n=qn;Bs($n,"Index",0),Bs($n,"Properties",["offset","opacity","color"]);var Un={offset:{enumerable:!0,get:function(){return this._offset},set:function(e){this._offset=e,this._flagOffset=!0,this.parent&&(this.parent._flagStops=!0)}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0,this.parent&&(this.parent._flagStops=!0)}},color:{enumerable:!0,get:function(){return this._color},set:function(e){this._color=e,this._flagColor=!0,this.parent&&(this.parent._flagStops=!0)}}},Wn=class extends On{constructor(e){super(),Bs(this,"_flagStops",!1),Bs(this,"_flagSpread",!1),Bs(this,"_flagUnits",!1),Bs(this,"_spread",""),Bs(this,"_units","");for(let e in Yn)Object.defineProperty(this,e,Yn[e]);this._renderer.type="gradient",this._renderer.flagStops=Xn.bind(this),this._renderer.bindStops=Kn.bind(this),this._renderer.unbindStops=Zn.bind(this),this.spread="pad",this.units="objectBoundingBox",e&&(this.stops=e)}static fromObject(e){let t=e.stops;t&&t.length>0&&(t=t.map(e=>e instanceof $n?e:(new $n).copy(e)));const i=(new Wn).copy(e);return"id"in e&&(i.id=e.id),i}clone(e){const t=this.stops.map(e=>e.clone()),i=new Wn(t);return kn.each(Wn.Properties,e=>{i[e]=this[e]},this),e&&e.add(i),i}copy(e){super.copy.call(this,e);for(let t=0;t<Wn.Properties.length;t++){const i=Wn.Properties[t];i in e&&(this[i]=e[i])}return this}toObject(){const e={stops:this.stops.map(e=>e.toObject())};return kn.each(Wn.Properties,t=>{e[t]=this[t]},this),e}_update(){return(this._flagSpread||this._flagStops)&&this.trigger(rn.Types.change),this}flagReset(){return this._flagSpread=this._flagUnits=this._flagStops=!1,super.flagReset.call(this),this}dispose(){if("elem"in this._renderer){const e=this._renderer.elem;e.parentNode.removeChild(e)}return"effect"in this._renderer&&(this._renderer.effect=null),this}},Gn=Wn;Bs(Gn,"Stop",$n),Bs(Gn,"Properties",["spread","stops","units"]);var Yn={spread:{enumerable:!0,get:function(){return this._spread},set:function(e){this._spread=e,this._flagSpread=!0}},units:{enumerable:!0,get:function(){return this._units},set:function(e){this._units=e,this._flagUnits=!0}},stops:{enumerable:!0,get:function(){return this._stops},set:function(e){const t=this._renderer.bindStops,i=this._renderer.unbindStops;this._stops&&this._stops.unbind(rn.Types.insert,t).unbind(rn.Types.remove,i),this._stops=new In((e||[]).slice(0)),this._stops.bind(rn.Types.insert,t).bind(rn.Types.remove,i),t(this._stops)}}};function Xn(){this._flagStops=!0}function Kn(e){let t=e.length;for(;t--;)e[t].bind(rn.Types.change,this._renderer.flagStops),e[t].parent=this;this._renderer.flagStops()}function Zn(e){let t=e.length;for(;t--;)e[t].unbind(rn.Types.change,this._renderer.flagStops),delete e[t].parent;this._renderer.flagStops()}var Jn=class extends Gn{constructor(e,t,i,s,n){super(n),Bs(this,"_flagEndPoints",!1),Bs(this,"_left",null),Bs(this,"_right",null);for(let e in er)Object.defineProperty(this,e,er[e]);this._renderer.type="linear-gradient",this._renderer.flagEndPoints=tr.bind(this),this.left=new ln,this.right=new ln,"number"==typeof e&&(this.left.x=e),"number"==typeof t&&(this.left.y=t),"number"==typeof i&&(this.right.x=i),"number"==typeof s&&(this.right.y=s)}static fromObject(e){const t=(new Jn).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<Jn.Properties.length;t++){const i=Jn.Properties[t];i in e&&(this[i]=e[i]instanceof ln?e[i]:(new ln).copy(e[i]))}return this}clone(e){const t=this.stops.map(function(e){return e.clone()}),i=new Jn(this.left._x,this.left._y,this.right._x,this.right._y,t);return kn.each(Gn.Properties,function(e){i[e]=this[e]},this),e&&e.add(i),i}toObject(){const e=super.toObject.call(this);return e.left=this.left.toObject(),e.right=this.right.toObject(),e}_update(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(rn.Types.change),this}flagReset(){return this._flagEndPoints=!1,super.flagReset.call(this),this}},Qn=Jn;Bs(Qn,"Stop",$n),Bs(Qn,"Properties",["left","right"]);var er={left:{enumerable:!0,get:function(){return this._left},set:function(e){this._left instanceof ln&&this._left.unbind(rn.Types.change,this._renderer.flagEndPoints),this._left=e,this._left.bind(rn.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}},right:{enumerable:!0,get:function(){return this._right},set:function(e){this._right instanceof ln&&this._right.unbind(rn.Types.change,this._renderer.flagEndPoints),this._right=e,this._right.bind(rn.Types.change,this._renderer.flagEndPoints),this._flagEndPoints=!0}}};function tr(){this._flagEndPoints=!0}var ir=class extends Gn{constructor(e,t,i,s,n,r){super(s),Bs(this,"_flagRadius",!1),Bs(this,"_flagCenter",!1),Bs(this,"_flagFocal",!1),Bs(this,"_radius",0),Bs(this,"_center",null),Bs(this,"_focal",null);for(let e in nr)Object.defineProperty(this,e,nr[e]);this._renderer.type="radial-gradient",this._renderer.flagCenter=rr.bind(this),this._renderer.flagFocal=ar.bind(this),this.center=new ln,this.radius="number"==typeof i?i:1,this.focal=new ln,"number"==typeof e&&(this.center.x=e),"number"==typeof t&&(this.center.y=t),this.focal.copy(this.center),"number"==typeof n&&(this.focal.x=n),"number"==typeof r&&(this.focal.y=r)}static fromObject(e){const t=(new ir).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<ir.Properties.length;t++){const i=ir.Properties[t];i in e&&(/(center|focal)i/.test(i)?this[i]=e[i]instanceof ln?e[i]:(new ln).copy(e[i]):"number"==typeof e[i]&&(this[i]=e[MediaKeySystemAccess]))}return this}clone(e){const t=this.stops.map(function(e){return e.clone()}),i=new ir(this.center._x,this.center._y,this._radius,t,this.focal._x,this.focal._y);return kn.each(Gn.Properties.concat(ir.Properties),function(e){i[e]=this[e]},this),e&&e.add(i),i}toObject(){const e=super.toObject.call(this);return kn.each(ir.Properties,function(t){e[t]=this[t]},this),e.center=this.center.toObject(),e.focal=this.focal.toObject(),e}_update(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(rn.Types.change),this}flagReset(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,super.flagReset.call(this),this}},sr=ir;Bs(sr,"Stop",$n),Bs(sr,"Properties",["center","radius","focal"]);var nr={radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius=e,this._flagRadius=!0}},center:{enumerable:!0,get:function(){return this._center},set:function(e){this._center&&this._center.unbind(rn.Types.change,this._renderer.flagCenter),this._center=e,this._center.bind(rn.Types.change,this._renderer.flagCenter),this._flagCenter=!0}},focal:{enumerable:!0,get:function(){return this._focal},set:function(e){this._focal&&this._focal.unbind(rn.Types.change,this._renderer.flagFocal),this._focal=e,this._focal.bind(rn.Types.change,this._renderer.flagFocal),this._flagFocal=!0}}};function rr(){this._flagCenter=!0}function ar(){this._flagFocal=!0}function or(e,t){if(0===t||1===t)return!0;const i=e._length*t;let s=0;for(let t=0;t<e._lengths.length;t++){const n=e._lengths[t];if(s>=i)return i-s>=0;s+=n}return!1}function lr(e,t){const i=e._length;if(t<=0)return 0;if(t>=i)return e._lengths.length-1;for(let i=0,s=0;i<e._lengths.length;i++){if(s+e._lengths[i]>=t)return t-=s,Math.max(i-1,0)+t/e._lengths[i];s+=e._lengths[i]}return-1}function cr(e,t,i){let s,n,r,a,o,l,c,h;const u=t.controls&&t.controls.right,d=e.controls&&e.controls.left;return s=t.x,o=t.y,n=(u||t).x,l=(u||t).y,r=(d||e).x,c=(d||e).y,a=e.x,h=e.y,u&&t._relative&&(n+=t.x,l+=t.y),d&&e._relative&&(r+=e.x,c+=e.y),gn(s,o,n,l,r,c,a,h,i)}function hr(e,t,i){let s,n,r,a,o,l,c,h;const u=t.controls&&t.controls.right,d=e.controls&&e.controls.left;return s=t.x,o=t.y,n=(u||t).x,l=(u||t).y,r=(d||e).x,c=(d||e).y,a=e.x,h=e.y,u&&t._relative&&(n+=t.x,l+=t.y),d&&e._relative&&(r+=e.x,c+=e.y),mn(s,o,n,l,r,c,a,h,i)}function ur(e){switch(e.renderer.type){case"texture":return Nn.fromObject(e);case"gradient":return Gn.fromObject(e);case"linear-gradient":return Qn.fromObject(e);case"radial-gradient":return sr.fromObject(e)}return e}var dr=Math.cos,pr=Math.sin,fr=Math.tan,mr=[],gr=class extends rn{constructor(e,t,i,s,n,r){super(),Bs(this,"elements",new en(9)),Bs(this,"manual",!1);let a=e;Array.isArray(a)||(a=Array.prototype.slice.call(arguments)),this.identity(),a.length>0&&this.set(a)}static Multiply(e,t,i){if(t.length<=3){const i=e;let s,n,r;const a=t[0]||0,o=t[1]||0,l=t[2]||0;return s=i[0]*a+i[1]*o+i[2]*l,n=i[3]*a+i[4]*o+i[5]*l,r=i[6]*a+i[7]*o+i[8]*l,[s,n,r]}const s=e[0],n=e[1],r=e[2],a=e[3],o=e[4],l=e[5],c=e[6],h=e[7],u=e[8],d=t[0],p=t[1],f=t[2],m=t[3],g=t[4],y=t[5],v=t[6],b=t[7],_=t[8];return(i=i||new en(9))[0]=s*d+n*m+r*v,i[1]=s*p+n*g+r*b,i[2]=s*f+n*y+r*_,i[3]=a*d+o*m+l*v,i[4]=a*p+o*g+l*b,i[5]=a*f+o*y+l*_,i[6]=c*d+h*m+u*v,i[7]=c*p+h*g+u*b,i[8]=c*f+h*y+u*_,i}static fromObject(e){return(new gr).copy(e)}set(e,t,i,s,n,r,a,o,l){if(void 0===t){const c=e;e=c[0],t=c[1],i=c[2],s=c[3],n=c[4],r=c[5],a=c[6],o=c[7],l=c[8]}return this.elements[0]=e,this.elements[1]=t,this.elements[2]=i,this.elements[3]=s,this.elements[4]=n,this.elements[5]=r,this.elements[6]=a,this.elements[7]=o,this.elements[8]=l,this.trigger(rn.Types.change)}copy(e){return this.elements[0]=e.elements[0],this.elements[1]=e.elements[1],this.elements[2]=e.elements[2],this.elements[3]=e.elements[3],this.elements[4]=e.elements[4],this.elements[5]=e.elements[5],this.elements[6]=e.elements[6],this.elements[7]=e.elements[7],this.elements[8]=e.elements[8],this.manual=e.manual,this.trigger(rn.Types.change)}identity(){return this.elements[0]=gr.Identity[0],this.elements[1]=gr.Identity[1],this.elements[2]=gr.Identity[2],this.elements[3]=gr.Identity[3],this.elements[4]=gr.Identity[4],this.elements[5]=gr.Identity[5],this.elements[6]=gr.Identity[6],this.elements[7]=gr.Identity[7],this.elements[8]=gr.Identity[8],this.trigger(rn.Types.change)}multiply(e,t,i,s,n,r,a,o,l){if(void 0===t)return this.elements[0]*=e,this.elements[1]*=e,this.elements[2]*=e,this.elements[3]*=e,this.elements[4]*=e,this.elements[5]*=e,this.elements[6]*=e,this.elements[7]*=e,this.elements[8]*=e,this.trigger(rn.Types.change);if(void 0===i&&(i=1),void 0===s)return e=e||0,t=t||0,i=i||0,[(n=this.elements)[0]*e+n[1]*t+n[2]*i,n[3]*e+n[4]*t+n[5]*i,n[6]*e+n[7]*t+n[8]*i];const c=this.elements,h=[e,t,i,s,n,r,a,o,l],u=c[0],d=c[1],p=c[2],f=c[3],m=c[4],g=c[5],y=c[6],v=c[7],b=c[8],_=h[0],x=h[1],w=h[2],S=h[3],k=h[4],T=h[5],E=h[6],C=h[7],A=h[8];return this.elements[0]=u*_+d*S+p*E,this.elements[1]=u*x+d*k+p*C,this.elements[2]=u*w+d*T+p*A,this.elements[3]=f*_+m*S+g*E,this.elements[4]=f*x+m*k+g*C,this.elements[5]=f*w+m*T+g*A,this.elements[6]=y*_+v*S+b*E,this.elements[7]=y*x+v*k+b*C,this.elements[8]=y*w+v*T+b*A,this.trigger(rn.Types.change)}inverse(e){const t=this.elements;e=e||new gr;const i=t[0],s=t[1],n=t[2],r=t[3],a=t[4],o=t[5],l=t[6],c=t[7],h=t[8],u=h*a-o*c,d=-h*r+o*l,p=c*r-a*l;let f=i*u+s*d+n*p;return f?(f=1/f,e.elements[0]=u*f,e.elements[1]=(-h*s+n*c)*f,e.elements[2]=(o*s-n*a)*f,e.elements[3]=d*f,e.elements[4]=(h*i-n*l)*f,e.elements[5]=(-o*i+n*r)*f,e.elements[6]=p*f,e.elements[7]=(-c*i+s*l)*f,e.elements[8]=(a*i-s*r)*f,e):null}scale(e,t){return arguments.length<=1&&(t=e),this.multiply(e,0,0,0,t,0,0,0,1)}rotate(e){const t=dr(e),i=pr(e);return this.multiply(t,-i,0,i,t,0,0,0,1)}translate(e,t){return this.multiply(1,0,e,0,1,t,0,0,1)}skewX(e){const t=fr(e);return this.multiply(1,t,0,0,1,0,0,0,1)}skewY(e){const t=fr(e);return this.multiply(1,0,0,t,1,0,0,0,1)}toString(e){return mr.length=0,this.toTransformArray(e,mr),mr.map(sn).join(" ")}toTransformArray(e,t){const i=this.elements,s=!!t,n=i[0],r=i[1],a=i[2],o=i[3],l=i[4],c=i[5];if(e){const e=i[6],h=i[7],u=i[8];return s?(t[0]=n,t[1]=o,t[2]=e,t[3]=r,t[4]=l,t[5]=h,t[6]=a,t[7]=c,void(t[8]=u)):[n,o,e,r,l,h,a,c,u]}return s?(t[0]=n,t[1]=o,t[2]=r,t[3]=l,t[4]=a,void(t[5]=c)):[n,o,r,l,a,c]}toArray(e,t){const i=this.elements,s=!!t,n=i[0],r=i[1],a=i[2],o=i[3],l=i[4],c=i[5];if(e){const e=i[6],h=i[7],u=i[8];return s?(t[0]=n,t[1]=r,t[2]=a,t[3]=o,t[4]=l,t[5]=c,t[6]=e,t[7]=h,void(t[8]=u)):[n,r,a,o,l,c,e,h,u]}return s?(t[0]=n,t[1]=r,t[2]=a,t[3]=o,t[4]=l,void(t[5]=c)):[n,r,a,o,l,c]}toObject(){return{renderer:{type:"matrix"},elements:this.toArray(!0),manual:!!this.manual}}clone(){return(new gr).copy(this)}},yr=gr;Bs(yr,"Identity",[1,0,0,0,1,0,0,0,1]),Ys(yr);var vr=class extends On{constructor(){super(),Bs(this,"_flagMatrix",!0),Bs(this,"_flagScale",!1),Bs(this,"_matrix",null),Bs(this,"_worldMatrix",null),Bs(this,"_position",null),Bs(this,"_rotation",0),Bs(this,"_scale",1),Bs(this,"_skewX",0),Bs(this,"_skewY",0);for(let e in _r)Object.defineProperty(this,e,_r[e]);this._renderer.flagMatrix=xr.bind(this),this.isShape=!0,this.matrix=new yr,this.worldMatrix=new yr,this.position=new ln,this.rotation=0,this.scale=1,this.skewX=0,this.skewY=0}static fromObject(e){const t=(new vr).copy(e);return"id"in e&&(t.id=e.id),t}get renderer(){return this._renderer}set renderer(e){this._renderer=e}get translation(){return _r.position.get.apply(this,arguments)}set translation(e){_r.position.set.apply(this,arguments)}addTo(e){return e.add(this),this}remove(){return this.parent?(this.parent.remove(this),this):this}copy(e){return super.copy.call(this,e),"position"in e&&(e.position instanceof ln?this.position=e.position:this.position.copy(e.position)),"rotation"in e&&(this.rotation=e.rotation),"scale"in e&&(this.scale="number"==typeof e.scale||e.scale instanceof ln?e.scale:new ln(e.scale.x,e.scale.y)),"skewX"in e&&(this.skewX=e.skewX),"skewY"in e&&(this.skewY=e.skewY),"matrix"in e&&e.matrix.manual&&(this.matrix.copy(e.matrix),this.matrix.manual=!0),this}clone(e){const t=new vr;return t.position.copy(this.position),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e=super.toObject.call(this);return e.renderer={type:"shape"},e.isShape=!0,e.translation=this.translation.toObject(),e.rotation=this.translation.rotation,e.scale=this.scale instanceof ln?this.scale.toObject():this.scale,e.skewX=this.skewX,e.skewY=this.skewY,e.matrix=this.matrix.toObject(),e}_update(e){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.position.x,this.position.y),this._matrix.rotate(this.rotation),this._scale instanceof ln?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.skewX(this.skewX),this._matrix.skewY(this.skewY)),e&&this.parent&&this.parent._update&&this.parent._update(),this}flagReset(){return this._flagMatrix=this._flagScale=!1,super.flagReset.call(this),this}},br=vr;Bs(br,"Properties",["position","rotation","scale","skewX","skewY","matrix","worldMatrix"]);var _r={position:{enumerable:!0,get:function(){return this._position},set:function(e){this._position&&this._position.unbind(rn.Types.change,this._renderer.flagMatrix),this._position=e,this._position.bind(rn.Types.change,this._renderer.flagMatrix),xr.call(this)}},rotation:{enumerable:!0,get:function(){return this._rotation},set:function(e){this._rotation=e,this._flagMatrix=!0}},scale:{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof ln&&this._scale.unbind(rn.Types.change,this._renderer.flagMatrix),this._scale=e,this._scale instanceof ln&&this._scale.bind(rn.Types.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}},skewX:{enumerable:!0,get:function(){return this._skewX},set:function(e){this._skewX=e,this._flagMatrix=!0}},skewY:{enumerable:!0,get:function(){return this._skewY},set:function(e){this._skewY=e,this._flagMatrix=!0}},matrix:{enumerable:!0,get:function(){return this._matrix},set:function(e){this._matrix=e,this._flagMatrix=!0}},worldMatrix:{enumerable:!0,get:function(){return Xs(this,this._worldMatrix),this._worldMatrix},set:function(e){this._worldMatrix=e}}};function xr(){this._flagMatrix=!0}var wr=Math.min,Sr=Math.max,kr=Math.ceil,Tr=Math.floor,Er=new ln,Cr=class extends br{constructor(e,t,i,s){super(),Bs(this,"_flagVertices",!0),Bs(this,"_flagLength",!0),Bs(this,"_flagFill",!0),Bs(this,"_flagStroke",!0),Bs(this,"_flagLinewidth",!0),Bs(this,"_flagOpacity",!0),Bs(this,"_flagVisible",!0),Bs(this,"_flagCap",!0),Bs(this,"_flagJoin",!0),Bs(this,"_flagMiter",!0),Bs(this,"_flagMask",!1),Bs(this,"_flagClip",!1),Bs(this,"_length",0),Bs(this,"_fill","#fff"),Bs(this,"_stroke","#000"),Bs(this,"_linewidth",1),Bs(this,"_opacity",1),Bs(this,"_visible",!0),Bs(this,"_cap","round"),Bs(this,"_join","round"),Bs(this,"_miter",4),Bs(this,"_closed",!0),Bs(this,"_curved",!1),Bs(this,"_automatic",!0),Bs(this,"_beginning",0),Bs(this,"_ending",1),Bs(this,"_mask",null),Bs(this,"_clip",!1),Bs(this,"_dashes",null);for(let e in Mr)Object.defineProperty(this,e,Mr[e]);this._renderer.type="path",this._renderer.flagVertices=Pr.bind(this),this._renderer.bindVertices=Lr.bind(this),this._renderer.unbindVertices=Ir.bind(this),this._renderer.flagFill=Rr.bind(this),this._renderer.flagStroke=Or.bind(this),this._renderer.vertices=[],this._renderer.collection=[],this.closed=!!t,this.curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this.vertices=e,this.automatic=!s,this.dashes=[],this.dashes.offset=0}static fromObject(e){const t="string"==typeof e.fill?e.fill:ur(e.fill),i="string"==typeof e.stroke?e.stroke:ur(e.stroke),s=(new Cr).copy(Os(Rs({},e),{fill:t,stroke:i}));return"id"in e&&(s.id=e.id),s}copy(e){super.copy.call(this,e),this.vertices=[];for(let t=0;t<e.vertices.length;t++){const i=e.vertices[t];i instanceof cn?this.vertices.push(e.vertices[t].clone()):this.vertices.push((new cn).copy(i))}for(let t=0;t<Cr.Properties.length;t++){const i=Cr.Properties[t];i in e&&(this[i]=e[i])}return this}clone(e){const t=new Cr;for(let e=0;e<this.vertices.length;e++)t.vertices.push(this.vertices[e].clone());for(let e=0;e<Cr.Properties.length;e++){const i=Cr.Properties[e];t[i]=this[i]}return t.className=this.className,t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e=super.toObject.call(this);return e.renderer.type="path",e.vertices=this.vertices.map(e=>e.toObject()),kn.each(Cr.Properties,t=>{void 0!==this[t]&&(this[t].toObject?e[t]=this[t].toObject():e[t]=this[t])},this),e}noFill(){return this.fill="none",this}noStroke(){return this.stroke="none",this.linewidth=0,this}corner(){const e=this.getBoundingClientRect(!0),t=e.width/2,i=e.height/2,s=e.left+e.width/2,n=e.top+e.height/2;for(let e=0;e<this.vertices.length;e++){const r=this.vertices[e];r.x-=s,r.y-=n,r.x+=t,r.y+=i}return this.mask&&(this.mask.translation.x-=s,this.mask.translation.x+=t,this.mask.translation.y-=n,this.mask.translation.y+=i),this}center(){const e=this.getBoundingClientRect(!0),t=e.left+e.width/2-this.translation.x,i=e.top+e.height/2-this.translation.y;for(let e=0;e<this.vertices.length;e++){const s=this.vertices[e];s.x-=t,s.y-=i}return this.mask&&(this.mask.translation.x-=t,this.mask.translation.y-=i),this}getBoundingClientRect(e){let t,i,s,n,r,a,o=1/0,l=-1/0,c=1/0,h=-1/0;if(this._update(!0),t=e?this.matrix:this.worldMatrix,i=(this.linewidth||0)/2,s=this._renderer.vertices.length,this.linewidth>0||this.stroke&&!/(transparent|none)/i.test(this.stroke))if(this.matrix.manual){const{scaleX:e,scaleY:s}=Gs(t.elements[0],t.elements[3],t.elements[1],t.elements[4],t.elements[2],t.elements[5]);"number"==typeof e&&"number"==typeof s&&(i=Math.max(e,s)*(this.linewidth||0)/2)}else i*="number"==typeof this.scale?this.scale:Math.max(this.scale.x,this.scale.y);if(s<=0)return{width:0,height:0};for(n=0;n<s;n++){a=this._renderer.vertices[n],r=this._renderer.vertices[(n+s-1)%s];const[e,u]=t.multiply(r.x,r.y),[d,p]=t.multiply(a.x,a.y);if(r.controls&&a.controls){let s=r.controls.right.x,n=r.controls.right.y;r.relative&&(s+=r.x,n+=r.y);let[f,m]=t.multiply(s,n),g=a.controls.left.x,y=a.controls.left.y;a.relative&&(g+=a.x,y+=a.y);let[v,b]=t.multiply(g,y);const _=yn(e,u,f,m,v,b,d,p);c=wr(_.min.y-i,c),o=wr(_.min.x-i,o),l=Sr(_.max.x+i,l),h=Sr(_.max.y+i,h)}else n<=1&&(c=wr(u-i,c),o=wr(e-i,o),l=Sr(e+i,l),h=Sr(u+i,h)),c=wr(p-i,c),o=wr(d-i,o),l=Sr(d+i,l),h=Sr(p+i,h)}return{top:c,left:o,right:l,bottom:h,width:l-o,height:h-c}}getPointAt(e,t){let i,s,n,r,a,o,l,c,h,u,d,p,f,m,g,y=this.length*Math.min(Math.max(e,0),1);const v=this.vertices.length,b=v-1;let _=null,x=null;for(let t=0,n=this._lengths.length,r=0;t<n;t++){if(r+this._lengths[t]>=y){this._closed?(i=Qs(t,v),s=Qs(t-1,v),0===t&&(i=s,s=t)):(i=t,s=Math.min(Math.max(t-1,0),b)),_=this.vertices[i],x=this.vertices[s],y-=r,e=0!==this._lengths[t]?y/this._lengths[t]:0;break}r+=this._lengths[t]}if(null===_||null===x)return null;if(!_)return x;if(!x)return _;g=x.controls&&x.controls.right,m=_.controls&&_.controls.left,a=x.x,u=x.y,o=(g||x).x,d=(g||x).y,l=(m||_).x,p=(m||_).y,c=_.x,f=_.y,g&&x.relative&&(o+=x.x,d+=x.y),m&&_.relative&&(l+=_.x,p+=_.y),r=fn(e,a,o,l,c),h=fn(e,u,d,p,f);const w=Ks(a,o,e),S=Ks(u,d,e),k=Ks(o,l,e),T=Ks(d,p,e),E=Ks(l,c,e),C=Ks(p,f,e),A=Ks(w,k,e),M=Ks(S,T,e),P=Ks(k,E,e),L=Ks(T,C,e);return kn.isObject(t)?(t.x=r,t.y=h,t instanceof cn&&(t.controls.left.x=A,t.controls.left.y=M,t.controls.right.x=P,t.controls.right.y=L,("boolean"!=typeof t.relative||t.relative)&&(t.controls.left.x-=r,t.controls.left.y-=h,t.controls.right.x-=r,t.controls.right.y-=h)),t.t=e,t):(n=new cn(r,h,A-r,M-h,P-r,L-h,this._curved?nn.curve:nn.line),n.t=e,n)}plot(){if(this.curved)return bn(this._collection,this.closed),this;for(let e=0;e<this._collection.length;e++)this._collection[e].command=0===e?nn.move:nn.line;return this}subdivide(e){this._update();const t=this.vertices.length-1,i=this._closed||this.vertices[t]._command===nn.close;let s,n=this.vertices[t],r=[];return kn.each(this.vertices,function(a,o){if(o<=0&&!i)n=a;else{if(a.command===nn.move)return r.push(new cn(n.x,n.y)),o>0&&(r[r.length-1].command=nn.line),void(n=a);s=hr(a,n,e),r=r.concat(s),kn.each(s,function(e,t){t<=0&&n.command===nn.move?e.command=nn.move:e.command=nn.line}),o>=t&&(this._closed&&this._automatic&&(n=a,s=hr(a,n,e),r=r.concat(s),kn.each(s,function(e,t){t<=0&&n.command===nn.move?e.command=nn.move:e.command=nn.line})),r.push(new cn(a.x,a.y)),r[r.length-1].command=i?nn.close:nn.line),n=a}},this),this._automatic=!1,this._curved=!1,this.vertices=r,this}_updateLength(e,t){t||this._update();const i=this.vertices.length-1;let s=this.vertices[i],n=0;return void 0===this._lengths&&(this._lengths=[]),kn.each(this.vertices,function(t,i){if(i<=0||t.command===nn.move)return s=t,void(this._lengths[i]=0);this._lengths[i]=cr(t,s,e),n+=this._lengths[i],s=t},this),this._length=n,this._flagLength=!1,this}_update(){if(this._flagVertices){this._automatic&&this.plot(),this._flagLength&&this._updateLength(void 0,!0);const e=this._collection.length,t=this._closed,i=Math.min(this._beginning,this._ending),s=Math.max(this._beginning,this._ending),n=lr(this,i*this._length),r=lr(this,s*this._length),a=kr(n),o=Tr(r);let l,c,h,u,d,p;for(this._renderer.vertices.length=0,p=0;p<e;p++)this._renderer.collection.length<=p&&this._renderer.collection.push(new cn),p>o&&!c?(d=this._renderer.collection[p].copy(this._collection[p]),this.getPointAt(s,d),d.command=this._renderer.collection[p].command,this._renderer.vertices.push(d),c=d,h=this._collection[p-1],h&&h.controls&&(d.relative?d.controls.right.clear():d.controls.right.copy(d),h.relative?this._renderer.collection[p-1].controls.right.copy(h.controls.right).lerp(ln.zero,1-d.t):this._renderer.collection[p-1].controls.right.copy(h.controls.right).lerp(h,1-d.t))):p>=a&&p<=o&&(d=this._renderer.collection[p].copy(this._collection[p]),this._renderer.vertices.push(d),p===o&&or(this,s)?(c=d,!t&&c.controls&&(c.relative?c.controls.right.clear():c.controls.right.copy(c))):p===a&&or(this,i)&&(l=d,l.command=nn.move,!t&&l.controls&&(l.relative?l.controls.left.clear():l.controls.left.copy(l))));a>0&&!l&&(p=a-1,d=this._renderer.collection[p].copy(this._collection[p]),this.getPointAt(i,d),d.command=nn.move,this._renderer.vertices.unshift(d),u=this._collection[p+1],u&&u.controls&&(d.controls.left.clear(),u.relative?this._renderer.collection[p+1].controls.left.copy(u.controls.left).lerp(ln.zero,d.t):(Er.copy(u),this._renderer.collection[p+1].controls.left.copy(u.controls.left).lerp(u,d.t))))}return br.prototype._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,br.prototype.flagReset.call(this),this}},Ar=Cr;Bs(Ar,"Properties",["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending","dashes"]),Bs(Ar,"Utils",{getCurveLength:cr});var Mr={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._visible=e,this._flagVisible=!0}},cap:{enumerable:!0,get:function(){return this._cap},set:function(e){this._cap=e,this._flagCap=!0}},join:{enumerable:!0,get:function(){return this._join},set:function(e){this._join=e,this._flagJoin=!0}},miter:{enumerable:!0,get:function(){return this._miter},set:function(e){this._miter=e,this._flagMiter=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof Gn||this._fill instanceof Qn||this._fill instanceof sr||this._fill instanceof Nn)&&this._fill.unbind(rn.Types.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof Gn||this._fill instanceof Qn||this._fill instanceof sr||this._fill instanceof Nn)&&this._fill.bind(rn.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof Gn||this._stroke instanceof Qn||this._stroke instanceof sr||this._stroke instanceof Nn)&&this._stroke.unbind(rn.Types.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof Gn||this._stroke instanceof Qn||this._stroke instanceof sr||this._stroke instanceof Nn)&&this._stroke.bind(rn.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},closed:{enumerable:!0,get:function(){return this._closed},set:function(e){this._closed=!!e,this._flagVertices=!0}},curved:{enumerable:!0,get:function(){return this._curved},set:function(e){this._curved=!!e,this._flagVertices=!0}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(e){if(e===this._automatic)return;this._automatic=!!e;const t=this._automatic?"ignore":"listen";kn.each(this.vertices,function(e){e[t]()})}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(e){this._beginning=e,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(e){this._ending=e,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(e){const t=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(rn.Types.insert,t).unbind(rn.Types.remove,i),this._collection=e instanceof In?e:new In(e||[]),this._collection.bind(rn.Types.insert,t).bind(rn.Types.remove,i),t(this._collection)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,kn.isObject(e)&&!e.clip&&(e.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(e){"number"!=typeof e.offset&&(e.offset=this.dashes&&this._dashes.offset||0),this._dashes=e}}};function Pr(){this._flagVertices=!0,this._flagLength=!0,this.parent&&(this.parent._flagLength=!0)}function Lr(e){let t=e.length;for(;t--;)e[t].bind(rn.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function Ir(e){let t=e.length;for(;t--;)e[t].unbind(rn.Types.change,this._renderer.flagVertices);this._renderer.flagVertices()}function Rr(){this._flagFill=!0}function Or(){this._flagStroke=!0}var Fr=class extends Ar{constructor(e,t,i,s){super([new cn,new cn,new cn,new cn],!0,!1,!0),Bs(this,"_flagWidth",0),Bs(this,"_flagHeight",0),Bs(this,"_width",0),Bs(this,"_height",0),Bs(this,"_origin",null),this._renderer.type="rectangle";for(let e in Dr)Object.defineProperty(this,e,Dr[e]);this.width="number"==typeof i?i:1,this.height="number"==typeof s?s:1,this.origin=new ln,"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t),this._update()}static fromObject(e){const t=(new Fr).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<Fr.Properties.length;t++){const i=Fr.Properties[t];i in e&&"number"==typeof e[i]&&(this[i]=e[i])}return this}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){const e=this._width/2,t=this._height/2;this._closed||4!==this.vertices.length||this.vertices.push(new cn),this.vertices[0].set(-e,-t).sub(this._origin).command=nn.move,this.vertices[1].set(e,-t).sub(this._origin).command=nn.line,this.vertices[2].set(e,t).sub(this._origin).command=nn.line,this.vertices[3].set(-e,t).sub(this._origin).command=nn.line,this.vertices[4]&&(this.vertices[4].set(-e,-t).sub(this._origin).command=nn.line)}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(e){const t=new Fr(0,0,this.width,this.height);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix);for(let e=0;e<Ar.Properties.length;e++){const i=Ar.Properties[e];t[i]=this[i]}return e&&e.add(t),t}toObject(){const e=super.toObject.call(this);return e.renderer.type="rectangle",e.width=this.width,e.height=this.height,e.origin=this.origin.toObject(),e}},Br=Fr;Bs(Br,"Properties",["width","height"]);var Dr={width:{enumerable:!0,get:function(){return this._width},set:function(e){this._width=e,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(e){this._height=e,this._flagHeight=!0}},origin:{enumerable:!0,get:function(){return this._origin},set:function(e){this._origin&&this._origin.unbind(rn.Types.change,this._renderer.flagVertices),this._origin=e,this._origin.bind(rn.Types.change,this._renderer.flagVertices),this._renderer.flagVertices()}}},jr=class extends Br{constructor(e,t,i,s,n,r){super(t,i,0,0),Bs(this,"_flagTexture",!1),Bs(this,"_flagColumns",!1),Bs(this,"_flagRows",!1),Bs(this,"_flagFrameRate",!1),Bs(this,"_flagIndex",!1),Bs(this,"_amount",1),Bs(this,"_duration",0),Bs(this,"_startTime",0),Bs(this,"_playing",!1),Bs(this,"_firstFrame",0),Bs(this,"_lastFrame",0),Bs(this,"_loop",!0),Bs(this,"_texture",null),Bs(this,"_columns",1),Bs(this,"_rows",1),Bs(this,"_frameRate",0),Bs(this,"_index",0),Bs(this,"_origin",null);for(let e in zr)Object.defineProperty(this,e,zr[e]);this.noStroke(),this.noFill(),e instanceof Nn?this.texture=e:"string"==typeof e&&(this.texture=new Nn(e)),this.origin=new ln,this._update(),"number"==typeof s&&(this.columns=s),"number"==typeof n&&(this.rows=n),"number"==typeof r&&(this.frameRate=r),this.index=0}static fromObject(e){const t=(new jr).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<jr.Properties.length;t++){const i=jr.Properties[t];i in e&&(this[i]=e[i])}return this}play(e,t,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=kn.performance.now(),"number"==typeof e&&(this._firstFrame=e),"number"==typeof t&&(this._lastFrame=t),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=0,this}clone(e){const t=new jr(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&t.play(this._firstFrame,this._lastFrame),t.loop=this.loop,t.firstFrame=this.firstFrame,t.lastFrame=this.lastFrame,e&&e.add(t),t}toObject(){const e=super.toObject.call(this);return e.texture=this.texture.toObject(),e.columns=this.columns,e.rows=this.rows,e.frameRate=this.frameRate,e.index=this.index,e.firstFrame=this.firstFrame,e.lastFrame=this.lastFrame,e.loop=this.loop,e}_update(){const e=this._texture,t=this._columns,i=this._rows;let s,n,r,a,o,l,c,h,u;if(e&&((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=e),e.loaded)){c=e.image.width,h=e.image.height,s=c/t,n=h/i,a=this._amount,this.width!==s&&(this.width=s),this.height!==n&&(this.height=n),this._playing&&this._frameRate>0&&(kn.isNaN(this._lastFrame)&&(this._lastFrame=a-1),r=kn.performance.now()-this._startTime,u=this._lastFrame+1,o=1e3*(u-this._firstFrame)/this._frameRate,this._loop?r%=o:r=Math.min(r,o),l=Ks(this._firstFrame,u,r/o),l=Math.floor(l),l!==this._index&&(this._index=l,l>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));const d=-s*(this._index%t)+(c-s)/2,p=-n*Math.floor(this._index/t)+(h-n)/2;d!==e.offset.x&&(e.offset.x=d),p!==e.offset.y&&(e.offset.y=p)}return super._update.call(this),this}flagReset(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,super.flagReset.call(this),this}},Nr=jr;Bs(Nr,"Properties",["texture","columns","rows","frameRate","index","firstFrame","lastFrame","loop"]);var Vr,zr={texture:{enumerable:!0,get:function(){return this._texture},set:function(e){this._texture=e,this._flagTexture=!0}},columns:{enumerable:!0,get:function(){return this._columns},set:function(e){this._columns=e,this._flagColumns=!0}},rows:{enumerable:!0,get:function(){return this._rows},set:function(e){this._rows=e,this._flagRows=!0}},frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(e){this._frameRate=e,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(e){this._index=e,this._flagIndex=!0}},firstFrame:{enumerable:!0,get:function(){return this._firstFrame},set:function(e){this._firstFrame=e}},lastFrame:{enumerable:!0,get:function(){return this._lastFrame},set:function(e){this._lastFrame=e}},loop:{enumerable:!0,get:function(){return this._loop},set:function(e){this._loop=!!e}}},Hr=class extends In{constructor(e){super(e=Array.isArray(e)?e:Array.prototype.slice.call(arguments)),Ns(this,Vr,{}),this.attach(e),this.on(rn.Types.insert,this.attach),this.on(rn.Types.remove,this.detach)}get ids(){return js(this,Vr)}attach(e){for(let t=0;t<e.length;t++){const i=e[t];i&&i.id&&(this.ids[i.id]=i)}return this}detach(e){for(let t=0;t<e.length;t++)delete this.ids[e[t].id];return this}};Vr=new WeakMap;var qr=class extends Ar{constructor(e,t,i,s,n,r,a){const o=a||3*dn.Resolution,l=[];for(let e=0;e<o;e++)l.push(new cn);super(l,!0,!1,!0),Bs(this,"_flagStartAngle",!1),Bs(this,"_flagEndAngle",!1),Bs(this,"_flagInnerRadius",!1),Bs(this,"_flagOuterRadius",!1),Bs(this,"_startAngle",0),Bs(this,"_endAngle",Us),Bs(this,"_innerRadius",0),Bs(this,"_outerRadius",0),this._renderer.type="arc-segment";for(let e in Ur)Object.defineProperty(this,e,Ur[e]);"number"==typeof i&&(this.innerRadius=i),"number"==typeof s&&(this.outerRadius=s),"number"==typeof n&&(this.startAngle=n),"number"==typeof r&&(this.endAngle=r),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}static fromObject(e){const t=(new qr).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<qr.Properties.length;t++){const i=qr.Properties[t];i in e&&"number"==typeof e[i]&&(this[i]=e[i])}return this}_update(){if(this._flagVertices||this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){const e=this._startAngle,t=this._endAngle,i=this._innerRadius,s=this._outerRadius,n=Qs(e,Us)===Qs(t,Us),r=i>0,a=this.vertices;let o,l,c,h,u,d,p,f,m,g,y=r?a.length/2:a.length,v=0;for(n?y--:r||(y-=2),l=0,c=y-1;l<y;l++)h=l/c,u=a[v],d=h*(t-e)+e,p=(t-e)/y,f=s*Math.cos(d),m=s*Math.sin(d),o=0===l?nn.move:nn.curve,u.command=o,u.x=f,u.y=m,u.controls.left.clear(),u.controls.right.clear(),u.command===nn.curve&&(g=s*p/Math.PI,u.controls.left.x=g*Math.cos(d-Ws),u.controls.left.y=g*Math.sin(d-Ws),u.controls.right.x=g*Math.cos(d+Ws),u.controls.right.y=g*Math.sin(d+Ws),1===l&&u.controls.left.multiplyScalar(2),l===c&&u.controls.right.multiplyScalar(2)),v++;if(r){for(n?(a[v].command=nn.close,v++):(y--,c=y-1),l=0;l<y;l++)h=l/c,u=a[v],d=(1-h)*(t-e)+e,p=(t-e)/y,f=i*Math.cos(d),m=i*Math.sin(d),o=nn.curve,l<=0&&(o=n?nn.move:nn.line),u.command=o,u.x=f,u.y=m,u.controls.left.clear(),u.controls.right.clear(),u.command===nn.curve&&(g=i*p/Math.PI,u.controls.left.x=g*Math.cos(d+Ws),u.controls.left.y=g*Math.sin(d+Ws),u.controls.right.x=g*Math.cos(d-Ws),u.controls.right.y=g*Math.sin(d-Ws),1===l&&u.controls.left.multiplyScalar(2),l===c&&u.controls.right.multiplyScalar(2)),v++;a[v].copy(a[0]),a[v].command=nn.line}else n||(a[v].command=nn.line,a[v].x=0,a[v].y=0,v++,a[v].copy(a[0]),a[v].command=nn.line)}return super._update.call(this),this}flagReset(){return super.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}clone(e){const t=this.innerRadius,i=this.outerRadius,s=this.startAngle,n=this.endAngle,r=this.vertices.length,a=new qr(0,0,t,i,s,n,r);a.translation.copy(this.translation),a.rotation=this.rotation,a.scale=this.scale,a.skewX=this.skewX,a.skewY=this.skewY,this.matrix.manual&&a.matrix.copy(this.matrix);for(let e=0;e<Ar.Properties.length;e++){const t=Ar.Properties[e];a[t]=this[t]}return e&&e.add(a),a}toObject(){const e=super.toObject.call(this);e.renderer.type="arc-segment";for(let t=0;t<qr.Properties.length;t++){const i=qr.Properties[t];e[i]=this[i]}return e}},$r=qr;Bs($r,"Properties",["startAngle","endAngle","innerRadius","outerRadius"]);var Ur={startAngle:{enumerable:!0,get:function(){return this._startAngle},set:function(e){this._startAngle=e,this._flagStartAngle=!0}},endAngle:{enumerable:!0,get:function(){return this._endAngle},set:function(e){this._endAngle=e,this._flagEndAngle=!0}},innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this._flagOuterRadius=!0}}},Wr=Math.cos,Gr=Math.sin,Yr=class extends Ar{constructor(e,t,i,s){const n=s?Math.max(s,2):4,r=[];for(let e=0;e<n;e++)r.push(new cn(0,0,0,0,0,0));super(r,!0,!0,!0),Bs(this,"_flagRadius",!1),Bs(this,"_radius",0),this._renderer.type="circle";for(let e in Kr)Object.defineProperty(this,e,Kr[e]);"number"==typeof i&&(this.radius=i),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}static fromObject(e){const t=(new Yr).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<Yr.Properties.length;t++){const i=Yr.Properties[t];i in e&&"number"==typeof e[i]&&(this[i]=e[i])}return this}_update(){if(this._flagVertices||this._flagRadius){let e=this.vertices.length;!this._closed&&e>2&&(e-=1);const t=4/3*Math.tan(Math.PI/(2*e)),i=this._radius,s=i*t;for(let t=0;t<this.vertices.length;t++){const n=t/e*Us,r=i*Wr(n),a=i*Gr(n),o=s*Wr(n-Ws),l=s*Gr(n-Ws),c=s*Wr(n+Ws),h=s*Gr(n+Ws),u=this.vertices[t];u.command=0===t?nn.move:nn.curve,u.set(r,a),u.controls.left.set(o,l),u.controls.right.set(c,h)}}return super._update.call(this),this}flagReset(){return this._flagRadius=!1,super.flagReset.call(this),this}clone(e){const t=new Yr(0,0,this.radius,this.vertices.length);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix);for(let e=0;e<Ar.Properties.length;e++){const i=Ar.Properties[e];t[i]=this[i]}return e&&e.add(t),t}toObject(){const e=super.toObject.call(this);e.renderer.type="circle";for(let t=0;t<Yr.Properties.length;t++){const i=Yr.Properties[t];e[i]=this[i]}return e}},Xr=Yr;Bs(Xr,"Properties",["radius"]);var Kr={radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius=e,this._flagRadius=!0}}},Zr=Math.cos,Jr=Math.sin,Qr=class extends Ar{constructor(e,t,i,s,n){"number"!=typeof s&&"number"==typeof i&&(s=i);const r=n?Math.max(n,2):4,a=[];for(let e=0;e<r;e++)a.push(new cn);super(a,!0,!0,!0),Bs(this,"_flagWidth",!1),Bs(this,"_flagHeight",!1),Bs(this,"_width",0),Bs(this,"_height",0),this._renderer.type="ellipse";for(let e in ta)Object.defineProperty(this,e,ta[e]);"number"==typeof i&&(this.width=2*i),"number"==typeof s&&(this.height=2*s),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}static fromObject(e){const t=(new Qr).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<Qr.Properties.length;t++){const i=Qr.Properties[t];i in e&&"number"==typeof e[i]&&(this[i]=e[i])}return this}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight){let e=this.vertices.length;!this._closed&&e>2&&(e-=1);const t=4/3*Math.tan(Math.PI/(2*this.vertices.length)),i=this._width/2,s=this._height/2;for(let n=0;n<this.vertices.length;n++){const r=n/e*Us,a=i*Zr(r),o=s*Jr(r),l=i*t*Zr(r-Ws),c=s*t*Jr(r-Ws),h=i*t*Zr(r+Ws),u=s*t*Jr(r+Ws),d=this.vertices[n];d.command=0===n?nn.move:nn.curve,d.set(a,o),d.controls.left.set(l,c),d.controls.right.set(h,u)}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=!1,super.flagReset.call(this),this}clone(e){const t=this.width/2,i=this.height/2,s=this.vertices.length,n=new Qr(0,0,t,i,s);n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,n.skewX=this.skewX,n.skewY=this.skewY,this.matrix.manual&&n.matrix.copy(this.matrix);for(let e=0;e<Ar.Properties.length;e++){const t=Ar.Properties[e];n[t]=this[t]}return e&&e.add(n),n}toObject(){const e=super.toObject.call(this);e.renderer.type="ellipse";for(let t=0;t<Qr.Properties.length;t++){const i=Qr.Properties[t];e[i]=this[i]}return e}},ea=Qr;Bs(ea,"Properties",["width","height"]);var ta={width:{enumerable:!0,get:function(){return this._width},set:function(e){this._width=e,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(e){this._height=e,this._flagHeight=!0}}},ia=Math.ceil,sa=Math.floor,na=class extends br{constructor(e){super(),Bs(this,"_flagVertices",!0),Bs(this,"_flagLength",!0),Bs(this,"_flagFill",!0),Bs(this,"_flagStroke",!0),Bs(this,"_flagLinewidth",!0),Bs(this,"_flagOpacity",!0),Bs(this,"_flagVisible",!0),Bs(this,"_flagSize",!0),Bs(this,"_flagSizeAttenuation",!0),Bs(this,"_length",0),Bs(this,"_fill","#fff"),Bs(this,"_stroke","#000"),Bs(this,"_linewidth",1),Bs(this,"_opacity",1),Bs(this,"_visible",!0),Bs(this,"_size",1),Bs(this,"_sizeAttenuation",!1),Bs(this,"_beginning",0),Bs(this,"_ending",1),Bs(this,"_dashes",null),Bs(this,"noFill",Ar.prototype.noFill),Bs(this,"noStroke",Ar.prototype.noStroke),Bs(this,"corner",Ar.prototype.corner),Bs(this,"center",Ar.prototype.center),Bs(this,"getBoundingClientRect",Ar.prototype.getBoundingClientRect),Bs(this,"_updateLength",Ar.prototype._updateLength);for(let e in aa)Object.defineProperty(this,e,aa[e]);this._renderer.type="points",this._renderer.flagVertices=Pr.bind(this),this._renderer.bindVertices=Lr.bind(this),this._renderer.unbindVertices=Ir.bind(this),this._renderer.flagFill=Rr.bind(this),this._renderer.flagStroke=Or.bind(this),this._renderer.vertices=null,this._renderer.collection=null,this.size=1,this.sizeAttenuation=!1,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.className="",this.visible=!0,this.vertices=e,this.dashes=[],this.dashes.offset=0}static fromObject(e){const t="string"==typeof e.fill?e.fill:ur(e.fill),i="string"==typeof e.stroke?e.stroke:ur(e.stroke),s=(new na).copy(Os(Rs({},e),{fill:t,stroke:i}));return"id"in e&&(s.id=e.id),s}copy(e){super.copy.call(this,e);for(let t=0;t<e.vertices.length;t++){const i=e.vertices[t];i instanceof cn?this.vertices.push(e.vertices[t].clone()):this.vertices.push((new cn).copy(i))}for(let t=0;t<na.Properties.length;t++){const i=na.Properties[t];i in e&&(this[i]=e[i])}return this}clone(e){const t=new na;for(let e=0;e<this.vertices.length;e++)t.vertices.push(this.vertices[e].clone());for(let e=0;e<na.Properties.length;e++){const i=na.Properties[e];t[i]=this[i]}return t.className=this.className,t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e=super.toObject.call(this);return e.renderer.type="points",e.vertices=this.vertices.map(e=>e.toObject()),kn.each(na.Properties,function(t){void 0!==this[t]&&(this[t].toObject?e[t]=this[t].toObject():e[t]=this[t])},this),e}subdivide(e){this._update();let t=[];for(let i=0;i<this.vertices.length;i++){const s=this.vertices[i],n=this.vertices[i-1];if(!n)continue;const r=s.x,a=s.y,o=n.x,l=n.y,c=mn(r,a,r,a,o,l,o,l,e);t=t.concat(c)}return this.vertices=t,this}_update(){if(this._flagVertices){this._flagLength&&this._updateLength(void 0,!0);const e=Math.min(this._beginning,this._ending),t=Math.max(this._beginning,this._ending),i=lr(this,e*this._length),s=lr(this,t*this._length),n=ia(i),r=sa(s);let a,o=0;this._renderer.vertices=[],this._renderer.collection=[];for(let e=0;e<this._collection.length;e++)e>=n&&e<=r&&(a=this._collection[e],this._renderer.collection.push(a),this._renderer.vertices[2*o+0]=a.x,this._renderer.vertices[2*o+1]=a.y,o++)}return super._update.apply(this,arguments),this}flagReset(){return this._flagVertices=this._flagLength=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagSize=this._flagSizeAttenuation=!1,super.flagReset.call(this),this}},ra=na;Bs(ra,"Properties",["fill","stroke","linewidth","opacity","visible","size","sizeAttenuation","beginning","ending","dashes"]);var aa={linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e,this._flagLinewidth=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._visible=e,this._flagVisible=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(e){this._size=e,this._flagSize=!0}},sizeAttenuation:{enumerable:!0,get:function(){return this._sizeAttenuation},set:function(e){this._sizeAttenuation=e,this._flagSizeAttenuation=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof Gn||this._fill instanceof Qn||this._fill instanceof sr||this._fill instanceof Nn)&&this._fill.unbind(rn.Types.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof Gn||this._fill instanceof Qn||this._fill instanceof sr||this._fill instanceof Nn)&&this._fill.bind(rn.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof Gn||this._stroke instanceof Qn||this._stroke instanceof sr||this._stroke instanceof Nn)&&this._stroke.unbind(rn.Types.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof Gn||this._stroke instanceof Qn||this._stroke instanceof sr||this._stroke instanceof Nn)&&this._stroke.bind(rn.Types.change,this._renderer.flagStroke)}},length:{get:function(){return this._flagLength&&this._updateLength(),this._length}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(e){this._beginning=e,this._flagVertices=!0}},ending:{enumerable:!0,get:function(){return this._ending},set:function(e){this._ending=e,this._flagVertices=!0}},vertices:{enumerable:!0,get:function(){return this._collection},set:function(e){const t=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(rn.Types.insert,t).unbind(rn.Types.remove,i),this._collection=e instanceof In?e:new In(e||[]),this._collection.bind(rn.Types.insert,t).bind(rn.Types.remove,i),t(this._collection)}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(e){"number"!=typeof e.offset&&(e.offset=this.dashes&&this._dashes.offset||0),this._dashes=e}}},oa=Math.cos,la=Math.sin,ca=class extends Ar{constructor(e,t,i,s){s=Math.max(s||0,3),super(),Bs(this,"_flagWidth",!1),Bs(this,"_flagHeight",!1),Bs(this,"_flagSides",!1),Bs(this,"_radius",0),Bs(this,"_width",0),Bs(this,"_height",0),Bs(this,"_sides",0),this._renderer.type="polygon";for(let e in ua)Object.defineProperty(this,e,ua[e]);this.closed=!0,this.automatic=!1,"number"==typeof i&&(this.radius=i),"number"==typeof s&&(this.sides=s),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}static fromObject(e){const t=(new ca).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<ca.Properties.length;t++){const i=ca.Properties[t];i in e&&"number"==typeof e[i]&&(this[i]=e[i])}return this}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagSides){const e=this._sides,t=e+1;let i=this.vertices.length;i>e&&(this.vertices.splice(e-1,i-e),i=e);for(let s=0;s<t;s++){const t=Us*((s+.5)/e)+Math.PI/2,n=this._width*oa(t)/2,r=this._height*la(t)/2;s>=i?this.vertices.push(new cn(n,r)):this.vertices[s].set(n,r),this.vertices[s].command=0===s?nn.move:nn.line}}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagSides=!1,super.flagReset.call(this),this}clone(e){const t=new ca(0,0,0,this.sides);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.skewX=this.skewX,t.skewY=this.skewY,t.width=this.width,t.height=this.height,this.matrix.manual&&t.matrix.copy(this.matrix);for(let e=0;e<Ar.Properties.length;e++){const i=Ar.Properties[e];t[i]=this[i]}return e&&e.add(t),t}toObject(){const e=super.toObject.call(this);e.renderer.type="polygon";for(let t=0;t<ca.Properties.length;t++){const i=ca.Properties[t];e[i]=this[i]}return e}},ha=ca;Bs(ha,"Properties",["width","height","sides"]);var ua={radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius=e,this.width=2*e,this.height=2*e}},width:{enumerable:!0,get:function(){return this._width},set:function(e){this._width=e,this._flagWidth=!0,this._radius=Math.max(this.width,this.height)/2}},height:{enumerable:!0,get:function(){return this._height},set:function(e){this._height=e,this._flagHeight=!0,this._radius=Math.max(this.width,this.height)/2}},sides:{enumerable:!0,get:function(){return this._sides},set:function(e){this._sides=e,this._flagSides=!0}}},da=class extends Ar{constructor(e,t,i,s,n){void 0===n&&"number"==typeof i&&"number"==typeof s&&(n=Math.floor(Math.min(i,s)/12));const r=[];for(let e=0;e<10;e++)r.push(new cn(0,0,0,0,0,0,0===e?nn.move:nn.curve));super(r),Bs(this,"_flagWidth",!1),Bs(this,"_flagHeight",!1),Bs(this,"_flagRadius",!1),Bs(this,"_width",0),Bs(this,"_height",0),Bs(this,"_radius",12),this._renderer.type="rounded-rectangle";for(let e in fa)Object.defineProperty(this,e,fa[e]);this.closed=!0,this.automatic=!1,this._renderer.flagRadius=ma.bind(this),"number"==typeof i&&(this.width=i),"number"==typeof s&&(this.height=s),"number"==typeof n&&(this.radius=n),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}static fromObject(e){const t=(new da).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<da.Properties.length;t++){const i=da.Properties[t];if(i in e){const t=e[i];/radius/i.test(i)?this[i]="number"==typeof t||t instanceof ln?t:(new ln).copy(t):"number"==typeof t&&(this[i]=t)}}return this}_update(){if(this._flagVertices||this._flagWidth||this._flagHeight||this._flagRadius){const e=this._width,t=this._height;let i,s,n;this._radius instanceof ln?(i=this._radius.x,s=this._radius.y):(i=this._radius,s=this._radius);let r=e/2,a=t/2;n=this.vertices[0],n.x=-(r-i),n.y=-a,n=this.vertices[1],n.x=r-i,n.y=-a,n.controls.left.clear(),n.controls.right.x=i,n.controls.right.y=0,n=this.vertices[2],n.x=r,n.y=-(a-s),n.controls.right.clear(),n.controls.left.clear(),n=this.vertices[3],n.x=r,n.y=a-s,n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=s,n=this.vertices[4],n.x=r-i,n.y=a,n.controls.right.clear(),n.controls.left.clear(),n=this.vertices[5],n.x=-(r-i),n.y=a,n.controls.left.clear(),n.controls.right.x=-i,n.controls.right.y=0,n=this.vertices[6],n.x=-r,n.y=a-s,n.controls.left.clear(),n.controls.right.clear(),n=this.vertices[7],n.x=-r,n.y=-(a-s),n.controls.left.clear(),n.controls.right.x=0,n.controls.right.y=-s,n=this.vertices[8],n.x=-(r-i),n.y=-a,n.controls.left.clear(),n.controls.right.clear(),n=this.vertices[9],n.copy(this.vertices[8])}return super._update.call(this),this}flagReset(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,super.flagReset.call(this),this}clone(e){const t=this.width,i=this.height,s=this.radius,n=new da(0,0,t,i,s);n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,n.skewX=this.skewX,n.skewY=this.skewY,this.matrix.manual&&n.matrix.copy(this.matrix);for(let e=0;e<Ar.Properties.length;e++){const t=Ar.Properties[e];n[t]=this[t]}return e&&e.add(n),n}toObject(){const e=super.toObject.call(this);e.renderer.type="rounded-rectangle";for(let t=0;t<da.Properties.length;t++){const i=da.Properties[t];e[i]=this[i]}return e.radius="number"==typeof this.radius?this.radius:this.radius.toObject(),e}},pa=da;Bs(pa,"Properties",["width","height","radius"]);var fa={width:{enumerable:!0,get:function(){return this._width},set:function(e){this._width=e,this._flagWidth=!0}},height:{enumerable:!0,get:function(){return this._height},set:function(e){this._height=e,this._flagHeight=!0}},radius:{enumerable:!0,get:function(){return this._radius},set:function(e){this._radius instanceof ln&&this._radius.unbind(rn.Types.change,this._renderer.flagRadius),this._radius=e,this._radius instanceof ln&&this._radius.bind(rn.Types.change,this._renderer.flagRadius),this._flagRadius=!0}}};function ma(){this._flagRadius=!0}var ga=Math.cos,ya=Math.sin,va=class extends Ar{constructor(e,t,i,s,n){arguments.length<=3&&(i=(s=i)/2),("number"!=typeof n||n<=0)&&(n=5),super(),Bs(this,"_flagInnerRadius",!1),Bs(this,"_flagOuterRadius",!1),Bs(this,"_flagSides",!1),Bs(this,"_innerRadius",0),Bs(this,"_outerRadius",0),Bs(this,"_sides",0),this._renderer.type="star";for(let e in xa)Object.defineProperty(this,e,xa[e]);this.closed=!0,this.automatic=!1,"number"==typeof i&&(this.innerRadius=i),"number"==typeof s&&(this.outerRadius=s),"number"==typeof n&&(this.sides=n),this._update(),"number"==typeof e&&(this.translation.x=e),"number"==typeof t&&(this.translation.y=t)}static fromObject(e){const t=(new va).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<va.Properties.length;t++){const i=va.Properties[t];i in e&&"number"==typeof e[i]&&(this[i]=e[i])}return this}_update(){if(this._flagVertices||this._flagInnerRadius||this._flagOuterRadius||this._flagSides){const e=2*this._sides,t=e+1;let i=this.vertices.length;i>e&&(this.vertices.splice(e-1,i-e),i=e);for(let s=0;s<t;s++){const t=Us*((s+.5)/e),n=(s%2?this._outerRadius:this._innerRadius)/2,r=n*ga(t),a=n*ya(t);s>=i?this.vertices.push(new cn(r,a)):this.vertices[s].set(r,a),this.vertices[s].command=0===s?nn.move:nn.line}}return super._update.call(this),this}flagReset(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,super.flagReset.call(this),this}clone(e){const t=this.innerRadius,i=this.outerRadius,s=this.sides,n=new va(0,0,t,i,s);n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,n.skewX=this.skewX,n.skewY=this.skewY,this.matrix.manual&&n.matrix.copy(this.matrix);for(let e=0;e<Ar.Properties.length;e++){const t=Ar.Properties[e];n[t]=this[t]}return e&&e.add(n),n}toObject(){const e=super.toObject.call(this);e.renderer.type="star";for(let t=0;t<va.Properties.length;t++){const i=va.Properties[t];e[i]=this[i]}return e}},ba=va;Bs(ba,"Properties",["innerRadius","outerRadius","sides"]);var _a,xa={innerRadius:{enumerable:!0,get:function(){return this._innerRadius},set:function(e){this._innerRadius=e,this._flagInnerRadius=!0}},outerRadius:{enumerable:!0,get:function(){return this._outerRadius},set:function(e){this._outerRadius=e,this._flagOuterRadius=!0}},sides:{enumerable:!0,get:function(){return this._sides},set:function(e){this._sides=e,this._flagSides=!0}}},wa=Math.min,Sa=Math.max;Hs.document&&(_a=document.createElement("canvas"));var ka=class extends br{constructor(e,t,i,s){super(),Bs(this,"_flagValue",!0),Bs(this,"_flagFamily",!0),Bs(this,"_flagSize",!0),Bs(this,"_flagLeading",!0),Bs(this,"_flagAlignment",!0),Bs(this,"_flagBaseline",!0),Bs(this,"_flagStyle",!0),Bs(this,"_flagWeight",!0),Bs(this,"_flagDecoration",!0),Bs(this,"_flagFill",!0),Bs(this,"_flagStroke",!0),Bs(this,"_flagLinewidth",!0),Bs(this,"_flagOpacity",!0),Bs(this,"_flagVisible",!0),Bs(this,"_flagMask",!1),Bs(this,"_flagClip",!1),Bs(this,"_flagDirection",!0),Bs(this,"_value",""),Bs(this,"_family","sans-serif"),Bs(this,"_size",13),Bs(this,"_leading",17),Bs(this,"_alignment","center"),Bs(this,"_baseline","middle"),Bs(this,"_style","normal"),Bs(this,"_weight",500),Bs(this,"_decoration","none"),Bs(this,"_direction","ltr"),Bs(this,"_fill","#000"),Bs(this,"_stroke","none"),Bs(this,"_linewidth",1),Bs(this,"_opacity",1),Bs(this,"_visible",!0),Bs(this,"_mask",null),Bs(this,"_clip",!1),Bs(this,"_dashes",null);for(let e in Ea)Object.defineProperty(this,e,Ea[e]);if(this._renderer.type="text",this._renderer.flagFill=Ca.bind(this),this._renderer.flagStroke=Aa.bind(this),this.value=e,"number"==typeof t&&(this.translation.x=t),"number"==typeof i&&(this.translation.y=i),this.dashes=[],this.dashes.offset=0,!kn.isObject(s))return this;for(let e=0;e<ka.Properties.length;e++){const t=ka.Properties[e];t in s&&(this[t]=s[t])}}static Measure(e){if(_a){const t=_a.getContext("2d");t.font=[e._style,e._weight,`${e._size}px/${e._leading}px`,e._family].join(" ");const i=t.measureText(e.value,0,0),s=i.actualBoundingBoxDescent+i.actualBoundingBoxAscent;return{width:i.width,height:s}}{const e=this.value.length*this.size*ka.Ratio,t=this.leading;return console.warn("Two.Text: unable to accurately measure text, so using an approximation."),{width:e,height:t}}}static fromObject(e){const t="string"==typeof e.fill?e.fill:ur(e.fill),i="string"==typeof e.stroke?e.stroke:ur(e.stroke),s=(new ka).copy(Os(Rs({},e),{fill:t,stroke:i}));return"id"in e&&(s.id=e.id),s}copy(e){super.copy.call(this,e);for(let t=0;t<ka.Properties.length;t++){const i=ka.Properties[t];i in e&&(this[i]=e[i])}return this}clone(e){const t=new ka(this.value);t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale;for(let e=0;e<ka.Properties.length;e++){const i=ka.Properties[e];t[i]=this[i]}return this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e=super.toObject.call(this);e.renderer.type="text";for(let t=0;t<ka.Properties.length;t++){const i=ka.Properties[t];e[i]=this[i]}return e}noFill(){return this.fill="none",this}noStroke(){return this.stroke="none",this.linewidth=0,this}getBoundingClientRect(e){let t,i,s,n,r;this._update(!0),t=e?this.matrix:this.worldMatrix;const{width:a,height:o}=ka.Measure(this),l=(this._linewidth||0)/2;switch(this.alignment){case"left":i=-l,s=a+l;break;case"right":i=-(a+l),s=l;break;default:i=-(a/2+l),s=a/2+l}"middle"===this.baseline?(n=-(o/2+l),r=o/2+l):(n=-(o+l),r=l);const[c,h]=t.multiply(i,n),[u,d]=t.multiply(i,r),[p,f]=t.multiply(s,n),[m,g]=t.multiply(s,r);return n=wa(h,d,f,g),i=wa(c,u,p,m),s=Sa(c,u,p,m),r=Sa(h,d,f,g),{top:n,left:i,right:s,bottom:r,width:s-i,height:r-n}}flagReset(){return super.flagReset.call(this),this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagClip=this._flagDecoration=this._flagClassName=this._flagBaseline=this._flagWeight=this._flagStyle=this._flagDirection=!1,this}},Ta=ka;Bs(Ta,"Ratio",.6),Bs(Ta,"Properties",["value","family","size","leading","alignment","linewidth","style","weight","decoration","direction","baseline","opacity","visible","fill","stroke","dashes"]);var Ea={value:{enumerable:!0,get:function(){return this._value},set:function(e){this._value=e,this._flagValue=!0}},family:{enumerable:!0,get:function(){return this._family},set:function(e){this._family=e,this._flagFamily=!0}},size:{enumerable:!0,get:function(){return this._size},set:function(e){this._size=e,this._flagSize=!0}},leading:{enumerable:!0,get:function(){return this._leading},set:function(e){this._leading=e,this._flagLeading=!0}},alignment:{enumerable:!0,get:function(){return this._alignment},set:function(e){this._alignment=e,this._flagAlignment=!0}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e,this._flagLinewidth=!0}},style:{enumerable:!0,get:function(){return this._style},set:function(e){this._style=e,this._flagStyle=!0}},weight:{enumerable:!0,get:function(){return this._weight},set:function(e){this._weight=e,this._flagWeight=!0}},decoration:{enumerable:!0,get:function(){return this._decoration},set:function(e){this._decoration=e,this._flagDecoration=!0}},direction:{enumerable:!0,get:function(){return this._direction},set:function(e){this._direction=e,this._flagDirection=!0}},baseline:{enumerable:!0,get:function(){return this._baseline},set:function(e){this._baseline=e,this._flagBaseline=!0}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._opacity=e,this._flagOpacity=!0}},visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._visible=e,this._flagVisible=!0}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof Gn||this._fill instanceof Qn||this._fill instanceof sr||this._fill instanceof Nn)&&this._fill.unbind(rn.Types.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof Gn||this._fill instanceof Qn||this._fill instanceof sr||this._fill instanceof Nn)&&this._fill.bind(rn.Types.change,this._renderer.flagFill)}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof Gn||this._stroke instanceof Qn||this._stroke instanceof sr||this._stroke instanceof Nn)&&this._stroke.unbind(rn.Types.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof Gn||this._stroke instanceof Qn||this._stroke instanceof sr||this._stroke instanceof Nn)&&this._stroke.bind(rn.Types.change,this._renderer.flagStroke)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,kn.isObject(e)&&!e.clip&&(e.clip=!0)}},clip:{enumerable:!0,get:function(){return this._clip},set:function(e){this._clip=e,this._flagClip=!0}},dashes:{enumerable:!0,get:function(){return this._dashes},set:function(e){"number"!=typeof e.offset&&(e.offset=this.dashes&&this._dashes.offset||0),this._dashes=e}}};function Ca(){this._flagFill=!0}function Aa(){this._flagStroke=!0}var Ma=Math.min,Pa=Math.max,La=class extends br{constructor(e){super(),Bs(this,"_flagAdditions",!1),Bs(this,"_flagSubtractions",!1),Bs(this,"_flagOrder",!1),Bs(this,"_flagOpacity",!0),Bs(this,"_flagBeginning",!1),Bs(this,"_flagEnding",!1),Bs(this,"_flagLength",!1),Bs(this,"_flagMask",!1),Bs(this,"_fill","#fff"),Bs(this,"_stroke","#000"),Bs(this,"_linewidth",1),Bs(this,"_opacity",1),Bs(this,"_visible",!0),Bs(this,"_cap","round"),Bs(this,"_join","round"),Bs(this,"_miter",4),Bs(this,"_closed",!0),Bs(this,"_curved",!1),Bs(this,"_automatic",!0),Bs(this,"_beginning",0),Bs(this,"_ending",1),Bs(this,"_length",0),Bs(this,"_mask",null);for(let e in Ra)Object.defineProperty(this,e,Ra[e]);this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=Array.isArray(e)?e:Array.prototype.slice.call(arguments)}static InsertChildren(e){for(let t=0;t<e.length;t++)Oa.call(this,e[t],this)}static RemoveChildren(e){for(let t=0;t<e.length;t++)Oa.call(this,e[t])}static OrderChildren(e){this._flagOrder=!0}static fromObject(e){const t=new La;for(let i=0;i<La.Properties.length;i++){const s=La.Properties[i];s in e&&(/(fill|stroke)/i.test(s)?t[s]="string"==typeof e[s]?e[s]:ur(e[s]):t[s]=e[s])}return"mask"in e&&(t.mask=i(e.mask)),"id"in e&&(t.id=e.id),t.children=e.children.map(i),t;function i(e){if(e&&e.renderer)switch(e.renderer.type){case"arc-segment":return $r.fromObject(e);case"circle":return Xr.fromObject(e);case"ellipse":return ea.fromObject(e);case"points":return ra.fromObject(e);case"polygon":return ha.fromObject(e);case"rectangle":return Br.fromObject(e);case"rounded-rectangle":return pa.fromObject(e);case"star":return ba.fromObject(e);case"path":return Ar.fromObject(e);case"text":return Ta.fromObject(e);case"group":return La.fromObject(e);case"shape":return br.fromObject(e);case"element":return On.fromObject(e)}return e}}copy(e){return super.copy.call(this,e),console.warn("Two.Group.copy is not supported yet."),this}clone(e){const t=new La,i=this.children.map(function(e){return e.clone()});return t.add(i),t.opacity=this.opacity,this.mask&&(t.mask=this.mask),t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,t.className=this.className,this.matrix.manual&&t.matrix.copy(this.matrix),e&&e.add(t),t._update()}toObject(){const e=super.toObject.call(this);return e.renderer.type="group",e.children=[],e.opacity=this.opacity,e.className=this.className,e.mask=this.mask?this.mask.toObject():null,kn.each(this.children,(t,i)=>{e.children[i]=t.toObject()},this),e}corner(){const e=this.getBoundingClientRect(!0);for(let t=0;t<this.children.length;t++){const i=this.children[t];i.translation.x-=e.left,i.translation.y-=e.top}return this.mask&&(this.mask.translation.x-=e.left,this.mask.translation.y-=e.top),this}center(){const e=this.getBoundingClientRect(!0),t=e.left+e.width/2-this.translation.x,i=e.top+e.height/2-this.translation.y;for(let e=0;e<this.children.length;e++){const s=this.children[e];s.isShape&&(s.translation.x-=t,s.translation.y-=i)}return this.mask&&(this.mask.translation.x-=t,this.mask.translation.y-=i),this}getById(e){let t=null;return function i(s){if(s.id===e)return s;if(s.children){if(s.children.ids[e])return s.children.ids[e];for(let e=0;e<s.children.length;e++)if(t=i(s.children[e]),t)return t}return null}(this)}getByClassName(e){const t=[];return function i(s){if(Array.prototype.indexOf.call(s.classList,e)>=0&&t.push(s),s.children)for(let e=0;e<s.children.length;e++)i(s.children[e]);return t}(this)}getByType(e){const t=[];return function i(s){if(s instanceof e&&t.push(s),s.children)for(let e=0;e<s.children.length;e++)i(s.children[e]);return t}(this)}add(e){e=e instanceof Array?e.slice():Array.prototype.slice.call(arguments);for(let t=0;t<e.length;t++){const i=e[t];if(!i||!i.id)continue;const s=Array.prototype.indexOf.call(this.children,i);s>=0&&this.children.splice(s,1),this.children.push(i)}return this}remove(e){const t=arguments.length,i=this.parent;if(t<=0&&i)return i.remove(this),this;e=e instanceof Array?e.slice():Array.prototype.slice.call(arguments);for(let t=0;t<e.length;t++){const i=e[t];if(!i||!this.children.ids[i.id])continue;const s=this.children.indexOf(i);s>=0&&this.children.splice(s,1)}return this}getBoundingClientRect(e){let t,i,s,n,r,a;this._update(!0);let o=1/0,l=-1/0,c=1/0,h=-1/0;const u=/texture|gradient/i;i=e?this.matrix:this.worldMatrix;for(let d=0;d<this.children.length;d++){const p=this.children[d];if(p.visible&&!u.test(p._renderer.type)&&(t=p.getBoundingClientRect(e),s="number"!=typeof t.top||kn.isNaN(t.top)||!isFinite(t.top),n="number"!=typeof t.left||kn.isNaN(t.left)||!isFinite(t.left),r="number"!=typeof t.right||kn.isNaN(t.right)||!isFinite(t.right),a="number"!=typeof t.bottom||kn.isNaN(t.bottom)||!isFinite(t.bottom),!(s||n||r||a)))if(e){const[e,s]=i.multiply(t.left,t.top),[n,r]=i.multiply(t.right,t.top),[a,u]=i.multiply(t.left,t.bottom),[d,p]=i.multiply(t.right,t.bottom);c=Ma(s,r,u,p,c),o=Ma(e,n,a,d,o),l=Pa(e,n,a,d,l),h=Pa(s,r,u,p,h)}else c=Ma(t.top,c),o=Ma(t.left,o),l=Pa(t.right,l),h=Pa(t.bottom,h)}return{top:c,left:o,right:l,bottom:h,width:l-o,height:h-c}}noFill(){return this.children.forEach(function(e){e.noFill()}),this}noStroke(){return this.children.forEach(function(e){e.noStroke()}),this}subdivide(){const e=arguments;return this.children.forEach(function(t){t.subdivide.apply(t,e)}),this}_update(){let e,t,i;if(this._flagBeginning||this._flagEnding){const s=Math.min(this._beginning,this._ending),n=Math.max(this._beginning,this._ending),r=this.length;let a=0;const o=s*r,l=n*r;for(e=0;e<this.children.length;e++)i=this.children[e],t=i.length,o>a+t?(i.beginning=1,i.ending=1):l<a?(i.beginning=0,i.ending=0):o>a&&o<a+t?(i.beginning=(o-a)/t,i.ending=1):l>a&&l<a+t?(i.beginning=0,i.ending=(l-a)/t):(i.beginning=0,i.ending=1),a+=t}return super._update.apply(this,arguments)}flagReset(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=this._flagBeginning=this._flagEnding=!1,super.flagReset.call(this),this}},Ia=La;Bs(Ia,"Children",Hr),Bs(Ia,"Properties",["fill","stroke","linewidth","cap","join","miter","closed","curved","automatic"]);var Ra={visible:{enumerable:!0,get:function(){return this._visible},set:function(e){this._flagVisible=this._visible!==e||this._flagVisible,this._visible=e}},opacity:{enumerable:!0,get:function(){return this._opacity},set:function(e){this._flagOpacity=this._opacity!==e||this._flagOpacity,this._opacity=e}},beginning:{enumerable:!0,get:function(){return this._beginning},set:function(e){this._flagBeginning=this._beginning!==e||this._flagBeginning,this._beginning=e}},ending:{enumerable:!0,get:function(){return this._ending},set:function(e){this._flagEnding=this._ending!==e||this._flagEnding,this._ending=e}},length:{enumerable:!0,get:function(){if(this._flagLength||this._length<=0){if(this._length=0,!this.children)return this._length;for(let e=0;e<this.children.length;e++){const t=this.children[e];this._length+=t.length}}return this._length}},fill:{enumerable:!0,get:function(){return this._fill},set:function(e){this._fill=e;for(let t=0;t<this.children.length;t++)this.children[t].fill=e}},stroke:{enumerable:!0,get:function(){return this._stroke},set:function(e){this._stroke=e;for(let t=0;t<this.children.length;t++)this.children[t].stroke=e}},linewidth:{enumerable:!0,get:function(){return this._linewidth},set:function(e){this._linewidth=e;for(let t=0;t<this.children.length;t++)this.children[t].linewidth=e}},join:{enumerable:!0,get:function(){return this._join},set:function(e){this._join=e;for(let t=0;t<this.children.length;t++)this.children[t].join=e}},miter:{enumerable:!0,get:function(){return this._miter},set:function(e){this._miter=e;for(let t=0;t<this.children.length;t++)this.children[t].miter=e}},cap:{enumerable:!0,get:function(){return this._cap},set:function(e){this._cap=e;for(let t=0;t<this.children.length;t++)this.children[t].cap=e}},closed:{enumerable:!0,get:function(){return this._closed},set:function(e){this._closed=e;for(let t=0;t<this.children.length;t++)this.children[t].closed=e}},curved:{enumerable:!0,get:function(){return this._curved},set:function(e){this._curved=e;for(let t=0;t<this.children.length;t++)this.children[t].curved=e}},automatic:{enumerable:!0,get:function(){return this._automatic},set:function(e){this._automatic=e;for(let t=0;t<this.children.length;t++)this.children[t].automatic=e}},children:{enumerable:!0,get:function(){return this._children},set:function(e){const t=Ia.InsertChildren.bind(this),i=Ia.RemoveChildren.bind(this),s=Ia.OrderChildren.bind(this);this._children&&(this._children.unbind(),this._children.length>0&&i(this._children)),this._children=new Hr(e),this._children.bind(rn.Types.insert,t),this._children.bind(rn.Types.remove,i),this._children.bind(rn.Types.order,s),e.length>0&&t(e)}},mask:{enumerable:!0,get:function(){return this._mask},set:function(e){this._mask=e,this._flagMask=!0,kn.isObject(e)&&!e.clip&&(e.clip=!0)}}};function Oa(e,t){const i=e.parent;let s;function n(){t.subtractions.length>0&&(s=Array.prototype.indexOf.call(t.subtractions,e),s>=0&&t.subtractions.splice(s,1)),t.additions.length>0&&(s=Array.prototype.indexOf.call(t.additions,e),s>=0&&t.additions.splice(s,1)),e.parent=t,t.additions.push(e),t._flagAdditions=!0}function r(){s=Array.prototype.indexOf.call(i.additions,e),s>=0&&i.additions.splice(s,1),s=Array.prototype.indexOf.call(i.subtractions,e),s<0&&(i.subtractions.push(e),i._flagSubtractions=!0)}i!==t?(i&&i.children.ids[e.id]&&(s=Array.prototype.indexOf.call(i.children,e),i.children.splice(s,1),r()),t?n():(r(),i._flagAdditions&&0===i.additions.length&&(i._flagAdditions=!1),i._flagSubtractions&&0===i.subtractions.length&&(i._flagSubtractions=!1),delete e.parent)):n()}var Fa=class extends Ar{constructor(e,t,i,s){super([new cn(e,t),new cn(i,s)]);for(let e in Ba)Object.defineProperty(this,e,Ba[e]);this.vertices[0].command=nn.move,this.vertices[1].command=nn.line,this.automatic=!1}};Bs(Fa,"Properties",["left","right"]);var Ba={left:{enumerable:!0,get:function(){return this.vertices[0]},set:function(e){if(kn.isObject(e))this.vertices.splice(0,1,e);else{const e=new Cn("Two.Line.x argument is not an object.");console.warn(e.name,e.message)}}},right:{enumerable:!0,get:function(){return this.vertices[1]},set:function(e){if(kn.isObject(e))this.vertices.splice(1,1,e);else{const e=new Cn("Two.Line.y argument is not an object.");console.warn(e.name,e.message)}}}},Da={path:/[+-]?(?:\d*\.\d+|\d+)(?:[eE][+-]\d+)?/g,cssBackgroundImage:/url\(['"]?#([\w\d-_]*)['"]?\)/i,unitSuffix:/[a-zA-Z%]*/i},ja={start:"left",middle:"center",end:"right"},Na=["id","class","transform","xmlns","viewBox"],Va=["x","y","width","height","href","xlink:href"];function za(e){return e.replace(/svg:/gi,"").toLowerCase()}function Ha(e,t){if(t.x+=e.translateX,t.y+=e.translateY,t.x*=e.scaleX,t.y*=e.scaleY,0!==e.rotation){const i=t.length();t.x=i*Math.cos(e.rotation),t.y=i*Math.sin(e.rotation)}}function qa(e,t){t||(t={});const i=e.split(";");for(let e=0;e<i.length;e++){const s=i[e].split(":"),n=s[0],r=s[1];if(void 0===n||void 0===r)continue;const a=n.replace(/\s/g,""),o=r.replace(/\s/g,"");t[a]=o}return t}function $a(e){const t={},i=function(e){const t=e.getAttributeNames();for(let e=0;e<Na.length;e++){const i=Na[e],s=Array.prototype.indexOf.call(t,i);s>=0&&t.splice(s,1)}return t}(e),s=Math.max(i.length,e.style.length);for(let n=0;n<s;n++){const s=e.style[n],r=i[n];s&&(t[s]=e.style[s]),r&&(t[r]=e.getAttribute(r))}return t}function Ua(e,t,i){const s={},n={},r={};let a,o,l,c,h,u,d,p,f,m,g,y,v,b,_,x,w;if(null===e)return s;if(Hs.getComputedStyle){const t=Hs.getComputedStyle(e);for(a=t.length;a--;)l=t[a],c=t[l],void 0!==c&&(s[l]=c)}for(a=0;a<e.attributes.length;a++)u=e.attributes[a],/style/i.test(u.nodeName)?qa(u.value,r):n[u.nodeName]=u.value;for(l in void 0!==s.opacity&&(s["stroke-opacity"]=s.opacity,s["fill-opacity"]=s.opacity,delete s.opacity),i&&kn.defaults(s,i),kn.extend(s,r,n),s.visible=!(void 0===s.display&&/none/i.test(s.display))||void 0===s.visibility&&/hidden/i.test(s.visibility),s)switch(c=s[l],l){case"gradientTransform":if(/none/i.test(c))break;if(o=e.gradientTransform&&e.gradientTransform.baseVal&&e.gradientTransform.baseVal.length>0?e.gradientTransform.baseVal[0].matrix:e.getCTM?e.getCTM():null,null===o)break;switch(d=Gs(o),t._renderer.type){case"linear-gradient":Ha(d,t.left),Ha(d,t.right);break;case"radial-gradient":t.center.x+=d.translateX,t.center.y+=d.translateY,t.focal.x+=d.translateX,t.focal.y+=d.translateY,t.radius*=Math.max(d.scaleX,d.scaleY)}break;case"transform":if(/none/i.test(c))break;if(o=e.transform&&e.transform.baseVal&&e.transform.baseVal.length>0?e.transform.baseVal[0].matrix:e.getCTM?e.getCTM():null,null===o)break;dn.AutoCalculateImportedMatrices?(d=Gs(o),t.translation.set(d.translateX,d.translateY),t.rotation=Math.PI*(d.rotation/180),t.scale=new ln(d.scaleX,d.scaleY),p=parseFloat((s.x+"").replace("px")),f=parseFloat((s.y+"").replace("px")),p&&(t.translation.x=p),f&&(t.translation.y=f)):(o=e.getCTM(),t._matrix.manual=!0,t._matrix.set(o.a,o.b,o.c,o.d,o.e,o.f));break;case"visible":if(t instanceof Ia){t._visible=c;break}t.visible=c;break;case"stroke-linecap":if(t instanceof Ia){t._cap=c;break}t.cap=c;break;case"stroke-linejoin":if(t instanceof Ia){t._join=c;break}t.join=c;break;case"stroke-miterlimit":if(t instanceof Ia){t._miter=c;break}t.miter=c;break;case"stroke-width":if(t instanceof Ia){t._linewidth=parseFloat(c);break}t.linewidth=parseFloat(c);break;case"opacity":case"stroke-opacity":case"fill-opacity":if(t instanceof Ia){t._opacity=parseFloat(c);break}t.opacity=parseFloat(c);break;case"clip-path":if(Da.cssBackgroundImage.test(c)&&(m=c.replace(Da.cssBackgroundImage,"$1"),Ya.defs.current&&Ya.defs.current.contains(m)&&(y=Ya.defs.current.get(m),y&&y.childNodes.length>0)))switch(y=y.childNodes[0],v=za(y.nodeName),t.mask=Ya[v].call(this,y,{}),t._renderer.type){case"text":case"path":t.position.add(t.mask.position),t.mask.position.clear()}break;case"fill":case"stroke":h=(t instanceof Ia?"_":"")+l,Da.cssBackgroundImage.test(c)?(m=c.replace(Da.cssBackgroundImage,"$1"),Ya.defs.current&&Ya.defs.current.contains(m)?(y=Ya.defs.current.get(m),y.object||(v=za(y.nodeName),y.object=Ya[v].call(this,y,{})),y=y.object):(g=Ga(this),y=g.getById(m)),t[h]=y):t[h]=c;break;case"id":t.id=c;break;case"class":case"className":t.classList=c.split(" "),t._flagClassName=!0;break;case"x":case"y":if(b=t instanceof Gn,_=t instanceof Qn,x=t instanceof sr,b||_||x)break;c.match("[a-z%]$")&&!c.endsWith("px")&&(w=new Cn("only pixel values are supported with the "+l+" attribute."),console.warn(w.name,w.message)),t.translation[l]=parseFloat(c);break;case"font-family":t instanceof Ta&&(t.family=c);break;case"font-size":t instanceof Ta&&(c.match("[a-z%]$")&&!c.endsWith("px")&&(w=new Cn("only pixel values are supported with the "+l+" attribute."),console.warn(w.name,w.message)),t.size=parseFloat(c));break;case"font-weight":t instanceof Ta&&(t.weight=c);break;case"font-style":t instanceof Ta&&(t.style=c);break;case"text-decoration":t instanceof Ta&&(t.decoration=c);break;case"line-height":t instanceof Ta&&(t.leading=c)}return Object.keys(e.dataset).length&&(t.dataset=e.dataset),s}function Wa(e,t){for(let i=0,s=e.childNodes.length;i<s;i++){const s=e.childNodes[i];s.id&&("#text"!==za(e.nodeName)&&t.add(s.id,s))}}function Ga(e){for(;e.parent;)e=e.parent;return e.scene}var Ya={svg:function(e){const t=Ya.defs.current=new Ln,i=e.getElementsByTagName("defs");for(let e=0;e<i.length;e++)Wa(i[e],t);const s=Ya.g.call(this,e),n=e.getAttribute("viewBox"),r=e.getAttribute("x"),a=e.getAttribute("y"),o=e.getAttribute("width"),l=e.getAttribute("height");s.defs=t;const c=null!==n,h=null!==a,u=null!==o,d=null!==l;return null!==r&&(s.x=parseFloat(r.replace(Da.unitSuffix,""))),h&&(s.y=parseFloat(a.replace(Da.unitSuffix,""))),u&&(s.width=parseFloat(o.replace(Da.unitSuffix,""))),d&&(s.height=parseFloat(l.replace(Da.unitSuffix,""))),c&&function(e,t){const i=t.split(/[\s,]/),s=-parseFloat(i[0]),n=-parseFloat(i[1]),r=parseFloat(i[2]),a=parseFloat(i[3]);if(s&&n)for(let t=0;t<e.children.length;t++){const i=e.children[t];"translation"in i?i.translation.add(s,n):"x"in i?i.x=s:"y"in i&&(i.y=n)}const o="number"==typeof e.x,l="number"==typeof e.y,c="number"==typeof e.width,h="number"==typeof e.height;o&&(e.translation.x+=e.x),l&&(e.translation.y+=e.y),(c||h)&&(e.scale=new ln(1,1)),c&&(e.scale.x=e.width/r),h&&(e.scale.y=e.height/a),e.mask=new Br(0,0,r,a),e.mask.origin.set(-r/2,-a/2)}(s,n),delete Ya.defs.current,s},defs:function(e){return null},use:function(e,t){let i;const s=e.getAttribute("href")||e.getAttribute("xlink:href");if(!s)return i=new Cn("encountered <use /> with no href."),console.warn(i.name,i.message),null;const n=s.slice(1);if(!Ya.defs.current.contains(n))return i=new Cn("unable to find element for reference "+s+"."),console.warn(i.name,i.message),null;const r=Ya.defs.current.get(n).cloneNode(!0);for(let t=0;t<e.attributes.length;t++){const i=e.attributes[t],s=Va.includes(i.nodeName),n=!r.hasAttribute(i.nodeName);(s||n)&&r.setAttribute(i.nodeName,i.value)}const a=za(r.nodeName);return Ya[a].call(this,r,t)},g:function(e,t){const i=new Ia;Ua.call(this,e,i,t),this.add(i);const s=$a.call(this,e);for(let t=0,n=e.childNodes.length;t<n;t++){const n=e.childNodes[t],r=n.nodeName;if(!r)return;const a=za(r);if(a in Ya){const e=Ya[a].call(i,n,s);e&&!e.parent&&i.add(e)}}return i},polygon:function(e,t){let i;i="string"==typeof e?e:e.getAttribute("points");const s=[];i.replace(/(-?[\d.eE-]+)[,|\s](-?[\d.eE-]+)/g,function(e,t,i){s.push(new cn(parseFloat(t),parseFloat(i)))});const n=new Ar(s,!0);return n.stroke="none",n.fill="black",Ua.call(this,e,n,t),n},polyline:function(e,t){const i=Ya.polygon.call(this,e,t);return i.closed=!1,i},path:function(e,t){let i;"string"==typeof e?(i=e,e=null):i=e.getAttribute("d");let s=[],n=!1,r=!1;if(i){let e,t,a=new cn,o=i.match(/[a-df-z][^a-df-z]*/gi);const l=o.length-1;kn.each(o.slice(0),function(e,t){const i=e.slice(1).trim().match(Da.path),s=e[0],n=s.toLowerCase();let r,a,l,c,h;const u=[];switch(0===t&&(o=[]),n){case"h":case"v":i.length>1&&(r=1);break;case"m":case"l":case"t":i.length>2&&(r=2);break;case"s":case"q":i.length>4&&(r=4);break;case"c":i.length>6&&(r=6);break;case"a":i.length>7&&(r=7)}if(r){for(a=0,l=i.length,h=0;a<l;a+=r){if(c=s,h>0)switch(s){case"m":c="l";break;case"M":c="L"}u.push(c+i.slice(a,a+r).join(" ")),h++}o=Array.prototype.concat.apply(o,u)}else o.push(e)}),kn.each(o,function(i,o){let c,h,u;const d=i[0],p=d.toLowerCase();let f,m,g,y,v,b,_,x,w,S,k,T,E,C,A,M,P;switch(t=i.slice(1).trim().match(Da.path),r=d===p,p){case"z":if(o>=l)n=!0;else{h=a.x,u=a.y,c=new cn(h,u,void 0,void 0,void 0,void 0,nn.close);for(let e=s.length-1;e>=0;e--){const t=s[e];if(/m/i.test(t.command)){a=t;break}}}break;case"m":case"l":e=void 0,h=parseFloat(t[0]),u=parseFloat(t[1]),c=new cn(h,u,void 0,void 0,void 0,void 0,/m/i.test(p)?nn.move:nn.line),r&&c.addSelf(a),a=c;break;case"h":case"v":S=/h/i.test(p)?"x":"y",k=/x/i.test(S)?"y":"x",c=new cn(void 0,void 0,void 0,void 0,void 0,void 0,nn.line),c[S]=parseFloat(t[0]),c[k]=a[k],r&&(c[S]+=a[S]),a=c;break;case"c":case"s":f=a.x,m=a.y,e||(e=new ln),/c/i.test(p)?(g=parseFloat(t[0]),y=parseFloat(t[1]),v=parseFloat(t[2]),b=parseFloat(t[3]),_=parseFloat(t[4]),x=parseFloat(t[5])):(w=xn(a,e,r),g=w.x,y=w.y,v=parseFloat(t[0]),b=parseFloat(t[1]),_=parseFloat(t[2]),x=parseFloat(t[3])),r&&(g+=f,y+=m,v+=f,b+=m,_+=f,x+=m),a.controls.right.set(g-a.x,y-a.y),c=new cn(_,x,v-_,b-x,void 0,void 0,nn.curve),a=c,e=c.controls.left;break;case"t":case"q":f=a.x,m=a.y,e||(e=new ln),/q/i.test(p)?(g=parseFloat(t[0]),y=parseFloat(t[1]),v=parseFloat(t[0]),b=parseFloat(t[1]),_=parseFloat(t[2]),x=parseFloat(t[3])):(w=xn(a,e,r),g=w.x,y=w.y,v=w.x,b=w.y,_=parseFloat(t[0]),x=parseFloat(t[1])),r&&(g+=f,y+=m,v+=f,b+=m,_+=f,x+=m),a.controls.right.set(.33*(g-a.x),.33*(y-a.y)),c=new cn(_,x,v-_,b-x,void 0,void 0,nn.curve),a=c,e=c.controls.left;break;case"a":f=a.x,m=a.y,E=parseFloat(t[0]),C=parseFloat(t[1]),A=parseFloat(t[2]),M=parseFloat(t[3]),P=parseFloat(t[4]),_=parseFloat(t[5]),x=parseFloat(t[6]),r&&(_+=f,x+=m),T=new cn(_,x),T.command=nn.arc,T.rx=E,T.ry=C,T.xAxisRotation=A,T.largeArcFlag=M,T.sweepFlag=P,c=T,a=T,e=void 0}c&&(Array.isArray(c)?s=s.concat(c):s.push(c))})}i=new Ar(s,n,void 0,!0),i.stroke="none",i.fill="black";const a=i.getBoundingClientRect(!0);return a.centroid={x:a.left+a.width/2,y:a.top+a.height/2},kn.each(i.vertices,function(e){e.subSelf(a.centroid)}),Ua.call(this,e,i,t),i.translation.addSelf(a.centroid),i},circle:function(e,t){const i=parseFloat(e.getAttribute("cx")),s=parseFloat(e.getAttribute("cy")),n=parseFloat(e.getAttribute("r")),r=new Xr(0,0,n);return r.stroke="none",r.fill="black",Ua.call(this,e,r,t),r.translation.x=i,r.translation.y=s,r},ellipse:function(e,t){const i=parseFloat(e.getAttribute("cx")),s=parseFloat(e.getAttribute("cy")),n=parseFloat(e.getAttribute("rx")),r=parseFloat(e.getAttribute("ry")),a=new ea(0,0,n,r);return a.stroke="none",a.fill="black",Ua.call(this,e,a,t),a.translation.x=i,a.translation.y=s,a},rect:function(e,t){const i=parseFloat(e.getAttribute("rx")),s=parseFloat(e.getAttribute("ry"));if(!kn.isNaN(i)||!kn.isNaN(s))return Ya["rounded-rect"](e);const n=parseFloat(e.getAttribute("width")),r=parseFloat(e.getAttribute("height")),a=n/2,o=r/2,l=new Br(0,0,n,r);return l.stroke="none",l.fill="black",Ua.call(this,e,l,t),l.translation.x+=a,l.translation.y+=o,l},"rounded-rect":function(e,t){const i=parseFloat(e.getAttribute("rx"))||0,s=parseFloat(e.getAttribute("ry"))||0,n=parseFloat(e.getAttribute("width")),r=parseFloat(e.getAttribute("height")),a=n/2,o=r/2,l=new ln(i,s),c=new pa(0,0,n,r,l);return c.stroke="none",c.fill="black",Ua.call(this,e,c,t),c.translation.x+=a,c.translation.y+=o,c},line:function(e,t){const i=parseFloat(e.getAttribute("x1")),s=parseFloat(e.getAttribute("y1")),n=parseFloat(e.getAttribute("x2")),r=parseFloat(e.getAttribute("y2")),a=new Fa(i,s,n,r).noFill();return Ua.call(this,e,a,t),a},lineargradient:function(e,t){let i=e.getAttribute("gradientUnits"),s=e.getAttribute("spreadMethod");i||(i="objectBoundingBox"),s||(s="pad");let n=parseFloat(e.getAttribute("x1")||0),r=parseFloat(e.getAttribute("y1")||0),a=parseFloat(e.getAttribute("x2")||0),o=parseFloat(e.getAttribute("y2")||0);const l=(a+n)/2,c=(o+r)/2;/userSpaceOnUse/i.test(i)&&(n-=l,r-=c,a-=l,o-=c);const h=[];for(let t=0;t<e.children.length;t++){const i=e.children[t];let s=i.getAttribute("offset");/%/gi.test(s)&&(s=parseFloat(s.replace(/%/gi,""))/100),s=parseFloat(s);let n,r=i.getAttribute("stop-color"),a=i.getAttribute("stop-opacity"),o=i.getAttribute("style");null===r&&(n=!!o&&o.match(/stop-color:\s?([#a-fA-F0-9]*)/),r=n&&n.length>1?n[1]:void 0),null===a?(n=!!o&&o.match(/stop-opacity:\s?([0-9.-]*)/),a=n&&n.length>1?parseFloat(n[1]):1):a=parseFloat(a),h.push(new $n(s,r,a))}const u=new Qn(n,r,a,o,h);return u.spread=s,u.units=i,Ua.call(this,e,u,t),u},radialgradient:function(e,t){let i=e.getAttribute("gradientUnits"),s=e.getAttribute("spreadMethod");i||(i="objectBoundingBox"),s||(s="pad");let n=parseFloat(e.getAttribute("cx"))||0,r=parseFloat(e.getAttribute("cy"))||0,a=parseFloat(e.getAttribute("r")),o=parseFloat(e.getAttribute("fx")),l=parseFloat(e.getAttribute("fy"));kn.isNaN(o)&&(o=n),kn.isNaN(l)&&(l=r);const c=Math.abs(n+o)/2,h=Math.abs(r+l)/2;/userSpaceOnUse/i.test(i)&&(n-=c,r-=h,o-=c,l-=h);const u=[];for(let t=0;t<e.children.length;t++){const i=e.children[t];let s=i.getAttribute("offset");/%/gi.test(s)&&(s=parseFloat(s.replace(/%/gi,""))/100),s=parseFloat(s);let n,r=i.getAttribute("stop-color"),a=i.getAttribute("stop-opacity"),o=i.getAttribute("style");null===r&&(n=!!o&&o.match(/stop-color:\s?([#a-fA-F0-9]*)/),r=n&&n.length>1?n[1]:void 0),null===a?(n=!!o&&o.match(/stop-opacity:\s?([0-9.-]*)/),a=n&&n.length>1?parseFloat(n[1]):1):a=parseFloat(a),u.push(new $n(s,r,a))}const d=new sr(n,r,a,u,o,l);return d.spread=s,d.units=i,Ua.call(this,e,d,t),d},text:function(e,t){const i=(s=e.getAttribute("text-anchor"),ja[s]||"left");var s;const n=function(e){const t=e.getAttribute("dominant-baseline"),i=e.getAttribute("alignment-baseline");return t||i}(e)||"baseline";let r="";r=e.childNodes.length>0&&"TSPAN"===e.childNodes[0].tagName?e.childNodes[0].textContent:e.textContent;const a=new Ta(r);return Ua.call(this,e,a,t),a.alignment=i,a.baseline=n,a},clippath:function(e,t){return Ya.defs.current&&!Ya.defs.current.contains(e.id)&&Ya.defs.current.add(e.id,e),null},image:function(e,t){let i;const s=e.getAttribute("href")||e.getAttribute("xlink:href");if(!s)return i=new Cn("encountered <image /> with no href."),console.warn(i.name,i.message),null;const n=parseFloat(e.getAttribute("x"))||0,r=parseFloat(e.getAttribute("y"))||0,a=parseFloat(e.getAttribute("width")),o=parseFloat(e.getAttribute("height")),l=new Nr(s,n,r);return kn.isNaN(a)||(l.width=a),kn.isNaN(o)||(l.height=o),Ua.call(this,e,l,t),l}};function Xa(e,t){const i=new XMLHttpRequest;return i.open("GET",e),i.onreadystatechange=function(){4===i.readyState&&200===i.status&&t(i.responseText)},i.send(),i}var Ka=class extends Br{constructor(e,t,i,s){super(t,i,0,0),Bs(this,"_flagTextures",!1),Bs(this,"_flagFrameRate",!1),Bs(this,"_flagIndex",!1),Bs(this,"_amount",1),Bs(this,"_duration",0),Bs(this,"_index",0),Bs(this,"_startTime",0),Bs(this,"_playing",!1),Bs(this,"_firstFrame",0),Bs(this,"_lastFrame",0),Bs(this,"_loop",!0),Bs(this,"_textures",null),Bs(this,"_frameRate",0),Bs(this,"_origin",null);for(let e in Ja)Object.defineProperty(this,e,Ja[e]);this._renderer.flagTextures=Qa.bind(this),this._renderer.bindTextures=eo.bind(this),this._renderer.unbindTextures=to.bind(this),this.noStroke(),this.noFill(),Array.isArray(e)?this.textures=e.map(io.bind(this)):this.textures=[io(e)],this.origin=new ln,this._update(),this.frameRate="number"==typeof s?s:Ka.DefaultFrameRate,this.index=0}static fromObject(e){const t=(new Ka).copy(e);return"id"in e&&(t.id=e.id),t}copy(e){super.copy.call(this,e);for(let t=0;t<Ka.Properties.length;t++){const i=Ka.Properties[t];i in e&&(this[i]=e[i])}return this}play(e,t,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=kn.performance.now(),"number"==typeof e&&(this._firstFrame=e),"number"==typeof t&&(this._lastFrame=t),"function"==typeof i?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this}pause(){return this._playing=!1,this}stop(){return this._playing=!1,this._index=this._firstFrame,this}clone(e){const t=new Ka(this.textures,this.translation.x,this.translation.y,this.frameRate);return t._loop=this._loop,this._playing&&t.play(),e&&e.add(t),t}toObject(){const e=super.toObject.call(this);return e.textures=this.textures.map(function(e){return e.toObject()}),e.frameRate=this.frameRate,e.index=this.index,e.firstFrame=this.firstFrame,e.lastFrame=this.lastFrame,e.loop=this.loop,e}_update(){const e=this._textures;let t,i,s,n,r,a,o,l;return e&&(this._flagTextures&&(this._amount=e.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(n=this._amount,kn.isNaN(this._lastFrame)&&(this._lastFrame=n-1),s=kn.performance.now()-this._startTime,l=this._lastFrame+1,r=1e3*(l-this._firstFrame)/this._frameRate,this._loop?s%=r:s=Math.min(s,r),o=Ks(this._firstFrame,l,s/r),o=Math.floor(o),o!==this._index&&(this._index=o,a=e[this._index],a.loaded&&(t=a.image.width,i=a.image.height,this.width!==t&&(this.width=t),this.height!==i&&(this.height=i),this.fill=a,o>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof Nn||(a=e[this._index],a.loaded&&(t=a.image.width,i=a.image.height,this.width!==t&&(this.width=t),this.height!==i&&(this.height=i)),this.fill=a)),super._update.call(this),this}flagReset(){return this._flagTextures=this._flagFrameRate=!1,super.flagReset.call(this),this}},Za=Ka;Bs(Za,"Properties",["textures","frameRate","index","firstFrame","lastFrame","loop"]),Bs(Za,"DefaultFrameRate",30);var Ja={frameRate:{enumerable:!0,get:function(){return this._frameRate},set:function(e){this._frameRate=e,this._flagFrameRate=!0}},index:{enumerable:!0,get:function(){return this._index},set:function(e){this._index=e,this._flagIndex=!0}},textures:{enumerable:!0,get:function(){return this._textures},set:function(e){const t=this._renderer.bindTextures,i=this._renderer.unbindTextures;this._textures&&this._textures.unbind(rn.Types.insert,t).unbind(rn.Types.remove,i),this._textures=new In((e||[]).slice(0)),this._textures.bind(rn.Types.insert,t).bind(rn.Types.remove,i),t(this._textures)}},firstFrame:{enumerable:!0,get:function(){return this._firstFrame},set:function(e){this._firstFrame=e}},lastFrame:{enumerable:!0,get:function(){return this._lastFrame},set:function(e){this._lastFrame=e}},loop:{enumerable:!0,get:function(){return this._loop},set:function(e){this._loop=!!e}}};function Qa(){this._flagTextures=!0}function eo(e){let t=e.length;for(;t--;)e[t].bind(rn.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function to(e){let t=e.length;for(;t--;)e[t].unbind(rn.Types.change,this._renderer.flagTextures);this._renderer.flagTextures()}function io(e){return e instanceof Nn?e:"string"==typeof e?new Nn(e):void 0}var so=[],no=Math.max,ro=Math.min,ao=Math.abs,oo=Math.sin,lo=Math.cos,co=Math.acos,ho=Math.sqrt,uo={isHidden:/(undefined|none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},baselines:{top:"top",middle:"middle",bottom:"bottom",baseline:"alphabetic"},getRendererType:function(e){return e in uo?e:"path"},group:{renderChild:function(e){const t=uo.getRendererType(e._renderer.type);uo[t].render.call(e,this.ctx,!0,this.clip)},render:function(e){if(!this._visible)return this;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();const t=this._matrix.elements,i=this.parent;this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1);const s=this._mask,n=mo(t),r=!n||!!s;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=e,r&&(e.save(),n||e.transform(t[0],t[3],t[1],t[4],t[2],t[5])),s){const t=uo.getRendererType(s._renderer.type);uo[t].render.call(s,e,!0)}if(this._opacity>0&&0!==this._scale)for(let t=0;t<this.children.length;t++){const i=this.children[t],s=uo.getRendererType(i._renderer.type);uo[s].render.call(i,e)}return r&&e.restore(),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},path:{render:function(e,t,i){let s,n,r,a,o,l,c,h,u,d,p,f,m,g,y,v,b,_,x,w,S,k,T,E,C,A,M,P,L,I,R,O,F,B,D,j,N,V,z,H,q;if(B=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,L=this._mask,I=this._clip,o=this._opacity*(B||1),l=this._visible,!t&&(!l||I||0===o))return this;if(kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update(),s=this._matrix.elements,n=this._stroke,r=this._linewidth,a=this._fill,c=this._cap,h=this._join,u=this._miter,d=this._closed,p=this._renderer.vertices,f=p.length,m=f-1,R=mo(s),F=this.dashes,R||(e.save(),e.transform(s[0],s[3],s[1],s[4],s[2],s[5])),L){const t=uo.getRendererType(L._renderer.type);uo[t].render.call(L,e,!0)}if(a)if("string"==typeof a)e.fillStyle=a;else{const t=uo.getRendererType(a._renderer.type);uo[t].render.call(a,e,this),e.fillStyle=a._renderer.effect}if(n){if("string"==typeof n)e.strokeStyle=n;else{const t=uo.getRendererType(n._renderer.type);uo[t].render.call(n,e,this),e.strokeStyle=n._renderer.effect}r&&(e.lineWidth=r),u&&(e.miterLimit=u),h&&(e.lineJoin=h),!d&&c&&(e.lineCap=c)}"number"==typeof o&&(e.globalAlpha=o),F&&F.length>0&&(e.lineDashOffset=F.offset||0,e.setLineDash(F)),e.beginPath();for(let t=0;t<f;t++)switch(v=p[t],M=v.x,P=v.y,v.command){case nn.close:e.closePath();break;case nn.arc:D=v.rx,j=v.ry,N=v.xAxisRotation,V=v.largeArcFlag,z=v.sweepFlag,g=d?Qs(t-1,f):no(t-1,0),y=p[g],H=y.x,q=y.y,uo.renderSvgArcCommand(e,H,q,D,j,V,z,N,M,P);break;case nn.curve:g=d?Qs(t-1,f):Math.max(t-1,0),y=p[g],T=y.controls&&y.controls.right||ln.zero,E=v.controls&&v.controls.left||ln.zero,y._relative?(S=T.x+y.x,k=T.y+y.y):(S=T.x,k=T.y),v._relative?(x=E.x+v.x,w=E.y+v.y):(x=E.x,w=E.y),e.bezierCurveTo(S,k,x,w,M,P),t>=m&&d&&(b=_,C=v.controls&&v.controls.right||ln.zero,A=b.controls&&b.controls.left||ln.zero,v._relative?(S=C.x+v.x,k=C.y+v.y):(S=C.x,k=C.y),b._relative?(x=A.x+b.x,w=A.y+b.y):(x=A.x,w=A.y),M=b.x,P=b.y,e.bezierCurveTo(S,k,x,w,M,P));break;case nn.line:e.lineTo(M,P);break;case nn.move:_=v,e.moveTo(M,P)}return d&&e.closePath(),I||i||(uo.isHidden.test(a)||(O=a._renderer&&a._renderer.offset,O&&(e.save(),e.translate(-a._renderer.offset.x,-a._renderer.offset.y),e.scale(a._renderer.scale.x,a._renderer.scale.y)),e.fill(),O&&e.restore()),uo.isHidden.test(n)||(O=n._renderer&&n._renderer.offset,O&&(e.save(),e.translate(-n._renderer.offset.x,-n._renderer.offset.y),e.scale(n._renderer.scale.x,n._renderer.scale.y),e.lineWidth=r/n._renderer.scale.x),e.stroke(),O&&e.restore())),R||e.restore(),I&&!i&&e.clip(),F&&F.length>0&&e.setLineDash(so),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},points:{render:function(e,t,i){let s,n,r,a,o,l,c,h,u,d,p,f,m,g,y,v;if(v=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,o=this._opacity*(v||1),l=this._visible,!(t||l&&0!==o))return this;if(kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update(),s=this._matrix.elements,n=this._stroke,r=this._linewidth,a=this._fill,h=this._renderer.collection,u=h.length,m=mo(s),y=this.dashes,c=this._size,m||(e.save(),e.transform(s[0],s[3],s[1],s[4],s[2],s[5])),a)if("string"==typeof a)e.fillStyle=a;else{const t=uo.getRendererType(a._renderer.type);uo[t].render.call(a,e,this),e.fillStyle=a._renderer.effect}if(n){if("string"==typeof n)e.strokeStyle=n;else{const t=uo.getRendererType(n._renderer.type);uo[t].render.call(n,e,this),e.strokeStyle=n._renderer.effect}r&&(e.lineWidth=r)}"number"==typeof o&&(e.globalAlpha=o),y&&y.length>0&&(e.lineDashOffset=y.offset||0,e.setLineDash(y)),e.beginPath();let b,_=.5*c;this._sizeAttenuation||(b=this.worldMatrix.elements,b=Gs(b[0],b[3],b[1],b[4],b[2],b[5]),_/=Math.max(b.scaleX,b.scaleY));for(let t=0;t<u;t++)d=h[t],p=d.x,f=d.y,e.moveTo(p+_,f),e.arc(p,f,_,0,Us);return i||(uo.isHidden.test(a)||(g=a._renderer&&a._renderer.offset,g&&(e.save(),e.translate(-a._renderer.offset.x,-a._renderer.offset.y),e.scale(a._renderer.scale.x,a._renderer.scale.y)),e.fill(),g&&e.restore()),uo.isHidden.test(n)||(g=n._renderer&&n._renderer.offset,g&&(e.save(),e.translate(-n._renderer.offset.x,-n._renderer.offset.y),e.scale(n._renderer.scale.x,n._renderer.scale.y),e.lineWidth=r/n._renderer.scale.x),e.stroke(),g&&e.restore())),m||e.restore(),y&&y.length>0&&e.setLineDash(so),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},text:{render:function(e,t,i){const s=this.parent&&this.parent._renderer?this.parent._renderer.opacity:1,n=this._opacity*s,r=this._visible,a=this._mask,o=this._clip;if(!t&&(!r||o||0===n))return this;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();const l=this._matrix.elements,c=this._stroke,h=this._linewidth,u=this._fill,d=this._decoration,p=this._direction,f=mo(l),m=u._renderer&&u._renderer.offset&&c._renderer&&c._renderer.offset,g=this.dashes,y=uo.alignments[this._alignment]||this._alignment,v=uo.baselines[this._baseline]||this._baseline;let b,_,x,w,S,k,T,E,C,A,M;if(f||(e.save(),e.transform(l[0],l[3],l[1],l[4],l[2],l[5])),a){const t=uo.getRendererType(a._renderer.type);uo[t].render.call(a,e,!0)}if(m||(e.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),e.textAlign=y,e.textBaseline=v,e.direction=p,u)if("string"==typeof u)e.fillStyle=u;else{const t=uo.getRendererType(u._renderer.type);uo[t].render.call(u,e,this),e.fillStyle=u._renderer.effect}if(c){if("string"==typeof c)e.strokeStyle=c;else{const t=uo.getRendererType(c._renderer.type);uo[t].render.call(c,e,this),e.strokeStyle=c._renderer.effect}h&&(e.lineWidth=h)}if("number"==typeof n&&(e.globalAlpha=n),g&&g.length>0&&(e.lineDashOffset=g.offset||0,e.setLineDash(g)),o||i||(uo.isHidden.test(u)||(u._renderer&&u._renderer.offset?(k=u._renderer.scale.x,T=u._renderer.scale.y,e.save(),e.translate(-u._renderer.offset.x,-u._renderer.offset.y),e.scale(k,T),b=this._size/u._renderer.scale.y,_=this._leading/u._renderer.scale.y,e.font=[this._style,this._weight,b+"px/",_+"px",this._family].join(" "),x=u._renderer.offset.x/u._renderer.scale.x,w=u._renderer.offset.y/u._renderer.scale.y,e.fillText(this.value,x,w),e.restore()):e.fillText(this.value,0,0)),uo.isHidden.test(c)||(c._renderer&&c._renderer.offset?(k=c._renderer.scale.x,T=c._renderer.scale.y,e.save(),e.translate(-c._renderer.offset.x,-c._renderer.offset.y),e.scale(k,T),b=this._size/c._renderer.scale.y,_=this._leading/c._renderer.scale.y,e.font=[this._style,this._weight,b+"px/",_+"px",this._family].join(" "),x=c._renderer.offset.x/c._renderer.scale.x,w=c._renderer.offset.y/c._renderer.scale.y,S=h/c._renderer.scale.x,e.lineWidth=S,e.strokeText(this.value,x,w),e.restore()):e.strokeText(this.value,0,0))),/(underline|strikethrough)/i.test(d)){const t=e.measureText(this.value);let i=1;switch(d){case"underline":C=t.actualBoundingBoxDescent,M=t.actualBoundingBoxDescent;break;case"strikethrough":C=0,M=0,i=.5}switch(v){case"top":C+=this._size*i,M+=this._size*i;break;case"baseline":case"bottom":C-=this._size*i,M-=this._size*i}switch(y){case"left":case"start":E=0,A=t.width;break;case"right":case"end":E=-t.width,A=0;break;default:E=-t.width/2,A=t.width/2}e.lineWidth=Math.max(Math.floor(this._size/15),1),e.strokeStyle=e.fillStyle,e.beginPath(),e.moveTo(E,C),e.lineTo(A,M),e.stroke()}return f||e.restore(),o&&!i&&e.clip(),g&&g.length>0&&e.setLineDash(so),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},"linear-gradient":{render:function(e,t){if(t){if(kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let i,s=this.left._x,n=this.left._y,r=this.right._x,a=this.right._y;/objectBoundingBox/i.test(this._units)&&(i=t.getBoundingClientRect(!0),s=(s-.5)*i.width,n=(n-.5)*i.height,r=(r-.5)*i.width,a=(a-.5)*i.height),this._renderer.effect=e.createLinearGradient(s,n,r,a);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}}},"radial-gradient":{render:function(e,t){if(t){if(kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let i,s=this.center._x,n=this.center._y,r=this.focal._x,a=this.focal._y,o=this._radius;/objectBoundingBox/i.test(this._units)&&(i=t.getBoundingClientRect(!0),s=(s-.5)*i.width*.5,n=(n-.5)*i.height*.5,r=(r-.5)*i.width*.5,a=(a-.5)*i.height*.5,o*=Math.min(i.width,i.height)),this._renderer.effect=e.createRadialGradient(s,n,0,r,a,o);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}}},texture:{render:function(e){kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();const t=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=e.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof ln||(this._renderer.offset=new ln),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,t&&(this._renderer.offset.x+=t.width/2,this._renderer.offset.y+=t.height/2,this._scale instanceof ln?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof ln||(this._renderer.scale=new ln),this._scale instanceof ln?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},renderSvgArcCommand:function(e,t,i,s,n,r,a,o,l,c){o=o*Math.PI/180,s=ao(s),n=ao(n);const h=(t-l)/2,u=(i-c)/2,d=lo(o)*h+oo(o)*u,p=-oo(o)*h+lo(o)*u,f=d*d,m=p*p;let g=s*s,y=n*n;const v=f/g+m/y;if(v>1){const e=ho(v);g=(s*=e)*s,y=(n*=e)*n}const b=g*m+y*f;let _=ho(no(0,(g*y-b)/b));r===a&&(_=-_);const x=_*s*p/n,w=-_*n*d/s,S=lo(o)*x-oo(o)*w+(t+l)/2,k=oo(o)*x+lo(o)*w+(i+c)/2,T=fo(1,0,(d-x)/s,(p-w)/n);!function(e,t,i,s,n,r,a,o,l){const c=a-r,h=pn.Tolerance.epsilon,u=Math.abs(c)<h;let d=Qs(c,Us);d<h&&(d=u?0:Us),!0!==o||u||(d===Us?d=-Us:d-=Us);for(let a=0;a<dn.Resolution;a++){const o=r+a/(dn.Resolution-1)*d;let c=t+s*Math.cos(o),h=i+n*Math.sin(o);if(0!==l){const e=Math.cos(l),s=Math.sin(l),n=c-t,r=h-i;c=n*e-r*s+t,h=n*s+r*e+i}e.lineTo(c,h)}}(e,S,k,s,n,T,T+fo((d-x)/s,(p-w)/n,(-d-x)/s,(-p-w)/n)%Us,0===a,o)}},po=class extends rn{constructor(e){super();const t=!1!==e.smoothing;this.domElement=e.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=e.overdraw||!1,void 0!==this.ctx.imageSmoothingEnabled&&(this.ctx.imageSmoothingEnabled=t),this.scene=new Ia,this.scene.parent=this}setSize(e,t,i){return this.width=e,this.height=t,this.ratio=void 0===i?Mn(this.ctx):i,this.domElement.width=e*this.ratio,this.domElement.height=t*this.ratio,this.domElement.style&&kn.extend(this.domElement.style,{width:e+"px",height:t+"px"}),this.trigger(rn.Types.resize,e,t,i)}render(){const e=1===this.ratio;return e||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),uo.group.render.call(this.scene,this.ctx),e||this.ctx.restore(),this}};function fo(e,t,i,s){const n=e*i+t*s,r=ho(e*e+t*t)*ho(i*i+s*s);let a=co(no(-1,ro(1,n/r)));return e*s-t*i<0&&(a=-a),a}function mo(e){return 1==e[0]&&0==e[3]&&0==e[1]&&1==e[4]&&0==e[2]&&0==e[5]}Bs(po,"Utils",uo);var go={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},baselines:{top:"hanging",middle:"middle",bottom:"ideographic",baseline:"alphabetic"},createElement:function(e,t){const i=e,s=document.createElementNS(go.ns,i);return"svg"===i&&(t=kn.defaults(t||{},{version:go.version})),t&&Object.keys(t).length>0&&go.setAttributes(s,t),s},setAttributes:function(e,t){const i=Object.keys(t);for(let s=0;s<i.length;s++)/href/.test(i[s])?e.setAttributeNS(go.xlink,i[s],t[i[s]]):e.setAttribute(i[s],t[i[s]]);return this},removeAttributes:function(e,t){for(let i in t)e.removeAttribute(i);return this},toString:function(e,t){let i,s=e.length,n=s-1,r="";for(let a=0;a<s;a++){const o=e[a],l=e[t?Qs(a-1,s):Math.max(a-1,0)];let c,h,u,d,p,f,m,g,y,v,b,_,x,w,S,k=sn(o.x),T=sn(o.y);switch(o.command){case nn.close:c=nn.close;break;case nn.arc:b=o.rx,_=o.ry,x=o.xAxisRotation,w=o.largeArcFlag,S=o.sweepFlag,c=nn.arc+" "+b+" "+_+" "+x+" "+w+" "+S+" "+k+" "+T;break;case nn.curve:m=l.controls&&l.controls.right||ln.zero,g=o.controls&&o.controls.left||ln.zero,l.relative?(u=sn(m.x+l.x),d=sn(m.y+l.y)):(u=sn(m.x),d=sn(m.y)),o.relative?(p=sn(g.x+o.x),f=sn(g.y+o.y)):(p=sn(g.x),f=sn(g.y)),c=(0===a?nn.move:nn.curve)+" "+u+" "+d+" "+p+" "+f+" "+k+" "+T;break;case nn.move:i=o,c=nn.move+" "+k+" "+T;break;default:c=o.command+" "+k+" "+T}a>=n&&t&&(o.command===nn.curve&&(h=i,y=o.controls&&o.controls.right||o,v=h.controls&&h.controls.left||h,o.relative?(u=sn(y.x+o.x),d=sn(y.y+o.y)):(u=sn(y.x),d=sn(y.y)),h.relative?(p=sn(v.x+h.x),f=sn(v.y+h.y)):(p=sn(v.x),f=sn(v.y)),k=sn(h.x),T=sn(h.y),c+=" C "+u+" "+d+" "+p+" "+f+" "+k+" "+T),o.command!==nn.close&&(c+=" Z")),r+=c+" "}return r},pointsToString:function(e,t){let i="";const s=.5*t;for(let t=0;t<e.length;t++){const n=e[t].x,r=e[t].y-s;i+=nn.move+" "+n+" "+r+" ",i+="a "+s+" "+s+" 0 1 0 0.001 0 Z"}return i},getClip:function(e,t){let i=e._renderer.clip;return i||(i=e._renderer.clip=go.createElement("clipPath",{"clip-rule":"nonzero"})),null===i.parentNode&&t.defs.appendChild(i),i},getRendererType:function(e){return e in go?e:"path"},defs:{update:function(e){const{defs:t}=e;if(t._flagUpdate){const i=Array.prototype.slice.call(t.children,0);for(let s=0;s<i.length;s++){const n=i[s],r=n.id,a=`[fill="url(#${r})"],[stroke="url(#${r})"],[clip-path="url(#${r})"]`;e.querySelector(a)||t.removeChild(n)}t._flagUpdate=!1}}},group:{appendChild:function(e){const t=e._renderer.elem;if(!t)return;const i=t.nodeName;!i||/(radial|linear)gradient/i.test(i)||e._clip||this.elem.appendChild(t)},removeChild:function(e){const t=e._renderer.elem;t&&t.parentNode==this.elem&&t.nodeName&&(e._clip||this.elem.removeChild(t))},orderChild:function(e){this.elem.appendChild(e._renderer.elem)},renderChild:function(e){const t=go.getRendererType(e._renderer.type);go[t].render.call(e,this)},render:function(e){if(!this._visible&&!this._flagVisible||0===this._opacity&&!this._flagOpacity)return this;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update(),this._renderer.elem||(this._renderer.elem=go.createElement("g",{id:this.id}),e.appendChild(this._renderer.elem));const t=this._matrix.manual||this._flagMatrix,i={domElement:e,elem:this._renderer.elem};t&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(let t=0;t<this.children.length;t++){const i=this.children[t],s=go.getRendererType(i._renderer.type);go[s].render.call(i,e)}if(this._flagId&&this._renderer.elem.setAttribute("id",this._id),this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagVisible&&this._renderer.elem.setAttribute("display",this._visible?"inline":"none"),this._flagClassName&&this._renderer.elem.setAttribute("class",this.classList.join(" ")),this._flagAdditions&&this.additions.forEach(go.group.appendChild,i),this._flagSubtractions&&this.subtractions.forEach(go.group.removeChild,i),this._flagOrder&&this.children.forEach(go.group.orderChild,i),this._flagMask)if(this._mask){const t=go.getRendererType(this._mask._renderer.type);go[t].render.call(this._mask,e),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")}else this._renderer.elem.removeAttribute("clip-path");return this.dataset&&Object.assign(this._renderer.elem.dataset,this.dataset),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},path:{render:function(e){if(0===this._opacity&&!this._flagOpacity)return this;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();const t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(t.id=this._id),this._flagVertices){const e=go.toString(this._renderer.vertices,this._closed);t.d=e}if(this._fill&&this._fill._renderer){this._renderer.hasFillEffect=!0,this._fill._update();const t=go.getRendererType(this._fill._renderer.type);go[t].render.call(this._fill,e,!0)}if(this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill,this._renderer.hasFillEffect&&void 0===this._fill.id&&(e.defs._flagUpdate=!0,delete this._renderer.hasFillEffect)),this._stroke&&this._stroke._renderer){this._renderer.hasStrokeEffect=!0,this._stroke._update();const t=go.getRendererType(this._stroke._renderer.type);go[t].render.call(this._stroke,e,!0)}if(this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke,this._renderer.hasStrokeEffect&&void 0===this._stroke.id&&(e.defs._flagUpdate=!0,delete this._renderer.hasStrokeEffect)),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t["stroke-opacity"]=this._opacity,t["fill-opacity"]=this._opacity),this._flagClassName&&(t.class=this.classList.join(" ")),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this._flagCap&&(t["stroke-linecap"]=this._cap),this._flagJoin&&(t["stroke-linejoin"]=this._join),this._flagMiter&&(t["stroke-miterlimit"]=this._miter),this.dashes&&this.dashes.length>0&&(t["stroke-dasharray"]=this.dashes.join(" "),t["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?go.setAttributes(this._renderer.elem,t):(t.id=this._id,this._renderer.elem=go.createElement("path",t),e.appendChild(this._renderer.elem)),this._flagClip){const t=go.getClip(this,e),i=this._renderer.elem;this._clip?(i.removeAttribute("id"),t.setAttribute("id",this.id),t.appendChild(i)):(t.removeAttribute("id"),i.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(i))}if(this._flagMask)if(this._mask){const t=go.getRendererType(this._mask._renderer.type);go[t].render.call(this._mask,e),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")}else this._renderer.elem.removeAttribute("clip-path");return kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},points:{render:function(e){if(0===this._opacity&&!this._flagOpacity)return this;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();const t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(t.id=this._id),this._flagVertices||this._flagSize||this._flagSizeAttenuation){let e=this._size;if(!this._sizeAttenuation){const t=this.worldMatrix.elements,i=Gs(t[0],t[3],t[1],t[4],t[2],t[5]);e/=Math.max(i.scaleX,i.scaleY)}const i=go.pointsToString(this._renderer.collection,e);t.d=i}if(this._fill&&this._fill._renderer){this._renderer.hasFillEffect=!0,this._fill._update();const t=go.getRendererType(this._fill._renderer.type);go[t].render.call(this._fill,e,!0)}if(this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill,this._renderer.hasFillEffect&&void 0===this._fill.id&&(e.defs._flagUpdate=!0,delete this._renderer.hasFillEffect)),this._stroke&&this._stroke._renderer){this._renderer.hasStrokeEffect=!0,this._stroke._update();const t=go.getRendererType(this._stroke._renderer.type);go[t].render.call(this._stroke,e,!0)}return this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke,this._renderer.hasStrokeEffect&&void 0===this._stroke.id&&(e.defs._flagUpdate=!0,delete this._renderer.hasStrokeEffect)),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t["stroke-opacity"]=this._opacity,t["fill-opacity"]=this._opacity),this._flagClassName&&(t.class=this.classList.join(" ")),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(t["stroke-dasharray"]=this.dashes.join(" "),t["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?go.setAttributes(this._renderer.elem,t):(t.id=this._id,this._renderer.elem=go.createElement("path",t),e.appendChild(this._renderer.elem)),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},text:{render:function(e){this._update();const t={};if((this._matrix.manual||this._flagMatrix)&&(t.transform="matrix("+this._matrix.toString()+")"),this._flagId&&(t.id=this._id),this._flagFamily&&(t["font-family"]=this._family),this._flagSize&&(t["font-size"]=this._size),this._flagLeading&&(t["line-height"]=this._leading),this._flagAlignment&&(t["text-anchor"]=go.alignments[this._alignment]||this._alignment),this._flagBaseline&&(t["dominant-baseline"]=go.baselines[this._baseline]||this._baseline),this._flagStyle&&(t["font-style"]=this._style),this._flagWeight&&(t["font-weight"]=this._weight),this._flagDecoration&&(t["text-decoration"]=this._decoration),this._flagDirection&&(t.direction=this._direction),this._fill&&this._fill._renderer){this._renderer.hasFillEffect=!0,this._fill._update();const t=go.getRendererType(this._fill._renderer.type);go[t].render.call(this._fill,e,!0)}if(this._flagFill&&(t.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill,this._renderer.hasFillEffect&&void 0===this._fill.id&&(e.defs._flagUpdate=!0,delete this._renderer.hasFillEffect)),this._stroke&&this._stroke._renderer){this._renderer.hasStrokeEffect=!0,this._stroke._update();const t=go.getRendererType(this._stroke._renderer.type);go[t].render.call(this._stroke,e,!0)}if(this._flagStroke&&(t.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke,this._renderer.hasStrokeEffect&&void 0===this._stroke.id&&(e.defs._flagUpdate=!0,delete this._renderer.hasStrokeEffect)),this._flagLinewidth&&(t["stroke-width"]=this._linewidth),this._flagOpacity&&(t.opacity=this._opacity),this._flagClassName&&(t.class=this.classList.join(" ")),this._flagVisible&&(t.visibility=this._visible?"visible":"hidden"),this.dashes&&this.dashes.length>0&&(t["stroke-dasharray"]=this.dashes.join(" "),t["stroke-dashoffset"]=this.dashes.offset||0),this._renderer.elem?go.setAttributes(this._renderer.elem,t):(t.id=this._id,this._renderer.elem=go.createElement("text",t),e.appendChild(this._renderer.elem)),this._flagClip){const t=go.getClip(this,e),i=this._renderer.elem;this._clip?(i.removeAttribute("id"),t.setAttribute("id",this.id),t.appendChild(i)):(t.removeAttribute("id"),i.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(i))}if(this._flagMask)if(this._mask){const t=go.getRendererType(this._mask._renderer.type);go[t].render.call(this._mask,e),this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")")}else this._renderer.elem.removeAttribute("clip-path");return this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(e,t){kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),t||this._update();const i={};if(this._flagId&&(i.id=this._id),this._flagEndPoints&&(i.x1=this.left._x,i.y1=this.left._y,i.x2=this.right._x,i.y2=this.right._y),this._flagSpread&&(i.spreadMethod=this._spread),this._flagUnits&&(i.gradientUnits=this._units),this._renderer.elem?go.setAttributes(this._renderer.elem,i):(i.id=this._id,this._renderer.elem=go.createElement("linearGradient",i)),null===this._renderer.elem.parentNode&&e.defs.appendChild(this._renderer.elem),this._flagStops){const e=this._renderer.elem.childNodes.length!==this.stops.length;if(e)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let t=0;t<this.stops.length;t++){const i=this.stops[t],s={};i._flagOffset&&(s.offset=100*i._offset+"%"),i._flagColor&&(s["stop-color"]=i._color),i._flagOpacity&&(s["stop-opacity"]=i._opacity),i._renderer.elem?go.setAttributes(i._renderer.elem,s):i._renderer.elem=go.createElement("stop",s),e&&this._renderer.elem.appendChild(i._renderer.elem),i.flagReset()}}return kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},"radial-gradient":{render:function(e,t){kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),t||this._update();const i={};if(this._flagId&&(i.id=this._id),this._flagCenter&&(i.cx=this.center._x,i.cy=this.center._y),this._flagFocal&&(i.fx=this.focal._x,i.fy=this.focal._y),this._flagRadius&&(i.r=this._radius),this._flagSpread&&(i.spreadMethod=this._spread),this._flagUnits&&(i.gradientUnits=this._units),this._renderer.elem?go.setAttributes(this._renderer.elem,i):(i.id=this._id,this._renderer.elem=go.createElement("radialGradient",i)),null===this._renderer.elem.parentNode&&e.defs.appendChild(this._renderer.elem),this._flagStops){const e=this._renderer.elem.childNodes.length!==this.stops.length;if(e)for(;this._renderer.elem.lastChild;)this._renderer.elem.removeChild(this._renderer.elem.lastChild);for(let t=0;t<this.stops.length;t++){const i=this.stops[t],s={};i._flagOffset&&(s.offset=100*i._offset+"%"),i._flagColor&&(s["stop-color"]=i._color),i._flagOpacity&&(s["stop-opacity"]=i._opacity),i._renderer.elem?go.setAttributes(i._renderer.elem,s):i._renderer.elem=go.createElement("stop",s),e&&this._renderer.elem.appendChild(i._renderer.elem),i.flagReset()}}return kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},texture:{render:function(e,t){kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),t||this._update();const i={},s={x:0,y:0},n=this.image;if(this._flagId&&(i.id=this._id),this._flagLoaded&&this.loaded)switch(n.nodeName.toLowerCase()){case"canvas":s.href=s["xlink:href"]=n.toDataURL("image/png");break;case"img":case"image":s.href=s["xlink:href"]=this.src}return(this._flagOffset||this._flagLoaded||this._flagScale)&&(i.x=this._offset.x,i.y=this._offset.y,n&&(i.x-=n.width/2,i.y-=n.height/2,this._scale instanceof ln?(i.x*=this._scale.x,i.y*=this._scale.y):(i.x*=this._scale,i.y*=this._scale)),i.x>0&&(i.x*=-1),i.y>0&&(i.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(i.width=0,i.height=0,n)&&(i.width=n.width,i.height=n.height,"no-repeat"===this._repeat&&(i.width+=1,i.height+=1),this._scale instanceof ln?(i.width*=this._scale.x,i.height*=this._scale.y):(i.width*=this._scale,i.height*=this._scale),s.width=i.width,s.height=i.height),(this._flagScale||this._flagLoaded)&&(this._renderer.image?go.setAttributes(this._renderer.image,s):this._renderer.image=go.createElement("image",s)),this._renderer.elem?0!==Object.keys(i).length&&go.setAttributes(this._renderer.elem,i):(i.id=this._id,i.patternUnits="userSpaceOnUse",this._renderer.elem=go.createElement("pattern",i)),null===this._renderer.elem.parentNode&&e.defs.appendChild(this._renderer.elem),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}}},yo=class extends rn{constructor(e){super(),this.domElement=e.domElement||go.createElement("svg"),this.scene=new Ia,this.scene.parent=this,this.defs=go.createElement("defs"),this.defs._flagUpdate=!1,this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"}setSize(e,t){return this.width=e,this.height=t,go.setAttributes(this.domElement,{width:e,height:t}),this.trigger(rn.Types.resize,e,t)}render(){return go.group.render.call(this.scene,this.domElement),go.defs.update(this.domElement),this}};Bs(yo,"Utils",go);var vo=function(e,t,i){const s=e.createShader(e[i]);if(e.shaderSource(s,t),e.compileShader(s),!e.getShaderParameter(s,e.COMPILE_STATUS)){const t=e.getShaderInfoLog(s);throw e.deleteShader(s),new Cn("unable to compile shader "+s+": "+t)}return s},bo={vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},_o={vertex:"\n      precision mediump float;\n      attribute vec2 a_position;\n\n      uniform mat3 u_matrix;\n      uniform vec2 u_resolution;\n      uniform vec4 u_rect;\n\n      varying vec2 v_textureCoords;\n\n      void main() {\n        vec2 rectCoords = (a_position * (u_rect.zw - u_rect.xy)) + u_rect.xy;\n        vec2 projected = (u_matrix * vec3(rectCoords, 1.0)).xy;\n        vec2 normal = projected / u_resolution;\n        vec2 clipspace = (normal * 2.0) - 1.0;\n\n        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n        v_textureCoords = a_position;\n      }\n    ",fragment:"\n      precision mediump float;\n\n      uniform sampler2D u_image;\n      varying vec2 v_textureCoords;\n\n      void main() {\n        vec4 texel = texture2D(u_image, v_textureCoords);\n        if (texel.a == 0.0) {\n          discard;\n        }\n        gl_FragColor = texel;\n      }\n    "},xo={vertex:"\n      precision mediump float;\n      attribute vec2 a_position;\n\n      uniform float u_size;\n      uniform mat3 u_matrix;\n      uniform vec2 u_resolution;\n\n      varying vec2 v_textureCoords;\n\n      void main() {\n        vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;\n        vec2 normal = projected / u_resolution;\n        vec2 clipspace = (normal * 2.0) - 1.0;\n\n        gl_PointSize = u_size;\n        gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);\n        v_textureCoords = a_position;\n      }\n    ",fragment:"\n      precision mediump float;\n\n      uniform sampler2D u_image;\n\n      void main() {\n        vec4 texel = texture2D(u_image, gl_PointCoord);\n        if (texel.a == 0.0) {\n          discard;\n        }\n        gl_FragColor = texel;\n      }\n    "},wo=yr.Multiply,So=[1,0,0,0,1,0,0,0,1],ko=new en(9),To=po.Utils,Eo=new ln,Co=new en([0,0,1,0,0,1,0,1,1,0,1,1]),Ao={precision:.9,isHidden:/(undefined|none|transparent)/i,canvas:Hs.document?Hs.document.createElement("canvas"):{getContext:function(){}},alignments:{left:"start",middle:"center",right:"end"},matrix:new yr,group:{removeChild:function(e,t){if(e.children)for(let i=0;i<e.children.length;i++)Ao.group.removeChild(e.children[i],t);e._renderer.texture&&(t.deleteTexture(e._renderer.texture),delete e._renderer.texture),e._renderer.positionBuffer&&(t.deleteBuffer(e._renderer.positionBuffer),delete e._renderer.positionBuffer)},render:function(e,t){if(!this._visible)return;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();const i=this.parent,s=i._matrix&&i._matrix.manual||i._flagMatrix,n=this._matrix.manual||this._flagMatrix;if((s||n)&&(this._renderer.matrix||(this._renderer.matrix=new en(9)),this._matrix.toTransformArray(!0,ko),wo(ko,i._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof ln||(this._renderer.scale=new ln),this._scale instanceof ln?(this._renderer.scale.x=this._scale.x,this._renderer.scale.y=this._scale.y):(this._renderer.scale.x=this._scale,this._renderer.scale.y=this._scale),/renderer/i.test(i._renderer.type)||(this._renderer.scale.x*=i._renderer.scale.x,this._renderer.scale.y*=i._renderer.scale.y),s&&(this._flagMatrix=!0)),this._mask){e.clear(e.STENCIL_BUFFER_BIT),e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,0),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.colorMask(!1,!1,!1,!1);const i=po.Utils.getRendererType(this._mask._renderer.type);Ao[i].render.call(this._mask,e,t,this),e.stencilFunc(e.EQUAL,1,255),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.colorMask(!0,!0,!0,!0)}let r;if(this._flagOpacity=i._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(i&&i._renderer?i._renderer.opacity:1),this._flagSubtractions)for(r=0;r<this.subtractions.length;r++)Ao.group.removeChild(this.subtractions[r],e);for(r=0;r<this.children.length;r++){const i=this.children[r],s=po.Utils.getRendererType(i._renderer.type);Ao[s].render.call(i,e,t)}return this._mask&&e.disable(e.STENCIL_TEST),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},path:{updateCanvas:function(e,t){let i,s,n,r,a,o,l,c,h,u,d,p,f,m;const g=t._renderer.vertices,y=this.canvas,v=this.ctx,b=e.renderer.ratio,_=Eo.copy(t._renderer.scale).multiply(b),x=t._stroke,w=t._linewidth,S=t._fill,k=t._renderer.opacity||t._opacity,T=t._cap,E=t._join,C=t._miter,A=t._closed,M=t.dashes,P=g.length,L=P-1;y.width=Math.max(Math.ceil(t._renderer.rect.width*_.x),1),y.height=Math.max(Math.ceil(t._renderer.rect.height*_.y),1);const I=t._renderer.rect.centroid,R=I.x,O=I.y;if(v.clearRect(0,0,y.width,y.height),S)if("string"==typeof S)v.fillStyle=S;else{const e=po.Utils.getRendererType(S._renderer.type);Ao[e].render.call(S,v,t),v.fillStyle=S._renderer.effect}if(x){if("string"==typeof x)v.strokeStyle=x;else{const e=po.Utils.getRendererType(x._renderer.type);Ao[e].render.call(x,v,t),v.strokeStyle=x._renderer.effect}w&&(v.lineWidth=w),C&&(v.miterLimit=C),E&&(v.lineJoin=E),!A&&T&&(v.lineCap=T)}let F,B,D,j,N,V,z,H;"number"==typeof k&&(v.globalAlpha=k),M&&M.length>0&&(v.lineDashOffset=M.offset||0,v.setLineDash(M)),v.save(),v.scale(_.x,_.y),v.translate(R,O),v.beginPath();for(let e=0;e<g.length;e++){const t=g[e];switch(p=t.x,f=t.y,t.command){case nn.close:v.closePath();break;case nn.arc:B=t.rx,D=t.ry,j=t.xAxisRotation,N=t.largeArcFlag,V=t.sweepFlag,i=A?Qs(e-1,P):Math.max(e-1,0),s=g[i],z=s.x,H=s.y,To.renderSvgArcCommand(v,z,H,B,D,N,V,j,p,f);break;case nn.curve:i=A?Qs(e-1,P):Math.max(e-1,0),s=g[i],c=s.controls&&s.controls.right||ln.zero,h=t.controls&&t.controls.left||ln.zero,s._relative?(o=c.x+s.x,l=c.y+s.y):(o=c.x,l=c.y),t._relative?(r=h.x+t.x,a=h.y+t.y):(r=h.x,a=h.y),v.bezierCurveTo(o,l,r,a,p,f),e>=L&&A&&(n=F,u=t.controls&&t.controls.right||ln.zero,d=n.controls&&n.controls.left||ln.zero,t._relative?(o=u.x+t.x,l=u.y+t.y):(o=u.x,l=u.y),n._relative?(r=d.x+n.x,a=d.y+n.y):(r=d.x,a=d.y),p=n.x,f=n.y,v.bezierCurveTo(o,l,r,a,p,f));break;case nn.line:v.lineTo(p,f);break;case nn.move:F=t,v.moveTo(p,f)}}A&&v.closePath(),Ao.isHidden.test(S)||(m=S._renderer&&S._renderer.offset,m&&(v.save(),v.translate(-S._renderer.offset.x,-S._renderer.offset.y),v.scale(S._renderer.scale.x,S._renderer.scale.y)),v.fill(),m&&v.restore()),Ao.isHidden.test(x)||(m=x._renderer&&x._renderer.offset,m&&(v.save(),v.translate(-x._renderer.offset.x,-x._renderer.offset.y),v.scale(x._renderer.scale.x,x._renderer.scale.y),v.lineWidth=w/x._renderer.scale.x),v.stroke(),m&&v.restore()),v.restore()},getBoundingClientRect:function(e,t,i){let s,n,r=1/0,a=-1/0,o=1/0,l=-1/0;e.forEach(function(e){const t=e.x,i=e.y,s=e.controls;let n,c,h,u,d,p;o=Math.min(i,o),r=Math.min(t,r),a=Math.max(t,a),l=Math.max(i,l),e.controls&&(d=s.left,p=s.right,d&&p&&(n=e._relative?d.x+t:d.x,c=e._relative?d.y+i:d.y,h=e._relative?p.x+t:p.x,u=e._relative?p.y+i:p.y,n&&c&&h&&u&&(o=Math.min(c,u,o),r=Math.min(n,h,r),a=Math.max(n,h,a),l=Math.max(c,u,l))))}),"number"==typeof t&&(o-=t,r-=t,a+=t,l+=t),s=a-r,n=l-o,i.top=o,i.left=r,i.right=a,i.bottom=l,i.width=s,i.height=n,i.centroid||(i.centroid={}),i.centroid.x=-r,i.centroid.y=-o},render:function(e,t,i){if(!this._visible||!this._opacity)return this;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();const s=i||this.parent,n=t[po.Utils.getRendererType(this._renderer.type)],r=s._matrix.manual||s._flagMatrix,a=this._matrix.manual||this._flagMatrix,o=this._renderer.parent!==s,l=this._flagVertices||this._flagFill||this._fill instanceof Qn&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof sr&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Nn&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Qn&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof sr&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Nn&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||s._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if(r||a||o){let e,t;this._renderer.matrix||(this._renderer.matrix=new en(9)),this._matrix.toTransformArray(!0,ko),wo(ko,s._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof ln||(this._renderer.scale=new ln),this._scale instanceof ln?(e=this._scale.x*s._renderer.scale.x,t=this._scale.y*s._renderer.scale.y):(e=this._scale*s._renderer.scale.x,t=this._scale*s._renderer.scale.y),this._renderer.scale.x=e<0?-e:e,this._renderer.scale.y=t<0?-t:t,o&&(this._renderer.parent=s)}if(this._mask){e.clear(e.STENCIL_BUFFER_BIT),e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,0),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.colorMask(!1,!1,!1,!1);const i=po.Utils.getRendererType(this._mask._renderer.type);Ao[i].render.call(this._mask,e,t,this),e.stencilFunc(e.EQUAL,1,255),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.colorMask(!0,!0,!0,!0)}if(l?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*s._renderer.opacity,Ao.path.getBoundingClientRect(this._renderer.vertices,this._linewidth,this._renderer.rect),Ao.updateTexture.call(Ao,e,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!i||!this._renderer.texture)return this;t.current!==n&&(e.useProgram(n),e.bindBuffer(e.ARRAY_BUFFER,t.buffers.position),e.vertexAttribPointer(n.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n.position),e.bufferData(e.ARRAY_BUFFER,Co,e.STATIC_DRAW),t.resolution.flagged||e.uniform2f(e.getUniformLocation(n,"u_resolution"),t.resolution.width,t.resolution.height),t.current=n),t.resolution.flagged&&e.uniform2f(e.getUniformLocation(n,"u_resolution"),t.resolution.width,t.resolution.height),e.bindTexture(e.TEXTURE_2D,this._renderer.texture);const c=this._renderer.rect;return e.uniformMatrix3fv(n.matrix,!1,this._renderer.matrix),e.uniform4f(n.rect,c.left,c.top,c.right,c.bottom),e.drawArrays(e.TRIANGLES,0,6),this._mask&&e.disable(e.STENCIL_TEST),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},points:{updateCanvas:function(e,t){let i;const s=this.canvas,n=this.ctx,r=e.renderer.ratio,a=t._stroke,o=t._linewidth,l=t._fill,c=t._renderer.opacity||t._opacity,h=t.dashes,u=t._size*r;let d=u;Ao.isHidden.test(a)||(d+=o),s.width=Js(d),s.height=s.width;const p=d/s.width,f=s.width/2,m=s.height/2;if(n.clearRect(0,0,s.width,s.height),l)if("string"==typeof l)n.fillStyle=l;else{const e=po.Utils.getRendererType(l._renderer.type);Ao[e].render.call(l,n,t),n.fillStyle=l._renderer.effect}if(a){if("string"==typeof a)n.strokeStyle=a;else{const e=po.Utils.getRendererType(a._renderer.type);Ao[e].render.call(a,n,t),n.strokeStyle=a._renderer.effect}o&&(n.lineWidth=o/p)}"number"==typeof c&&(n.globalAlpha=c),h&&h.length>0&&(n.lineDashOffset=h.offset||0,n.setLineDash(h)),n.save(),n.translate(f,m),n.scale(Ao.precision,Ao.precision),n.beginPath(),n.arc(0,0,u/p*.5,0,Us),n.restore(),closed&&n.closePath(),Ao.isHidden.test(l)||(i=l._renderer&&l._renderer.offset,i&&(n.save(),n.translate(-l._renderer.offset.x,-l._renderer.offset.y),n.scale(l._renderer.scale.x,l._renderer.scale.y)),n.fill(),i&&n.restore()),Ao.isHidden.test(a)||(i=a._renderer&&a._renderer.offset,i&&(n.save(),n.translate(-a._renderer.offset.x,-a._renderer.offset.y),n.scale(a._renderer.scale.x,a._renderer.scale.y),n.lineWidth=o/a._renderer.scale.x),n.stroke(),i&&n.restore())},render:function(e,t,i){if(!this._visible||!this._opacity)return this;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();let s=this._size;const n=i||this.parent,r=t[this._renderer.type],a=this._sizeAttenuation,o=this._stroke,l=this._linewidth,c=n._matrix.manual||n._flagMatrix,h=this._matrix.manual||this._flagMatrix,u=this._renderer.parent!==n,d=this._renderer.vertices,p=this._renderer.collection.length,f=this._flagVertices,m=this._flagFill||this._fill instanceof Qn&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof sr&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Nn&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Qn&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof sr&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Nn&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||n._flagOpacity||this._flagVisible||this._flagScale||this.dashes&&this.dashes.length>0||!this._renderer.texture;if(c||h||u){let e,t;this._renderer.matrix||(this._renderer.matrix=new en(9)),this._matrix.toTransformArray(!0,ko),wo(ko,n._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof ln||(this._renderer.scale=new ln),this._scale instanceof ln?(e=this._scale.x*n._renderer.scale.x,t=this._scale.y*n._renderer.scale.y):(e=this._scale*n._renderer.scale.x,t=this._scale*n._renderer.scale.y),this._renderer.scale.x=e<0?-e:e,this._renderer.scale.y=t<0?-t:t,u&&(this._renderer.parent=n)}if(f){const t=this._renderer.positionBuffer;t&&e.deleteBuffer(t),this._renderer.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this._renderer.positionBuffer),e.vertexAttribPointer(r.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r.position),e.bufferData(e.ARRAY_BUFFER,d,e.STATIC_DRAW)}return m?(this._renderer.opacity=this._opacity*n._renderer.opacity,Ao.updateTexture.call(Ao,e,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!i||!this._renderer.texture?this:(Ao.isHidden.test(o)||(s+=l),s/=Ao.precision,a&&(s*=Math.max(this._renderer.scale.x,this._renderer.scale.y)),t.current!==r&&(e.useProgram(r),t.resolution.flagged||e.uniform2f(e.getUniformLocation(r,"u_resolution"),t.resolution.width,t.resolution.height),t.current=r),t.resolution.flagged&&e.uniform2f(e.getUniformLocation(r,"u_resolution"),t.resolution.width,t.resolution.height),e.bindTexture(e.TEXTURE_2D,this._renderer.texture),e.uniformMatrix3fv(r.matrix,!1,this._renderer.matrix),e.uniform1f(r.size,s*t.resolution.ratio),e.drawArrays(e.POINTS,0,p),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset())}},text:{updateCanvas:function(e,t){const i=this.canvas,s=this.ctx,n=e.renderer.ratio,r=Eo.copy(t._renderer.scale).multiply(n),a=t._stroke,o=t._linewidth,l=t._fill,c=t._renderer.opacity||t._opacity,h=t.dashes,u=t._decoration,d=t._direction;i.width=Math.max(Math.ceil(t._renderer.rect.width*r.x),1),i.height=Math.max(Math.ceil(t._renderer.rect.height*r.y),1);const p=t._renderer.rect.centroid,f=p.x,m=p.y;let g,y,v,b,_,x,w,S,k,T,E;const C=l._renderer&&l._renderer.offset&&a._renderer&&a._renderer.offset;if(s.clearRect(0,0,i.width,i.height),C||(s.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),s.textAlign="center",s.textBaseline="middle",s.textDirection=d,l)if("string"==typeof l)s.fillStyle=l;else{const e=po.Utils.getRendererType(l._renderer.type);Ao[e].render.call(l,s,t),s.fillStyle=l._renderer.effect}if(a){if("string"==typeof a)s.strokeStyle=a;else{const e=po.Utils.getRendererType(a._renderer.type);Ao[e].render.call(a,s,t),s.strokeStyle=a._renderer.effect}o&&(s.lineWidth=o)}if("number"==typeof c&&(s.globalAlpha=c),h&&h.length>0&&(s.lineDashOffset=h.offset||0,s.setLineDash(h)),s.save(),s.scale(r.x,r.y),s.translate(f,m),Ao.isHidden.test(l)||(l._renderer&&l._renderer.offset?(x=l._renderer.scale.x,w=l._renderer.scale.y,s.save(),s.translate(-l._renderer.offset.x,-l._renderer.offset.y),s.scale(x,w),g=t._size/l._renderer.scale.y,y=t._leading/l._renderer.scale.y,s.font=[t._style,t._weight,g+"px/",y+"px",t._family].join(" "),v=l._renderer.offset.x/l._renderer.scale.x,b=l._renderer.offset.y/l._renderer.scale.y,s.fillText(t.value,v,b),s.restore()):s.fillText(t.value,0,0)),Ao.isHidden.test(a)||(a._renderer&&a._renderer.offset?(x=a._renderer.scale.x,w=a._renderer.scale.y,s.save(),s.translate(-a._renderer.offset.x,-a._renderer.offset.y),s.scale(x,w),g=t._size/a._renderer.scale.y,y=t._leading/a._renderer.scale.y,s.font=[t._style,t._weight,g+"px/",y+"px",t._family].join(" "),v=a._renderer.offset.x/a._renderer.scale.x,b=a._renderer.offset.y/a._renderer.scale.y,_=o/a._renderer.scale.x,s.lineWidth=_,s.strokeText(t.value,v,b),s.restore()):s.strokeText(t.value,0,0)),/(underline|strikethrough)/i.test(u)){const e=s.measureText(t.value);switch(u){case"underline":k=e.actualBoundingBoxDescent,E=e.actualBoundingBoxDescent;break;case"strikethrough":k=0,E=0}S=-e.width/2,T=e.width/2,s.lineWidth=Math.max(Math.floor(t._size/15),1),s.strokeStyle=s.fillStyle,s.beginPath(),s.moveTo(S,k),s.lineTo(T,E),s.stroke()}s.restore()},getBoundingClientRect:function(e,t){const i=Ao.ctx;i.font=[e._style,e._weight,e._size+"px/"+e._leading+"px",e._family].join(" "),i.textAlign="center",i.textBaseline=po.Utils.baselines[e._baseline]||e._baseline;const s=i.measureText(e._value);let n=s.width,r=1.15*(s.actualBoundingBoxAscent+s.actualBoundingBoxDescent);this._linewidth&&!Ao.isHidden.test(this._stroke)&&(n+=2*this._linewidth,r+=2*this._linewidth);const a=n/2,o=r/2;switch(Ao.alignments[e._alignment]||e._alignment){case Ao.alignments.left:"ltr"===e.direction?(t.left=0,t.right=n):(t.left=-n,t.right=0);break;case Ao.alignments.right:"ltr"===e.direction?(t.left=-n,t.right=0):(t.left=0,t.right=n);break;default:t.left=-a,t.right=a}switch(e._baseline){case"bottom":t.top=-r,t.bottom=0;break;case"top":t.top=0,t.bottom=r;break;case"baseline":t.top=1.5*-o,t.bottom=.5*o;break;default:t.top=-o,t.bottom=o}t.width=n,t.height=r,t.centroid||(t.centroid={}),t.centroid.x=a,t.centroid.y=o},render:function(e,t,i){if(!this._visible||!this._opacity)return this;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();const s=i||this.parent,n=t[this._renderer.type],r=s._matrix.manual||s._flagMatrix,a=this._matrix.manual||this._flagMatrix,o=this._renderer.parent!==s,l=this._flagVertices||this._flagFill||this._fill instanceof Qn&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof sr&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof Nn&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagImage||this._fill._flagVideo||this._fill._flagRepeat||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof Qn&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof sr&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof Nn&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagImage||this._stroke._flagVideo||this._stroke._flagRepeat||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||s._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||this.dashes&&this.dashes.length>0||!this._renderer.texture;if(r||a||o){let e,t;this._renderer.matrix||(this._renderer.matrix=new en(9)),this._matrix.toTransformArray(!0,ko),wo(ko,s._renderer.matrix,this._renderer.matrix),this._renderer.scale instanceof ln||(this._renderer.scale=new ln),this._scale instanceof ln?(e=this._scale.x*s._renderer.scale.x,t=this._scale.y*s._renderer.scale.y):(e=this._scale*s._renderer.scale.x,t=this._scale*s._renderer.scale.y),this._renderer.scale.x=e<0?-e:e,this._renderer.scale.y=t<0?-t:t,o&&(this._renderer.parent=s)}if(this._mask){e.clear(e.STENCIL_BUFFER_BIT),e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,0),e.stencilOp(e.KEEP,e.KEEP,e.REPLACE),e.colorMask(!1,!1,!1,!1);const i=po.Utils.getRendererType(this._mask._renderer.type);Ao[i].render.call(this._mask,e,t,this),e.stencilFunc(e.EQUAL,1,255),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.colorMask(!0,!0,!0,!0)}if(l?(this._renderer.rect||(this._renderer.rect={}),this._renderer.opacity=this._opacity*s._renderer.opacity,Ao.text.getBoundingClientRect(this,this._renderer.rect),Ao.updateTexture.call(Ao,e,this)):(this._fill&&this._fill._update&&this._fill._update(),this._stroke&&this._stroke._update&&this._stroke._update()),this._clip&&!i||!this._renderer.texture)return this;t.current!==n&&(e.useProgram(n),e.bindBuffer(e.ARRAY_BUFFER,t.buffers.position),e.vertexAttribPointer(n.position,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n.position),e.bufferData(e.ARRAY_BUFFER,Co,e.STATIC_DRAW),t.resolution.flagged||e.uniform2f(e.getUniformLocation(n,"u_resolution"),t.resolution.width,t.resolution.height),t.current=n),t.resolution.flagged&&e.uniform2f(e.getUniformLocation(n,"u_resolution"),t.resolution.width,t.resolution.height),e.bindTexture(e.TEXTURE_2D,this._renderer.texture);const c=this._renderer.rect;return e.uniformMatrix3fv(n.matrix,!1,this._renderer.matrix),e.uniform4f(n.rect,c.left,c.top,c.right,c.bottom),e.drawArrays(e.TRIANGLES,0,6),this._mask&&e.disable(e.STENCIL_TEST),kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},"linear-gradient":{render:function(e,t){if(e.canvas.getContext("2d")&&t){if(kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops||this._flagUnits){let i,s=this.left._x,n=this.left._y,r=this.right._x,a=this.right._y;/objectBoundingBox/i.test(this._units)&&(i=t.getBoundingClientRect(!0),s=(s-.5)*i.width,n=(n-.5)*i.height,r=(r-.5)*i.width,a=(a-.5)*i.height),this._renderer.effect=e.createLinearGradient(s,n,r,a);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}}},"radial-gradient":{render:function(e,t){if(e.canvas.getContext("2d")&&t){if(kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops||this._flagUnits){let i,s=this.center._x,n=this.center._y,r=this.focal._x,a=this.focal._y,o=this._radius;/objectBoundingBox/i.test(this._units)&&(i=t.getBoundingClientRect(!0),s=(s-.5)*i.width*.5,n=(n-.5)*i.height*.5,r=(r-.5)*i.width*.5,a=(a-.5)*i.height*.5,o*=Math.min(i.width,i.height)),this._renderer.effect=e.createRadialGradient(s,n,0,r,a,o);for(let e=0;e<this.stops.length;e++){const t=this.stops[e];this._renderer.effect.addColorStop(t._offset,t._color)}}return kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}}},texture:{render:function(e,t){if(!e.canvas.getContext("2d"))return;kn.isFunction(this._renderer.onBeforeRender)&&this._renderer.onBeforeRender(),this._update();const i=this.image;if((this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)this._renderer.effect=e.createPattern(i,this._repeat);else if(!this._renderer.effect)return this.flagReset();if((this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof ln||(this._renderer.offset=new ln),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,i&&(this._renderer.offset.x+=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof ln?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),this._flagScale||this._flagLoaded){let e,t;this._renderer.scale instanceof ln||(this._renderer.scale=new ln),this._scale instanceof ln?(e=this._scale.x,t=this._scale.y):(e=this._scale,t=this._scale),this._renderer.scale.x=e<0?-e:e,this._renderer.scale.y=t<0?-t:t}return kn.isFunction(this._renderer.onAfterRender)&&this._renderer.onAfterRender(),this.flagReset()}},updateTexture:function(e,t){if(this[po.Utils.getRendererType(t._renderer.type)].updateCanvas.call(Ao,e,t),this.canvas.width<=0||this.canvas.height<=0)return t._renderer.texture&&e.deleteTexture(t._renderer.texture),void delete t._renderer.texture;t._renderer.texture||(t._renderer.texture=e.createTexture()),e.bindTexture(e.TEXTURE_2D,t._renderer.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,this.canvas),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR)},program:{create:function(e,t){let i,s,n;if(i=e.createProgram(),kn.each(t,function(t){e.attachShader(i,t)}),e.linkProgram(i),s=e.getProgramParameter(i,e.LINK_STATUS),!s)throw n=e.getProgramInfoLog(i),e.deleteProgram(i),new Cn("unable to link program: "+n);return i}},extensions:{init:function(e){const t={},i=["EXT_texture_filter_anisotropic","WEBGL_compressed_texture_s3tc","OES_texture_float_linear","WEBGL_multisampled_render_to_texture"];for(let s=0;s<i.length;s++){const n=i[s];t[n]=Ao.extensions.get(e,n)}return t},get:function(e,t){return e.getExtension(t)||e.getExtension(`MOZ_${t}`)||e.getExtension(`WEBKIT_${t}`)}},TextureRegistry:new Ln};Ao.ctx=Ao.canvas.getContext("2d");var Mo=class extends rn{constructor(e){let t,i,s,n;if(super(),this.domElement=e.domElement||document.createElement("canvas"),void 0!==e.offscreenElement&&(Ao.canvas=e.offscreenElement,Ao.ctx=Ao.canvas.getContext("2d")),this.scene=new Ia,this.scene.parent=this,this._renderer={type:"renderer",matrix:new en(So),scale:1,opacity:1},this._flagMatrix=!0,e=kn.defaults(e||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=e.overdraw,t=this.ctx=this.domElement.getContext("webgl",e)||this.domElement.getContext("experimental-webgl",e),!this.ctx)throw new Cn("unable to create a webgl context. Try using another renderer.");s=vo(t,_o.vertex,bo.vertex),n=vo(t,_o.fragment,bo.fragment),this.programs={current:null,buffers:{position:t.createBuffer()},resolution:{width:0,height:0,ratio:1,flagged:!1}},i=this.programs.path=Ao.program.create(t,[s,n]),this.programs.text=this.programs.path,t.extensions=Ao.extensions.init(t),t.renderer=this,i.position=t.getAttribLocation(i,"a_position"),i.matrix=t.getUniformLocation(i,"u_matrix"),i.rect=t.getUniformLocation(i,"u_rect");const r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.vertexAttribPointer(i.position,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(i.position),t.bufferData(t.ARRAY_BUFFER,Co,t.STATIC_DRAW),s=vo(t,xo.vertex,bo.vertex),n=vo(t,xo.fragment,bo.fragment),i=this.programs.points=Ao.program.create(t,[s,n]),i.position=t.getAttribLocation(i,"a_position"),i.matrix=t.getUniformLocation(i,"u_matrix"),i.size=t.getUniformLocation(i,"u_size"),t.enable(t.BLEND),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}setSize(e,t,i){let s,n;const r=this.ctx;return this.width=e,this.height=t,this.ratio=void 0===i?Mn(r):i,this.domElement.width=e*this.ratio,this.domElement.height=t*this.ratio,kn.isObject(this.domElement.style)&&kn.extend(this.domElement.style,{width:e+"px",height:t+"px"}),this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,s=e*this.ratio,n=t*this.ratio,r.viewport(0,0,s,n),this.programs.resolution.width=s,this.programs.resolution.height=n,this.programs.resolution.ratio=this.ratio,this.programs.resolution.flagged=!0,this.trigger(rn.Types.resize,e,t,i)}render(){const e=this.ctx;return this.overdraw||e.clear(e.COLOR_BUFFER_BIT),Ao.group.render.call(this.scene,e,this.programs),this._flagMatrix=!1,this.programs.resolution.flagged=!0,this}};Bs(Mo,"Utils",Ao);var Po=kn.extend({Error:Cn,getRatio:Mn,read:Ya,xhr:Xa},kn,Vs,zs,$s),Lo=class{constructor(e){Bs(this,"_events",new rn),Bs(this,"type",""),Bs(this,"renderer",null),Bs(this,"scene",null),Bs(this,"width",0),Bs(this,"height",0),Bs(this,"frameCount",0),Bs(this,"timeDelta",0),Bs(this,"playing",!1);const t=kn.defaults(e||{},{fullscreen:!1,fitted:!1,width:640,height:480,type:Lo.Types.svg,autostart:!1});if(kn.each(t,function(e,t){/fullscreen/i.test(t)||/autostart/i.test(t)||(this[t]=e)},this),kn.isElement(t.domElement)){const e=t.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+e)||(this.type=Lo.Types[e])}this.renderer=new Lo[this.type](this),this.setPlaying(t.autostart),this.frameCount=0,t.fullscreen?(this.fit=Ro.bind(this),this.fit.domElement=window,this.fit.attached=!0,kn.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),kn.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),Tn.bind(this.fit.domElement,"resize",this.fit),this.fit()):t.fitted?(this.fit=Oo.bind(this),kn.extend(this.renderer.domElement.style,{display:"block"})):"number"==typeof t.width&&"number"==typeof t.height&&(this.renderer.setSize(t.width,t.height,this.ratio),this.width=t.width,this.height=t.height),this.renderer.bind(rn.Types.resize,Fo.bind(this)),this.scene=this.renderer.scene,Lo.Instances.push(this),t.autostart&&Bo.init()}get _bound(){return this._events._bound}set _bound(e){this._events._bound=e}addEventListener(){return this._events.addEventListener.apply(this,arguments)}on(){return this._events.addEventListener.apply(this,arguments)}bind(){return this._events.addEventListener.apply(this,arguments)}removeEventListener(){return this._events.removeEventListener.apply(this,arguments)}off(){return this._events.removeEventListener.apply(this,arguments)}unbind(){return this._events.removeEventListener.apply(this,arguments)}dispatchEvent(){return this._events.dispatchEvent.apply(this,arguments)}trigger(){return this._events.dispatchEvent.apply(this,arguments)}listen(){return this._events.listen.apply(this,arguments)}ignore(){return this._events.ignore.apply(this,arguments)}appendTo(e){return e.appendChild(this.renderer.domElement),this.fit&&(this.fit.domElement!==window&&(this.fit.domElement=e,this.fit.attached=!1),this.update()),this}play(){return this.playing=!0,Bo.init(),this.trigger(rn.Types.play)}pause(){return this.playing=!1,this.trigger(rn.Types.pause)}setPlaying(e){this.playing=e}release(e){let t,i,s;if(void 0===e)return this.release(this.scene);if("function"==typeof e.unbind&&e.unbind(),"object"==typeof e.fill&&"unbind"in e.fill&&e.fill.unbind(),"object"==typeof e.stroke&&"unbind"in e.stroke&&e.stroke.unbind(),e.vertices)for("function"==typeof e.vertices.unbind&&e.vertices.unbind(),t=0;t<e.vertices.length;t++)i=e.vertices[t],"function"==typeof i.unbind&&i.unbind(),i.controls&&(i.controls.left&&"function"==typeof i.controls.left.unbind&&i.controls.left.unbind(),i.controls.right&&"function"==typeof i.controls.right.unbind&&i.controls.right.unbind());if(e.children){for(t=0;t<e.children.length;t++)s=e.children[t],this.release(s);"function"==typeof e.children.unbind&&e.children.unbind()}return e}update(){const e=!!this._lastFrame,t=kn.performance.now();e&&(this.timeDelta=parseFloat((t-this._lastFrame).toFixed(3))),this._lastFrame=t,this.fit&&this.fit.domElement&&!this.fit.attached&&(Tn.bind(this.fit.domElement,"resize",this.fit),this.fit.attached=!0,this.fit());const i=this.width,s=this.height,n=this.renderer;return i===n.width&&s===n.height||n.setSize(i,s,this.ratio),this.trigger(rn.Types.update,this.frameCount,this.timeDelta),this.render()}render(){return this.renderer.render(),this.trigger(rn.Types.render,this.frameCount++)}add(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.add(e),this}remove(e){return e instanceof Array||(e=Array.prototype.slice.call(arguments)),this.scene.remove(e),this}clear(){return this.scene.remove(this.scene.children),this}makeLine(e,t,i,s){const n=new Fa(e,t,i,s);return this.scene.add(n),n}makeArrow(e,t,i,s,n){const r="number"==typeof n?n:10,a=Math.atan2(s-t,i-e),o=[new cn(e,t,void 0,void 0,void 0,void 0,nn.move),new cn(i,s,void 0,void 0,void 0,void 0,nn.line),new cn(i-r*Math.cos(a-Math.PI/4),s-r*Math.sin(a-Math.PI/4),void 0,void 0,void 0,void 0,nn.line),new cn(i,s,void 0,void 0,void 0,void 0,nn.move),new cn(i-r*Math.cos(a+Math.PI/4),s-r*Math.sin(a+Math.PI/4),void 0,void 0,void 0,void 0,nn.line)],l=new Ar(o,!1,!1,!0);return l.noFill(),l.cap="round",l.join="round",this.scene.add(l),l}makeRectangle(e,t,i,s){const n=new Br(e,t,i,s);return this.scene.add(n),n}makeRoundedRectangle(e,t,i,s,n){const r=new pa(e,t,i,s,n);return this.scene.add(r),r}makeCircle(e,t,i,s){const n=new Xr(e,t,i,s);return this.scene.add(n),n}makeEllipse(e,t,i,s,n){const r=new ea(e,t,i,s,n);return this.scene.add(r),r}makeStar(e,t,i,s,n){const r=new ba(e,t,i,s,n);return this.scene.add(r),r}makeCurve(e){const t=arguments.length;if(!Array.isArray(e)){e=[];for(let i=0;i<t;i+=2){const t=arguments[i];if("number"!=typeof t)break;const s=arguments[i+1];e.push(new cn(t,s))}}const i=arguments[t-1],s=new Ar(e,!("boolean"==typeof i?i:void 0),!0),n=s.getBoundingClientRect();return s.center().translation.set(n.left+n.width/2,n.top+n.height/2),this.scene.add(s),s}makePolygon(e,t,i,s){const n=new ha(e,t,i,s);return this.scene.add(n),n}makeArcSegment(e,t,i,s,n,r,a){const o=new $r(e,t,i,s,n,r,a);return this.scene.add(o),o}makePoints(e){const t=arguments.length;let i=e;if(!Array.isArray(e)){i=[];for(let e=0;e<t;e+=2){const t=arguments[e];if("number"!=typeof t)break;const s=arguments[e+1];i.push(new ln(t,s))}}const s=new ra(i);return this.scene.add(s),s}makePath(e){const t=arguments.length;let i=e;if(!Array.isArray(e)){i=[];for(let e=0;e<t;e+=2){const t=arguments[e];if("number"!=typeof t)break;const s=arguments[e+1];i.push(new cn(t,s))}}const s=arguments[t-1],n=new Ar(i,!("boolean"==typeof s?s:void 0)),r=n.getBoundingClientRect();return"number"==typeof r.top&&"number"==typeof r.left&&"number"==typeof r.right&&"number"==typeof r.bottom&&n.center().translation.set(r.left+r.width/2,r.top+r.height/2),this.scene.add(n),n}makeText(e,t,i,s){const n=new Ta(e,t,i,s);return this.add(n),n}makeLinearGradient(e,t,i,s){const n=Array.prototype.slice.call(arguments,4),r=new Qn(e,t,i,s,n);return this.add(r),r}makeRadialGradient(e,t,i){const s=Array.prototype.slice.call(arguments,3),n=new sr(e,t,i,s);return this.add(n),n}makeSprite(e,t,i,s,n,r,a){const o=new Nr(e,t,i,s,n,r);return a&&o.play(),this.add(o),o}makeImageSequence(e,t,i,s,n){const r=new Za(e,t,i,s);return n&&r.play(),this.add(r),r}makeTexture(e,t){return new Nn(e,t)}makeGroup(e){e instanceof Array||(e=Array.prototype.slice.call(arguments));const t=new Ia;return this.scene.add(t),t.add(e),t}interpret(e,t,i){const s=e.tagName.toLowerCase();if(i=void 0===i||i,!(s in Ya))return null;const n=Ya[s].call(this,e);return i?this.add(t&&n instanceof Ia?n.children:n):n.parent&&n.remove(),n}load(e,t){const i=new Ia;let s,n,r;const a=function(e){for(Tn.temp.innerHTML=e,n=0;n<Tn.temp.children.length;n++)s=Tn.temp.children[n],r=this.interpret(s,!1,!1),null!==r&&i.add(r);if("function"==typeof t){const e=Tn.temp.children.length<=1?Tn.temp.children[0]:Tn.temp.children;t(i,e)}}.bind(this);return/\.svg$/i.test(e)?(Xa(e,a),i):(a(e),i)}},Io=Lo;function Ro(){const e=document.body.getBoundingClientRect(),t=this.width=e.width,i=this.height=e.height;this.renderer.setSize(t,i,this.ratio)}function Oo(){const e=this.renderer.domElement.parentElement;if(!e)return void console.warn("Two.js: Attempting to fit to parent, but no parent found.");const t=e.getBoundingClientRect(),i=this.width=t.width,s=this.height=t.height;this.renderer.setSize(i,s,this.ratio)}function Fo(e,t){this.width=e,this.height=t,this.trigger(rn.Types.resize,e,t)}Bs(Io,"NextFrameId",dn.NextFrameId),Bs(Io,"Types",dn.Types),Bs(Io,"Version",dn.Version),Bs(Io,"PublishDate",dn.PublishDate),Bs(Io,"Identifier",dn.Identifier),Bs(Io,"Resolution",dn.Resolution),Bs(Io,"AutoCalculateImportedMatrices",dn.AutoCalculateImportedMatrices),Bs(Io,"Instances",dn.Instances),Bs(Io,"uniqueId",dn.uniqueId),Bs(Io,"Anchor",cn),Bs(Io,"Collection",In),Bs(Io,"Events",rn),Bs(Io,"Group",Ia),Bs(Io,"Matrix",yr),Bs(Io,"Path",Ar),Bs(Io,"Registry",Ln),Bs(Io,"Element",On),Bs(Io,"Shape",br),Bs(Io,"Text",Ta),Bs(Io,"Vector",ln),Bs(Io,"Gradient",Gn),Bs(Io,"ImageSequence",Za),Bs(Io,"LinearGradient",Qn),Bs(Io,"RadialGradient",sr),Bs(Io,"Sprite",Nr),Bs(Io,"Stop",$n),Bs(Io,"Texture",Nn),Bs(Io,"ArcSegment",$r),Bs(Io,"Circle",Xr),Bs(Io,"Ellipse",ea),Bs(Io,"Line",Fa),Bs(Io,"Points",ra),Bs(Io,"Polygon",ha),Bs(Io,"Rectangle",Br),Bs(Io,"RoundedRectangle",pa),Bs(Io,"Star",ba),Bs(Io,"CanvasRenderer",po),Bs(Io,"SVGRenderer",yo),Bs(Io,"WebGLRenderer",Mo),Bs(Io,"Commands",nn),Bs(Io,"Utils",Po);var Bo=Tn.getRequestAnimationFrame();function Do(){for(let e=0;e<Io.Instances.length;e++){const t=Io.Instances[e];t.playing&&t.update()}Io.NextFrameId=Bo(Do)}Bo.init=function(){Do(),Bo.init=function(){}};const jo=new class{constructor(){this.modules=new Map,this.textPools={main:["Ð®Ñ€Ð¸Ð´Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ ÑƒÑÐ»ÑƒÐ³Ð¸","ÐÐ´Ð²Ð¾ÐºÐ°Ñ‚ÑÐºÐ¾Ðµ Ð±ÑŽÑ€Ð¾","Ð‘ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð¸Ñ Ð¸ Ð°ÑƒÐ´Ð¸Ñ‚"],accounting:["ÐÐ°Ð»Ð¾Ð³Ð¾Ð²Ñ‹Ð¹ ÑƒÑ‡ÐµÑ‚","ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ Ð±ÑƒÑ…Ð³Ð°Ð»Ñ‚ÐµÑ€Ð¸Ð¸","Ð’Ð½ÑƒÑ‚Ñ€ÐµÐ½Ð½Ð¸Ð¹ Ð°ÑƒÐ´Ð¸Ñ‚"],lawyers:["Ð¡Ð¾Ð¿Ñ€Ð¾Ð²Ð¾Ð¶Ð´ÐµÐ½Ð¸Ðµ Ð² Ð¾Ñ€Ð³Ð°Ð½Ð°Ñ…","ÐŸÑ€ÐµÐ´ÑÑ‚Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÐ¾Ð² Ð² ÑÑƒÐ´Ðµ","ÐÐ´Ð²Ð¾ÐºÐ°Ñ‚ Ð½Ð° Ð´Ð¾Ð¿Ñ€Ð¾ÑÐµ Ð¸Ð»Ð¸ Ð¾Ð±Ñ‹ÑÐºÐµ"]}}createModule(e,t,i="mixed"){this.modules.has(e)&&this.destroyModule(e);const s=new Io({type:Io.Types.canvas,width:t.clientWidth,height:t.clientHeight,autostart:!1}).appendTo(t),n=s.renderer.domElement;n.style.maxWidth="100%",n.style.maxHeight="100%",n.style.padding="32px",n.style.paddingTop="0";const r=Ts.Engine.create();r.enableSleeping=!0,r.gravity.scale=.001,r.gravity.y=1,r.positionIterations=12,r.velocityIterations=10;const a=r.world,o=Ts.Mouse.create(n);o.pixelRatio=window.devicePixelRatio||1;const l=Ts.MouseConstraint.create(r,{mouse:o,constraint:{stiffness:.2,render:{visible:!1}}});Ts.World.add(a,l),o.element.removeEventListener("wheel",o.mousewheel),o.element.removeEventListener("mousewheel",o.mousewheel),o.element.removeEventListener("DOMMouseScroll",o.mousewheel);const c={moduleName:e,container:t,two:s,canvas:n,engine:r,world:a,mouse:o,mouseConstraint:l,shapes:[],twoObjects:[],shapeType:i,resizeTimeout:null,prevWidth:window.innerWidth,animationId:null};return this.modules.set(e,c),this.setupWorld(e),this.startUpdateLoop(e),this.setupResizeHandler(e),c}getShapeColor(){return getComputedStyle(document.documentElement).getPropertyValue("--shapes-color").trim()}createCurvedText(e,t,i,s,n,r=16){const a=e.makeGroup(),o=t.split(""),l=Math.min(1.4*Math.PI,o.length*r*.6/n),c=-l/2;return o.forEach((t,h)=>{if(1===o.length){const n=e.makeText(t,i,s,{family:"Arial, sans-serif",size:r,fill:"#ffffff",alignment:"center",baseline:"middle"});a.add(n)}else{const u=c+h/(o.length-1)*l,d=i+Math.cos(u-Math.PI/2)*(n-r/2),p=s+Math.sin(u-Math.PI/2)*(n-r/2),f=e.makeText(t,d,p,{family:"Arial, sans-serif",size:r,fill:"#ffffff",alignment:"center",baseline:"middle"});f.rotation=u,a.add(f)}}),a}createStraightText(e,t,i,s,n,r){const a=Math.min(n/t.length*1.2,.3*r,18);return e.makeText(t,i,s,{family:"Arial, sans-serif",size:a,fill:"#ffffff",alignment:"center",baseline:"middle"})}setupWorld(e){const t=this.modules.get(e);if(!t)return;const{container:i,two:s,world:n,mouseConstraint:r,canvas:a}=t,o=i.getBoundingClientRect(),l=o.width,c=o.height;s.width=l,s.height=c,s.renderer.setSize(l,c),a.width=l*(window.devicePixelRatio||1),a.height=c*(window.devicePixelRatio||1),a.style.width=l+"px",a.style.height=c+"px",Ts.Composite.allBodies(n).forEach(e=>{e!==r.body&&Ts.World.remove(n,e)}),t.twoObjects.forEach(e=>s.remove(e)),t.twoObjects=[],t.shapes=[];const h={isStatic:!0,render:{visible:!1}},u=[Ts.Bodies.rectangle(l/2,c+25,l+100,50,h),Ts.Bodies.rectangle(-25,c/2,50,c+100,h),Ts.Bodies.rectangle(l+25,c/2,50,c+100,h)];Ts.World.add(n,u);const d=this.getScale(),p=this.getShapeColor();this.createShapesForModule(t,l,c,d,p,{restitution:0,friction:0,frictionAir:.03,density:.001,sleepThreshold:60})}getScale(){const e=window.innerWidth;return window.innerWidth>768?Math.min(1,e/1440):.5}createShapesForModule(e,t,i,s,n,r){const{moduleName:a,two:o,world:l}=e;let c=[];switch(a){case"main":c=[{type:"rectangle",x:.5*t,y:-1500,w:520*s,h:190*s},{type:"rectangle",x:.45*t,y:-800,w:300*s,h:300*s},{type:"circle",x:.7*t,y:-750,r:190*s},{type:"circle",x:.2*t,y:-550,r:80*s},{type:"circle",x:.4*t,y:-550,r:80*s},{type:"rectangle",x:.7*t,y:-500,w:290*s,h:140*s}];break;case"accounting":let e=0;c=[{count:2,radius:180*s},{count:3,radius:90*s},{count:1,radius:180*s},{count:4,radius:70*s}].flatMap(i=>Array.from({length:i.count},()=>({type:"circle",x:.75*t,y:-600-100*e++,r:i.radius})));break;case"lawyers":c=[{type:"rectangle",x:.2*t,y:-800,w:320*s,h:320*s},{type:"rectangle",x:.3*t,y:-1200,w:150*s,h:150*s},{type:"rectangle",x:.4*t,y:-1200,w:290*s,h:620*s},{type:"rectangle",x:.75*t,y:-900,w:420*s,h:150*s},{type:"rectangle",x:.75*t,y:-700,w:620*s,h:290*s},{type:"rectangle",x:.7*t,y:-1200,w:320*s,h:320*s}]}c.forEach((t,i)=>{let s,l;const c=this.getTextFromPool(a,i);if("circle"===t.type){s=Ts.Bodies.circle(t.x,t.y,t.r,r);const e=o.makeCircle(0,0,t.r);e.fill=n,e.noStroke();const i=this.createCurvedText(o,c,0,0,.7*t.r,Math.min(16,.15*t.r));l=o.makeGroup(e,i)}else if("rectangle"===t.type){s=Ts.Bodies.rectangle(t.x,t.y,t.w,t.h,r);const e=o.makeRectangle(0,0,t.w,t.h);e.fill=n,e.noStroke();const i=this.createStraightText(o,c,0,0,t.w,t.h);l=o.makeGroup(e,i)}l.position.set(t.x,t.y),s.twoObject=l,l.physicsBody=s,e.shapes.push(s),e.twoObjects.push(l)}),Ts.World.add(l,e.shapes)}getTextFromPool(e,t){const i=this.textPools[e];return i[t%i.length]}startUpdateLoop(e){const t=this.modules.get(e);if(!t)return;let i=performance.now();const s=e=>{const n=e-i;i=e,Ts.Engine.update(t.engine,n),t.shapes.forEach(e=>{const t=e.twoObject;t&&(t.position.set(e.position.x,e.position.y),t.rotation=e.angle)}),t.two.update(),t.animationId=requestAnimationFrame(s)};t.animationId=requestAnimationFrame(s)}stopUpdateLoop(e){const t=this.modules.get(e);t&&t.animationId&&(cancelAnimationFrame(t.animationId),t.animationId=null)}setupResizeHandler(e){const t=this.modules.get(e);t&&window.addEventListener("resize",()=>{const i=window.innerWidth;i!==t.prevWidth&&(clearTimeout(t.resizeTimeout),t.resizeTimeout=setTimeout(()=>{this.setupWorld(e)},200),t.prevWidth=i)})}destroyModule(e){const t=this.modules.get(e);t&&(this.stopUpdateLoop(e),Ts.Engine.clear(t.engine),t.two.clear(),t.canvas.remove(),clearTimeout(t.resizeTimeout),this.modules.delete(e))}init(){try{const e=V(".js_different-geometric-shapes");this.createModule("main",e,"mixed")}catch(e){console.log("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ main shapes:",e)}try{const e=V(".js_circles-shapes");this.createModule("accounting",e,"circles")}catch(e){console.log("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ accounting shapes:",e)}try{const e=V(".js_rectangles-shapes");this.createModule("lawyers",e,"rectangles")}catch(e){console.log("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ lawyers shapes:",e)}window.addEventListener("load",()=>{this.modules.forEach((e,t)=>{this.setupWorld(t)})})}};jo.init();try{document.querySelectorAll(".drag-to-scroll").forEach(e=>{let t,i,s=!1;e.addEventListener("mousedown",n=>{s=!0,e.classList.add("dragging"),t=n.pageX-e.offsetLeft,i=e.scrollLeft}),e.addEventListener("mouseleave",()=>{s=!1,e.classList.remove("dragging")}),e.addEventListener("mouseup",()=>{s=!1,e.classList.remove("dragging")}),e.addEventListener("mousemove",n=>{if(!s)return;n.preventDefault();const r=1.2*(n.pageX-e.offsetLeft-t);e.scrollLeft=i-r})})}catch(cl){console.log("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ drag-to-scroll",cl)}try{const hl=document.querySelectorAll(".services-list__item"),ul=new WeakMap,dl=new MutationObserver(e=>{e.forEach(e=>{if("attributes"===e.type&&"class"===e.attributeName){const t=e.target,i=t.querySelector(".services-list__item-button");if(!i)return;if(t.classList.contains("open")){ul.has(i)||ul.set(i,i.textContent);const e=i.getAttribute("data-toggle-text");null!==e&&(i.textContent=e)}else ul.has(i)&&(i.textContent=ul.get(i))}})});hl.forEach(e=>{dl.observe(e,{attributes:!0,attributeFilter:["class"]})})}catch(pl){console.log("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ services-list:",pl)}try{const fl=document.querySelectorAll(".text-anim-block"),ml=new Set;fl.forEach(e=>{e.querySelectorAll(".text-anim").forEach(e=>{if(e.dataset.processed)return;const t=e.textContent.trim(),i=t.split(/\s+/);e.dataset.originalText=t,e.dataset.processed="true",e.innerHTML="",i.forEach(t=>{const i=document.createElement("span");i.className="word",i.textContent=t,e.appendChild(i)})})});const gl=()=>{ml.forEach(e=>{const t=e.getBoundingClientRect(),i=window.innerHeight||document.documentElement.clientHeight,s=window.scrollY||window.pageYOffset,n=(s+i-(s+1.3*t.top))/(2*t.height),r=Math.min(1,Math.max(0,n)),a=e.querySelectorAll(".word"),o=a.length;a.forEach((e,t)=>{const i=1/o,s=t*i;let n;n=r<=s?0:r>=(t+1)*i?1:(r-s)/i;const a=(100*n).toFixed(1);e.style.setProperty("--view-progress",`${a}%`)})}),requestAnimationFrame(gl)},yl=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting?ml.add(e.target):ml.delete(e.target)})},{threshold:[0,.01]});fl.forEach(e=>{yl.observe(e)}),requestAnimationFrame(gl)}catch(vl){console.log(vl)}class No{constructor(){this.filterState={topic:null,industry:null,expertise:null,sorting:null},this.originalTitles={},this.originalOrder=[],this.init()}init(){this.saveOriginalTitles(),this.saveOriginalOrder(),document.querySelectorAll(".js_filter").forEach(e=>{const t=e.querySelectorAll(".js_filter-options button"),i=e.querySelector(".js_filter-current span"),s=e.id;t.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),this.handleFilterClick(e,i,s)})})}),this.initResetButton()}handleFilterClick(e,t,i){const s=e.dataset.type,n=e.textContent,r=e.closest(".js_filter");this.filterState[i]=s,t.textContent=n,r.classList.contains("open")&&r.classList.remove("open"),this.applyFilters(),this.updateResetButtonState()}saveOriginalTitles(){document.querySelectorAll(".js_filter").forEach(e=>{const t=e.querySelector(".js_filter-current span"),i=e.id;t&&i&&(this.originalTitles[i]=t.textContent)})}saveOriginalOrder(){const e=document.querySelectorAll(".js_filtering-item");this.originalOrder=Array.from(e)}initResetButton(){const e=document.querySelector(".js_filter-reset");e&&e.addEventListener("click",e=>{e.preventDefault(),this.resetAllFilters()})}applyFilters(){const e=document.querySelectorAll(".js_filtering-item"),t=[];e.forEach(e=>{let i=!0;["topic","industry","expertise"].forEach(t=>{this.filterState[t]&&((e.dataset.type?e.dataset.type.split(" "):[]).includes(this.filterState[t])||(i=!1))}),i?(e.style.display="",t.push(e)):e.style.display="none"}),this.filterState.sorting&&t.length>0&&this.sortItems(t),this.updateResetButtonState()}updateResetButtonState(){const e=document.querySelector(".js_filter-reset");e&&(Object.values(this.filterState).some(e=>null!==e)?e.classList.add("active"):e.classList.remove("active"))}resetAllFilters(){Object.keys(this.filterState).forEach(e=>{this.filterState[e]=null}),Object.keys(this.originalTitles).forEach(e=>{const t=document.getElementById(e);if(t){const i=t.querySelector(".js_filter-current span");i&&(i.textContent=this.originalTitles[e])}}),this.restoreOriginalOrder(),this.updateResetButtonState()}restoreOriginalOrder(){const e=document.querySelector(".js_filtering");this.originalOrder.forEach(t=>{t.style.display="",e.appendChild(t)})}sortItems(e){const t=document.querySelector(".js_filtering"),i=this.filterState.sorting;e.sort((e,t)=>{const s=this.getItemDate(e),n=this.getItemDate(t);return"new"===i?new Date(n)-new Date(s):"old"===i?new Date(s)-new Date(n):0}),e.forEach(e=>{t.appendChild(e)})}getItemDate(e){const t=e.querySelector("time[datetime]");return t?t.getAttribute("datetime"):"1970-01-01"}}try{new No}catch(bl){console.log(bl)}try{const _l=V(".js_progressbar-container"),xl=_l.querySelector(".js_progressbar"),wl=_l.querySelectorAll(".js_progressbar-item");function Sl(){let e=0;wl.forEach(t=>{const i=t.firstElementChild;if(!i)return;const s=i.offsetWidth;s>e&&(e=s)}),xl.style.setProperty("--left-position",`${e}px`)}function kl(){const e=_l.getBoundingClientRect(),t=window.innerHeight,i=.2*t,s=e.height-.3*t,n=Math.max(0,-e.top+i),r=s,a=Math.min(1,Math.max(0,n/r));xl.style.setProperty("--progress",100*a+"%")}window.addEventListener("resize",()=>{kl(),Sl()}),window.addEventListener("load",()=>{kl(),Sl()}),window.addEventListener("scroll",()=>{kl()})}catch(Tl){console.log("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ progressbar:",Tl)}try{const El=V(".not-found__anim"),Cl=El.querySelectorAll("span"),Al=64,Ml=[0,.2,.4,.6,.8,1],Pl=[{x:-3,y:3},{x:-6,y:6},{x:-9,y:9},{x:-12,y:12},{x:-15,y:15},{x:-18,y:18}],Ll=getComputedStyle(El).getPropertyValue("--return-duration").trim()||"0.6s";Cl.forEach((e,t)=>{const i=Pl[t]||{x:0,y:0};e.style.transform=`translate(${i.x}px, ${i.y}px)`}),document.addEventListener("mousemove",e=>{const t=window.innerWidth/2,i=window.innerHeight/2,s=(e.clientX-t)/t,n=(e.clientY-i)/i;Cl.forEach((e,t)=>{const i=Ml[t]||0,r=Pl[t]||{x:0,y:0},a=s*Al*i+r.x,o=n*Al*i+r.y;e.style.transition="none",e.style.transform=`translate(${a}px, ${o}px)`})}),document.addEventListener("mouseleave",()=>{Cl.forEach((e,t)=>{const i=Pl[t]||{x:0,y:0};e.style.transition=`transform ${Ll} ease-out`,e.style.transform=`translate(${i.x}px, ${i.y}px)`})})}catch(Il){console.log("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ 404-anim:",Il)}try{document.querySelectorAll(".js_tel-mask").forEach(e=>{try{IMask(e,{mask:"+{7} (000) 000-00-00"})}catch(t){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¸Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ð¸ Ð¼Ð°ÑÐºÐ¸ Ð´Ð»Ñ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°:",e,t.message)}})}catch(Rl){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ telInput:",Rl.message,Rl.stack)}try{document.querySelectorAll(".js_select").forEach(e=>{e.addEventListener("change",function(){const e=this.parentElement;""===this.value?(N(this,"fill",!1),N(e,"fill",!1)):(N(this,"fill",!0),N(e,"fill",!0)),N(this,"focus",!1),N(e,"focus",!1)})})}catch(Ol){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ select:",Ol.message,Ol.stack)}try{document.querySelectorAll(".js_number").forEach(e=>{const t=V(".js_number-input",e),i=Number(t.getAttribute("min"))||0,s=Number(t.getAttribute("max"))||1/0,n=V(".js_number-button-minus",e),r=V(".js_number-button-plus",e);t.value||(t.value=i);const a=()=>{N(t,"fill",!0),N(t.parentElement,"fill",!0)},o=()=>{const e=Number(t.value);e>s?t.value=s:e<i&&(t.value=i)};n.addEventListener("click",()=>{a(),t.value?t.stepDown():t.value=i,o()}),r.addEventListener("click",()=>{a(),t.value?t.stepUp():t.value=i,o()}),t.addEventListener("input",()=>{a()}),t.addEventListener("blur",()=>{o()})})}catch(Fl){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ numberInput:",Fl.message,Fl.stack)}function Vo(e,t,i){return(Number(e)-Number(t))/(Number(i)-Number(t))*100}try{const Bl=document.querySelectorAll(".js_range");window.addEventListener("DOMContentLoaded",function(){Bl.forEach(e=>{const t=e.parentElement,i=V("input",e),s=i?.getAttribute("max"),n=i?.getAttribute("min"),r=V(".js_range-val",e);i.addEventListener("input",function(){N(e,"fill",!1),N(t,"fill",!1)}),i.addEventListener("change",function(){N(e,"fill",!0),N(t,"fill",!0)}),r.innerHTML=Number(s).toLocaleString(),r.parentNode.style.setProperty("--maxval-width",r.parentNode.scrollWidth+"px"),r.innerHTML=Number(i.value).toLocaleString(),i.style.setProperty("--cur-perc",Vo(i.value,n,s)+"%"),i.addEventListener("input",function(){r.innerHTML=Number(this.value).toLocaleString(),i.style.setProperty("--cur-perc",Vo(this.value,n,s)+"%")})})})}catch(Dl){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ rangeInput:",Dl.message,Dl.stack)}function zo(e,t,i,s,n,r){t.innerHTML=Number(e.value).toLocaleString(),i.style.setProperty(s,function(e,t,i){return(Number(e)-Number(t))/(Number(i)-Number(t))*100}(e.value,n,r)+"%")}function Ho(e,t,i,s,n,r,a,o){e.addEventListener("input",function(){o&&parseInt(t.value)-parseInt(e.value)<=0?e.value=parseInt(t.value)-0:!o&&parseInt(e.value)-parseInt(t.value)<=0&&(e.value=parseInt(t.value)+0),zo(e,i,s,n,r,a)})}try{document.querySelectorAll(".js_dual-range").forEach(e=>{const t=e.parentElement,i=V('.js_dual-range-input[id="dual-range-1"]',e),s=V('.js_dual-range-input[id="dual-range-2"]',e),n=V('.js_dual-range-val[for="dual-range-1"]',e),r=V('.js_dual-range-val[for="dual-range-2"]',e),a=i.getAttribute("min"),o=i.getAttribute("max"),l=i.getAttribute("step"),c=i.getAttribute("value");[i,s].forEach(i=>{i.addEventListener("input",function(){N(e,"fill",!1),N(t,"fill",!1)}),i.addEventListener("change",function(){N(e,"fill",!0),N(t,"fill",!0)})}),s.setAttribute("min",a),s.setAttribute("max",o),s.setAttribute("step",l),s.setAttribute("value",Number(c)+Number(o)/2),document.addEventListener("DOMContentLoaded",function(){n.innerHTML=Number(o).toLocaleString(),n.closest(".js_dual-range").style.setProperty("--maxval-width",n.parentNode.scrollWidth+"px"),zo(i,n,e,"--cur-perc-first",a,o),zo(s,r,e,"--cur-perc-last",a,o),Ho(i,s,n,e,"--cur-perc-first",a,o,!0),Ho(s,i,r,e,"--cur-perc-last",a,o,!1)})})}catch(jl){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ dualRangeInput:",jl.message,jl.stack)}try{document.querySelectorAll(".js_file-input").forEach(e=>{const t=e.closest(".js_file"),i=V(`[for="${e.id}"]`),s=i.textContent;e.addEventListener("change",()=>{const n=e.value;n?(i.textContent=n.split(/(\\|\/)/g).pop(),N(t,"fill",!0)):(i.textContent=s,N(t,"fill",!1))})})}catch(Nl){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð¼Ð¾Ð´ÑƒÐ»Ðµ fileInput:",Nl.message,Nl.stack)}try{document.querySelectorAll("form.form").forEach(e=>{const t=V(".form__button",e),i=t.innerHTML;document.addEventListener("fetchit:success",()=>{e.querySelectorAll(".fill").forEach(e=>N(e,"fill",!1)),N(t,"send",!0),t.innerHTML="ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾",setTimeout(()=>{N(t,"send",!1),t.innerHTML=i},3e3)})})}catch(Vl){console.error("ÐžÑˆÐ¸Ð±ÐºÐ° Ð² Ð»Ð¾Ð³Ð¸ÐºÐµ ÑÐ¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ Ð¾Ð± Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ Ñ„Ð¾Ñ€Ð¼Ñ‹:",Vl.message,Vl.stack)}function qo(e,t){const{formData:i,fetchit:s}=e.detail,n=Object.fromEntries(i.entries()),r=Iodine.assert(n,t);if(!r.valid){e.preventDefault();for(const[e,t]of Object.entries(r.fields))t.valid?s.clearError(e):s.setError(e,t.error)}}document.addEventListener("fetchit:before",e=>{Iodine.setErrorMessages({required:"ÐÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ Ð·Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾ Ð¿Ð¾Ð»Ðµ",email:"Email Ð°Ð´Ñ€ÐµÑ Ð²Ð²ÐµÐ´ÐµÐ½ Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾",minLength:"Ð˜Ð¼Ñ Ð´Ð¾Ð»Ð¶Ð½Ð¾ Ð±Ñ‹Ñ‚ÑŒ Ð´Ð»Ð¸Ð½Ð½ÐµÐµ Ð´Ð²ÑƒÑ… ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²",regexMatch:"ÐÐ¾Ð¼ÐµÑ€ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ð° Ð²Ð²ÐµÐ´ÐµÐ½ Ð½ÐµÐºÐ¾Ñ€Ñ€ÐµÐºÑ‚Ð½Ð¾"});const t={name:["required","minLength:2"],phoneRussia:["required","regexMatch:\\+7\\s\\(\\d{3}\\)\\s\\d{3}\\-\\d{2}\\-\\d{2}"],phoneCanada:["required","regexMatch:\\+1\\s\\d{3}\\-\\d{3}\\-\\d{4}"],email:["required","email"]};e.detail.form.classList.contains("js_request-form")&&qo(e,t),e.detail.form.classList.contains("js_next-form")&&qo(e,t)})})()})();